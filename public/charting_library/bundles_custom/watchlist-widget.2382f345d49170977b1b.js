(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1196,9937,8413],{470048:e=>{e.exports={wrapper:"wrapper-GZajBGIm",input:"input-GZajBGIm",box:"box-GZajBGIm",icon:"icon-GZajBGIm",noOutline:"noOutline-GZajBGIm","intent-danger":"intent-danger-GZajBGIm",check:"check-GZajBGIm",dot:"dot-GZajBGIm"}},869789:e=>{e.exports={checkbox:"checkbox-vyj6oJxw",reverse:"reverse-vyj6oJxw",label:"label-vyj6oJxw",baseline:"baseline-vyj6oJxw"}},625650:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa","loader-initial":"loader-initial-UL6iwcBa","loader-appear":"loader-appear-UL6iwcBa"}},994861:e=>{e.exports={}},989897:e=>{e.exports={}},408114:e=>{e.exports={button:"button-jpZsjw5k",withIcon:"withIcon-jpZsjw5k","a11y-text":"a11y-text-jpZsjw5k",buttonIcon:"buttonIcon-jpZsjw5k"}},517723:e=>{e.exports={footer:"footer-dwINHZFL"}},678810:e=>{e.exports={footer:"footer-kcB9V_Ib",shortcuts:"shortcuts-kcB9V_Ib",buttonGroup:"buttonGroup-kcB9V_Ib",button:"button-kcB9V_Ib",withIcon:"withIcon-kcB9V_Ib",icon:"icon-kcB9V_Ib"}},538720:e=>{e.exports={container:"container-u7Ufi_N7",leftSlot:"leftSlot-u7Ufi_N7",rightSlot:"rightSlot-u7Ufi_N7",rightSlotSeparator:"rightSlotSeparator-u7Ufi_N7"}},88148:e=>{e.exports={button:"button-g115eYH4",hover:"hover-g115eYH4",isOpened:"isOpened-g115eYH4",inner:"inner-g115eYH4"}},45195:e=>{e.exports={node:"node-lhJq7vpW"}},654145:e=>{e.exports={removeButton:"removeButton-Tf8QRdrk"}},705665:e=>{e.exports={wrap:"wrap-g71rrBCn",scrollable:"scrollable-g71rrBCn",content:"content-g71rrBCn",empty:"empty-g71rrBCn",centered:"centered-g71rrBCn",emptyIcon:"emptyIcon-g71rrBCn",separatorDragPreview:"separatorDragPreview-g71rrBCn"}},927677:e=>{e.exports={}},448306:e=>{e.exports={}},978636:e=>{e.exports={icon:"icon-BHdu7XsL",long:"long-BHdu7XsL"}},780732:e=>{e.exports={wrapper:"wrapper-bIGHJRgI",description:"description-bIGHJRgI",dot:"dot-bIGHJRgI",marketOpen:"marketOpen-bIGHJRgI",marketPre:"marketPre-bIGHJRgI",marketPost:"marketPost-bIGHJRgI",marketClose:"marketClose-bIGHJRgI",marketHoliday:"marketHoliday-bIGHJRgI"}},154576:e=>{e.exports={symbol:"symbol-RsFlttSS",small:"small-RsFlttSS",firstRow:"firstRow-RsFlttSS",selected:"selected-RsFlttSS",removeButton:"removeButton-RsFlttSS",active:"active-RsFlttSS",flag:"flag-RsFlttSS",indicators:"indicators-RsFlttSS",highlighted:"highlighted-RsFlttSS",invalid:"invalid-RsFlttSS",cell:"cell-RsFlttSS",inner:"inner-RsFlttSS",logo:"logo-RsFlttSS",symbolName:"symbolName-RsFlttSS",sfWarningIcon:"sfWarningIcon-RsFlttSS",notes:"notes-RsFlttSS",positions:"positions-RsFlttSS",symbolNameText:"symbolNameText-RsFlttSS",last:"last-RsFlttSS",change:"change-RsFlttSS",changeInPercents:"changeInPercents-RsFlttSS",volume:"volume-RsFlttSS",prePostMarket:"prePostMarket-RsFlttSS",prePostMarketNoPrice:"prePostMarketNoPrice-RsFlttSS",hidden:"hidden-RsFlttSS",plus:"plus-RsFlttSS",
minus:"minus-RsFlttSS",firstItem:"firstItem-RsFlttSS",lastItem:"lastItem-RsFlttSS",flexCell:"flexCell-RsFlttSS",highlightUp:"highlightUp-RsFlttSS",highlightDown:"highlightDown-RsFlttSS",overlayEnd:"overlayEnd-RsFlttSS",touch:"touch-RsFlttSS"}},899840:e=>{e.exports={wrap:"wrap-evmjQ0gK",columnsMenu:"columnsMenu-evmjQ0gK",checkbox:"checkbox-evmjQ0gK",hovered:"hovered-evmjQ0gK",mobile:"mobile-evmjQ0gK"}},931040:e=>{e.exports={columnHeader:"columnHeader-k67yvGbk",small:"small-k67yvGbk",label:"label-k67yvGbk",sortable:"sortable-k67yvGbk",sortActivated:"sortActivated-k67yvGbk",flagSortable:"flagSortable-k67yvGbk",flagWrap:"flagWrap-k67yvGbk",sortArrow:"sortArrow-k67yvGbk",visible:"visible-k67yvGbk",desc:"desc-k67yvGbk"}},907052:e=>{e.exports={placeholder:"placeholder-qp5yBxtk",wrap:"wrap-qp5yBxtk",handle:"handle-qp5yBxtk",active:"active-qp5yBxtk",separator:"separator-qp5yBxtk"}},42141:e=>{e.exports={wrap:"wrap-Nz1M1_XP",menu:"menu-Nz1M1_XP",tableHeader:"tableHeader-Nz1M1_XP",columnHeader:"columnHeader-Nz1M1_XP",readonly:"readonly-Nz1M1_XP",symbolName:"symbolName-Nz1M1_XP",last:"last-Nz1M1_XP",change:"change-Nz1M1_XP",changeInPercents:"changeInPercents-Nz1M1_XP",volume:"volume-Nz1M1_XP",prePostMarket:"prePostMarket-Nz1M1_XP",prePostMarketNoPrice:"prePostMarketNoPrice-Nz1M1_XP",label:"label-Nz1M1_XP",firstItem:"firstItem-Nz1M1_XP",lastItem:"lastItem-Nz1M1_XP",reset:"reset-Nz1M1_XP"}},173394:e=>{e.exports={item:"item-mcATxxXd"}},660662:e=>{e.exports={item:"item-E2qCgOMz",withIcon:"withIcon-E2qCgOMz"}},684200:e=>{e.exports={container:"container-mQBvegEO",hidden:"hidden-mQBvegEO",watchlistMenu:"watchlistMenu-mQBvegEO",title:"title-mQBvegEO",titleRow:"titleRow-mQBvegEO",flag:"flag-mQBvegEO",headerButton:"headerButton-mQBvegEO",disabled:"disabled-mQBvegEO",mobileMenu:"mobileMenu-mQBvegEO",buttonWrap:"buttonWrap-mQBvegEO",menuWrap:"menuWrap-mQBvegEO",columnsTitle:"columnsTitle-mQBvegEO",small:"small-mQBvegEO",copyLink:"copyLink-mQBvegEO",loaderWrapper:"loaderWrapper-mQBvegEO",loader:"loader-mQBvegEO",switcherMobileLabel:"switcherMobileLabel-mQBvegEO",widgetbarWidgetHeaderLeftSlot:"widgetbarWidgetHeaderLeftSlot-mQBvegEO",widgetbarWidgetHeaderRightSlot:"widgetbarWidgetHeaderRightSlot-mQBvegEO"}},350464:e=>{e.exports={toolbox:"toolbox-MeieydGw"}},119271:e=>{e.exports={toolbox:"toolbox-iUEJczsW"}},359705:e=>{e.exports={item:"item-Pho75f2H",active:"active-Pho75f2H",toolboxCount:"toolboxCount-Pho75f2H",count:"count-Pho75f2H",countVisible:"countVisible-Pho75f2H",title:"title-Pho75f2H",flag:"flag-Pho75f2H",small:"small-Pho75f2H",removeButton:"removeButton-Pho75f2H",toolboxItem:"toolboxItem-Pho75f2H",touch:"touch-Pho75f2H"}},966076:e=>{e.exports={"default-drawer-min-top-distance":"100px",wrap:"wrap-_HnK0UIN",positionBottom:"positionBottom-_HnK0UIN",backdrop:"backdrop-_HnK0UIN",drawer:"drawer-_HnK0UIN",positionLeft:"positionLeft-_HnK0UIN"}},540191:e=>{e.exports={menuWrap:"menuWrap-Kq3ruQo8",isMeasuring:"isMeasuring-Kq3ruQo8",scrollWrap:"scrollWrap-Kq3ruQo8",momentumBased:"momentumBased-Kq3ruQo8",menuBox:"menuBox-Kq3ruQo8",
isHidden:"isHidden-Kq3ruQo8"}},671986:e=>{e.exports={"tablet-small-breakpoint":"screen and (max-width: 430px)",item:"item-jFqVJoPk",hovered:"hovered-jFqVJoPk",isDisabled:"isDisabled-jFqVJoPk",isActive:"isActive-jFqVJoPk",shortcut:"shortcut-jFqVJoPk",toolbox:"toolbox-jFqVJoPk",withIcon:"withIcon-jFqVJoPk","round-icon":"round-icon-jFqVJoPk",icon:"icon-jFqVJoPk",labelRow:"labelRow-jFqVJoPk",label:"label-jFqVJoPk",showOnHover:"showOnHover-jFqVJoPk",showOnFocus:"showOnFocus-jFqVJoPk"}},92910:e=>{e.exports={separator:"separator-QjUlCDId",small:"small-QjUlCDId",normal:"normal-QjUlCDId",large:"large-QjUlCDId"}},927306:e=>{e.exports={button:"button-iLKiGOdQ",hovered:"hovered-iLKiGOdQ",disabled:"disabled-iLKiGOdQ",active:"active-iLKiGOdQ",hidden:"hidden-iLKiGOdQ"}},452671:e=>{e.exports={renameInput:"renameInput-sZgG7O9F"}},934587:e=>{e.exports={icon:"icon-WB2y0EnP",dropped:"dropped-WB2y0EnP"}},408323:(e,t,n)=>{"use strict";n.d(t,{CheckboxInput:()=>u});var s=n(50959),o=n(497754),i=n(800417),r=n(72571),l=n(465890),a=n(470048),c=n.n(a);function u(e){const t=o(c().box,c()[`intent-${e.intent}`],{[c().check]:!Boolean(e.indeterminate),[c().dot]:Boolean(e.indeterminate),[c().noOutline]:-1===e.tabIndex}),n=o(c().wrapper,e.className);return s.createElement("span",{className:n,title:e.title,style:e.style},s.createElement("input",{id:e.id,tabIndex:e.tabIndex,className:c().input,type:"checkbox",name:e.name,checked:e.checked,disabled:e.disabled,value:e.value,autoFocus:e.autoFocus,role:e.role,onChange:function(){e.onChange&&e.onChange(e.value)},ref:e.reference,"aria-required":e["aria-required"],"aria-describedby":e["aria-describedby"],"aria-invalid":e["aria-invalid"],...(0,i.filterDataProps)(e)}),s.createElement("span",{className:t},s.createElement(r.Icon,{icon:l,className:c().icon})))}},302946:(e,t,n)=>{"use strict";n.d(t,{Checkbox:()=>c});var s=n(50959),o=n(497754),i=n(230789),r=n(408323),l=n(869789),a=n.n(l);class c extends s.PureComponent{render(){const{inputClassName:e,labelClassName:t,...n}=this.props,i=o(this.props.className,a().checkbox,{[a().reverse]:Boolean(this.props.labelPositionReverse),[a().baseline]:Boolean(this.props.labelAlignBaseline)}),l=o(a().label,t,{[a().disabled]:this.props.disabled});let c=null;return this.props.label&&(c=s.createElement("span",{className:l,title:this.props.title},this.props.label)),s.createElement("label",{className:i},s.createElement(r.CheckboxInput,{...n,className:e}),c)}}c.defaultProps={value:"on"};(0,i.makeSwitchGroupItem)(c)},718736:(e,t,n)=>{"use strict";n.d(t,{useFunctionalRefObject:()=>i});var s=n(50959),o=n(855393);function i(e){const t=(0,s.useMemo)((()=>function(e){const t=n=>{e(n),t.current=n};return t.current=null,t}((e=>{l.current(e)}))),[]),n=(0,s.useRef)(null),i=t=>{if(null===t)return r(n.current,t),void(n.current=null);n.current!==e&&(n.current=e,r(n.current,t))},l=(0,s.useRef)(i);return l.current=i,(0,o.useIsomorphicLayoutEffect)((()=>{if(null!==t.current)return l.current(t.current),()=>l.current(null)}),[e]),t}function r(e,t){null!==e&&("function"==typeof e?e(t):e.current=t)}},
855393:(e,t,n)=>{"use strict";n.d(t,{useIsomorphicLayoutEffect:()=>o});var s=n(50959);function o(e,t){("undefined"==typeof window?s.useEffect:s.useLayoutEffect)(e,t)}},778199:(e,t,n)=>{"use strict";function s(e,t,n,s,o){function i(o){if(e>o.timeStamp)return;const i=o.target;void 0!==n&&null!==t&&null!==i&&i.ownerDocument===s&&(t.contains(i)||n(o))}return o.click&&s.addEventListener("click",i,!1),o.mouseDown&&s.addEventListener("mousedown",i,!1),o.touchEnd&&s.addEventListener("touchend",i,!1),o.touchStart&&s.addEventListener("touchstart",i,!1),()=>{s.removeEventListener("click",i,!1),s.removeEventListener("mousedown",i,!1),s.removeEventListener("touchend",i,!1),s.removeEventListener("touchstart",i,!1)}}n.d(t,{addOutsideEventListener:()=>s})},908783:(e,t,n)=>{"use strict";n.d(t,{useOutsideEvent:()=>i});var s=n(50959),o=n(778199);function i(e){const{click:t,mouseDown:n,touchEnd:i,touchStart:r,handler:l,reference:a,ownerDocument:c=document}=e,u=(0,s.useRef)(null),d=(0,s.useRef)(new CustomEvent("timestamp").timeStamp);return(0,s.useLayoutEffect)((()=>{const e={click:t,mouseDown:n,touchEnd:i,touchStart:r},s=a?a.current:u.current;return(0,o.addOutsideEventListener)(d.current,s,l,c,e)}),[t,n,i,r,l]),a||u}},664332:(e,t,n)=>{"use strict";n.d(t,{useResizeObserver:()=>l});var s=n(50959),o=n(159255),i=n(855393),r=n(718736);function l(e,t=[]){const{callback:n,ref:l=null}=function(e){return"function"==typeof e?{callback:e}:e}(e),a=(0,s.useRef)(null),c=(0,s.useRef)(n);c.current=n;const u=(0,r.useFunctionalRefObject)(l),d=(0,s.useCallback)((e=>{u(e),null!==a.current&&(a.current.disconnect(),null!==e&&a.current.observe(e))}),[u,a]);return(0,i.useIsomorphicLayoutEffect)((()=>(a.current=new o.default(((e,t)=>{c.current(e,t)})),u.current&&d(u.current),()=>{var e;null===(e=a.current)||void 0===e||e.disconnect()})),[u,...t]),d}},72571:(e,t,n)=>{"use strict";n.d(t,{Icon:()=>o});var s=n(50959);const o=s.forwardRef(((e,t)=>{const{icon:n="",...o}=e;return s.createElement("span",{...o,ref:t,dangerouslySetInnerHTML:{__html:n}})}))},234404:(e,t,n)=>{"use strict";n.d(t,{Loader:()=>c});var s,o=n(50959),i=n(497754),r=n(549423),l=n(625650),a=n.n(l);!function(e){e[e.Initial=0]="Initial",e[e.Appear=1]="Appear",e[e.Active=2]="Active"}(s||(s={}));class c extends o.PureComponent{constructor(e){super(e),this._stateChangeTimeout=null,this.state={state:s.Initial}}render(){const{className:e,color:t="black",size:n="medium",staticPosition:s}=this.props,r=i(a().item,a()[t],a()[n]);return o.createElement("span",{className:i(a().loader,s&&a().static,this._getStateClass(),e)},o.createElement("span",{className:r}),o.createElement("span",{className:r}),o.createElement("span",{className:r}))}componentDidMount(){this.setState({state:s.Appear}),this._stateChangeTimeout=setTimeout((()=>{this.setState({state:s.Active})}),2*r.dur)}componentWillUnmount(){this._stateChangeTimeout&&(clearTimeout(this._stateChangeTimeout),this._stateChangeTimeout=null)}_getStateClass(){switch(this.state.state){case s.Initial:return a()["loader-initial"];case s.Appear:
return a()["loader-appear"];default:return""}}}},823030:(e,t,n)=>{"use strict";n.d(t,{SubmenuContext:()=>o,SubmenuHandler:()=>i});var s=n(50959);const o=s.createContext(null);function i(e){const[t,n]=(0,s.useState)(null),i=(0,s.useRef)(null),r=(0,s.useRef)(new Map);return(0,s.useEffect)((()=>()=>{null!==i.current&&clearTimeout(i.current)}),[]),s.createElement(o.Provider,{value:{current:t,setCurrent:function(e){null!==i.current&&(clearTimeout(i.current),i.current=null);null===t?n(e):i.current=setTimeout((()=>{i.current=null,n(e)}),100)},registerSubmenu:function(e,t){return r.current.set(e,t),()=>{r.current.delete(e)}},isSubmenuNode:function(e){return Array.from(r.current.values()).some((t=>t(e)))}}},e.children)}},230789:(e,t,n)=>{"use strict";n.d(t,{SwitchGroup:()=>r,makeSwitchGroupItem:()=>l});var s=n(50959),o=n(174786);const i=(0,s.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>o.default,subscribe:o.default,unsubscribe:o.default});class r extends s.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return s.createElement(i.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((n=>t.includes(n)?!e.includes(n):e.includes(n)))}}function l(e){var t;return t=class extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return s.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=i,t}},800417:(e,t,n)=>{"use strict";function s(e){return i(e,r)}function o(e){return i(e,l)}function i(e,t){const n=Object.entries(e).filter(t),s={};for(const[e,t]of n)s[e]=t;return s}function r(e){const[t,n]=e;return 0===t.indexOf("data-")&&"string"==typeof n}function l(e){return 0===e[0].indexOf("aria-")}n.d(t,{filterAriaProps:()=>o,filterDataProps:()=>s,filterProps:()=>i,isAriaAttribute:()=>l,isDataAttribute:()=>r})},65160:(e,t,n)=>{"use strict";function s(e){const{paddingTop:t,paddingBottom:n}=window.getComputedStyle(e);return[t,n].reduce(((e,t)=>e-Number((t||"").replace("px",""))),e.clientHeight)}function o(e,t=!1){const n=getComputedStyle(e),s=[n.height]
;return"border-box"!==n.boxSizing&&s.push(n.paddingTop,n.paddingBottom,n.borderTopWidth,n.borderBottomWidth),t&&s.push(n.marginTop,n.marginBottom),s.reduce(((e,t)=>e+(parseFloat(t)||0)),0)}function i(e,t=!1){const n=getComputedStyle(e),s=[n.width];return"border-box"!==n.boxSizing&&s.push(n.paddingLeft,n.paddingRight,n.borderLeftWidth,n.borderRightWidth),t&&s.push(n.marginLeft,n.marginRight),s.reduce(((e,t)=>e+(parseFloat(t)||0)),0)}n.d(t,{contentHeight:()=>s,outerHeight:()=>o,outerWidth:()=>i})},111706:(e,t,n)=>{"use strict";function s(e){return 0===e.detail}n.d(t,{isKeyboardClick:()=>s})},273388:(e,t,n)=>{"use strict";function s(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function o(e){return s([e])}n.d(t,{isomorphicRef:()=>o,mergeRefs:()=>s})},801808:(e,t,n)=>{"use strict";n.d(t,{OverlapManager:()=>i,getRootOverlapManager:()=>l});var s=n(650151);class o{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter((t=>e!==t))}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class i{constructor(e=document){this._storage=new o,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,n),this._container=n}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);const s=this._document.createElement("div");if(s.style.position=t.position,s.style.zIndex=this._index.toString(),s.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length;if(t.index>=e)this._container.appendChild(s);else if(t.index<=0)this._container.insertBefore(s,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(s,e)}}else"reverse"===t.direction?this._container.insertBefore(s,this._container.firstChild):this._container.appendChild(s);return this._windows.set(e,s),++this._index,s}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveToTop(e){if(this.getZindex(e)!==this._index){this.ensureWindow(e).style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const r=new WeakMap;function l(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return(0,s.ensureDefined)(r.get(t));{const t=new i(e),n=function(e){const t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t}(e);return r.set(n,t),t.setContainer(n),e.body.appendChild(n),t}}},269842:(e,t,n)=>{"use strict";function s(...e){
return t=>{for(const n of e)void 0!==n&&n(t)}}n.d(t,{createSafeMulticastEventHandler:()=>s})},609970:(e,t,n)=>{"use strict";n.d(t,{AbstractIndicator:()=>l});var s=n(6835),o=n(189904),i=n(382563);n(744471);const r=(0,s.getLogger)("GUI.Blocks.AbstractIndicator");class l{constructor(e){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._lastTooltipText="",this._quoteSession=e.quoteSession}getValue(){return this._value}getTooltipText(){return this._labelMap[this._value]||""}getLabel(){return this._labelMap[this._value]||""}getElement(){return this._el}update(e,t){this._updateValue(e,t),this._render()}setTooltipEnabled(e=!1){this._showTooltip!==e&&(this._showTooltip=e,this._renderTooltip())}enableShortMode(){!0!==this._shortMode&&(this._shortMode=!0,this._render())}disableShortMode(){!1!==this._shortMode&&(this._shortMode=!1,this._render())}isShortModeEnabled(){return this._shortMode}start(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=(0,i.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)}stop(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)}_init(e){this._el=e.el?e.el:document.createElement("span"),this._el.innerHTML="",this._classMap=e.classMap,this._labelMap=e.labelMap,this._showTooltip=e.showTooltip,this._classSuffix=e.classSuffix,this._symbolName=e.symbol,e.tooltipType&&(this._tooltipType=e.tooltipType),this._quoteSessionGUID=(0,o.guid)(),!0===e.short&&this.enableShortMode(),e.data&&this._updateValue(e.data)}_clearClasses(){Object.values(this._classMap).map((e=>{this._el.classList.remove(`${e}`),this._el.classList.remove(`${e}${this._classSuffix}`)}))}_render(){this._renderClasses(),this._renderTooltip(),this._renderLabel()}_renderLabel(){this._el.textContent=this.getLabel()}_updateValue(e,t){const n=this._getValueFromData(e);(t||n!==this._value)&&(this._value=n)}_renderClasses(){const e=this._el.classList;e.add(this._componentClass,this._componentClass+this._classSuffix);const t=this._classMap[this._value];for(const n in this._classMap){const s=this._classMap[n];s&&(s===t?e.add(s,s+this._classSuffix):e.remove(s,s+this._classSuffix))}!t&&this._value&&r.logWarn(`no className for status ${this._value}`)}_renderTooltip(){const e=this._showTooltip?this.getTooltipText():"";e!==this._lastTooltipText&&(this._lastTooltipText=e,this._el.setAttribute("title",e),"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip))}_getQuoteSessionId(){return`${this._quoteSessionPrefix}.${this._quoteSessionGUID}`}}},678100:(e,t,n)=>{"use strict";n.d(t,{DataModeIndicator:()=>a});var s=n(509806),o=(n(336379),n(994861),n(609970));const i={connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",
endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"};function r(){return{connecting:s.t(null,{context:"data_mode_connecting_letter"},n(52587)),delayed:s.t(null,{context:"data_mode_delayed_letter"},n(469219)),delayed_streaming:s.t(null,{context:"data_mode_delayed_streaming_letter"},n(426211)),endofday:s.t(null,{context:"data_mode_end_of_day_letter"},n(960582)),forbidden:s.t(null,{context:"data_mode_forbidden_letter"},n(957357)),realtime:s.t(null,{context:"data_mode_realtime_letter"},n(647310)),snapshot:s.t(null,{context:"data_mode_snapshot_letter"},n(87817)),loading:"",replay:s.t(null,{context:"data_mode_replay_letter"},n(214485))}}const l={streaming:"realtime"};class a extends o.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="data-mode-indicator",this._componentClass="tv-data-mode",this._init(e)}getLabel(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":super.getLabel()}setMode(e,t){this.update({values:{update_mode:e,update_mode_seconds:t}})}hide(){this._el.classList.add("i-hidden")}show(){this._el.classList.remove("i-hidden")}getTooltipText(){let e="";const t=this.getValue();if(""===t)return e;switch(t){case"delayed":e=s.t(null,void 0,n(728332));break;case"delayed_streaming":e=s.t(null,void 0,n(887267));break;default:e=this._labelMap[t]||e}return["delayed","delayed_streaming"].includes(t)&&(e=e.format({number:String(Math.round(this._modeInterval/60))})),e}_init(e={}){const t=Object.assign({},{classMap:i,classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:{connecting:s.t(null,void 0,n(413859)),delayed:s.t(null,void 0,n(78211)),delayed_streaming:s.t(null,void 0,n(78211)),endofday:s.t(null,void 0,n(132023)),forbidden:s.t(null,void 0,n(113439)),realtime:s.t(null,void 0,n(906530)),snapshot:s.t(null,void 0,n(502927)),loading:"",replay:s.t(null,void 0,n(688506))},modeInterval:600,short:!1,shortLabelMap:r(),showTooltip:!0,tooltipType:"custom"},e);this._modeInterval=t.modeInterval||600,this._shortLabelMap=t.shortLabelMap||r(),super._init(t),this._render()}_getValueFromData(e){let t;return t=void 0!==e.values&&void 0!==e.values.update_mode?e.values.update_mode:this.getValue(),l[t]||t}_updateValue(e,t){void 0!==e.values&&void 0!==e.values.update_mode_seconds&&(this._modeInterval=e.values.update_mode_seconds),super._updateValue(e,t)}}},496818:(e,t,n)=>{"use strict";n.d(t,{Draggable:()=>l,PointerBackend:()=>a});var s=n(650151),o=n(821205),i=n(601227),r=n(972535);class l{constructor(e){var t,n;this._helper=null,this._handleDragStart=e=>{var t;if(null!==this._helper)return;const n=this._source;n.classList.add("ui-draggable-dragging");const[s,i]=[(0,o.outerWidth)(n),(0,o.outerHeight)(n)];this._helper={startTop:parseFloat(n.style.top)||0,startLeft:parseFloat(n.style.left)||0,nextTop:null,nextLeft:null,raf:null,size:[s,i],
containment:this._containment instanceof HTMLElement?[parseInt(getComputedStyle(this._containment).borderLeftWidth)+parseInt(getComputedStyle(this._containment).paddingLeft),parseInt(getComputedStyle(this._containment).borderTopWidth)+parseInt(getComputedStyle(this._containment).paddingTop),this._containment.offsetWidth-parseInt(getComputedStyle(this._containment).borderRightWidth)-parseInt(getComputedStyle(this._containment).paddingRight)-parseInt(getComputedStyle(n).marginLeft)-parseInt(getComputedStyle(n).marginRight)-s,this._containment.offsetHeight-parseInt(getComputedStyle(this._containment).borderBottomWidth)-parseInt(getComputedStyle(this._containment).paddingBottom)-parseInt(getComputedStyle(n).marginTop)-parseInt(getComputedStyle(n).marginBottom)-i]:"window"===this._containment?[window.scrollX,window.scrollY,window.scrollX+document.documentElement.offsetWidth-s,window.scrollY+document.documentElement.offsetHeight-i]:null},null===(t=this._start)||void 0===t||t.call(this)},this._handleDragMove=e=>{var t;if(null===this._helper)return;const{current:n,initial:s}=e.detail,o=this._source,i=this._helper.nextTop,r=this._helper.nextLeft,l="y"===this._axis||!1===this._axis||0!==n.movementY;if(l){const e=this._helper.startTop;isFinite(e)&&(this._helper.nextTop=n.clientY-s.clientY+e)}const a="x"===this._axis||!1===this._axis||0!==n.movementY;if(a){const e=this._helper.startLeft;isFinite(e)&&(this._helper.nextLeft=n.clientX-s.clientX+e)}if(null!==this._helper.containment){const[e,t,n,s]=this._helper.containment;l&&this._helper.nextTop&&(this._helper.nextTop=Math.min(this._helper.nextTop,s),this._helper.nextTop=Math.max(this._helper.nextTop,t)),a&&this._helper.nextLeft&&(this._helper.nextLeft=Math.min(this._helper.nextLeft,n),this._helper.nextLeft=Math.max(this._helper.nextLeft,e))}null!==this._helper.raf||i===this._helper.nextTop&&r===this._helper.nextLeft||(this._helper.raf=requestAnimationFrame((()=>{null!==this._helper&&(null!==this._helper.nextTop&&(o.style.top=this._helper.nextTop+"px",this._helper.nextTop=null),null!==this._helper.nextLeft&&(o.style.left=this._helper.nextLeft+"px",this._helper.nextLeft=null),this._helper.raf=null)}))),null===(t=this._drag)||void 0===t||t.call(this)},this._handleDragStop=e=>{var t;if(null===this._helper)return;this._source.classList.remove("ui-draggable-dragging"),this._helper=null,null===(t=this._stop)||void 0===t||t.call(this)};const s=this._source=e.source;s.classList.add("ui-draggable");const i=this._handle=null!==(t=e.handle?s.querySelector(e.handle):null)&&void 0!==t?t:s;i.classList.add("ui-draggable-handle"),this._start=e.start,this._stop=e.stop,this._drag=e.drag,this._backend=new a({handle:i,onDragStart:this._handleDragStart,onDragMove:this._handleDragMove,onDragStop:this._handleDragStop}),this._axis=null!==(n=e.axis)&&void 0!==n&&n,this._containment=e.containment}destroy(){const e=this._source;e.classList.remove("ui-draggable"),e.classList.remove("ui-draggable-dragging");this._handle.classList.remove("ui-draggable-handle"),this._backend.destroy(),
null!==this._helper&&(this._helper.raf&&cancelAnimationFrame(this._helper.raf),this._helper=null)}}class a{constructor(e){this._initial=null,this._handlePointerDown=e=>{if(null!==this._initial)return;if(!(e.target instanceof Element&&this._handle.contains(e.target)))return;if(this._initial=e,!this._dispatchEvent(this._createEvent("pointer-drag-start",e)))return void(this._initial=null);e.preventDefault();const t=this._getEventTarget();t.addEventListener("pointermove",this._handlePointerMove),t.addEventListener("pointerup",this._handlePointerUp),t.addEventListener("pointercancel",this._handlePointerUp),t.addEventListener("lostpointercapture",this._handlePointerUp),t.setPointerCapture(e.pointerId)},this._handlePointerMove=e=>{null!==this._initial&&this._initial.pointerId===e.pointerId&&(e.preventDefault(),this._dispatchEvent(this._createEvent("pointer-drag-move",e)))},this._handlePointerUp=e=>{if(null===this._initial||this._initial.pointerId!==e.pointerId)return;e.preventDefault();const t=this._getEventTarget();t.removeEventListener("pointermove",this._handlePointerMove),t.removeEventListener("pointerup",this._handlePointerUp),t.removeEventListener("pointercancel",this._handlePointerUp),t.removeEventListener("lostpointercapture",this._handlePointerUp),t.releasePointerCapture(this._initial.pointerId),this._dispatchEvent(this._createEvent("pointer-drag-stop",e)),this._initial=null};const t=this._handle=e.handle;this._onDragStart=e.onDragStart,this._onDragMove=e.onDragMove,this._onDragStop=e.onDragStop,t.style.touchAction="none";this._getEventTarget().addEventListener("pointerdown",this._handlePointerDown)}destroy(){this._handle.style.touchAction="";const e=this._getEventTarget();e.removeEventListener("pointerdown",this._handlePointerDown),e.removeEventListener("pointermove",this._handlePointerMove),e.removeEventListener("pointerup",this._handlePointerUp),e.removeEventListener("pointercancel",this._handlePointerUp),e.removeEventListener("lostpointercapture",this._handlePointerUp),null!==this._initial&&(e.releasePointerCapture(this._initial.pointerId),this._initial=null)}_getEventTarget(){return i.CheckMobile.iOS()||(0,i.isMac)()&&r.touch?window.document.documentElement:this._handle}_dispatchEvent(e){switch(e.type){case"pointer-drag-start":this._onDragStart(e);break;case"pointer-drag-move":this._onDragMove(e);break;case"pointer-drag-stop":this._onDragStop(e)}return!e.defaultPrevented}_createEvent(e,t){return(0,s.assert)(null!==this._initial),new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{backend:this,initial:this._initial,current:t}})}}},670086:(e,t,n)=>{"use strict";n.d(t,{FragmentMap:()=>o});var s=n(50959);function o(e){if(e.map){return s.Children.toArray(e.children).map(e.map)}return e.children}},285089:(e,t,n)=>{"use strict";n.d(t,{setFixedBodyState:()=>a});var s=n(735922);const o=()=>!window.matchMedia("screen and (min-width: 768px)").matches,i=()=>!window.matchMedia("screen and (min-width: 1280px)").matches;let r=0,l=!1;function a(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++r){
const e=(0,s.getCSSProperty)(t,"overflow"),o=(0,s.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,s.setStyle)(n,"right",`${(0,s.getScrollbarWidth)()}px`),t.style.paddingRight=`${o+(0,s.getScrollbarWidth)()}px`,l=!0),t.classList.add("i-no-scroll")}else if(!e&&r>0&&0==--r&&(t.classList.remove("i-no-scroll"),l)){(0,s.setStyle)(n,"right","0px");let e=0;e=n?(a=(0,s.getContentWidth)(n),o()?0:i()?46:Math.min(Math.max(a,46),450)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,s.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",l=!1}var a}},821205:(e,t,n)=>{"use strict";n.d(t,{contentHeight:()=>o.contentHeight,html:()=>i,outerHeight:()=>o.outerHeight,outerWidth:()=>o.outerWidth,position:()=>l});var s=n(650151),o=n(65160);function i(e,t){return void 0===t||(null===t&&(e.innerHTML=""),"string"!=typeof t&&"number"!=typeof t||(e.innerHTML=String(t))),e}function r(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),n=(0,s.ensureNotNull)(e.ownerDocument.defaultView);return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}function l(e){const t=getComputedStyle(e);let n,s={top:0,left:0};if("fixed"===t.position)n=e.getBoundingClientRect();else{n=r(e);const t=e.ownerDocument;let o=e.offsetParent||t.documentElement;for(;o&&(o===t.body||o===t.documentElement)&&"static"===getComputedStyle(o).position;)o=o.parentElement;o&&o!==e&&1===o.nodeType&&(s=r(o),s.top+=parseFloat(getComputedStyle(o).borderTopWidth),s.left+=parseFloat(getComputedStyle(o).borderLeftWidth))}return{top:n.top-s.top-parseFloat(t.marginTop),left:n.left-s.left-parseFloat(t.marginLeft)}}},190410:(e,t,n)=>{"use strict";n.d(t,{DialogHeaderContext:()=>s});const s=n(50959).createContext({setHideClose:()=>{}})},366171:(e,t,n)=>{"use strict";n.d(t,{SymbolSearchDialogFooter:()=>l});var s=n(50959),o=n(497754),i=n.n(o),r=n(517723);function l(e){const{className:t,children:n}=e;return s.createElement("div",{className:i()(r.footer,t)},n)}},912015:(e,t,n)=>{"use strict";n.d(t,{isPlatformMobile:()=>o});var s=n(69111);n(156963),n(601227);function o(){return!(0,s.isOnMobileAppPage)("any")&&(window.matchMedia("(min-width: 602px) and (min-height: 445px)").matches,!1)}},856105:(e,t,n)=>{"use strict";n.d(t,{showWatchlistSearchDialog:()=>A});var s=n(50959),o=n(650151),i=n(509806),r=n(972535),l=n(386942),a=n(113060);function c(e){const{targetSymbol:t,store:n,children:o,handleTargetSymbolRemoved:i}=e,[r,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(t),[m,p]=(0,s.useState)(null),g=(0,s.useRef)(null),f=(0,s.useMemo)((()=>({selectedAction:r,setSelectedAction:e=>c(e),isSpreadOrMultipleMode:u,addAfter:d,clearTargetSymbol:v,highlighted:m,highlight:_})),[r,c,d,m,p]);return(0,s.useEffect)((()=>()=>{null!==g.current&&clearTimeout(g.current)}),[]),s.createElement(l.Provider,{store:n},s.createElement(a.SymbolSearchWatchlistContext.Provider,{value:f},o));function v(){h(void 0),i()}function _(e){p(e),null!==g.current&&clearTimeout(g.current),g.current=setTimeout((()=>p(null)),500)}}function u(e,t){
const n=!!t.current&&t.current.value.includes(",");return e||n}function d(e,t,n){return o=>s.createElement(c,{...o,store:e,targetSymbol:n,handleTargetSymbolRemoved:t})}var h=n(743717),m=n(691622),p=n(601373),g=n(979359),f=n(607898);function v(e,t){const n=(0,p.getCurrentViewableListByWidgetId)(e,g.WATCHLIST_WIDGET_ID),{fullSymbolName:s}=t;return null===n||void 0===s?{}:{existInWatchlist:n.symbols.includes(s)}}function _(e){return(0,m.bindActionCreators)({addToWatchlist:f.addSymbolsThunk,removeFromWatchlist:f.removeSymbolsThunk,findInWatchlist:f.findInWatchlistThunk},e)}function b(e){return(0,m.bindActionCreators)({addToWatchlist:f.addSymbolsThunk,removeFromWatchlist:f.removeSymbolsThunk,findInWatchlist:f.findInWatchlistThunk},e)}var y=n(688324),S=n(497754),w=n.n(S),x=n(944080),E=n(180185),C=n(366171),k=n(72571),T=n(408114);function M(e){const{icon:t,title:n,className:o,iconClassName:i,a11yLabel:r}=e,l=Boolean(t);return s.createElement("kbd",{className:S(T.button,l&&T.withIcon,o)},l?s.createElement(s.Fragment,null,s.createElement(k.Icon,{"aria-hidden":!0,className:S(T.buttonIcon,i),icon:t}),s.createElement("span",{className:T["a11y-text"]},n)):r?s.createElement(s.Fragment,null,s.createElement("span",{"aria-hidden":!0},n),s.createElement("span",{className:T["a11y-text"]},r)):n)}var I=n(72952),N=n(678810);function L(e){const{searchRef:t,searchSpreads:r}=(0,o.ensureNotNull)((0,s.useContext)(x.SymbolSearchItemsDialogContext)),{isSpreadOrMultipleMode:l}=(0,o.ensureNotNull)((0,s.useContext)(a.SymbolSearchWatchlistContext)),c=l(r,t);return s.createElement(C.SymbolSearchDialogFooter,{className:N.footer},s.createElement("div",{className:N.shortcuts},c?s.createElement("div",{className:N.buttonGroup},s.createElement(M,{title:"Enter",className:N.button})):s.createElement(s.Fragment,null,s.createElement("div",{className:N.buttonGroup},u(),"+",s.createElement(M,{title:i.t(null,void 0,n(613750)),className:N.button})),i.t(null,void 0,n(96921)),s.createElement("div",{className:N.buttonGroup},u(),"+",s.createElement(M,{title:"Enter",className:N.button})))),s.createElement("div",{className:N.text},i.t(null,void 0,n(291635))));function u(){return E.isMacKeyboard?s.createElement(M,{title:"Shift",icon:I,className:w()(N.button,N.withIcon),iconClassName:N.icon}):s.createElement(M,{title:"Shift",className:N.button})}}n(912015);let D=null;function A(e){const{fullscreen:t,onSearchComplete:a,targetSymbol:c}=e;let u=!1;const m={dialogTitle:i.t(null,void 0,n(57590)),fullscreen:t,onSearchComplete:e=>u?a(e):a(e,c)},p=()=>u=!0;(0,h.initSymbolListService)().then((e=>{const t=D=(0,y.loadNewSymbolSearch)().then((a=>{if(t!==D)return;const{showSymbolSearchItemsDialog:u,Components:h}=a;var g,f;u({...m,wrapper:d(e.store,p,c),dialog:(f=(0,o.ensureNotNull)(h.SymbolSearchWatchlistDialog),(0,l.connect)(null,b)(f)),contentItem:(g=(0,o.ensureNotNull)(h.SymbolSearchWatchlistDialogContentItem),(0,l.connect)(v,_)(g)),placeholder:i.t(null,void 0,n(252298)),footer:r.mobiletouch?void 0:s.createElement(L)})}))}))}},944080:(e,t,n)=>{"use strict";n.d(t,{
SymbolSearchItemsDialogContext:()=>s});const s=n(50959).createContext(null)},424076:(e,t,n)=>{"use strict";n.r(t),n.d(t,{watchListSaga:()=>$});var s=n(336349),o=n(254773),i=n(382280),r=n(650151),l=n(481853),a=n(466052),c=n.n(a);class u extends l.BrokerService{constructor(e){super(e),this.positionsUpdate=new(c()),this._symbols=[],this._symbolPositions={}}positions(e){return-1!==this._symbols.indexOf(e)?this._symbolPositions[e]:[]}setSymbols(e){const t=Object.keys(this._symbolPositions);this._symbols.forEach((n=>{-1===e.indexOf(n)&&-1!==t.indexOf(n)&&delete this._symbolPositions[n]}));const n=[];e.forEach((e=>{-1===this._symbols.indexOf(e)&&(n.push(e),this._symbolPositions[e]=[])})),this._symbols=e,n.length&&this._requestPositions(n)}stopService(){this._clearPositions();(0,r.ensure)(this.activeBroker()).positionUpdate.unsubscribe(this,this._positionUpdate)}startService(){this._symbols&&this._requestPositions(this._symbols);(0,r.ensure)(this.activeBroker()).positionUpdate.subscribe(this,this._positionUpdate)}_clearPositions(){Object.keys(this._symbolPositions).forEach((e=>{this._symbolPositions[e].length&&(this._symbolPositions[e]=[],this.positionsUpdate.fire(e,[]))}))}_positionUpdate(e){const t=e.symbol;if(-1===this._symbols.indexOf(t))return;const n=this._symbolPositions[t],s=n.reduce(((t,n,s)=>n.id===e.id?s:t),-1),o=0===e.qty;-1!==s&&o?n.splice(s,1):-1!==s||o?n[s]=e:n.push(e),this.positionsUpdate.fire(t,n)}_requestPositions(e){const t=this.activeBroker();t&&e.length&&t.positions().then((t=>{t.forEach((t=>{-1!==e.indexOf(t.symbol)&&this._positionUpdate(t)}))}))}}var d=n(219769),h=n(601373),m=n(706474);const p=(0,n(6835).getLogger)("Platform.Model.Watchlist");function*g(e){const t=(n=e,(0,o.eventChannel)((e=>{const t={};return n.positionsUpdate.subscribe(t,((t,n)=>{const[s]=n;e((0,d.updatePosition)(t,s?(0,m.toPositionRecord)(s):void 0))})),()=>n.positionsUpdate.unsubscribeAll(t)})));var n;try{for(;;){const e=yield(0,s.take)(t),n=(0,h.positionSelector)(yield(0,s.select)(),e.symbol);(!n||!e.position||e.position&&n.side!==e.position.side)&&(yield(0,s.put)(e))}}finally{t.close()}}function*f(e){const t=yield(0,s.call)(i.waitTradingService),n=new u(t);yield(0,s.fork)(g,n);let o=null;function*r(){const t=(0,h.getCurrentViewableListByWidgetId)(yield(0,s.select)(),e);if(o!==t){const e=null===t?[]:t.symbols;p.logNormal(`Setting watched positions: ${e}`),n.setSymbols(e);const i={};for(const t of e){const[e]=n.positions(t);i[t]=e?(0,m.toPositionRecord)(e):void 0}yield(0,s.put)((0,d.updateBulkPositions)(i)),o=t}}yield(0,s.call)(r),yield(0,s.takeEvery)("*",r)}var v=n(70644),_=n(979359),b=n(530401),y=n(688401),S=n(363940),w=n(697169),x=n(354364);function*E(){yield(0,s.takeLatest)(v.INIT_WIDGET,(function*(e){yield(0,s.call)(k)}))}function*C(){0}function*k(){const e=(0,h.getGlobalActiveID)(yield(0,s.select)());null===e&&(yield(0,s.put)((0,w.asAction)((0,S.getActiveWatchlistThunk)(null)))),yield(0,s.put)((0,d.updateWidget)(_.WATCHLIST_WIDGET_ID,{listId:e}));const t=y.linking.symbol.value();t&&(yield(0,s.put)((0,
d.updateWidget)(_.WATCHLIST_WIDGET_ID,{scrollToId:{id:t}})))}function*T(){let e=(0,h.getGlobalActiveID)(yield(0,s.select)());for(;;){yield(0,s.take)("*");const t=(0,h.getGlobalActiveID)(yield(0,s.select)());e!==t&&(e=t,yield(0,s.put)((0,d.updateWidget)(_.WATCHLIST_WIDGET_ID,{listId:t,selectedSymbols:[]})))}}function*M(){yield(0,s.takeEvery)(v.UPDATE_WIDGET,I),yield(0,s.takeEvery)(v.UPDATE_WIDGET_OPTIONS,N)}function*I(e){const t=new b.WatchlistWidgetViewState;void 0!==e.widget.columns&&(t.setColumns(e.widget.columns),(0,x.expandWatchlist)()),void 0!==e.widget.tickerType&&((0,x.setInitialTickerType)(e.widget.tickerType),(0,x.expandWatchlist)())}function*N(e){const t=new b.WatchlistWidgetViewState;void 0!==e.options.isLogoEnabled&&(t.setIsLogoEnabled(e.options.isLogoEnabled),(0,x.expandWatchlist)())}var L=n(244e3),D=n(626800),A=n(607898),W=n(509806),B=n(557883),P=n(973602),R=n(856105),O=n(398171),F=(n(372605),n(833366));class H{constructor(e){this._onMoveSymbolsToList=new(c()),this._onAddSymbolsToList=new(c()),this._onMoveSymbolsToNewList=new(c()),this._onAddSymbolsToNewList=new(c()),this._onCreateSection=new(c()),this._onAddSymbols=new(c()),this._onRemoveSymbol=new(c()),this._isAddToCompareAllowed=!0,this._getLists=null,this._lists=[],this._transferActions=[],this._service=null,this._trackEvent=null,this._chartWidgetCollection=(0,B.chartWidgetCollectionService)(),this._allowExtendTimeScale=Boolean(TVSettings.getBool("showAddSymbolDialog.extendCheckboxState")),this._detailsWebviewController=null,this._colorManager=null,this._getTransferActionByType=e=>()=>{},this._updateList=(e,t)=>{},this._onTransferActionExecute=(e,t)=>{},this._getIsChecked=e=>!1,this._getIndeterminate=e=>!1,this._mapListsToActions=e=>[],this._createFinancialsAction=()=>null,this._createDetailsAction=()=>null;const{...t}=e;this._params=t}setWidgetId(e){this._widgetId=e}setList(e){this._list=e}setSymbol(e){this._symbol=e}setSelectedSymbols(e){this._selectedSymbols=new Set(e)}setShortName(e){this._shortName=e}setListGetter(e){this._getLists=e}setMenuSize(e){this._menuSize=e}setTrackEventCb(e){this._trackEvent=e}setIsAddingSymbolsAllowed(e){this._isAddingSymbolsAllowed=e}setIsAddToCompareAllowed(e){this._isAddToCompareAllowed=e}onMoveSymbolsToList(){return this._onMoveSymbolsToList}onAddSymbolsToList(){return this._onAddSymbolsToList}onMoveSymbolsToNewList(){return this._onMoveSymbolsToNewList}onAddSymbolsToNewList(){return this._onAddSymbolsToNewList}onCreateSection(){return this._onCreateSection}onAddSymbols(){return this._onAddSymbols}onRemoveSymbol(){return this._onRemoveSymbol}getContextMenuActions(){return this._getLibraryContextMenuActions()}_getTVContextMenuActions(){return[]}_getLibraryContextMenuActions(){const e=[],t=this._selectedSymbols.size<=1||!this._selectedSymbols.has(this._symbol);return this._isAddingSymbolsAllowed&&this._list&&e.push(this._createAddSymbolAction()),this._isAddToCompareAllowed&&(e.length>0&&!this._params.isMultipleListAllowed&&e.push(new P.Separator),
t?e.push(this._createAddSymbolToCompareAction()):this._selectedSymbols.size<=10&&e.push(this._createAddSelectionToCompareAction())),e}_createUnflagAllSymbolsAction(){return null}_createNewSectionAction(){return null}_createAddSymbolAction(){return new P.Action({actionId:"Watchlist.AddSymbol",label:W.t(null,void 0,n(57590)),icon:F,disabled:!1,onExecute:()=>{(0,R.showWatchlistSearchDialog)({fullscreen:1===this._menuSize,targetSymbol:this._symbol,onSearchComplete:(e,t)=>{window.runOrSignIn((()=>{const n=e.map((e=>e.symbol));this._onAddSymbols.fire(n,t)}),{source:"add symbol to watchlist"})}})}})}_createUnflagSymbolAction(){return null}_createFlagSymbolAction(){return[]}_createFlagAllSelectedAction(){return[]}_createUnflagAllSelectedAction(){return null}_createTextNotesAction(){return null}_createAddSymbolToCompareAction(){const e=W.t(null,{replace:{symbol:this._shortName}},n(465687)),t=()=>{var e;null===(e=this._chartWidgetCollection)||void 0===e||e.activeChartWidget.value().addCompareAsOverlay(this._symbol,this._allowExtendTimeScale)};return new P.Action({actionId:"Watchlist.AddSymbolToCompare",label:e,onExecute:t})}_createAddSelectionToCompareAction(){const e=W.t(null,void 0,n(695296)),t=async()=>{var e;const t=Array.from(this._selectedSymbols).filter((e=>!(0,O.isSeparatorItem)(e)));for(const n of t)await(null===(e=this._chartWidgetCollection)||void 0===e?void 0:e.activeChartWidget.value().addCompareAsOverlay(n,this._allowExtendTimeScale))};return new P.Action({actionId:"Watchlist.AddSelectedSymbolsToCompare ",label:e,onExecute:t})}_createNewListAction(e,t){return new TVAction({label:appendEllipsis(W.t(null,void 0,n(732340))),onExecute:()=>{t()},icon:1===this._menuSize?addToListIcon:void 0})}_getCreateNewListActionByType(e){return null}_createSymbolTransferAction(e,t){return null}_createRemoveSymbolAction(){return null}_createOpenSymbolAction(){return null}_createAddSymbolToAction(){return null}_createAddSelectionToAction(){return null}}var z=n(462056),U=n(156963);function*V(e){const t=(0,o.eventChannel)((t=>{const n=()=>{t((0,A.updateScrollToIdThunk)(e,y.linking.symbol.value()))};return y.linking.symbol.subscribe(n),()=>y.linking.symbol.unsubscribe(n)}));try{for(;;)yield(0,s.put)(yield(0,s.take)(t))}finally{t.close()}}function*G(){yield(0,s.takeLatest)(v.SELECT_NEXT_AVAILABLE_SYMBOL,(function*(e){const{widgetId:t,currentSymbol:n,keyboardAction:o,cancelSetOnChart:i}=e,r=(0,h.getCurrentViewableListByWidgetId)(yield(0,s.select)(),t);if(null===r)return;const{symbols:l}=r,a=(0,m.findNextAvailableSymbol)(l.indexOf(n),l,o);a&&(yield(0,s.put)((0,d.updateWidget)(t,{selectedSymbols:[a]})),i||y.linking.symbol.setValue(a))}))}function*q(){{let e=null;try{const t=U.enabled("multiple_watchlists"),n=new H({isMultipleListAllowed:t}),i=e=(0,o.eventChannel)((e=>{const s={};return n.onAddSymbols().subscribe(s,((t,n)=>e((0,A.addSymbolsThunk)(_.WATCHLIST_WIDGET_ID,t,n)))),n.onCreateSection().subscribe(s,((t,n)=>e((0,A.insertSymbolBeforeThunk)(_.WATCHLIST_WIDGET_ID,t,n)))),n.onCreateSection().subscribe(s,((t,n)=>e((0,
A.findInWatchlistThunk)(_.WATCHLIST_WIDGET_ID,n)))),n.onRemoveSymbol().subscribe(s,((t,n,s)=>e((0,A.removeSymbolsThunk)(t,n,s)))),t&&(n.onAddSymbolsToList().subscribe(s,((t,n,s)=>e((0,A.addSymbolsToCustomListThunk)(t,n,s)))),n.onMoveSymbolsToList().subscribe(s,((t,n,s)=>e((0,A.moveSymbolsToCustomListThunk)(t,n,s)))),n.onAddSymbolsToNewList().subscribe(s,(t=>e((0,A.userCreateWatchlistThunk)(null,{symbols:t})))),n.onMoveSymbolsToNewList().subscribe(s,((t,n)=>e((0,A.userCreateWatchlistThunk)(null,{symbols:n},t))))),()=>{n.onAddSymbolsToList().unsubscribeAll(s),n.onMoveSymbolsToList().unsubscribeAll(s),n.onAddSymbolsToNewList().unsubscribeAll(s),n.onMoveSymbolsToNewList().unsubscribeAll(s),n.onCreateSection().unsubscribeAll(s),n.onRemoveSymbol().unsubscribeAll(s)}}));yield(0,s.takeEvery)(i,(function*(e){yield(0,s.put)(e)}));const l=yield(0,s.takeLatest)(v.SHOW_CONTEXT_MENU,(function*(e){const{symbol:t,position:o,widgetId:i,size:l}=e,{isDeletable:a}=(0,h.widgetOptionsSelector)(yield(0,s.select)(),i),c=(0,h.selectedSymbolsSelector)(yield(0,s.select)(),i),u=(0,r.ensureNotNull)((0,h.widgetSelector)(yield(0,s.select)(),i).listId),d=(0,h.getCustomListById)(yield(0,s.select)(),u),m=yield(0,s.fork)((function*(){return yield(0,s.put)((0,w.asAction)((0,S.getCustomWatchlistsThunk)(null))),yield(0,s.take)(L.setup),(0,h.getCustomLists)(yield(0,s.select)())})),p=m.toPromise();n.setWidgetId(i),n.setListGetter((()=>p)),n.setList((0,r.ensureNotNull)(d)),n.setSelectedSymbols(c),n.setSymbol(t),n.setShortName((0,D.safeShortName)(t)),n.setMenuSize(l),n.setIsAddingSymbolsAllowed(a),yield(0,s.call)(z.ContextMenuManager.showMenu,n.getContextMenuActions(),o,{mode:1===l?"drawer":void 0,returnFocus:!0,takeFocus:!0},void 0,(()=>{n.setListGetter(null),m.cancel()}))}));yield(0,s.join)(l)}finally{null!==e&&e.close()}}}function*j(e){yield(0,s.takeLatest)(v.SELECT_ALL_SYMBOLS,(function*(t){const{widgetId:n}=t;if(e!==n)return;const o=(0,h.getCurrentViewableListByWidgetId)(yield(0,s.select)(),n);null!==o&&(yield(0,s.put)((0,d.updateWidget)(n,{selectedSymbols:o.symbols})))}))}var Q=n(601227);function*$(){yield(0,s.fork)(E),yield(0,s.fork)(T),yield(0,s.fork)(j,_.WATCHLIST_WIDGET_ID),yield(0,s.fork)(q),yield(0,s.fork)(V,_.WATCHLIST_WIDGET_ID),yield(0,s.fork)(G),(0,Q.onWidget)()||(yield(0,s.fork)(f,_.WATCHLIST_WIDGET_ID),yield(0,s.fork)(C)),yield(0,s.fork)(M)}},25091:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WatchListApi:()=>m});var s=n(650151),o=n(740662),i=n(706474),r=n(189904),l=n(6835),a=n(601373),c=n(363940),u=n(968962);const d=(0,l.getLogger)("WatchList.Api");function h(e){return{id:e.id,symbols:e.symbols,title:e.name}}class m{constructor(e){this._store=e}defaultList(){return(0,u.defaultWatchlistSymbols)()}getList(e){const t=this._store.getState();if(!e){const e=this.getActiveListId();return e?(0,s.ensureNotNull)((0,a.getCustomListById)(t,e)).symbols:null}const n=(0,a.getCustomListById)(t,e);return null===n?null:n.symbols}getActiveListId(){return(0,a.getGlobalActiveID)(this._store.getState())}setActiveList(e){this._store.dispatch((0,
c.setActiveWatchlistThunk)(null,e))}getAllLists(){const e=(0,a.getCustomLists)(this._store.getState()),t={};return e.forEach((e=>{t[e.id]=h(e)})),0===Object.keys(t).length?null:t}setList(e){const t=this.getActiveListId();t&&(d.logWarn("`setList` is deprecated. Use `updateList` instead"),this.updateList(t,e))}updateList(e,t){const n=(0,a.getCustomListById)(this._store.getState(),e);null!==n&&this._store.dispatch((0,c.replaceWatchlistSymbolsThunk)(null,n,t))}renameList(e,t){const n=(0,a.getCustomListById)(this._store.getState(),e);null!==n&&this._store.dispatch((0,c.renameWatchlistThunk)(null,n,t))}createList(e,t=[]){if(void 0===e)return null;let n=(0,r.randomHash)();for(;null!==this.getList(n);)n=(0,r.randomHash)();const s=(0,i.createWatchList)(n,e,t);return this._store.dispatch((0,c.createWatchlistThunk)(s)),h(s)}saveList(e){const{id:t,title:n,symbols:s}=e,o=(0,a.getCustomListsMap)(this._store.getState()),r=(0,i.createWatchList)(t,n,s);return void 0!==o[t]?(this._store.dispatch((0,c.putCustomWatchlistsThunk)(null,r)),!1):(this._store.dispatch((0,c.createWatchlistThunk)(r)),!0)}deleteList(e){const t=(0,a.getCustomListById)(this._store.getState(),e);null!==t&&this._store.dispatch((0,c.removeWatchlistThunk)(null,t))}onListChanged(){return o.onListChanged}onActiveListChanged(){return o.onActiveListChanged}onListAdded(){return o.onListAdded}onListRemoved(){return o.onListRemoved}onListRenamed(){return o.onListRenamed}}},524267:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WatchList:()=>rt});var s=n(386942),o=n(691622),i=n(50959),r=n(509806),l=n(354364),a=n(180185),c=n(497754),u=n.n(c),d=n(650151),h=n(665276),m=n(102478),p=n(28466),g=n(626800),f=n(45195);function v(e){const{id:t,className:n}=e;return i.createElement("div",{className:u()(f.node,n)},(0,g.safeShortName)(t))}var _=n(317447),b=n(219769),y=(n(305797),n(800296)),S=n(607898),w=n(654145),x=n(333765);const E=(0,s.connect)(null,(function(e){return(0,o.bindActionCreators)({removeSymbol:S.removeSymbolsThunk},e)}))((function(e){return i.createElement(y.ListItemButton,{onClick:function(t){const{widgetId:n,removeSymbol:s,symbolName:o}=e;t.preventDefault(),s(n,o)},className:u()(e.className,w.removeButton),icon:x})}));var C=n(535842),k=n(192607);function T(e){if(3===e.nodeType&&e.data.trim())return e;if(e.childNodes)for(let t=e.childNodes.length;t--;){const n=T(e.childNodes[t]);if(n)return n}return null}function M(e,t){const n=t.parentNode;if(!n)return;const s=t.nextSibling;s?n.insertBefore(e,s):n.appendChild(e)}function I(e){const t=T(e);if(t){const e=t.data;if(t.parentNode&&t.parentNode.tagName&&"sup"===t.parentNode.tagName.toLowerCase())return;const n=/^([^]*)(\S)(\s*)$/.exec(e);if(n){t.data=n[1];const e=document.createElement("sup");e.textContent=n[2],M(e,t),n[3]&&M(document.createTextNode(n[3]),e)}}}var N=n(154576);class L extends i.PureComponent{constructor(){super(...arguments),this._ref=null,this._highlightTimeout=null,this._context=null,this._values=null,this._handleRef=e=>{this._ref=e}}componentWillUnmount(){this._highlightTimeout&&clearTimeout(this._highlightTimeout)}
render(){const{isHidden:e,className:t}=this.props;return i.createElement("span",{className:c(t,N.cell,N.last,e&&N.hidden)},i.createElement("span",{className:N.inner,ref:this._handleRef}))}update(e){const{values:t}=e,n=this._values;if(void 0===t.last_price||null===this._ref)return;const s=null===n||n.pricescale!==t.pricescale||n.minmov!==t.minmov||n.fractional!==t.fractional||n.minmove2!==t.minmove2,o=null===n||n.last_price!==t.last_price;if(!s&&!o)return;this._values={...t};const{format:i,pricescale:r=100,minmov:l=1,fractional:a,minmove2:c}=t,u=new k.LastChangeFormatter({format:i,pricescale:r,minmov:l,fractional:a,minmove2:c}),d=t.last_price,h=u.format(t.last_price),m=null!==this._context?this._context.currentText:null,p=null!==this._context?this._context.currentValue:null,g=this._context={formatter:u,currentValue:d,currentText:h,previousValue:p,previousText:m};this._ref.innerText=h,this._processHighlight(this._ref,g);u.hasForexAdditionalPrecision()&&I(this._ref)}_processNumericDiff(e){const{previousValue:t,previousText:n,currentValue:s,currentText:o,formatter:i}=e;if(null===t||null===n||null===this._ref)return;const r=c(s>t&&N.plus,s<t&&N.minus),l=Math.min(n.length,o.length);let a=0;for(;a<l&&n.charAt(a)===o.charAt(a);)a++;const u=o.slice(0,a),d=o.slice(a);d.length&&r?this._ref.innerHTML=u+`<span class="${r}">${d}</span>`:this._ref.innerText=o;i.hasForexAdditionalPrecision()&&I(this._ref)}_processHighlight(e,t){const{previousValue:n,currentValue:s}=t;null!==n&&n!==s&&(null!==this._highlightTimeout&&(clearTimeout(this._highlightTimeout),this._highlightTimeout=null),e.classList.toggle(N.highlightUp,s>n),e.classList.toggle(N.highlightDown,s<n),this._highlightTimeout=setTimeout((()=>{e.classList.remove(N.highlightUp,N.highlightDown),this._processNumericDiff(t)}),500))}}var D=n(150335);const A=new(n(424030).NumericFormatter);class W extends i.PureComponent{constructor(){super(...arguments),this._ref=null,this._handleRef=e=>{this._ref=e}}render(){const{isHidden:e,className:t}=this.props;return i.createElement("span",{className:c(t,N.cell,N.change,e&&N.hidden)},i.createElement("span",{className:N.inner,ref:this._handleRef}))}update(e){const{values:t}=e,n=t.change;if(!(0,D.isNumber)(n)||null===this._ref)return;const{format:s,pricescale:o=100,minmov:i=1,fractional:r,minmove2:l,type:a}=t;this._ref.innerText=("spread"!==a||r?new k.LastChangeFormatter({format:s,pricescale:o,minmov:i,fractional:r,minmove2:l}):A).format(n),0!==n&&(this._ref.classList.remove(N.plus,N.minus),this._ref.classList.add(n>0?N.plus:N.minus))}}const B=new(n(637927).PercentageFormatter);class P extends i.PureComponent{constructor(){super(...arguments),this._ref=null,this._handleRef=e=>{this._ref=e}}render(){const{isHidden:e,className:t}=this.props;return i.createElement("span",{className:c(t,N.cell,N.changeInPercents,e&&N.hidden)},i.createElement("span",{className:N.inner,ref:this._handleRef}))}update(e){const{values:t}=e,n=t.change_percent;(0,D.isNumber)(n)&&null!==this._ref&&(this._ref.innerText=B.format(n),
0!==n&&(this._ref.classList.remove(N.plus,N.minus),this._ref.classList.add(n>0?N.plus:N.minus)))}}const R=new(n(357407).VolumeFormatter);class O extends i.PureComponent{constructor(){super(...arguments),this._ref=null,this._handleRef=e=>{this._ref=e}}render(){const{isHidden:e,className:t}=this.props;return i.createElement("span",{className:c(t,N.cell,N.volume,e&&N.hidden)},i.createElement("span",{className:N.inner,ref:this._handleRef}))}update(e){const{values:t}=e,n=t.volume;void 0===n||null===this._ref||Math.abs(n)>=1e100||(this._ref.innerText=R.format(n),this._ref.setAttribute("data-value",`${n}`))}}var F=n(104728),H=n(678100),z=(n(989897),n(609970));const U={classMap:{invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"},classSuffix:"",data:{},extraTitle:"",labelMap:{invalid:r.t(null,void 0,n(814177)),market:r.t(null,void 0,n(486533)),out_of_session:r.t(null,void 0,n(548979)),post_market:r.t(null,void 0,n(566812)),pre_market:r.t(null,void 0,n(845198)),loading:r.t(null,void 0,n(25911)),holiday:r.t(null,void 0,n(988958)),replay:""},short:!1,showTooltip:!0,tooltipType:"custom"};class V extends z.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="market-status-indicator",this._componentClass="tv-market-status",this._extraTitle="",this._init(e)}setStatus(e,t){const n={values:{current_session:e}};this.update(n,t)}getTooltipText(){let e=super.getTooltipText();return""===e||""!==this._extraTitle&&(e=`${e}, ${this._extraTitle}`),e}setExtraTitle(e){this._extraTitle=e}reset(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""}enableShortMode(e=!0){void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),super.enableShortMode()}disableShortMode(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),super.disableShortMode()}_renderLabel(){this._labelEl.textContent=this.getLabel()}_getValueFromData(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()}_render(){this._renderLabelElement(),this._renderDotElement(),super._render()}_init(e){const t=Object.assign({},U,e);super._init(t),this.setExtraTitle(t.extraTitle),this._render()}_renderLabelElement(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(`${this._componentClass}__label`),this._labelEl.classList.add(`${this._componentClass}__label${this._classSuffix}`),this._el.appendChild(this._labelEl))}_renderDotElement(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(`${this._componentClass}__dot`),this._dotEl.classList.add(`${this._componentClass}__dot${this._classSuffix}`),this._el.appendChild(this._dotEl))}}var G=n(72571),q=n(37914),j=n(563140),Q=n(531340),$=n(978636)
;function K(e,t){const s=q.quoteSessionAdapters.get(e).getLastSymbolData(t.symbol);if(!s)return"";const o=s.values,{format:i,pricescale:l=100,minmov:a=1,fractional:c,minmove2:u}=o,d=new k.LastChangeFormatter({format:i,pricescale:l,minmov:a,fractional:c,minmove2:u});return`${1===t.side?r.t(null,void 0,n(273064)):r.t(null,void 0,n(777851))} ${Math.abs(t.qty)} @ ${d.format(t.avgPrice)}`}var X=n(601373);const J=(0,s.connect)((function(e,t){return{position:(0,X.positionSelector)(e,t.symbolName)}}))((function(e){const{position:t,className:n,widgetId:s}=e;if(void 0===t)return null;const o=1===t.side;return i.createElement(G.Icon,{className:c("apply-common-tooltip",$.icon,o&&$.long,n),icon:o?j:Q,title:K(s,t)})}));var Z=n(662654);n(448306),n(927677);const Y=(e,t)=>({classSuffix:"--for-symbol-list",el:e,short:!0,symbol:t,manualUpdate:!0,tooltipType:"custom"});class ee extends i.PureComponent{constructor(){super(...arguments),this._ref=null,this._marketStatusIndicator=null,this._dataModeIndicator=null,this._description=null,this._handleNameContentSet=()=>{if(null===this._ref)return;const{tickerType:e,symbolName:t}=this.props,n={[Z.TickerType.Description]:()=>this._description||(0,g.safeShortName)(t),[Z.TickerType.Ticker]:()=>(0,g.safeShortName)(t)};this._ref.textContent=n[e]()},this._handleRef=e=>{this._ref=e},this._handleMarketStatusRef=e=>{const{symbolName:t}=this.props;null!==e&&(this._marketStatusIndicator=new V(Y(e,t)))},this._handleDataModeRef=e=>{const{symbolName:t}=this.props;null!==e&&(this._dataModeIndicator=new H.DataModeIndicator(Y(e,t)))}}componentDidMount(){null!==this._ref&&this._handleNameContentSet()}componentDidUpdate(e){null!==this._ref&&e.tickerType!==this.props.tickerType&&this._handleNameContentSet()}render(){const{isInvalid:e,symbolName:t,shouldDisplayPositions:n,widgetId:s,className:o,hasSFWarning:r,logoUrls:l}=this.props;return i.createElement("div",{className:u()(o,N.symbolName)},i.createElement("span",{className:u()(N.cell,N.flexCell)},!1,i.createElement("span",{className:u()(N.inner,N.symbolNameText),ref:this._handleRef}),!e&&i.createElement(i.Fragment,null,!1,!r&&i.createElement(i.Fragment,null,i.createElement("span",{ref:this._handleDataModeRef}),i.createElement("span",{ref:this._handleMarketStatusRef}),n&&i.createElement(J,{widgetId:s,className:N.positions,symbolName:t}))),!1))}update(e){if(null===this._ref)return;const{values:t}=e;this._marketStatusIndicator&&this._marketStatusIndicator.update({values:t}),this._dataModeIndicator&&("economic"===t.type&&"endofday"===t.update_mode?this._dataModeIndicator.hide():(this._dataModeIndicator.show(),this._dataModeIndicator.update({values:t}))),this._description=(0,F.getTranslatedSymbolDescription)(t),this._handleNameContentSet()}}var te=n(744471),ne=n(972535),se=n(688401),oe=n(601227),ie=n(670086),re=n(706474),le=n(311757),ae=n(780732);const ce={market:"marketOpen",pre_market:"marketPre",post_market:"marketPost",out_of_session:"marketClose",holiday:"marketHoliday"},ue={market:r.t(null,void 0,n(383949)),pre_market:r.t(null,void 0,n(943608)),
post_market:r.t(null,void 0,n(556604)),out_of_session:r.t(null,void 0,n(895814)),holiday:r.t(null,void 0,n(988958))},de={delayed_streaming:r.t(null,void 0,n(78211)),pulsed:r.t(null,void 0,n(78211)),streaming:r.t(null,void 0,n(906530)),endofday:r.t(null,void 0,n(132023))};function he(e){const t=ue[e];return`<span class="${ae[ce[e]]}">${(0,le.htmlEscape)(t)}</span>`}var me=n(398171);class pe extends i.PureComponent{constructor(e){super(e),this._observer=null,this._ref=null,this._raf=null,this._injectListClasses=(e,t)=>{if(!i.isValidElement(e))return e;const n=["short_name","last_price","change","change_percent","volume","rchp"].map(((e,t)=>[t,e])).filter((([e,t])=>this.props.columns.includes(t))),[s]=n[0];t===s&&(e=i.cloneElement(e,{className:c(e.props.className,N.firstItem)}));const[o]=n[n.length-1];return t===o&&(e=i.cloneElement(e,{className:c(e.props.className,N.lastItem)})),e},this._onData=e=>{this._data=e,null===this._raf&&(this._raf=requestAnimationFrame((()=>{const{id:e}=this.props,{logoUrls:t}=this.state,n=(0,d.ensureDefined)(this._data),{symbolname:s,status:o}=n;e===s&&(this._ref&&this._ref.setAttribute("data-status","resolved"),"error"===o?this.setState({isInvalid:!0}):"sf_data"===o?this.setState({hasSFWarning:!0}):(null!==this._symbolName.current&&this._symbolName.current.update(n),null!==this._lastPrice.current&&this._lastPrice.current.update(n),null!==this._change.current&&this._change.current.update(n),null!==this._changeInPercents.current&&this._changeInPercents.current.update(n),null!==this._volume.current&&this._volume.current.update(n))),this._handleCustomTooltipSetter("error"===o,n),this._raf=null})))},this._handleCustomTooltipSetter=(e,t)=>{if(null===this._ref)return;if(e)return void this._ref.setAttribute("data-tooltip","");const n=function(e){const{description:t,exchange:n,updateMode:s,marketStatus:o}=e,i=t?`<div class="${ae.description}">${(0,le.htmlEscape)(t)}</div>`:null,r=`<span class="${ae.dot}">•</span>`,l=[n?`<span>${(0,le.htmlEscape)(n)}</span>`:null,s?`<span>${(0,le.htmlEscape)(de[s])}</span>`:null,o?he(o):null].filter((e=>null!==e)).join(r),a=i?[i,l].join(""):l;return`<div class="${ae.wrapper}">${a}</div>`}(this._getSymbolTooltipData(t));n&&this._ref.getAttribute("data-tooltip")!==n&&this._ref.setAttribute("data-tooltip",n)},this._handleRef=e=>{if(null!==e){const t=.25;this._observer=new IntersectionObserver((e=>{e[e.length-1].intersectionRatio<t?this._onInvisible():this._onVisible()}),{threshold:[0,.25,.5,.75,1],root:null,rootMargin:"0px"}),this._observer.observe(e)}this._ref=e},this._handleContextMenu=e=>{e.preventDefault(),this._showContextMenu(e,0)},this._handleSmallContextMenu=e=>{this._showContextMenu(e,1)},this._showContextMenu=(e,t)=>{e.persist();const{showContextMenu:n,id:s,widgetId:o}=this.props;n(o,s,e,t)},this._onSymbolChanged=e=>{const t=this._computeActive(e);t!==this.state.isActive&&this.setState({isActive:t}),(0,te.hide)()},this._lastPrice=i.createRef(),this._change=i.createRef(),this._changeInPercents=i.createRef(),this._volume=i.createRef(),
this._prePostMarket=i.createRef(),this._symbolName=i.createRef();this._getLastSymbolData();const t=[];this.state={isInvalid:!1,hasSFWarning:!1,isActive:this._computeActive(se.linking.symbol.value()),logoUrls:t}}componentDidMount(){const{id:e,widgetId:t}=this.props;null!==this._ref&&this._ref.setAttribute("data-status","pending");const n=q.quoteSessionAdapters.get(t),s=this._getLastSymbolData();s&&this._onData(s),n.addSymbolDataHandler(e,this._onData),se.linking.symbol.subscribe(this._onSymbolChanged)}componentWillUnmount(){const{id:e,widgetId:t}=this.props;q.quoteSessionAdapters.get(t).removeSymbolDataHandler(e),this._observer&&this._observer.disconnect(),se.linking.symbol.unsubscribe(this._onSymbolChanged),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null)}render(){const{id:e,columns:t,tickerType:n,isSelected:s,isHighlighted:o,widgetId:r,isDeletable:l,enableContextMenu:a,shouldDisplayPositions:u,isContainedByMultiSelection:d,isFirstListItem:h,isLogoEnabled:m}=this.props,{isInvalid:p,hasSFWarning:f,isActive:v,logoUrls:_}=this.state,{size:b}=this.context,y=v?d:s,S=(0,me.isSeparatorItem)(e)||p;return i.createElement("div",{className:c(N.symbol,1===b&&N.small,y&&N.selected,v&&N.active,ne.mobiletouch&&N.touch,o&&N.highlighted,S&&N.invalid,h&&N.firstRow,"common-tooltip-html","common-tooltip-vertical","apply-common-tooltip"),ref:this._handleRef,"data-tooltip-delay":1500,"data-symbol-full":e,"data-symbol-short":(0,g.safeShortName)(e),"data-active":v,"data-selected":s,onClick:1===b&&a?this._handleSmallContextMenu:void 0,onContextMenu:0===b&&a?this._handleContextMenu:void 0},i.createElement("div",{className:c(N.indicators,v&&N.active)},!(0,oe.onWidget)()&&!1),i.createElement(ie.FragmentMap,{map:this._injectListClasses},i.createElement(ee,{symbolName:e,shouldDisplayPositions:u,ref:this._symbolName,hasSFWarning:f,isInvalid:p,widgetId:r,tickerType:n,logoUrls:void 0}),i.createElement(L,{ref:this._lastPrice,isHidden:!t.includes("last_price")}),i.createElement(W,{ref:this._change,isHidden:!t.includes("change")}),i.createElement(P,{ref:this._changeInPercents,isHidden:!t.includes("change_percent")}),i.createElement(O,{ref:this._volume,isHidden:!t.includes("volume")}),!1),l&&i.createElement("div",{className:N.overlayEnd},i.createElement(E,{className:N.removeButton,widgetId:r,symbolName:e})))}_onVisible(){const{id:e,widgetId:t}=this.props;q.quoteSessionAdapters.get(t).addFastSymbol(e)}_onInvisible(){const{id:e,widgetId:t}=this.props;q.quoteSessionAdapters.get(t).removeFastSymbol(e)}_getSymbolTooltipData(e){const{values:t}=e;let n;n=t.exchange||null;const s="economic"===t.type&&"endofday"===t.update_mode?null:t.update_mode||null;return{description:(0,F.getTranslatedSymbolDescription)(t)||null,exchange:n,updateMode:s,marketStatus:t.current_session||null}}_computeActive(e){return void 0!==e&&(0,re.compareSymbols)(e,this.props.id)}_getLastSymbolData(){const{id:e,widgetId:t}=this.props;return q.quoteSessionAdapters.get(t).getLastSymbolData(e)}}pe.contextType=C.SizeContext;const ge=(0,s.connect)((function(){const e=(0,
X.makeGetIsContainedByMultiSelection)();return(t,n)=>{const{isDeletable:s,enableContextMenu:o,isLogoEnabled:i}=(0,X.widgetOptionsSelector)(t,n.widgetId),r=(0,X.highlightedSymbolsSelector)(t,n.widgetId);return{isDeletable:s,enableContextMenu:o,isContainedByMultiSelection:e(t,{widgetId:n.widgetId,symbol:n.id}),isLogoEnabled:i,shouldDisplayPositions:(0,X.shouldDisplayPositionsSelector)(t,n.widgetId),columns:(0,X.columnsSelector)(t,n.widgetId),tickerType:(0,X.tickerTypeSelector)(t,n.widgetId),isHighlighted:!!r&&r.includes(n.id)}}}),(function(e){return(0,o.bindActionCreators)({showContextMenu:b.showContextMenu},e)}))(pe);var fe=n(518799),ve=n(32133),_e=n(302946),be=n(899840);const ye=[{column:"last_price",label:r.t(null,void 0,n(915107))},{column:"change",label:r.t(null,void 0,n(349329))},{column:"change_percent",label:r.t(null,void 0,n(680027))},{column:"volume",label:r.t(null,void 0,n(101111))}];function Se(e){const{columns:t,updateWidget:n,widgetId:s}=e,{size:o}=(0,i.useContext)(C.SizeContext),r=1===o;return i.createElement(i.Fragment,null,ye.map((e=>{const{column:n,label:s}=e;return i.createElement(_e.Checkbox,{key:n,className:u()(be.checkbox,r&&be.mobile),name:n,label:s,checked:t.includes(n),onChange:l(n)})})));function l(e){return()=>{const o=[...t];o.includes(e)?o.splice(o.indexOf(e),1):o.push(e),n(s,{columns:o})}}}var we=n(715336);const xe=(0,s.connect)((function(e,t){return{columns:(0,X.columnsSelector)(e,t.widgetId)}}),(function(e){return(0,o.bindActionCreators)({updateWidget:b.updateWidget},e)}))((function(e){const{columns:t,updateWidget:n,className:s,widgetId:o}=e,{size:r}=(0,i.useContext)(C.SizeContext),l=1===r;return i.createElement("div",{className:u()(be.wrap,s)},i.createElement(fe.ToolWidgetMenu,{content:i.createElement(G.Icon,{className:be.icon,icon:we}),arrow:!1,className:be.columnsMenu,onClose:function(){(0,ve.trackEvent)("Watchlist","Change columns",t.join(", "))},isDrawer:l,drawerPosition:"Bottom"},i.createElement(Se,{widgetId:o,columns:t,updateWidget:n})))}));var Ee=n(921258);const Ce=i.createContext({});var ke=n(710263),Te=n(496818),Me=n(907052);const Ie=(0,ke.isRtl)();function Ne(e){const{column:t}=e,{columnResizeDelegate:n,columnResizeStopDelegate:s}=(0,i.useContext)(Ce),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=new Te.PointerBackend({handle:(0,d.ensureNotNull)(o.current),onDragStart:()=>{var e;null===(e=o.current)||void 0===e||e.classList.add(Me.active)},onDragMove:e=>{const{current:s,initial:o}=e.detail,i=s.pageX-o.pageX;null==n||n.fire(t,i*(Ie?1:-1))},onDragStop:()=>{var e;null===(e=o.current)||void 0===e||e.classList.remove(Me.active),null==s||s.fire()}});return()=>{e.destroy()}}),[t,n,s]),i.createElement("div",{className:Me.placeholder},i.createElement("div",{ref:o,className:Me.wrap},i.createElement("div",{className:Me.handle}),i.createElement("div",{className:Me.separator})))}var Le=n(913042),De=n(975361),Ae=n(119850),We=n(931040);const Be=(0,s.connect)((function(e,t){const{isSortable:n}=(0,X.widgetOptionsSelector)(e,t.widgetId);return{isSortable:n,sorting:(0,
X.sortingSelector)(e,t.widgetId)}}),(function(e){return(0,o.bindActionCreators)({sortSymbols:S.sortSymbolsThunk},e)}))((function(e){const{widgetId:t,isSortable:s,tickerType:o,column:l,className:a,sortSymbols:u,label:h,sorting:m}=e,[g,f]=(0,i.useState)(!1),v=(0,i.useRef)(null),_=(0,i.useRef)(null),[b,y]=(0,Ee.useHover)(),{size:S}=(0,i.useContext)(C.SizeContext),w=(0,i.useContext)(p.CloseDelegateContext),x=1===S,{columnResizeDelegate:E,requestColumnInitWidthDelegate:k,setColumnInitWidthDelegate:T}=(0,i.useContext)(Ce),M=(0,i.useMemo)((()=>function(e,t,s,o){if(!t)return"";const i=r.t(null,void 0,n(768973)).format({columnLabel:s});if(null!==e&&e.column===o&&1===e.direction)return`${i} ${Ae}`;return`${i} ${De}`}(m,s,h,l)),[m,s,h,l]);return(0,i.useEffect)((()=>{const e=e=>{e===l&&(null==T||T.fire(l,(0,d.ensureNotNull)(v.current).getBoundingClientRect().width))};return null==k||k.subscribe(null,e),()=>null==k?void 0:k.unsubscribe(null,e)}),[k,T,l]),(0,i.useEffect)((()=>(w.subscribe(null,te.hide),()=>w.unsubscribe(null,te.hide))),[]),(0,i.useEffect)((()=>{s&&(b?(0,te.showOnElement)((0,d.ensureNotNull)(_.current),{content:{type:"html",data:M}}):(0,te.hide)())}),[b,M]),(0,i.useEffect)((()=>{if((null==m?void 0:m.column)!==l)return;f(!0);const e=setTimeout((()=>f(!1)),5e3);return()=>{clearTimeout(e),f(!1)}}),[m,l]),i.createElement(i.Fragment,null,i.createElement("span",{ref:v,key:l,className:c(We.columnHeader,a,x&&We.small)},s&&i.createElement(G.Icon,{className:c(We.sortArrow,g&&We.visible,1!==(null==m?void 0:m.direction)&&We.desc),icon:Le}),i.createElement("span",{...y,ref:_,className:c(We.label,s&&We.sortable,g&&We.sortActivated),onClick:s?function(){let e={column:l,direction:1};null!==m&&m.column===l&&1===m.direction&&(e={...m,direction:-1});u(t,e,o);const n=e?1===e.direction?"ascending":"descending":"default";(0,ve.trackEvent)("Watchlist","Sort",`Sort by ${l} ${n}`)}:void 0,"data-column-type":l},h)),E&&i.createElement(Ne,{column:l}))}));var Pe=n(672197),Re=n(42141);const Oe=(0,s.connect)((function(e,t){const{shouldDisplayColumnsMenu:n,isSortable:s}=(0,X.widgetOptionsSelector)(e,t.widgetId),o=(0,X.getCurrentViewableListByWidgetId)(e,t.widgetId);return{shouldDisplayColumnsMenu:n,columns:(0,X.columnsSelector)(e,t.widgetId),tickerType:(0,X.tickerTypeSelector)(e,t.widgetId),hasFlagColumn:"custom"===(null==o?void 0:o.type)&&s,sorting:(0,X.sortingSelector)(e,t.widgetId)}}))((function(e){const{columns:t,widgetId:o,shouldDisplayColumnsMenu:l,tickerType:a,hasFlagColumn:c,sorting:d}=e,h=(0,s.useDispatch)(),m=(0,i.useMemo)((()=>function(e,t,s){const o={[Z.TickerType.Ticker]:r.t(null,void 0,n(589053)),[Z.TickerType.Description]:r.t(null,void 0,n(629601))};0;return[{column:"short_name",label:o[t],className:Re.symbolName},{column:"last_price",label:r.t(null,void 0,n(915107)),className:Re.last},{column:"change",label:r.t(null,void 0,n(34565)),className:Re.change},{column:"change_percent",label:r.t(null,void 0,n(191198)),className:Re.changeInPercents},{column:"volume",label:r.t(null,{context:"study"},n(32819)),className:Re.volume
}].filter((t=>e.includes(t.column)||s&&"flag"===t.column))}(t,a,c)),[t,a,c]);return i.createElement("div",{className:Re.wrap},l&&i.createElement(xe,{widgetId:o,className:Re.menu}),i.createElement("div",{className:Re.tableHeader},m.map(((e,t)=>i.createElement(Be,{widgetId:o,key:e.column,tickerType:a,label:e.label,column:e.column,className:u()(e.className,0===t&&Re.firstItem,t===m.length-1&&Re.lastItem)})))),Boolean(d)&&i.createElement(G.Icon,{className:u()(Re.reset,"apply-common-tooltip"),title:r.t(null,void 0,n(344200)),icon:Pe,onClick:function(){h((0,S.sortSymbolsThunk)(o,null,a)),(0,ve.trackEvent)("Watchlist","Sort","Sort by custom order")}}))}));var Fe=n(199663),He=n(466052),ze=n.n(He);const Ue=32;var Ve=n(44681),Ge=n(705665);const qe={32:"next",[32+a.Modifiers.Shift]:"previous"},je=ne.mobiletouch?"touch":"native",Qe=["flag","short_name","last_price","change","change_percent","volume","rchp"];function $e(e){return Array.from(e).sort(((e,t)=>Qe.indexOf(e)-Qe.indexOf(t)))}function Ke(e,t,n,s){let o=16,i=Ue;const r=$e(t);return r.forEach(((t,l)=>{const a=Math.max(Ue,n-o-Ue*(r.length-l-1));t===e&&(i=a);const c=s.get(t);if(c){const e=(0,Ve.clamp)(c*n,Ue,a);o+=e}})),Xe(i)}function Xe(e){return Math.round(10*e)/10}function Je(e){const{dropType:t,boundBox:n}=e,{top:s,bottom:o,left:i}=(0,d.ensureDefined)(n);return[i,"before"===t||"inside"===t?s+.5:o-.5]}function Ze(e){return i.createElement("div",{className:Ge.empty},i.createElement("div",{className:Ge.centered},e.children))}function Ye(e,t){const{listId:n}=e.widgets[t];return null!==n?"custom":null}const et=(0,s.connect)((function(e,t){const{isMovable:n}=(0,X.widgetOptionsSelector)(e,t.widgetId),s=(0,X.getCurrentViewableListByWidgetId)(e,t.widgetId);return{columns:(0,X.columnsSelector)(e,t.widgetId),isMovable:n,isLoading:(0,X.isLoadingSelector)(e,t.widgetId),selectedSymbols:(0,X.selectedSymbolsSelector)(e,t.widgetId),scrollToId:(0,X.scrollToIdSelector)(e,t.widgetId),listType:Ye(e,t.widgetId),isHotlist:Boolean("hot"===(null==s?void 0:s.type))}}),(function(e){return(0,o.bindActionCreators)({updateWidget:b.updateWidget,selectNextAvailableSymbol:b.selectNextAvailableSymbol},e)}))((function(e){const{columns:t,symbols:n,icon:s,isLoading:o,noSymbolsPlaceholder:r,selectedSymbols:u,updateWidget:g,selectNextAvailableSymbol:f,onKeyDown:b,isMovable:y,widgetId:S,scrollToId:w,listType:x,isHotlist:E,viewState:k,...T}=e,M=(0,i.useMemo)((()=>(0,l.createNodes)(n)),[n]),I=(0,i.useContext)(p.CloseDelegateContext),{size:N}=(0,i.useContext)(C.SizeContext),L=1===N,D=(0,i.useRef)(performance.now()),A=(0,i.useRef)(null),W=(0,i.useCallback)((e=>((0,re.isValidSeparatorItem)(e.id),i.createElement(ge,{...e,widgetId:S}))),[S]),B=(0,i.useCallback)((e=>i.createElement(v,{...e,widgetId:S,id:(0,re.isValidSeparatorItem)(e.id)?(0,re.separatorValToDisplayVal)(e.id):e.id,className:c((0,re.isValidSeparatorItem)(e.id)&&Ge.separatorDragPreview)})),[S]),P=(0,i.useCallback)(((e,t)=>{switch(t.type){case"node":return(0,re.isValidSeparatorItem)(t.node.props.id)?36:30;case"separator":return 13}}),[]),R=(0,
i.useCallback)(((e,t)=>{var n;0!==e.button||0!==(0,a.modifiersFromEvent)(e)||(0,re.isValidSeparatorItem)(t)||(1===e.nativeEvent.detail&&se.linking.symbol.setValue(t),2===e.nativeEvent.detail&&(null===(n=se.linking.getChartWidget())||void 0===n||n.chartWidgetCollection().setSymbolAll(t)))}),[]),O=(0,i.useCallback)((e=>{(0,re.isValidSeparatorItem)(e)||se.linking.symbol.setValue(e)}),[]),F=(0,i.useCallback)(((e,t)=>t&&1===e.length&&(0,re.isValidSeparatorItem)(e[0])?f(S,e[0],t):g(S,{selectedSymbols:e})),[S,f,g]),[H,z]=(0,i.useState)(void 0),[U,V]=(0,i.useState)((function(){var e;return null!==(e=null==k?void 0:k.getColumnsPercentages())&&void 0!==e?e:new Map}));(0,i.useEffect)((()=>{const e=q.quoteSessionAdapters.get(S);return e.addToSubscriptionSet(n),e.commitSubscriptionChanges(),se.linking.symbol.subscribe(Y),()=>{e.addToCancelSubscriptionSet(n),se.linking.symbol.unsubscribe(Y)}}),[n]),(0,i.useEffect)((()=>()=>{const e=q.quoteSessionAdapters.get(S);e.clearSubscriptionSet(),e.commitSubscriptionChanges()}),[]);const[j,Q]=(0,i.useState)((()=>({height:0,width:0}))),$=(0,m.useResizeObserver)((e=>{const[t]=e,{width:n,height:s}=t.contentRect;Q((e=>e.width===n&&e.height===s?e:{height:s,width:n}))})),K=(0,i.useRef)(null),X=(0,i.useMemo)((()=>Boolean(null==k?void 0:k.canResizeColumns())?{requestColumnInitWidthDelegate:new(ze()),setColumnInitWidthDelegate:new(ze()),columnResizeStartDelegate:new(ze()),columnResizeDelegate:new(ze()),columnResizeStopDelegate:new(ze())}:{}),[k]),J=function(e,t,n){const s={},o=$e(e);return Array.from(n.entries()).forEach((([i,r])=>{if(!o.includes(i))return;if(o.indexOf(i)===o.length-1)return void("change_percent"!==i&&"volume"!==i||(s[`--tv-symbol-list-column-${i}-flex`]="1 1"));const l=Ke(i,e,t,n);s[`--tv-symbol-list-column-${i}-flex`]=`0 0 ${(0,Ve.clamp)(Xe(r*t),Ue,l)}px`})),s}(t,j.width,U),Z=(0,i.useCallback)(((e,t)=>{const{requestColumnInitWidthDelegate:n,setColumnInitWidthDelegate:s}=X;let o=!1;return t.forEach((t=>{if(!e.has(t)){o=!0;const i=(t,n)=>e.set(t,n/j.width);null==s||s.subscribe(null,i,!0),null==n||n.fire(t),null==s||s.unsubscribeAll(null)}})),Array.from(e.keys()).forEach((n=>{-1===t.indexOf(n)&&(o=!0,e.delete(n))})),o}),[j,X]);return(0,i.useEffect)((()=>{var e;if(U.size>0&&(null==k?void 0:k.canResizeColumns())){const n=new Map(U);Z(n,t)&&(V(n),null===(e=k.saveColumnsPercentages)||void 0===e||e.call(k,n))}}),[t,U,Z,k]),(0,i.useEffect)((()=>{const{columnResizeDelegate:e}=X,n=(e,n)=>{V((s=>{const o=new Map(s);Z(o,t);const i=n=>(0,Ve.clamp)(n,Ue,Ke(e,t,j.width,o));null===A.current&&(A.current=i((0,d.ensureDefined)(o.get(e))*j.width));const r=i(A.current-n);return o.set(e,r/j.width),o}))};return null==e||e.subscribe(null,n),()=>null==e?void 0:e.unsubscribe(null,n)}),[t,j,X,Z]),(0,i.useEffect)((()=>{const{columnResizeStopDelegate:e}=X,t=()=>{var e;A.current=null,null===(e=null==k?void 0:k.saveColumnsPercentages)||void 0===e||e.call(k,U)};return null==e||e.subscribe(null,t),()=>null==e?void 0:e.unsubscribe(null,t)}),[U,X,k]),i.createElement(Ce.Provider,{value:X},i.createElement("div",{
className:Ge.wrap,style:J,onContextMenu:Fe.preventDefaultForContextMenu},i.createElement(Oe,{widgetId:S}),i.createElement("div",{ref:$,className:Ge.content},i.createElement("div",{className:c(Ge.scrollable,0===n.length&&Ge.noData),onMouseDown:function(e){if(!(e.target instanceof Element)||null===K.current)return;const{activeElement:t}=document;e.target===K.current&&(K.current.contains(t)&&e.preventDefault(),ee())},onKeyDown:function(e){27===(0,a.hashFromEvent)(e)&&(e.preventDefault(),ee());if(1===u.length&&(null==H?void 0:H.id)!==u[0]&&(null==H?void 0:H.id)===se.linking.symbol.value()){if(40===(0,a.hashFromEvent)(e))return void se.linking.symbol.setValue(u[0]);if(38===(0,a.hashFromEvent)(e))return void f(S,u[0],"previous")}b&&b(e)},onScrollCapture:function(){if(D.current+500>performance.now())return;I.fire()}},!o&&n.length>0&&0!==j.width&&i.createElement(_.Tree,{...T,key:String(x),height:j.height,width:j.width,navigationKeys:qe,nodeRenderer:W,drag:je,dragPreviewRenderer:B,nodes:M,onClick:L?void 0:R,selectedIds:u,onSelect:F,readOnly:!y,rowHeight:P,scrollToId:w,onKeyboardSelect:O,dropLayerTransform:Je,lastFocusedNodeObject:H,outerRef:function(e){K.current=e},lastSyncTimestampRef:D}),o&&i.createElement(h.Spinner,null),!o&&r&&0===n.length&&i.createElement(Ze,null,i.createElement("div",null,s&&i.createElement(G.Icon,{icon:s,className:Ge.emptyIcon}),i.createElement("div",null,r)))))));function Y(e){const t=(0,re.getSymbolFromList)(e,n);t&&!(0,re.isValidSeparatorItem)(t)&&(F([t]),z({id:t}))}function ee(){Y(se.linking.symbol.value())}}));var tt=n(297265),nt=n(702054),st=n(651049),ot=n(753074),it=n(34360);const rt=(0,s.connect)((function(){const e=[],t=(t,n)=>{const s=(0,X.getCurrentViewableListByWidgetId)(t,n);return null===s||"hot"===s.type?e:s.symbols};return(e,n)=>({symbols:t(e,n.widgetId)})}),(function(e){return(0,o.bindActionCreators)({reorderSymbols:S.reorderSymbolsThunk,removeSelectedSymbols:S.removeSelectedSymbolsThunk,markSymbol:S.markSymbolsThunk,selectAllSymbols:b.selectAllSymbols},e)}))((function(e){const{symbols:t,reorderSymbols:s,widgetId:o,removeSelectedSymbols:c,markSymbol:u,selectAllSymbols:d,viewState:h}=e,m=(0,tt.useWatchedValueReadonly)({watchedValue:nt.watchedTheme})===st.StdTheme.Dark?ot:it;return i.createElement(et,{widgetId:o,onMove:function(e){s(o,e[l.ROOT_ID].children)},onDrop:function(e){const{detail:{nodes:t}}=e;t.length>1?(0,ve.trackEvent)("Watchlist","Multi select","Drag"):(0,ve.trackEvent)("Watchlist","Drag")},symbols:t,onKeyDown:function(e){const t=(0,a.hashFromEvent)(e);46!==t&&8!==t||(e.preventDefault(),c(o));t===a.Modifiers.Alt+13&&(e.preventDefault(),window.runOrSignIn((()=>u(o,void 0,void 0,!0)),{source:"Set symbol color"}),(0,ve.trackEvent)("Watchlist","Alt+Enter"));t===a.Modifiers.Mod+65&&(e.preventDefault(),d(o),(0,ve.trackEvent)("Watchlist","Ctrl+A"));27===t&&(0,ve.trackEvent)("Watchlist","Esc")},noSymbolsPlaceholder:r.t(null,void 0,n(456502)),icon:m,viewState:h})}))},666617:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Header:()=>me})
;var s=n(691622),o=n(386942),i=n(50959),r=n(497754),l=n.n(r),a=n(650151),c=n(509806),u=n(706474),d=n(192063),h=n(153055);function m(e,t,n){(0,i.useRef)(null);(0,i.useEffect)((()=>()=>{0}),[e.current,t,n])}var p=n(972535),g=n(32133),f=n(535842),v=n(493173),_=n(398171),b=n(72621),y=n(359705),S=n(350464),w=n(119271);const x=(0,v.mergeThemes)(d.DEFAULT_POPUP_MENU_ITEM_THEME,S),E=(0,v.mergeThemes)(d.DEFAULT_POPUP_MENU_ITEM_THEME,w);var C=n(607898),k=n(601373),T=n(363940);const M=(0,o.connect)(null,{removeWatchList:function(e){return async(t,n)=>{const s=n();{const n=(0,a.ensureNotNull)((0,k.getCustomListById)(s,e));await t((0,T.removeWatchlistThunk)(null,n))}}},selectWatchList:C.selectSymbolListThunk})((function(e){const{className:t,watchList:s,selectWatchList:o,removeWatchList:r,hideRemoveButton:u,isActive:v,isSmallSize:S,onSelect:w}=e,{size:C}=(0,i.useContext)(f.SizeContext),{color:k=null}=s,T=s.symbols.filter((e=>!(0,_.isSeparatorItem)(e))).length,M=(0,i.useRef)(null),I=!u&&null===k&&!v;m(M,k,y.flag);let N=s.name;return N||(N=c.t(null,void 0,n(213402))),i.createElement(d.PopupMenuItem,{key:s.id,theme:S?E:x,className:l()(t,y.item,v&&y.active,1===C&&y.small,!I&&y.countVisible),label:i.createElement("div",null,i.createElement("span",{className:y.title,ref:M},N),S&&i.createElement("span",{className:y.count},c.t(null,{plural:"{count} symbols",count:T},n(337628)))),toolbox:i.createElement(i.Fragment,null,I&&i.createElement(b.RemoveButton,{className:l()(y.removeButton,y.toolboxItem,p.touch&&y.touch,S&&y.small),isActive:v,onClick:function(){const e=s.name||getColoredListTitle((0,a.ensureDefined)(s.color)),t=c.t(null,void 0,n(722753)).format({name:e});(0,h.showConfirm)({text:t,onConfirm:async({dialogClose:e})=>{await r(s.id),e()}}),(0,g.trackEvent)("Watchlist","Popup menu","Remove list")}}),i.createElement("span",{className:l()(y.toolboxCount,y.toolboxItem,(S||p.touch)&&y.touch)},T)),onClick:function(){var e;v||(o(null,null!==(e=s.color)&&void 0!==e?e:s.id),null==w||w(),(0,g.trackEvent)("Watchlist","Popup menu","Change active list"))}})}));var I=n(917850),N=n(230553),L=n(879530),D=n(354364);function A(e){const{isLoading:t,list:n,current:s,isSmallSize:o,isReadonly:r,onSelect:l}=e,a=(0,i.useContext)(N.MenuContext);(0,i.useEffect)((()=>{a&&a.update()}),[n]);const c=[],u=[];for(const e of n)c.push(e);c.sort(D.sortComparator);const d=[[],c];return u.length&&d.push(u),i.createElement(i.Fragment,null,t&&i.createElement(L.ToolWidgetMenuSpinner,null),!t&&d.map(((e,t,n)=>e.length>0&&i.createElement(i.Fragment,{key:t},e.map((e=>i.createElement(M,{key:e.id,watchList:e,isActive:null!==s&&s.id===e.id,hideRemoveButton:1===c.length||r||!1,isSmallSize:o,onSelect:l}))),t!==n.length-1&&0!==e.length&&i.createElement(I.PopupMenuSeparator,null)))))}var W=n(518799),B=n(88148);const P=(0,v.mergeThemes)(W.DEFAULT_TOOL_WIDGET_MENU_THEME,{button:B.button,hover:B.hover,isOpened:B.isOpened});function R(e){const{className:t,content:n,...s}=e;return i.createElement(W.ToolWidgetMenu,{...s,theme:P,className:l()(t),content:i.createElement("span",{
className:l()(B.inner)},n)})}var O=n(28466),F=n(654936),H=n(199663),z=n(180185),U=n(452671);function V(e){const{name:t,maxLength:n,onSubmit:s,onClose:o,isRenaming:l,children:a,inputClassName:c,size:u}=e,[d,h]=(0,i.useState)(t),m=(0,i.useRef)(null);return(0,i.useEffect)((()=>{h(t)}),[t]),(0,i.useEffect)((()=>{l&&null!==m.current&&(m.current.focus(),m.current.setSelectionRange(0,d.length))}),[l]),l?i.createElement(F.InputControl,{value:d,onChange:function(e){h(e.currentTarget.value)},onClick:H.preventDefault,className:r(U.renameInput),inputClassName:c,onKeyDown:function(e){27===(0,z.hashFromEvent)(e)?p():13===(0,z.hashFromEvent)(e)&&g()},reference:function(e){m.current=e},onBlur:g,onDragStart:function(e){e.preventDefault(),e.stopPropagation()},size:u,maxLength:n,draggable:!0,stretch:!0}):a;function p(){h(t),o()}function g(){""!==d?s(d):p()}}var G=n(601227),q=(n(976052),n(156963)),j=n(190410),Q=n(350299),$=n(395907),K=n(856105),X=n(190266);const J=n(538720);function Z(e){const{leftSlot:t,rightSlot:n,withRightSlotSeparator:s,theme:o=J}=e;return i.createElement("div",{className:o.container},i.createElement("div",{className:o.leftSlot},t),i.createElement("div",{className:r(o.rightSlot,s&&o.rightSlotSeparator)},n))}var Y=n(845437),ee=n(636296),te=n(133055),ne=n(323595),se=n(808757),oe=n(133736),ie=n(660662),re=n(173394),le=n(833366),ae=n(684200);const ce=(0,v.mergeThemes)(J,{leftSlot:ae.widgetbarWidgetHeaderLeftSlot,rightSlot:ae.widgetbarWidgetHeaderRightSlot}),ue=(0,v.mergeThemes)(d.DEFAULT_POPUP_MENU_ITEM_THEME,ie),de=(0,v.mergeThemes)(d.DEFAULT_POPUP_MENU_ITEM_THEME,re);var he=n(219769);const me=(0,o.connect)((function(){const e=(e,t)=>{const n=(0,k.getCurrentViewableListByWidgetId)(e,t);return null===n?null:"custom"===n.type?{id:n.id,name:n.name,description:n.description,symbols:n.symbols,shared:n.shared}:null},t=e=>{const t=[];return t.push(...(0,k.getCustomLists)(e)),t};return(n,s)=>{const{enableAddSymbolsByAnon:o,shouldDisplaySymbolSearch:i,isDeletable:r,isLogoEnabled:l}=(0,k.widgetOptionsSelector)(n,s.widgetId);return{isLoading:!(0,k.getIsReadyCustomLists)(n),enableAddSymbolsByAnon:o,shouldDisplaySymbolSearch:i,isLogoEnabled:l,list:t(n),current:e(n,s.widgetId),columns:(0,k.columnsSelector)(n,s.widgetId),tickerType:(0,k.tickerTypeSelector)(n,s.widgetId),isReadonly:!r}}}),(function(e){const t={createNewWatchList:C.userCreateWatchlistThunk,saveListAs:C.saveListAsThunk,renameWatchList:C.renameSymbolListThunk,clearWatchList:C.clearSymbolListThunk,getWatchLists:()=>(0,T.getCustomWatchlistsThunk)(null),addSymbols:C.addSymbolsThunk,insertSymbolBefore:C.insertSymbolBeforeThunk,scrollToSymbol:C.findInWatchlistThunk,updateWidget:he.updateWidget,updateWidgetOptions:he.updateWidgetOptions};return(0,s.bindActionCreators)(t,e)}))((function(e){var t
;const{isLoading:s,list:o,current:l,getWatchLists:p,createNewWatchList:v,saveListAs:_,enableAddSymbolsByAnon:b,shouldDisplaySymbolSearch:y,renameWatchList:S,clearWatchList:w,addSymbols:x,insertSymbolBefore:E,widgetId:C,isReadonly:k,scrollToSymbol:T,shareList:M,isLogoEnabled:N}=e,{size:L}=(0,i.useContext)(f.SizeContext),W=(0,i.useContext)(O.CloseDelegateContext),{setHideClose:B}=(0,i.useContext)(j.DialogHeaderContext),P=(0,i.useRef)(null),F=(0,i.useRef)(null),[H,z]=(0,i.useState)(!1),U=(0,i.useRef)([]),J=(0,i.useRef)(void 0),ie=(0,i.useRef)(null);ie.current=function(){const e=U.current;U.current=[],J.current=void 0,!1;b?ke(e):(0,X.runOrSignIn)((()=>ke(e)),{source:"add symbol to watchlist"})};const[re,he]=(0,i.useState)(!1);m(P,null!==(t=null==l?void 0:l.color)&&void 0!==t?t:null,ae.flag);const me=function(){const e=c.t(null,void 0,n(213402));if(!l)return e;0;return l.name||e}(),pe=!((0,G.onWidget)()||k&&1===o.length),ge=1===L,fe=ge?de:ue;return(0,i.useRef)(null),(0,i.useRef)(null),i.createElement("div",{className:r(ae.container,ge&&ae.mobile),onClick:function(){re||ge||W.fire()}},i.createElement(V,{name:me,isRenaming:H,onSubmit:function(e){Se(!1),null!==l&&S(l.id,e)},onClose:function(){Se(!1)},maxLength:128},i.createElement(Z,{leftSlot:pe?i.createElement(R,{className:r(ge&&ae.mobileMenu),onOpen:p,menuClassName:ae.watchlistMenu,content:i.createElement("span",{className:ae.titleRow},me,i.createElement("span",{ref:P})),isDrawer:ge,"data-name":"watchlists-button"},!k&&i.createElement(i.Fragment,null,i.createElement(d.PopupMenuItem,{key:"new",theme:fe,icon:Y,label:(0,Q.appendEllipsis)(c.t(null,void 0,n(732340))),onClick:function(){W.fire(),Ee((()=>v(null)),"new"),Te("Create new list")}}),q.enabled("watchlist_import_export")&&false,Me(),i.createElement(I.PopupMenuSeparator,null)),i.createElement(A,{isLoading:s,list:o,current:l,isSmallSize:ge,isReadonly:k,onSelect:ge?()=>W.fire():void 0})):i.createElement("div",{className:ae.title},c.t(null,void 0,n(213402))),rightSlot:y&&!k&&i.createElement("div",{className:ae.buttonWrap},i.createElement($.ToolWidgetIconButton,{title:c.t(null,void 0,n(57590)),className:ae.headerButton,icon:le,onClick:function(){(0,K.showWatchlistSearchDialog)({fullscreen:ge,onSearchComplete:e=>{(0,X.runOrSignIn)((()=>{for(const t of e)Ce(t.symbol)}),{source:"add symbol to watchlist"})}}),(0,g.trackEvent)("GUI","SS","watchlist")},"data-name":"add-symbol-button","data-role":"button",isDisabled:!1}),false,false),withRightSlotSeparator:ge,theme:ce})),q.enabled("watchlist_import_export")&&i.createElement("form",{className:ae.hidden},i.createElement("input",{accept:"text/plain",type:"file",ref:function(e){q.enabled("watchlist_import_export")&&(F.current=e)},onChange:function(e){if(q.enabled("watchlist_import_export")){const t=(0,a.ensureNotNull)(e.target.files)[0];if(!t)return void ve(F.current);const s=t.size/1024,o=250;if(s>o)return ve(F.current),void(0,h.showWarning)({title:c.t(null,void 0,n(705847)),text:c.t(null,{replace:{fileLimit:String(o)}},n(974587))});const i=new FileReader;ve(F.current),i.onload=()=>{
(0,u.isImportDataValid)(i.result)?v(null,{name:t.name.replace(/^(.+)\..+$/,"$1"),symbols:String(i.result).toUpperCase().split(/[\t\r\n,]+/).filter(Boolean)}):(0,h.showWarning)({title:c.t(null,void 0,n(713774)),text:c.t(null,void 0,n(594071))})},i.readAsText(t)}}})));function ve(e){e&&(e.value="")}function _e(){function e(){(0,a.ensureNotNull)(F.current).click()}q.enabled("watchlist_import_export")&&e()}function be(){function e(){const{name:e,color:t,symbols:n}=(0,a.ensureNotNull)(l),s=e||t||"watchlist";(0,D.exportList)(s,n)}q.enabled("watchlist_import_export")&&e()}function ye(){null!==l&&((0,h.showConfirm)({text:c.t(null,void 0,n(265662)),onConfirm:({dialogClose:e})=>{w(l.id),e()}}),Te("Clear list"))}function Se(e){z(e),B(e)}function we(){(()=>{Se(!0)})(),Te("Rename")}function xe(){Ee((()=>_(e.widgetId,(0,a.ensureNotNull)(l).symbols)),"saveAs"),Te("Make a copy")}function Ee(e,t){e()}function Ce(e){U.current.push(e),J.current||(J.current=setTimeout((()=>{null!==ie.current&&ie.current()}),0))}function ke(e){x(C,Array.from(new Set(e)))}function Te(e){(0,g.trackEvent)("Watchlist","Popup menu",e)}function Me(){return null===l?null:i.createElement(i.Fragment,null,false,i.createElement(d.PopupMenuItem,{key:"copy",theme:fe,icon:ee,label:(0,Q.appendEllipsis)(c.t(null,void 0,n(180959))),onClick:xe}),i.createElement(d.PopupMenuItem,{key:"rename",theme:fe,icon:te,label:c.t(null,void 0,n(435038)),onClick:we,isDisabled:!1}),q.enabled("watchlist_import_export")&&!ge&&i.createElement(i.Fragment,null,i.createElement(d.PopupMenuItem,{key:"import",theme:ue,icon:ne,label:(0,Q.appendEllipsis)(c.t(null,void 0,n(61466))),onClick:_e}),i.createElement(d.PopupMenuItem,{key:"export",theme:ue,icon:se,label:c.t(null,void 0,n(982543)),onClick:be})),i.createElement(d.PopupMenuItem,{key:"clear",theme:fe,icon:oe,label:c.t(null,void 0,n(60640)),onClick:ye}),!1)}}))},113060:(e,t,n)=>{"use strict";n.d(t,{SymbolSearchWatchlistContext:()=>s});const s=n(50959).createContext(null)},190266:(e,t,n)=>{"use strict";n.d(t,{runOrSignIn:()=>s});function s(e,t){e()}},163694:(e,t,n)=>{"use strict";n.d(t,{DrawerContext:()=>r,DrawerManager:()=>i});var s=n(50959),o=n(285089);class i extends s.PureComponent{constructor(e){super(e),this._isBodyFixed=!1,this._addDrawer=e=>{this.setState((t=>({stack:[...t.stack,e]})))},this._removeDrawer=e=>{this.setState((t=>({stack:t.stack.filter((t=>t!==e))})))},this.state={stack:[]}}componentDidUpdate(e,t){!t.stack.length&&this.state.stack.length&&((0,o.setFixedBodyState)(!0),this._isBodyFixed=!0),t.stack.length&&!this.state.stack.length&&this._isBodyFixed&&((0,o.setFixedBodyState)(!1),this._isBodyFixed=!1)}componentWillUnmount(){this.state.stack.length&&this._isBodyFixed&&(0,o.setFixedBodyState)(!1)}render(){return s.createElement(r.Provider,{value:{addDrawer:this._addDrawer,removeDrawer:this._removeDrawer,currentDrawer:this.state.stack.length?this.state.stack[this.state.stack.length-1]:null}},this.props.children)}}const r=s.createContext(null)},759339:(e,t,n)=>{"use strict";n.d(t,{Drawer:()=>h})
;var s=n(50959),o=n(650151),i=n(497754),r=n(189904),l=n(8361),a=n(163694),c=n(28466),u=n(742554),d=n(966076);function h(e){const{position:t="Bottom",onClose:n,children:u,className:h,theme:p=d}=e,g=(0,o.ensureNotNull)((0,s.useContext)(a.DrawerContext)),[f]=(0,s.useState)((()=>(0,r.randomHash)())),v=(0,s.useRef)(null),_=(0,s.useContext)(c.CloseDelegateContext);return(0,s.useLayoutEffect)((()=>((0,o.ensureNotNull)(v.current).focus({preventScroll:!0}),_.subscribe(g,n),g.addDrawer(f),()=>{g.removeDrawer(f),_.unsubscribe(g,n)})),[]),s.createElement(l.Portal,null,s.createElement("div",{className:i(d.wrap,d[`position${t}`])},f===g.currentDrawer&&s.createElement("div",{className:d.backdrop,onClick:n}),s.createElement(m,{className:i(p.drawer,d[`position${t}`],h),ref:v,"data-name":e["data-name"]},u)))}const m=(0,s.forwardRef)(((e,t)=>{const{className:n,...o}=e;return s.createElement(u.TouchScrollContainer,{className:i(d.drawer,n),tabIndex:-1,ref:t,...o})}))},921258:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>i,useAccurateHover:()=>r,useHover:()=>o});var s=n(50959);function o(){const[e,t]=(0,s.useState)(!1);return[e,{onMouseOver:function(e){i(e)&&t(!0)},onMouseOut:function(e){i(e)&&t(!1)}}]}function i(e){return!e.currentTarget.contains(e.relatedTarget)}function r(e){const[t,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const t=t=>{if(null===e.current)return;const s=e.current.contains(t.target);n(s)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)}),[]),t}},102478:(e,t,n)=>{"use strict";n.d(t,{useResizeObserver:()=>s.useResizeObserver});var s=n(664332)},930052:(e,t,n)=>{"use strict";n.d(t,{MatchMedia:()=>o});var s=n(50959);class o extends s.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},230553:(e,t,n)=>{"use strict";n.d(t,{MenuContext:()=>s});const s=n(50959).createContext(null)},510618:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MENU_THEME:()=>f,Menu:()=>v});var s=n(50959),o=n(497754),i=n.n(o),r=n(650151),l=n(44681),a=n(199663),c=n(753327),u=n(370981),d=n(801808),h=n(376202),m=n(823030),p=n(230553),g=n(540191);const f=g;class v extends s.PureComponent{constructor(e){super(e),this._containerRef=null,this._scrollWrapRef=null,this._raf=null,this._scrollRaf=null,this._scrollTimeout=void 0,this._manager=new d.OverlapManager,this._hotkeys=null,this._scroll=0,this._handleContainerRef=e=>{this._containerRef=e,this.props.reference&&("function"==typeof this.props.reference&&this.props.reference(e),
"object"==typeof this.props.reference&&(this.props.reference.current=e))},this._handleScrollWrapRef=e=>{this._scrollWrapRef=e,"function"==typeof this.props.scrollWrapReference&&this.props.scrollWrapReference(e),"object"==typeof this.props.scrollWrapReference&&(this.props.scrollWrapReference.current=e)},this._handleCustomRemeasureDelegate=()=>{this._resizeForced(),this._handleMeasure()},this._handleMeasure=({callback:e,forceRecalcPosition:t}={})=>{var n,s,o,i,a,c,u,d,h,m,p,g;if(this.state.isMeasureValid&&!t)return;const{position:f}=this.props,v=(0,r.ensureNotNull)(this._containerRef);let _=v.getBoundingClientRect();const b=document.documentElement.clientHeight,y=document.documentElement.clientWidth,S=null!==(n=this.props.closeOnScrollOutsideOffset)&&void 0!==n?n:0;let w=b-0-S;const x=_.height>w;if(x){(0,r.ensureNotNull)(this._scrollWrapRef).style.overflowY="scroll",_=v.getBoundingClientRect()}const{width:E,height:C}=_,k="function"==typeof f?f(E,C,y,b):f,T=null!==(o=null===(s=null==k?void 0:k.indentFromWindow)||void 0===s?void 0:s.left)&&void 0!==o?o:0,M=y-(null!==(i=k.overrideWidth)&&void 0!==i?i:E)-(null!==(c=null===(a=null==k?void 0:k.indentFromWindow)||void 0===a?void 0:a.right)&&void 0!==c?c:0),I=(0,l.clamp)(k.x,T,Math.max(T,M)),N=(null!==(d=null===(u=null==k?void 0:k.indentFromWindow)||void 0===u?void 0:u.top)&&void 0!==d?d:0)+S,L=b-(null!==(h=k.overrideHeight)&&void 0!==h?h:C)-(null!==(p=null===(m=null==k?void 0:k.indentFromWindow)||void 0===m?void 0:m.bottom)&&void 0!==p?p:0);let D=(0,l.clamp)(k.y,N,Math.max(N,L));if(k.forbidCorrectYCoord&&D<k.y&&(w-=k.y-D,D=k.y),t&&void 0!==this.props.closeOnScrollOutsideOffset&&k.y<=this.props.closeOnScrollOutsideOffset)return void this._handleGlobalClose(!0);const A=null!==(g=k.overrideHeight)&&void 0!==g?g:x?w:void 0;this.setState({appearingMenuHeight:t?this.state.appearingMenuHeight:A,appearingMenuWidth:t?this.state.appearingMenuWidth:k.overrideWidth,appearingPosition:{x:I,y:D},isMeasureValid:!0},(()=>{this._restoreScrollPosition(),e&&e()}))},this._restoreScrollPosition=()=>{const e=document.activeElement,t=(0,r.ensureNotNull)(this._containerRef);if(null!==e&&t.contains(e))try{e.scrollIntoView()}catch(e){}else(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop=this._scroll},this._resizeForced=()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0})},this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleGlobalClose=e=>{this.props.onClose(e)},this._handleSlot=e=>{this._manager.setContainer(e)},this._handleScroll=()=>{this._scroll=(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop},this._handleScrollOutsideEnd=()=>{clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{this._handleMeasure({forceRecalcPosition:!0})}),80)},this._handleScrollOutside=e=>{e.target!==this._scrollWrapRef&&(this._handleScrollOutsideEnd(),
null===this._scrollRaf&&(this._scrollRaf=requestAnimationFrame((()=>{this._handleMeasure({forceRecalcPosition:!0}),this._scrollRaf=null}))))},this.state={}}componentDidMount(){this._handleMeasure({callback:this.props.onOpen});const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.subscribe(this,this._handleGlobalClose),null==t||t.subscribe(null,this._handleCustomRemeasureDelegate),window.addEventListener("resize",this._resize);const n=null!==this.context;this._hotkeys||n||(this._hotkeys=h.createGroup({desc:"Popup menu"}),this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleGlobalClose()}})),this.props.repositionOnScroll&&window.addEventListener("scroll",this._handleScrollOutside,{capture:!0})}componentDidUpdate(){this._handleMeasure()}componentWillUnmount(){const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.unsubscribe(this,this._handleGlobalClose),null==t||t.unsubscribe(null,this._handleCustomRemeasureDelegate),window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._handleScrollOutside,{capture:!0}),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),null!==this._scrollRaf&&(cancelAnimationFrame(this._scrollRaf),this._scrollRaf=null),this._scrollTimeout&&clearTimeout(this._scrollTimeout)}render(){const{id:e,role:t,"aria-label":n,"aria-labelledby":o,"aria-activedescendant":r,"aria-hidden":l,"aria-describedby":u,"aria-invalid":d,children:h,minWidth:f,theme:v=g,className:b,maxHeight:y,onMouseOver:S,onMouseOut:w,onKeyDown:x,onFocus:E,onBlur:C}=this.props,{appearingMenuHeight:k,appearingMenuWidth:T,appearingPosition:M,isMeasureValid:I}=this.state,N={"--ui-kit-menu-max-width":`${M&&M.x}px`,maxWidth:"calc(100vw - var(--ui-kit-menu-max-width) - 6px)"};return s.createElement(p.MenuContext.Provider,{value:this},s.createElement(m.SubmenuHandler,null,s.createElement(c.SlotContext.Provider,{value:this._manager},s.createElement("div",{id:e,role:t,"aria-label":n,"aria-labelledby":o,"aria-activedescendant":r,"aria-hidden":l,"aria-describedby":u,"aria-invalid":d,className:i()(b,v.menuWrap,!I&&v.isMeasuring),style:{height:k,left:M&&M.x,minWidth:f,position:"fixed",top:M&&M.y,width:T,...this.props.limitMaxWidth&&N},"data-name":this.props["data-name"],ref:this._handleContainerRef,onScrollCapture:this.props.onScroll,onContextMenu:a.preventDefaultForContextMenu,tabIndex:this.props.tabIndex,onMouseOver:S,onMouseOut:w,onKeyDown:x,onFocus:E,onBlur:C},s.createElement("div",{className:i()(v.scrollWrap,!this.props.noMomentumBasedScroll&&v.momentumBased),style:{overflowY:void 0!==k?"scroll":"auto",maxHeight:y},onScrollCapture:this._handleScroll,ref:this._handleScrollWrapRef},s.createElement(_,{className:v.menuBox},h)))),s.createElement(c.Slot,{reference:this._handleSlot})))}update(e){e?this._resizeForced():this._resize()}focus(e){var t;null===(t=this._containerRef)||void 0===t||t.focus(e)}}
function _(e){const t=(0,r.ensureNotNull)((0,s.useContext)(m.SubmenuContext)),n=s.useRef(null);return s.createElement("div",{ref:n,className:e.className,onMouseOver:function(e){if(!(null!==t.current&&e.target instanceof Node&&(s=e.target,null===(o=n.current)||void 0===o?void 0:o.contains(s))))return;var s,o;t.isSubmenuNode(e.target)||t.setCurrent(null)},"data-name":"menu-inner"},e.children)}v.contextType=m.SubmenuContext},192063:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_POPUP_MENU_ITEM_THEME:()=>c,PopupMenuItem:()=>d});var s=n(50959),o=n(497754),i=n(370981),r=n(32133),l=n(800417),a=n(671986);const c=a;function u(e){e.stopPropagation()}function d(e){const{id:t,role:n,"aria-label":c,"aria-selected":d,"aria-checked":h,className:m,title:p,labelRowClassName:g,labelClassName:f,shortcut:v,forceShowShortcuts:_,icon:b,isActive:y,isDisabled:S,isHovered:w,appearAsDisabled:x,label:E,link:C,showToolboxOnHover:k,showToolboxOnFocus:T,target:M,rel:I,toolbox:N,reference:L,onMouseOut:D,onMouseOver:A,onKeyDown:W,suppressToolboxClick:B=!0,theme:P=a,tabIndex:R,tagName:O,renderComponent:F,roundedIcon:H,iconAriaProps:z}=e,U=(0,l.filterDataProps)(e),V=(0,s.useRef)(null),G=(0,s.useMemo)((()=>function(e){function t(t){const{reference:n,...o}=t,i=null!=e?e:o.href?"a":"div",r="a"===i?o:function(e){const{download:t,href:n,hrefLang:s,media:o,ping:i,rel:r,target:l,type:a,referrerPolicy:c,...u}=e;return u}(o);return s.createElement(i,{...r,ref:n})}return t.displayName=`DefaultComponent(${e})`,t}(O)),[O]),q=null!=F?F:G;return s.createElement(q,{...U,id:t,role:n,"aria-label":c,"aria-selected":d,"aria-checked":h,className:o(m,P.item,b&&P.withIcon,{[P.isActive]:y,[P.isDisabled]:S||x,[P.hovered]:w}),title:p,href:C,target:M,rel:I,reference:function(e){V.current=e,"function"==typeof L&&L(e);"object"==typeof L&&(L.current=e)},onClick:function(t){const{dontClosePopup:n,onClick:s,onClickArg:o,trackEventObject:l}=e;if(S)return;l&&(0,r.trackEvent)(l.category,l.event,l.label);s&&s(o,t);n||(0,i.globalCloseMenu)()},onContextMenu:function(t){const{trackEventObject:n,trackRightClick:s}=e;n&&s&&(0,r.trackEvent)(n.category,n.event,`${n.label}_rightClick`)},onMouseUp:function(t){const{trackEventObject:n,trackMouseWheelClick:s}=e;if(1===t.button&&C&&n){let e=n.label;s&&(e+="_mouseWheelClick"),(0,r.trackEvent)(n.category,n.event,e)}},onMouseOver:A,onMouseOut:D,onKeyDown:W,tabIndex:R},void 0!==b&&s.createElement("span",{"aria-label":z&&z["aria-label"],"aria-hidden":z&&Boolean(z["aria-hidden"]),className:o(P.icon,H&&a["round-icon"]),dangerouslySetInnerHTML:{__html:b}}),s.createElement("span",{className:o(P.labelRow,g)},s.createElement("span",{className:o(P.label,f)},E)),(void 0!==v||_)&&s.createElement("span",{className:P.shortcut},(j=v)&&j.split("+").join(" + ")),void 0!==N&&s.createElement("span",{onClick:B?u:void 0,className:o(P.toolbox,{[P.showOnHover]:k,[P.showOnFocus]:T})},N));var j}},917850:(e,t,n)=>{"use strict";n.d(t,{PopupMenuSeparator:()=>l});var s=n(50959),o=n(497754),i=n.n(o),r=n(92910);function l(e){const{size:t="normal",className:n,ariaHidden:o=!1}=e
;return s.createElement("div",{className:i()(r.separator,"small"===t&&r.small,"normal"===t&&r.normal,"large"===t&&r.large,n),role:"separator","aria-hidden":o})}},28466:(e,t,n)=>{"use strict";n.d(t,{CloseDelegateContext:()=>i});var s=n(50959),o=n(370981);const i=s.createContext(o.globalCloseDelegate)},624216:(e,t,n)=>{"use strict";n.d(t,{PopupMenu:()=>h});var s=n(50959),o=n(500962),i=n(162942),r=n(8361),l=n(510618),a=n(28466);const c=s.createContext(void 0);var u=n(908783);const d=s.createContext({setMenuMaxWidth:!1});function h(e){const{controller:t,children:n,isOpened:h,closeOnClickOutside:m=!0,doNotCloseOn:p,onClickOutside:g,onClose:f,onKeyboardClose:v,"data-name":_="popup-menu-container",...b}=e,y=(0,s.useContext)(a.CloseDelegateContext),S=s.useContext(d),w=(0,s.useContext)(c),x=(0,u.useOutsideEvent)({handler:function(e){g&&g(e);if(!m)return;const t=(0,i.default)(p)?p():null==p?[]:[p];if(t.length>0&&e.target instanceof Node)for(const n of t){const t=o.findDOMNode(n);if(t instanceof Node&&t.contains(e.target))return}f()},mouseDown:!0,touchStart:!0});return h?s.createElement(r.Portal,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},s.createElement("span",{ref:x,style:{pointerEvents:"auto"}},s.createElement(l.Menu,{...b,onClose:f,onKeyboardClose:v,onScroll:function(t){const{onScroll:n}=e;n&&n(t)},customCloseDelegate:y,customRemeasureDelegate:w,ref:t,"data-name":_,limitMaxWidth:S.setMenuMaxWidth},n))):null}},8361:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>a,PortalContext:()=>c});var s=n(50959),o=n(500962),i=n(189904),r=n(801808),l=n(753327);class a extends s.PureComponent{constructor(){super(...arguments),this._uuid=(0,i.guid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);return e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"",o.createPortal(s.createElement(c.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){return null===this.context?(0,r.getRootOverlapManager)():this.context}}a.contextType=l.SlotContext;const c=s.createContext(null)},72621:(e,t,n)=>{"use strict";n.d(t,{RemoveButton:()=>c});var s=n(509806),o=n(50959),i=n(497754),r=n(72571),l=n(333765),a=n(927306);function c(e){const{className:t,isActive:c,onClick:u,onMouseDown:d,title:h,hidden:m,"data-name":p="remove-button",...g}=e;return o.createElement(r.Icon,{...g,"data-name":p,className:i(a.button,"apply-common-tooltip",c&&a.active,m&&a.hidden,t),icon:l,onClick:u,onMouseDown:d,title:h||s.t(null,void 0,n(734596))})}},753327:(e,t,n)=>{"use strict";n.d(t,{Slot:()=>o,SlotContext:()=>i});var s=n(50959);class o extends s.Component{shouldComponentUpdate(){return!1}render(){return s.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const i=s.createContext(null)},665276:(e,t,n)=>{"use strict";n.d(t,{Spinner:()=>r})
;var s=n(50959),o=n(497754),i=n(843442);n(683135);function r(e){const t=o(e.className,"tv-spinner","tv-spinner--shown",`tv-spinner--size_${i.spinnerSizeMap[e.size||i.DEFAULT_SIZE]}`);return s.createElement("div",{className:t,style:e.style,role:"progressbar"})}},515783:(e,t,n)=>{"use strict";n.d(t,{ToolWidgetCaret:()=>a});var s=n(50959),o=n(497754),i=n(72571),r=n(934587),l=n(100578);function a(e){const{dropped:t,className:n}=e;return s.createElement(i.Icon,{className:o(n,r.icon,{[r.dropped]:t}),icon:l})}},742554:(e,t,n)=>{"use strict";n.d(t,{TouchScrollContainer:()=>l});var s=n(50959),o=n(259142),i=n(650151),r=n(601227);const l=(0,s.forwardRef)(((e,t)=>{const{children:n,...i}=e,l=(0,s.useRef)(null);return(0,s.useImperativeHandle)(t,(()=>l.current)),(0,s.useLayoutEffect)((()=>{if(r.CheckMobile.iOS())return null!==l.current&&(0,o.disableBodyScroll)(l.current,{allowTouchMove:a(l)}),()=>{null!==l.current&&(0,o.enableBodyScroll)(l.current)}}),[]),s.createElement("div",{ref:l,...i},n)}));function a(e){return t=>{const n=(0,i.ensureNotNull)(e.current),s=document.activeElement;return!n.contains(t)||null!==s&&n.contains(s)&&s.contains(t)}}},493173:(e,t,n)=>{"use strict";function s(e,t,n={}){return Object.assign({},e,function(e,t,n={}){const s=Object.assign({},t);for(const o of Object.keys(t)){const i=n[o]||o;i in e&&(s[o]=[e[i],t[o]].join(" "))}return s}(e,t,n))}n.d(t,{mergeThemes:()=>s})},278029:e=>{e.exports={button:"button-GwQQdU8S",hover:"hover-GwQQdU8S",isInteractive:"isInteractive-GwQQdU8S",accessible:"accessible-GwQQdU8S",isGrouped:"isGrouped-GwQQdU8S",isActive:"isActive-GwQQdU8S",isOpened:"isOpened-GwQQdU8S",isDisabled:"isDisabled-GwQQdU8S",text:"text-GwQQdU8S",icon:"icon-GwQQdU8S"}},739357:e=>{e.exports={spinnerWrap:"spinnerWrap-cZT0OZe0"}},442919:e=>{e.exports={button:"button-merBkM5y",hover:"hover-merBkM5y",accessible:"accessible-merBkM5y",arrow:"arrow-merBkM5y",arrowWrap:"arrowWrap-merBkM5y",isOpened:"isOpened-merBkM5y"}},476853:(e,t,n)=>{"use strict";n.d(t,{HorizontalAttachEdge:()=>o,HorizontalDropDirection:()=>r,VerticalAttachEdge:()=>s,VerticalDropDirection:()=>i,getPopupPositioner:()=>c});var s,o,i,r,l=n(650151);!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(s||(s={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(o||(o={})),function(e){e[e.FromTopToBottom=0]="FromTopToBottom",e[e.FromBottomToTop=1]="FromBottomToTop"}(i||(i={})),function(e){e[e.FromLeftToRight=0]="FromLeftToRight",e[e.FromRightToLeft=1]="FromRightToLeft"}(r||(r={}));const a={verticalAttachEdge:s.Bottom,horizontalAttachEdge:o.Left,verticalDropDirection:i.FromTopToBottom,horizontalDropDirection:r.FromLeftToRight,verticalMargin:0,horizontalMargin:0,matchButtonAndListboxWidths:!1};function c(e,t){return(n,c)=>{const u=(0,
l.ensureNotNull)(e).getBoundingClientRect(),{verticalAttachEdge:d=a.verticalAttachEdge,verticalDropDirection:h=a.verticalDropDirection,horizontalAttachEdge:m=a.horizontalAttachEdge,horizontalDropDirection:p=a.horizontalDropDirection,horizontalMargin:g=a.horizontalMargin,verticalMargin:f=a.verticalMargin,matchButtonAndListboxWidths:v=a.matchButtonAndListboxWidths}=t,_=d===s.Top?-1*f:f,b=m===o.Right?u.right:u.left,y=d===s.Top?u.top:u.bottom,S={x:b-(p===r.FromRightToLeft?n:0)+g,y:y-(h===i.FromBottomToTop?c:0)+_};return v&&(S.overrideWidth=u.width),S}}},747633:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_TOOL_WIDGET_BUTTON_THEME:()=>l,ToolWidgetButton:()=>a});var s=n(50959),o=n(497754),i=n(72571),r=n(278029);const l=r,a=s.forwardRef(((e,t)=>{const{tag:n="div",icon:l,isActive:a,isOpened:c,isDisabled:u,isGrouped:d,isHovered:h,onClick:m,text:p,textBeforeIcon:g,title:f,theme:v=r,className:_,forceInteractive:b,inactive:y,"data-name":S,"data-tooltip":w,...x}=e,E=o(_,v.button,(f||w)&&"apply-common-tooltip",{[v.isActive]:a,[v.isOpened]:c,[v.isInteractive]:(b||Boolean(m))&&!u&&!y,[v.isDisabled]:Boolean(u||y),[v.isGrouped]:d,[v.hover]:h}),C=l&&("string"==typeof l?s.createElement(i.Icon,{className:v.icon,icon:l}):s.cloneElement(l,{className:o(v.icon,l.props.className)}));return"button"===n?s.createElement("button",{...x,ref:t,type:"button",className:o(E,v.accessible),disabled:u&&!y,onClick:m,title:f,"data-name":S,"data-tooltip":w},g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p),C,!g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p)):s.createElement("div",{...x,ref:t,"data-role":"button",className:E,onClick:u?void 0:m,title:f,"data-name":S},g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p),C,!g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p))}))},879530:(e,t,n)=>{"use strict";n.d(t,{ToolWidgetMenuSpinner:()=>a});var s=n(50959),o=n(497754),i=n.n(o),r=n(234404),l=n(739357);function a(e){const{className:t}=e;return s.createElement("div",{className:i()(l.spinnerWrap,t)},s.createElement(r.Loader,null))}},518799:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_TOOL_WIDGET_MENU_THEME:()=>g,ToolWidgetMenu:()=>f});var s=n(50959),o=n(497754),i=n(930202),r=n(624216),l=n(515783),a=n(800417),c=n(163694),u=n(759339),d=n(476853),h=n(930052),m=n(111706),p=n(442919);const g=p;class f extends s.PureComponent{constructor(e){super(e),this._wrapperRef=null,this._controller=s.createRef(),this._handleWrapperRef=e=>{this._wrapperRef=e,this.props.reference&&this.props.reference(e)},this._handleOpen=()=>{var e;"div"!==this.props.tag&&(null===(e=this._controller.current)||void 0===e||e.focus())},this._handleClick=e=>{e.target instanceof Node&&e.currentTarget.contains(e.target)&&(this._handleToggleDropdown(void 0,(0,m.isKeyboardClick)(e)),this.props.onClick&&this.props.onClick(e,!this.state.isOpened))},this._handleToggleDropdown=(e,t=!1)=>{const{onClose:n,onOpen:s}=this.props,{isOpened:o}=this.state,i="boolean"==typeof e?e:!o;this.setState({isOpened:i,shouldReturnFocus:!!i&&t}),i&&s&&s(),!i&&n&&n()
},this._handleClose=()=>{this.close()},this._handleKeyDown=e=>{var t;const{orientation:n="horizontal"}=this.props;if(e.defaultPrevented)return;if(!(e.target instanceof Node))return;const s=(0,i.hashFromEvent)(e);if(e.currentTarget.contains(e.target))switch(s){case 40:if("div"===this.props.tag||"horizontal"!==n)return;if(this.state.isOpened)return;e.preventDefault(),this._handleToggleDropdown(!0,!0);break;case 27:if(!this.state.isOpened||!this.props.closeOnEsc)return;e.preventDefault(),e.stopPropagation(),this._handleToggleDropdown(!1)}else{if("div"===this.props.tag)return;switch(s){case 27:{e.preventDefault();const{shouldReturnFocus:n}=this.state;this._handleToggleDropdown(!1),n&&(null===(t=this._wrapperRef)||void 0===t||t.focus());break}}}},this.state={isOpened:!1,shouldReturnFocus:!1}}render(){const{tag:e="div",id:t,arrow:n,content:i,isDisabled:r,isDrawer:c,isShowTooltip:u,title:d,className:m,hotKey:p,theme:g,drawerBreakpoint:f,tabIndex:v}=this.props,{isOpened:_}=this.state,b=o(m,g.button,{"apply-common-tooltip":u||!r,[g.isDisabled]:r,[g.isOpened]:_});return"button"===e?s.createElement("button",{type:"button",id:t,className:o(b,g.accessible),disabled:r,onClick:this._handleClick,title:d,"data-tooltip-hotkey":p,ref:this._handleWrapperRef,onKeyDown:this._handleKeyDown,tabIndex:v,...(0,a.filterDataProps)(this.props),...(0,a.filterAriaProps)(this.props)},i,n&&s.createElement("div",{className:g.arrow},s.createElement("div",{className:g.arrowWrap},s.createElement(l.ToolWidgetCaret,{dropped:_}))),this.state.isOpened&&(f?s.createElement(h.MatchMedia,{rule:f},(e=>this._renderContent(e))):this._renderContent(c))):s.createElement("div",{id:t,className:b,onClick:r?void 0:this._handleClick,title:d,"data-tooltip-hotkey":p,ref:this._handleWrapperRef,"data-role":"button",tabIndex:v,onKeyDown:this._handleKeyDown,...(0,a.filterDataProps)(this.props)},i,n&&s.createElement("div",{className:g.arrow},s.createElement("div",{className:g.arrowWrap},s.createElement(l.ToolWidgetCaret,{dropped:_}))),this.state.isOpened&&(f?s.createElement(h.MatchMedia,{rule:f},(e=>this._renderContent(e))):this._renderContent(c)))}close(){this._handleToggleDropdown(!1)}focus(){var e;null===(e=this._wrapperRef)||void 0===e||e.focus()}focusMenu(){var e;null===(e=this._controller.current)||void 0===e||e.focus()}update(){null!==this._controller.current&&this._controller.current.update()}_renderContent(e){const{menuDataName:t,minWidth:n,menuClassName:o,maxHeight:i,drawerPosition:l="Bottom",children:a}=this.props,{isOpened:h}=this.state,m={horizontalMargin:this.props.horizontalMargin||0,verticalMargin:this.props.verticalMargin||2,verticalAttachEdge:this.props.verticalAttachEdge,horizontalAttachEdge:this.props.horizontalAttachEdge,verticalDropDirection:this.props.verticalDropDirection,horizontalDropDirection:this.props.horizontalDropDirection,matchButtonAndListboxWidths:this.props.matchButtonAndListboxWidths},p=Boolean(h&&e&&l),g=function(e){return"function"==typeof e}(a)?a({isDrawer:p}):a;return p?s.createElement(c.DrawerManager,null,s.createElement(u.Drawer,{
onClose:this._handleClose,position:l,"data-name":t},g)):s.createElement(r.PopupMenu,{reference:this.props.menuReference,controller:this._controller,closeOnClickOutside:this.props.closeOnClickOutside,doNotCloseOn:this,isOpened:h,minWidth:n,onClose:this._handleClose,position:(0,d.getPopupPositioner)(this._wrapperRef,m),className:o,maxHeight:i,"data-name":t,tabIndex:"div"!==this.props.tag?-1:void 0,onOpen:this._handleOpen,onKeyDown:this.props.onMenuKeyDown,onFocus:this.props.onMenuFocus},g)}}f.defaultProps={arrow:!0,closeOnClickOutside:!0,theme:p}},481853:(e,t,n)=>{"use strict";n.d(t,{BrokerService:()=>o});var s=n(650151);class o{constructor(e){this._activeBroker=null,this._trading=e,this._trading.onConnectionStatusChange.subscribe(this,this._onStatusChange),this._onStatusChange(this._trading.connectStatus())}activeBroker(){return this._activeBroker}trading(){return this._trading}_stopService(){this.stopService(),(0,s.ensureNotNull)(this._activeBroker).currentAccountUpdate.unsubscribeAll(this)}_startService(){this.startService(),(0,s.ensureNotNull)(this._activeBroker).currentAccountUpdate.subscribe(this,this._onCurrentAccountUpdate)}_onStatusChange(e){const t=this._trading.activeBroker();this._activeBroker===t&&1===e||(null!==this._activeBroker&&(this._stopService(),this._activeBroker=null),null!==t&&1===e&&(this._activeBroker=t,this._startService(),this._lastAccountId=t.currentAccount()))}_onCurrentAccountUpdate(){const e=(0,s.ensureNotNull)(this._activeBroker);this._lastAccountId!==e.currentAccount()&&(this.stopService(),this.startService(),this._lastAccountId=e.currentAccount())}}},192607:(e,t,n)=>{"use strict";n.d(t,{LastChangeFormatter:()=>i});var s=n(815628),o=n(357407);class i{constructor(e){const{pricescale:t,minmov:n,fractional:i,minmove2:r,variableMinTick:l,precision:a,format:c}=e;this._formatter="volume"===c?new o.VolumeFormatter(null!=a?a:2):new s.PriceFormatter(t,n,i,r,l)}format(e,t,n,s=!0,o=!0){return"price"===this._formatter.type?this._formatter.format(e,t,n,s,o):this._formatter.format(e,t)}hasForexAdditionalPrecision(){return"hasForexAdditionalPrecision"in this._formatter&&this._formatter.hasForexAdditionalPrecision()}}},913042:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M8.5 3.84l.34.28 4 3.5-.66.76L9.01 5.6V14H8V5.6L4.84 8.38l-.66-.76 4-3.5.33-.28z"/></svg>'},672197:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10 6.13V8L6 5.5 10 3v2.1A5 5 0 1 1 4 10a.5.5 0 0 1 1 0 4 4 0 1 0 5-3.87Z"/></svg>'},465890:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'},100578:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},72952:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 4.5l4.39 3.61a.5.5 0 0 1-.32.89h-1.18v4.5H6.11V9H4.93a.5.5 0 0 1-.32-.89L9 4.5z"/></svg>'},833366:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" d="M7 13h7V6h1v7h7v1h-7v7h-1v-7H7v-1z"/></svg>'},119850:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 9" width="7" height="9" fill="none"><path stroke="currentColor" d="M6 5L3.5 7.5L1 5M3.5 7.5V0"/></svg>'},975361:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 9" width="7" height="9" fill="none"><path stroke="currentColor" d="M6 4L3.5 1.5L1 4M3.5 9V2"/></svg>'},133736:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 16.5c1 3 7 7 11 7 2-4 2-8.5 2-8.5s-1-3.5-2-4-4.5.5-4.5.5-3 3.5-6.5 5z"/><path stroke="currentColor" d="M15.5 11l3-6s.5-1 1.5-.5.5 1.5.5 1.5l-3 6M12 11.5l6.5 3.5M7.5 19c2-.5 4-2.5 4-2.5m0 5.5c2-1 3-3.5 3-3.5"/></svg>'},808757:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M6.5 16v4.5a1 1 0 001 1h14a1 1 0 001-1V16M14.5 18V5.5m-4 4l4-4l4 4"/></svg>'},323595:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M6.5 16v4.5a1 1 0 001 1h14a1 1 0 001-1V16M14.5 5V17m-4-3.5l4 4l4-4"/></svg>'},715336:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="11" height="20" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M5.5 14a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm0-5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM7 5.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/></svg>'},563140:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none"><circle stroke="currentColor" cx="6" cy="6" r="5.5"/><path fill="currentColor" d="M4.5 8.523V2.8h.928v4.826H8.5v.897h-4z"/></svg>'},531340:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none"><circle stroke="#F44336" cx="6" cy="6" r="5.5"/><path fill="#F44336" d="M4.267 8.636l.31-.73c.159.11.355.2.59.274.238.071.45.107.638.107.33 0 .597-.084.798-.253a.806.806 0 0 0 .302-.646.945.945 0 0 0-.17-.542c-.11-.17-.391-.353-.841-.551l-.501-.218c-.425-.185-.722-.404-.892-.657-.167-.254-.251-.559-.251-.915 0-.433.164-.792.493-1.077C5.07 3.143 5.493 3 6.008 3c.689 0 1.167.104 1.436.313l-.25.689a2.019 2.019 0 0 0-.519-.222 2.21 2.21 0 0 0-.645-.107c-.29 0-.517.077-.684.23a.77.77 0 0 0-.246.59c0 .148.03.283.089.404.06.121.141.223.246.305.108.082.326.197.654.345l.51.225c.425.188.722.412.892.674.173.258.259.588.259.99 0 .435-.188.805-.565 1.109C6.811 8.848 6.31 9 5.681 9c-.552 0-1.023-.121-1.414-.364z"/></svg>'},753074:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120" fill="none"><path fill="none" d="M0 0h120v120H0V0z"/><g clip-path="url(#a3hxvgxzo)"><path fill="none" d="M10 10h101.05v101.05H10z"/><path fill="#2A2E39" fill-rule="evenodd" clip-rule="evenodd" d="M55.47 95.26a8.1 8.1 0 0 1 6.15.04 26.05 26.05 0 0 0 31.23-8.79A26 26 0 1 0 58.9 48.7a5.54 5.54 0 0 1-4.54.42c-2.9-1-5.91-1.43-8.9-1.32a.09.09 0 0 1-.07-.14A16.29 16.29 0 0 0 41.7 24.9a16.29 16.29 0 0 0-22.73 3.7 16.28 16.28 0 0 0 5.91 24.1c1.82.92 2.64 3.66 1.45 5.3a24.63 24.63 0 0 0 5.55 34.4 24.58 24.58 0 0 0 23.58 2.85z"/><rect width="38.5" height="12.5" fill="#1E222D" stroke="#B2B5BE" stroke-width="1.5" rx="2.25" x="21.75" y="53.75"/><circle stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" cx="28.52" cy="60" r="3"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M35.25 59.75h5.22M49.4 58.75h5.22M47.17 62.25h7.45"/><rect width="38.5" height="12.5" fill="#1E222D" stroke="#B2B5BE" stroke-width="1.5" rx="2.25" x="21.75" y="73.75"/><circle stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" cx="28.52" cy="80" r="3"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M35.25 79.75h5.22M49.4 78.75h5.22M47.17 82.25h7.45"/><path fill="#1E222D" stroke="#B2B5BE" stroke-width="1.5" d="M43.75 29c0-2.35 1.9-4.25 4.25-4.25h34c2.35 0 4.25 1.9 4.25 4.25v60c0 2.35-1.9 4.25-4.25 4.25H48A4.25 4.25 0 0 1 43.75 89V29z"/><rect width="38.5" height="12.5" fill="#1E222D" stroke="#B2B5BE" stroke-width="1.5" rx="2.25" x="32.75" y="33.75"/><circle stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" cx="39.52" cy="40" r="3"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M45.25 39.75h5.22M54.5 39.75h3.71M62.5 39.75h4.12M27.63 38.25h-7M27.63 41.25h-4"/><circle fill="#1848CC" cx="64.75" cy="61.75" r="10.75"/><path fill="#D1D4DC" d="M65.48 56.79a.75.75 0 0 0-1.5 0h1.5zm-1.5 10.1a.75.75 0 0 0 1.5 0h-1.5zm0-10.1v10.1h1.5V56.8h-1.5z"/><path fill="#D1D4DC" d="M59.68 61.09a.75.75 0 0 0 0 1.5v-1.5zm10.1 1.5a.75.75 0 0 0 0-1.5v1.5zm-10.1 0h10.1v-1.5h-10.1v1.5z"/></g><defs><clipPath id="a3hxvgxzo"><path fill="#fff" d="M10 10h101.05v101.05H10z"/></clipPath></defs></svg>'},34360:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120" fill="none"><path fill="#fff" d="M0 0h120v120H0V0z"/><g clip-path="url(#aercrx3gr)"><path fill="#fff" d="M10 10h101.05v101.05H10z"/><path fill="#F0F3FA" fill-rule="evenodd" clip-rule="evenodd" d="M55.47 95.26a8.1 8.1 0 0 1 6.15.04 26.05 26.05 0 0 0 31.23-8.79A26 26 0 1 0 58.9 48.7a5.54 5.54 0 0 1-4.54.42c-2.9-1-5.91-1.43-8.9-1.32a.09.09 0 0 1-.07-.14A16.29 16.29 0 0 0 41.7 24.9a16.29 16.29 0 0 0-22.73 3.7 16.28 16.28 0 0 0 5.91 24.1c1.82.92 2.64 3.66 1.45 5.3a24.63 24.63 0 0 0 5.55 34.4 24.58 24.58 0 0 0 23.58 2.85z"/><rect width="38.5" height="12.5" fill="#fff" stroke="#1E222D" stroke-width="1.5" rx="2.25" x="21.75" y="53.75"/><circle stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" cx="28.52" cy="60" r="3"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M35.25 59.75h5.22M49.4 58.75h5.22M47.17 62.25h7.45"/><rect width="38.5" height="12.5" fill="#fff" stroke="#1E222D" stroke-width="1.5" rx="2.25" x="21.75" y="73.75"/><circle stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" cx="28.52" cy="80" r="3"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M35.25 79.75h5.22M49.4 78.75h5.22M47.17 82.25h7.45"/><path fill="#fff" stroke="#1E222D" stroke-width="1.5" d="M43.75 29c0-2.35 1.9-4.25 4.25-4.25h34c2.35 0 4.25 1.9 4.25 4.25v60c0 2.35-1.9 4.25-4.25 4.25H48A4.25 4.25 0 0 1 43.75 89V29z"/><rect width="38.5" height="12.5" fill="#fff" stroke="#1E222D" stroke-width="1.5" rx="2.25" x="32.75" y="33.75"/><circle stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" cx="39.52" cy="40" r="3"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M45.25 39.75h5.22M54.5 39.75h3.71M62.5 39.75h4.12M27.63 38.25h-7M27.63 41.25h-4"/><circle fill="#2962FF" cx="64.75" cy="61.75" r="10.75"/><path fill="#fff" d="M65.48 56.79a.75.75 0 0 0-1.5 0h1.5zm-1.5 10.1a.75.75 0 0 0 1.5 0h-1.5zm0-10.1v10.1h1.5V56.8h-1.5z"/><path fill="#fff" d="M59.68 61.09a.75.75 0 0 0 0 1.5v-1.5zm10.1 1.5a.75.75 0 0 0 0-1.5v1.5zm-10.1 0h10.1v-1.5h-10.1v1.5z"/></g><defs><clipPath id="aercrx3gr"><path fill="#fff" d="M10 10h101.05v101.05H10z"/></clipPath></defs></svg>'}}]);
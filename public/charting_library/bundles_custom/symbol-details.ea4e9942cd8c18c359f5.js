(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[46991,91859,43382],{259142:function(e,t){var n,i,a;i=[t],n=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var i={get passive(){n=!0}};window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}var a="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),o=[],r=!1,s=-1,l=void 0,c=void 0,u=function(e){return o.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},d=function(e){var t=e||window.event;return!!u(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},m=function(){setTimeout((function(){void 0!==c&&(document.body.style.paddingRight=c,c=void 0),void 0!==l&&(document.body.style.overflow=l,l=void 0)}))};e.disableBodyScroll=function(e,i){if(a){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!o.some((function(t){return t.targetElement===e}))){var m={targetElement:e,options:i||{}};o=[].concat(t(o),[m]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,i,a,o;1===t.targetTouches.length&&(i=e,o=(n=t).targetTouches[0].clientY-s,!u(n.target)&&(i&&0===i.scrollTop&&0<o||(a=i)&&a.scrollHeight-a.scrollTop<=a.clientHeight&&o<0?d(n):n.stopPropagation()))},r||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),r=!0)}}else{p=i,setTimeout((function(){if(void 0===c){var e=!!p&&!0===p.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(c=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===l&&(l=document.body.style.overflow,document.body.style.overflow="hidden")}));var h={targetElement:e,options:i||{}};o=[].concat(t(o),[h])}var p},e.clearAllBodyScrollLocks=function(){a?(o.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),r&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),r=!1),o=[],s=-1):(m(),o=[])},e.enableBodyScroll=function(e){if(a){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,o=o.filter((function(t){return t.targetElement!==e})),r&&0===o.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),r=!1)}else 1===o.length&&o[0].targetElement===e?(m(),o=[]):o=o.filter((function(t){return t.targetElement!==e}))}},void 0===(a="function"==typeof n?n.apply(t,i):n)||(e.exports=a)},174786:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});const i=function(){}},583850:e=>{e.exports={"play-button":"play-button-wO0kC0NR",icon:"icon-wO0kC0NR","color-black":"color-black-wO0kC0NR",
"color-gray":"color-gray-wO0kC0NR","color-brand":"color-brand-wO0kC0NR","size-medium":"size-medium-wO0kC0NR","size-xlarge":"size-xlarge-wO0kC0NR","size-xxlarge":"size-xxlarge-wO0kC0NR"}},457421:e=>{e.exports={"card-exterior":"card-exterior-Us1ZHpvJ"}},470048:e=>{e.exports={wrapper:"wrapper-GZajBGIm",input:"input-GZajBGIm",box:"box-GZajBGIm",icon:"icon-GZajBGIm",noOutline:"noOutline-GZajBGIm","intent-danger":"intent-danger-GZajBGIm",check:"check-GZajBGIm",dot:"dot-GZajBGIm"}},869789:e=>{e.exports={checkbox:"checkbox-vyj6oJxw",reverse:"reverse-vyj6oJxw",label:"label-vyj6oJxw",baseline:"baseline-vyj6oJxw"}},348535:e=>{e.exports={container:"container-TCHLKPuQ","container-danger":"container-danger-TCHLKPuQ","light-title":"light-title-TCHLKPuQ","light-icon":"light-icon-TCHLKPuQ",icon:"icon-TCHLKPuQ",header:"header-TCHLKPuQ","light-container-danger":"light-container-danger-TCHLKPuQ","container-warning":"container-warning-TCHLKPuQ","light-container-warning":"light-container-warning-TCHLKPuQ","container-success":"container-success-TCHLKPuQ","light-container-success":"light-container-success-TCHLKPuQ","container-default":"container-default-TCHLKPuQ","light-container-default":"light-container-default-TCHLKPuQ","text-wrap":"text-wrap-TCHLKPuQ","light-text-wrap":"light-text-wrap-TCHLKPuQ","close-button":"close-button-TCHLKPuQ","light-close-button":"light-close-button-TCHLKPuQ",informerBody:"informerBody-TCHLKPuQ",mainProblem:"mainProblem-TCHLKPuQ","header-inline":"header-inline-TCHLKPuQ","header-new-line":"header-new-line-TCHLKPuQ"}},625650:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa"}},408124:e=>{e.exports={wrapperButtons:"wrapperButtons-BJ5zzrYy"}},368020:e=>{e.exports={"main-wrapper":"main-wrapper-lXUf3pOn",closed:"closed-lXUf3pOn","widget-page":"widget-page-lXUf3pOn","info-wrapper":"info-wrapper-lXUf3pOn","area-wrapper":"area-wrapper-lXUf3pOn",open:"open-lXUf3pOn",mindsOpenArea:"mindsOpenArea-lXUf3pOn",mindsCloseArea:"mindsCloseArea-lXUf3pOn","avatar-wrapper":"avatar-wrapper-lXUf3pOn",text:"text-lXUf3pOn","dummy-button":"dummy-button-lXUf3pOn",hidden:"hidden-lXUf3pOn","user-pic":"user-pic-lXUf3pOn",img:"img-lXUf3pOn"}},21684:e=>{e.exports={container:"container-XS3QT0Gd","profile-page":"profile-page-XS3QT0Gd","buttons-wrapper":"buttons-wrapper-XS3QT0Gd"}},877861:e=>{e.exports={wrapperSnapshot:"wrapperSnapshot-WcpjieEL",imgContainer:"imgContainer-WcpjieEL",snapshot:"snapshot-WcpjieEL",snapshotIcon:"snapshotIcon-WcpjieEL",buttonWrapper:"buttonWrapper-WcpjieEL",deleteSnapshot:"deleteSnapshot-WcpjieEL"}},391172:e=>{e.exports={wrapperTextarea:"wrapperTextarea-JJuV8L4C",textarea:"textarea-JJuV8L4C",highlight:"highlight-JJuV8L4C",errors:"errors-JJuV8L4C","hint-list":"hint-list-JJuV8L4C"}},789746:e=>{e.exports={container:"container-fwlFJvzp",overlayScrollWrap:"overlayScrollWrap-fwlFJvzp",
wrapper:"wrapper-fwlFJvzp"}},930358:e=>{e.exports={title:"title-iOByzsfg",buttons:"buttons-iOByzsfg","back-button-wrapper":"back-button-wrapper-iOByzsfg","back-button":"back-button-iOByzsfg",hidden:"hidden-iOByzsfg"}},432466:e=>{e.exports={wrapper:"wrapper-E5MZri3V","informer-wrapper":"informer-wrapper-E5MZri3V",informerShow:"informerShow-E5MZri3V","informer-container":"informer-container-E5MZri3V"}},13066:e=>{e.exports={"minds-list":"minds-list-OwrUPBhv",loader:"loader-OwrUPBhv",wrapper:"wrapper-OwrUPBhv",hidden:"hidden-OwrUPBhv",containerBlock:"containerBlock-OwrUPBhv"}},423871:e=>{e.exports={"comments-title":"comments-title-AylcWMSm","opened-mind-wrap":"opened-mind-wrap-AylcWMSm","minds-item":"minds-item-AylcWMSm",loader:"loader-AylcWMSm",shown:"shown-AylcWMSm",containerBlockComments:"containerBlockComments-AylcWMSm","scroll-wrapper-container":"scroll-wrapper-container-AylcWMSm","scroll-wrapper-wrap":"scroll-wrapper-wrap-AylcWMSm"}},476924:e=>{e.exports={"update-button-container":"update-button-container-SF5tLqzv","update-button":"update-button-SF5tLqzv"}},135243:e=>{e.exports={block:"block-XB6RZul2"}},331231:e=>{e.exports={card:"card-rY32JioV",highlight:"highlight-rY32JioV",cardWithImage:"cardWithImage-rY32JioV",container:"container-rY32JioV",header:"header-rY32JioV",title:"title-rY32JioV",article:"article-rY32JioV",preview:"preview-rY32JioV"}},417969:e=>{e.exports={block:"block-bETdSLzM",badges:"badges-bETdSLzM",badgesSmall:"badgesSmall-bETdSLzM",icon:"icon-bETdSLzM"}},674440:e=>{e.exports={previewWrapper:"previewWrapper-fiV3cTWB"}},241266:e=>{e.exports={container:"container-2vhJr3UN"}},7843:e=>{e.exports={container:"container-rbdX37vm",icon:"icon-rbdX37vm"}},407786:e=>{e.exports={wrap:"wrap-kyudUIs0",checkbox:"checkbox-kyudUIs0",hovered:"hovered-kyudUIs0"}},817298:e=>{e.exports={container:"container-ZJX9Rmzv",title:"title-ZJX9Rmzv",groupWrap:"groupWrap-ZJX9Rmzv",hasDisabledSet:"hasDisabledSet-ZJX9Rmzv"}},851994:e=>{e.exports={wrap:"wrap-OfcgU7jK",item:"item-OfcgU7jK",summary:"summary-OfcgU7jK"}},574608:e=>{e.exports={notesBtn:"notesBtn-dvJzenj7"}},750473:e=>{e.exports={article:"article-RXxvb0dZ",title:"title-RXxvb0dZ",badgeEditorsPick:"badgeEditorsPick-RXxvb0dZ",previewRowItem:"previewRowItem-RXxvb0dZ",preview:"preview-RXxvb0dZ",small:"small-RXxvb0dZ",credentialsAndButtons:"credentialsAndButtons-RXxvb0dZ"}},84837:e=>{e.exports={spinnerContainer:"spinnerContainer-x19YYYvu",hidden:"hidden-x19YYYvu",emptyStateIcon:"emptyStateIcon-x19YYYvu",empty:"empty-x19YYYvu",emptyState:"emptyState-x19YYYvu"}},541644:e=>{e.exports={button:"button-DarrS1UB"}},506340:e=>{e.exports={container:"container-JXt0keHX",image:"image-JXt0keHX",title:"title-JXt0keHX",description:"description-JXt0keHX"}},374168:e=>{e.exports={header:"header-ZlZv3wVM",contentWrap:"contentWrap-ZlZv3wVM",titleWrap:"titleWrap-ZlZv3wVM",menu:"menu-ZlZv3wVM",backIcon:"backIcon-ZlZv3wVM",logoIcon:"logoIcon-ZlZv3wVM",text:"text-ZlZv3wVM",mobile:"mobile-ZlZv3wVM",drawerItem:"drawerItem-ZlZv3wVM"}},868880:e=>{e.exports={title:"title-dU_78sGI",
breadcrumbs:"breadcrumbs-dU_78sGI",article:"article-dU_78sGI",card:"card-dU_78sGI",highlight:"highlight-dU_78sGI",preview:"preview-dU_78sGI",showNewNews:"showNewNews-dU_78sGI",content:"content-dU_78sGI",icon:"icon-dU_78sGI",emptyStateWrap:"emptyStateWrap-dU_78sGI",intersectionBottom:"intersectionBottom-dU_78sGI"}},84646:e=>{e.exports={"badge-editors-pick":"badge-editors-pick-ipJU5VXX","logo-icon":"logo-icon-ipJU5VXX","variant-normal":"variant-normal-ipJU5VXX","size-small":"size-small-ipJU5VXX","size-medium":"size-medium-ipJU5VXX","size-large":"size-large-ipJU5VXX","variant-bookmark":"variant-bookmark-ipJU5VXX","bookmark-bg":"bookmark-bg-ipJU5VXX",anchor:"anchor-ipJU5VXX",text:"text-ipJU5VXX"}},585076:e=>{e.exports={badge:"badge-Pqa2qGM9",icon:"icon-Pqa2qGM9","icon-wrapper":"icon-wrapper-Pqa2qGM9","size-xsmall":"size-xsmall-Pqa2qGM9","size-small":"size-small-Pqa2qGM9","size-medium":"size-medium-Pqa2qGM9","size-large":"size-large-Pqa2qGM9","size-xlarge":"size-xlarge-Pqa2qGM9","type-important":"type-important-Pqa2qGM9","icon-important":"icon-important-Pqa2qGM9","type-exclusive":"type-exclusive-Pqa2qGM9","icon-exclusive":"icon-exclusive-Pqa2qGM9","type-flash":"type-flash-Pqa2qGM9","icon-flash":"icon-flash-Pqa2qGM9","variant-default":"variant-default-Pqa2qGM9","variant-simplified":"variant-simplified-Pqa2qGM9",content:"content-Pqa2qGM9"}},782430:e=>{e.exports={container:"container-yrIMi47q",title:"title-yrIMi47q",title_normal:"title_normal-yrIMi47q",icon:"icon-yrIMi47q",text:"text-yrIMi47q",text_large:"text_large-yrIMi47q",action:"action-yrIMi47q"}},841409:e=>{e.exports={"card-author-wrap":"card-author-wrap-BhFUdJAZ",badge:"badge-BhFUdJAZ","card-author-link":"card-author-link-BhFUdJAZ","card-author":"card-author-BhFUdJAZ","typography-social":"typography-social-BhFUdJAZ","typography-platform":"typography-platform-BhFUdJAZ"}},336877:e=>{e.exports={"broker-line":"broker-line-jUBjUycX"}},841777:e=>{e.exports={"idea-strategy-icon-wrap":"idea-strategy-icon-wrap-cbI7LT3N","size-small":"size-small-cbI7LT3N","idea-strategy-icon":"idea-strategy-icon-cbI7LT3N","size-medium":"size-medium-cbI7LT3N","strategy-long":"strategy-long-cbI7LT3N","strategy-short":"strategy-short-cbI7LT3N","strategy-education":"strategy-education-cbI7LT3N","visually-hidden-label":"visually-hidden-label-cbI7LT3N"}},713892:e=>{e.exports={"lock-icon-wrap":"lock-icon-wrap-IhooVNmA","size-small":"size-small-IhooVNmA","lock-icon":"lock-icon-IhooVNmA","size-medium":"size-medium-IhooVNmA","access-invite-only-close":"access-invite-only-close-IhooVNmA","access-invite-only-open":"access-invite-only-open-IhooVNmA","access-protected":"access-protected-IhooVNmA","access-private-idea":"access-private-idea-IhooVNmA","access-private-script":"access-private-script-IhooVNmA","visually-hidden-label":"visually-hidden-label-IhooVNmA"}},375:e=>{e.exports={"logo-icon":"logo-icon-qBRiDE1v",link:"link-qBRiDE1v","with-short-name":"with-short-name-qBRiDE1v","short-name":"short-name-qBRiDE1v"}},780488:e=>{e.exports={"publication-date":"publication-date-CgENjecZ",
"typography-social":"typography-social-CgENjecZ","typography-platform":"typography-platform-CgENjecZ"}},291066:e=>{e.exports={"script-icon-wrap":"script-icon-wrap-HwUEiHJ3","size-small":"size-small-HwUEiHJ3","script-icon":"script-icon-HwUEiHJ3","size-medium":"size-medium-HwUEiHJ3","visually-hidden-label":"visually-hidden-label-HwUEiHJ3"}},130447:(e,t,n)=>{"use strict";n.d(t,{PlayIcon:()=>p});var i=n(497754),a=n(137519),o=n.n(a),r=n(564400),s=n.n(r),l=n(350254),c=n.n(l);const u={xxlarge:o(),xlarge:s(),medium:c()};var d=n(50959),m=n(83436),h=n(583850);function p(e){const{className:t,color:n="gray",size:a="medium",...o}=e,r=function(e,t){const{className:n,color:a="black",size:o="medium",isPlayIcon:r}=t,s=r||"medium"!==o?a:"gray";return i(n,e["play-button"],e[`color-${s}`],e[`size-${"gray"===a?"medium":o}`])}(h,{...e,isPlayIcon:!0}),s=u[a];return d.createElement("div",{...o,className:r,"aria-hidden":!0},d.createElement(m.Icon,{className:h.icon,icon:s}))}},26895:(e,t,n)=>{"use strict";n.d(t,{CardExterior:()=>s});var i=n(50959),a=n(497754),o=n(457421),r=n.n(o);function s(e){const{children:t,className:n,onClick:o,reference:s,...l}=e;return i.createElement("article",{...l,className:a(r()["card-exterior"],n),onClick:o,ref:s},t)}},203223:(e,t,n)=>{"use strict";n.d(t,{CheckboxInput:()=>u});var i=n(50959),a=n(497754),o=n(8626),r=n(83436),s=n(465890),l=n(470048),c=n.n(l);function u(e){const t=a(c().box,c()[`intent-${e.intent}`],{[c().check]:!Boolean(e.indeterminate),[c().dot]:Boolean(e.indeterminate),[c().noOutline]:-1===e.tabIndex}),n=a(c().wrapper,e.className);return i.createElement("span",{className:n,title:e.title,style:e.style},i.createElement("input",{id:e.id,tabIndex:e.tabIndex,className:c().input,type:"checkbox",name:e.name,checked:e.checked,disabled:e.disabled,value:e.value,autoFocus:e.autoFocus,role:e.role,onChange:function(){e.onChange&&e.onChange(e.value)},ref:e.reference,"aria-required":e["aria-required"],"aria-describedby":e["aria-describedby"],"aria-invalid":e["aria-invalid"],...(0,o.filterDataProps)(e)}),i.createElement("span",{className:t},i.createElement(r.Icon,{icon:s,className:c().icon})))}},182120:(e,t,n)=>{"use strict";n.d(t,{Checkbox:()=>c,GroupedCheckbox:()=>u});var i=n(50959),a=n(497754),o=n(451608),r=n(203223),s=n(869789),l=n.n(s);class c extends i.PureComponent{render(){const{inputClassName:e,labelClassName:t,...n}=this.props,o=a(this.props.className,l().checkbox,{[l().reverse]:Boolean(this.props.labelPositionReverse),[l().baseline]:Boolean(this.props.labelAlignBaseline)}),s=a(l().label,t,{[l().disabled]:this.props.disabled});let c=null;return this.props.label&&(c=i.createElement("span",{className:s,title:this.props.title},this.props.label)),i.createElement("label",{className:o},i.createElement(r.CheckboxInput,{...n,className:e}),c)}}c.defaultProps={value:"on"};const u=(0,o.makeSwitchGroupItem)(c)},640027:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>a});var i=n(50959);const a=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},420548:(e,t,n)=>{
"use strict";n.d(t,{Informer:()=>p});var i=n(50959),a=n(497754),o=n(83436),r=n(4908),s=n(8626),l=n(530162),c=n(527941),u=n(499084),d=n(348535),m=n.n(d);const h={danger:l,warning:l,success:u,default:c};function p(e){const{informerIntent:t,content:n,className:l,header:c,isIconShown:u=!0,isCloseButtonShown:d,icon:p,onCloseClick:v,closeButtonLabel:g="Close",headerPlacement:b="inline",children:f,isLight:w}=e;return i.createElement("div",{className:a(m().container,m()[`container-${t}`],w&&m()[`light-container-${t}`],l),...(0,s.filterDataProps)(e),...(0,s.filterAriaProps)(e)},i.createElement("div",{className:m().informerBody},n&&i.createElement("div",{className:m().mainProblem},u&&i.createElement(o.Icon,{className:a(m().icon,w&&m()["light-icon"]),icon:null!=p?p:h[t]}),i.createElement("div",{className:a(m()["text-wrap"],w&&m()["light-text-wrap"])},c&&i.createElement("span",{className:a(w&&m()["light-title"],m().header,m()[`header-${w?"new-line":b}`])},c),i.createElement("span",null," ",n))),f),d&&i.createElement(r.CloseButton,{"aria-label":g,onClick:v,className:a(w&&m()["light-close-button"],m()["close-button"]),size:w?"xxsmall":"xsmall",preservePaddings:!w}))}},265005:(e,t,n)=>{"use strict";n.d(t,{Loader:()=>i.Loader});var i=n(386290)},386290:(e,t,n)=>{"use strict";n.d(t,{Loader:()=>s});var i=n(50959),a=n(497754),o=n(625650),r=n.n(o);function s(e){const{className:t,size:n="medium",staticPosition:o,color:s="black"}=e,l=a(r().item,r()[s],r()[n]);return i.createElement("span",{className:a(r().loader,o&&r().static,t)},i.createElement("span",{className:l}),i.createElement("span",{className:l}),i.createElement("span",{className:l}))}},451608:(e,t,n)=>{"use strict";n.d(t,{SwitchGroup:()=>i.SwitchGroup,makeSwitchGroupItem:()=>r});var i=n(367254),a=n(50959),o=n(973920);function r(e){var t;return t=class extends a.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return a.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=o.SwitchGroupContext,t}},973920:(e,t,n)=>{"use strict";n.d(t,{SwitchGroupContext:()=>o});var i=n(50959),a=n(174786);const o=(0,i.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>a.default,subscribe:a.default,unsubscribe:a.default})},367254:(e,t,n)=>{"use strict";n.d(t,{SwitchGroup:()=>o});var i=n(50959),a=n(973920);class o extends i.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,
getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return i.createElement(a.SwitchGroupContext.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((n=>t.includes(n)?!e.includes(n):e.includes(n)))}}},58407:(e,t,n)=>{"use strict";n.d(t,{OutsideEvent:()=>a});var i=n(385806);function a(e){const{children:t,...n}=e;return t((0,i.useOutsideEvent)(n))}},360102:(e,t,n)=>{"use strict";n.d(t,{NewsBadges:()=>h});var i=n(50959),a=n(497754),o=n(444372),r=n(774465),s=n(558470),l=n(585076);const c=l;function u(e){const{content:t,variant:n="default",size:o=s.BadgeSize.Medium,theme:r=c,type:u}=e,d=o!==s.BadgeSize.XSmall||"simplified"===n;return i.createElement(s.Badge,{size:o,contentClassName:r.content,title:"default"!==n?t:void 0,className:a(r.badge,r[`size-${o}`],l[`variant-${n}`],"simplified"===n&&"apply-common-tooltip",l[`type-${u}`])},d&&i.createElement("div",{className:l["icon-wrapper"]},i.createElement("span",{className:u?r[`icon-${u}`]:r.icon,"aria-hidden":!0,"aria-label":"simplified"===n?t:void 0})),"simplified"!==n&&i.createElement("span",null,u||t))}var d=n(135243),m=n.n(d);function h(e){const{isImportant:t,isExclusive:s,isFlash:l,size:c=r.BadgeSize.Medium,variant:d="simplified",className:h}=e;return i.createElement("div",{className:a(m().block,h)},l&&i.createElement(u,{size:c,variant:d,content:o.t(null,void 0,n(459506)),type:"flash"}),t&&i.createElement(u,{size:c,variant:d,content:o.t(null,void 0,n(564173)),type:"important"}),s&&i.createElement(u,{size:c,variant:d,content:o.t(null,void 0,n(667360)),type:"exclusive"}))}},317007:(e,t,n)=>{"use strict";n.d(t,{CARD_CONTENT_DEFAULT_THEME:()=>x,HeadlineCard:()=>C});var i=n(50959),a=n(497754),o=n.n(a),r=n(774465),s=n(26895),l=n(691239),c=n(995683),u=n(830493),d=n(616001),m=n(674440);const h=(0,d.getNewsImageUrlsResolver)();function p(e){const{previewImage:t,resizeMode:n=u.PreviewResizeMode.Ratio16by9,className:a}=e,r=[{srcSet:h.getNewsImageUrl(t.id,"webp"),type:"images/webp"}];return i.createElement(u.Preview,{resizeMode:n,className:o()(m.previewWrapper,a)},i.createElement(u.PreviewImage,{fallbackSrc:h.getNewsImageUrl(t.id,"jpeg"),sources:r,alt:t.alt||""}))}var v=n(83436),g=n(360102),b=n(279197),f=n(417969),w=n.n(f);function y(e){const{title:t,isImportant:n,isExclusive:a,isFlash:s,badgeSize:l,showExternalLink:c,className:u}=e,d=a||n||s;return i.createElement("div",{className:o()("apply-overflow-tooltip",w().block,u),"data-overflow-tooltip-text":t},d&&i.createElement(g.NewsBadges,{isExclusive:Boolean(a),isImportant:Boolean(n),isFlash:Boolean(s),size:l,className:o()(w().badges,l===r.BadgeSize.Small&&w().badgesSmall)}),t,c&&i.createElement(v.Icon,{className:w().icon,icon:b}))}var E=n(317772),S=n(664715),_=n(331231);const x=(0,c.mergeThemes)(_,S.HEADLINE_HEAD_DEFAULT_THEME);function C(e){
const{theme:t=x,published:n,className:o,logoUrlsOrSymbols:c,onAction:u,previewImage:d,reference:m,showExternalLink:h,title:v,showUnauthTitle:g,isExclusive:b,urgency:f,style:w,source:_,ssrTimeMs:C,badgeSize:N=r.BadgeSize.Medium,previewResizeMode:I,shouldHighlight:k,isFlash:M}=e,P=1===f,B=!g&&(null==d?void 0:d.id),L=e.link&&(0,l.isTvLink)(e.link)?void 0:"nofollow noopener";return i.createElement("a",{href:e.link,target:e.linkTarget,rel:L,className:a(t.card,B&&t.cardWithImage,k&&t.highlight,o),style:w,onClick:u,ref:m},i.createElement(s.CardExterior,{className:t.article},i.createElement("div",{className:t.container},i.createElement(S.HeadlineHead,{className:t.header,theme:t,published:n,logoUrlsOrSymbols:c,source:_,ssrTimeMs:C,showUnauthTitle:g}),B&&i.createElement(p,{previewImage:d,resizeMode:I,className:t.preview}),g?i.createElement(E.HeadlineUnauthTitle,{className:t.title}):i.createElement(y,{title:v,isImportant:P,isExclusive:b,isFlash:M,className:t.title,badgeSize:N,showExternalLink:h}))))}},57761:(e,t,n)=>{"use strict";n.d(t,{OptionsDialogController:()=>r});var i=n(111393),a=n(583912);let o;class r extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){const t=(null==e?void 0:e.symbol)?e.symbol:a.linking.proSymbol.value();this._load({...e,symbol:t}).then((e=>e.show()))}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}static getInstance(){return o||(o=new r),o}_load(e){return Promise.all([n.e(22666),n.e(62253),n.e(92191),n.e(72639),n.e(32109),n.e(9817),n.e(92108),n.e(4015),n.e(89842),n.e(76592),n.e(38669),n.e(5145),n.e(25190),n.e(36747),n.e(45896),n.e(36953),n.e(52567),n.e(21625),n.e(61631),n.e(80538),n.e(80208),n.e(60399),n.e(93285),n.e(61687),n.e(56117),n.e(962),n.e(45835),n.e(59255),n.e(95201),n.e(7526),n.e(1196),n.e(61926),n.e(64198)]).then(n.bind(n,534828)).then((t=>{var n,i;return null===(n=this._dialog)||void 0===n||n.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new t.OptionsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}))}}},254526:(e,t,n)=>{"use strict";n.d(t,{SYMBOL_TYPE_BLACK_LIST:()=>i});const i=new Set(["spread","economic"])},250378:(e,t,n)=>{"use strict";n.d(t,{BadRequestErrorResponse:()=>a});var i=n(867023);class a extends i.ErrorResponse{constructor(e){super(e),this.name="BadRequestError",e.error?this.message=e.error:this.message="unknown error"}}},867023:(e,t,n)=>{"use strict";n.d(t,{ErrorResponse:()=>i});class i{constructor(e){this._status=e.status,this._statusText=e.statusText||""}getInfo(){return{name:this.name,status:this._status,statusText:this._statusText,message:this.message}}}},729030:(e,t,n)=>{"use strict";n.d(t,{getSymbolData:()=>l});var i=n(120780),a=n(438874),o=n(250378),r=n(685503),s=n(159954);function l(e,t,n,l=!0){const c=n.join(","),u=(0,a.getSymbolDataUrl)(t,c,l),d={signal:e,method:"GET",credentials:"include",headers:{Accept:"application/json"}};return(0,i.fetch)(u,d,{logOnErrorStatus:!1}).then((e=>{
if(400===e.status){const{status:t,statusText:n}=e;return e.json().then((e=>{const i=e.errmsg;throw new o.BadRequestErrorResponse({status:t,statusText:n,error:i})}))}if(404===e.status){const{status:t,statusText:n}=e;return e.json().then((i=>{if("symbol_not_exists"===i.code){const e=i.errmsg;throw new s.SymbolDoesNotExistErrorResponse({status:t,statusText:n,error:e})}throw new r.HttpErrorResponse(e)}))}if(e.ok)return e.json().then((e=>e));throw new r.HttpErrorResponse(e)}))}},685503:(e,t,n)=>{"use strict";n.d(t,{HttpErrorResponse:()=>a});var i=n(867023);class a extends i.ErrorResponse{constructor(e){super(e),this.name="HttpErrorResponse",this._status>=200&&this._status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`}}},159954:(e,t,n)=>{"use strict";n.d(t,{SymbolDoesNotExistErrorResponse:()=>a});var i=n(867023);class a extends i.ErrorResponse{constructor(e){super(e),this.name="SymbolDoesNotExistError",this.message=e.error||"symbol does not exist"}}},438874:(e,t,n)=>{"use strict";function i(){return window.SCREENER_HOST||"https://scanner.tradingview.com"}function a(e,t){const n=i();return t?`${n}/${t}/`:1===e.length?`${n}/${e[0]}/`:`${n}/global/`}function o(e,t,n){return`${i()}/symbol?symbol=${e}&fields=${t}${n?"&no_404=true":""}`}function r(e,t){return`${i()}/enum?id=${e}&lang=${t||window.language||"en"}`}n.d(t,{getBackendUrl:()=>a,getEnumRegistryUrl:()=>r,getSymbolDataUrl:()=>o})},783359:(e,t,n)=>{"use strict";var i,a,o;n.d(t,{CONTAINS_IO_SCRIPT_TAG:()=>r,PublicationMethod:()=>a,ScriptAccessType:()=>i,ScriptType:()=>o}),function(e){e[e.Public=1]="Public",e[e.Protected=2]="Protected",e[e.InviteOnly=3]="InviteOnly"}(i||(i={})),function(e){e[e.New=0]="New",e[e.Edit=1]="Edit",e[e.Update=2]="Update"}(a||(a={})),function(e){e[e.Indicator=1]="Indicator",e[e.Strategy=2]="Strategy",e[e.Library=3]="Library"}(o||(o={}));const r="containsioscript"},540986:(e,t,n)=>{"use strict";n.d(t,{ideaFromDto:()=>o});var i=n(706433),a=n(783359);function o(e,t){return{id:e.id,imageUrl:e.image_url,authorName:e.user.username,authorId:e.user.id,authorProfileHref:(0,i.getUserProfilePath)({username:e.user.username,is_broker:e.user.is_broker}),commentsHref:`${e.chart_url}#chart-view-comment-form`,publicationTimestamp:1e3*e.date_timestamp,...void 0!==e.updated_date_timestamp?{updatedPublicationTimestamp:1e3*e.updated_date_timestamp}:{},imageSources:[{srcSet:e.image.middle_webp,type:"image/webp"}],imageFallbackSrc:e.image.middle,imageBackgroundColor:e.image.bg_color,symbolLogoUrls:e.symbol.logo_urls,symbolShortName:e.symbol.short_name,symbolPageHref:e.symbol.badge.url,symbolLogoAlt:e.symbol.badge.label,name:e.name,title:e.name,href:e.chart_url,isLiked:e.is_liked,likesCount:e.likes_count,commentsCount:e.comments_count,isEditorsPick:e.is_picked,isPublic:e.is_public,isRemovable:!1,isVisible:e.is_visible,isEducation:e.is_education,isHot:e.is_hot,scriptType:e.script_type&&r(e.script_type),isVideoIdea:e.is_video,
durationMs:e.video_duration?1e3*parseInt(e.video_duration):void 0,ideaStrategy:c(e),brokerPlan:e.user.broker_plan?e.user.broker_plan:void 0,permissions:{can_pick_ideas:Boolean(null==t?void 0:t.can_pick_ideas),can_moderate_ideas:Boolean(null==t?void 0:t.can_moderate_ideas)},moderatorButtons:[],...void 0!==e.reputation&&(null==t?void 0:t.can_see_ideas_rating)?{reputationEntries:s(e.reputation)}:{},description:e.description}}function r(e){switch(e){case"strategy":return a.ScriptType.Strategy;case"indicator":return a.ScriptType.Indicator;case"library":return a.ScriptType.Library;default:return}}function s(e){if(e)return[{label:"Total",value:e.total.toString(),childEntries:[{...l(e.ratings,"Ratings")},{...l(e.comments,"Comments")},{...l(e.age,"Age")}]},{...l(e.views,"Views")}]}function l(e,t){var n,i;return{label:t,value:(null===(n=e.complete)||void 0===n?void 0:n.toString())||"-",secondaryValue:(null===(i=e.raw)||void 0===i?void 0:i.toString())||"-"}}function c(e){if(!e.is_script)return e.is_education?"education":1===e.symbol.direction?"long":2===e.symbol.direction?"short":void 0}},163482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TECHNICALS_QS_FIELDS:()=>i,TECHNICALS_SCREENER_COLUMNS:()=>l,requiredMAColumns:()=>r,requiredOscColumns:()=>o,requiredPivotsColumns:()=>s,requiredRecommendColumns:()=>a});const i=["type","listed_exchange","pricescale","typespecs","pro_name","short_name"],a=["Recommend.Other","Recommend.All","Recommend.MA"],o=["RSI","Stoch.K","CCI20","ADX","AO","Mom","MACD.macd","Stoch.RSI.K","W.R","BBPower","UO"],r=["EMA10","SMA10","EMA20","SMA20","EMA30","SMA30","EMA50","SMA50","EMA100","SMA100","EMA200","SMA200","Ichimoku.BLine","VWMA","HullMA9"],s=["Pivot.M.Classic.S3","Pivot.M.Classic.S2","Pivot.M.Classic.S1","Pivot.M.Classic.Middle","Pivot.M.Classic.R1","Pivot.M.Classic.R2","Pivot.M.Classic.R3","Pivot.M.Fibonacci.S3","Pivot.M.Fibonacci.S2","Pivot.M.Fibonacci.S1","Pivot.M.Fibonacci.Middle","Pivot.M.Fibonacci.R1","Pivot.M.Fibonacci.R2","Pivot.M.Fibonacci.R3","Pivot.M.Camarilla.S3","Pivot.M.Camarilla.S2","Pivot.M.Camarilla.S1","Pivot.M.Camarilla.Middle","Pivot.M.Camarilla.R1","Pivot.M.Camarilla.R2","Pivot.M.Camarilla.R3","Pivot.M.Woodie.S3","Pivot.M.Woodie.S2","Pivot.M.Woodie.S1","Pivot.M.Woodie.Middle","Pivot.M.Woodie.R1","Pivot.M.Woodie.R2","Pivot.M.Woodie.R3","Pivot.M.Demark.S1","Pivot.M.Demark.Middle","Pivot.M.Demark.R1"],l=[...a,...o,...r,...s]},719885:(e,t,n)=>{"use strict";n.d(t,{TechnicalsDialogController:()=>u});var i=n(583912),a=n(111393),o=n(774280),r=n(729030),s=n(254526),l=n(163482);let c;class u extends a.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}async show(e){const t=(null==e?void 0:e.symbol)?e.symbol:i.linking.proSymbol.value();if(null==e?void 0:e.snapshot){const{snapshot:n}=e,i=await this._loadModule();this._getDialog(i,{...e,symbol:t,...n,exchange:n.listed_exchange}).show()}else{const i=async()=>{const{snapshoter:e}=await n.e(51030).then(n.bind(n,795394));return e().getSnapshot(t,new Set(l.TECHNICALS_QS_FIELDS))
},[a,o]=await Promise.all([this._loadModule(),i()]);if("error"===o.status)return void this._getDialog(a,{...e,symbol:t}).show();this._getDialog(a,{...e,symbol:t,...o.values,exchange:o.values.listed_exchange}).show()}}async canBeShown(e){const t=e||i.linking.proSymbol.value();if(!t)return!1;const a=new Set([...l.TECHNICALS_QS_FIELDS,"description"]),c=await(async()=>{const{snapshoter:e}=await n.e(51030).then(n.bind(n,795394));return e().getSnapshot(t,a)})();if("error"===c.status)return!1;const{values:{type:u,listed_exchange:d,description:m}}=c;if(!s.SYMBOL_TYPE_BLACK_LIST.has(u))try{const e=(0,o.getTickerSymbol)(t,u),n=await(0,r.getSymbolData)(null,e,["Recommend.All"]);return Boolean(n&&0!==Object.keys(n).length&&m&&d&&u)}catch(e){return!1}return!1}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}static getInstance(){return c||(c=new u),c}_getDialog(e,t){var n,i;return null===(n=this._dialog)||void 0===n||n.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new e.TechnicalsDialogRenderer(t),this._dialog.visible().subscribe(this._subscribe),this._dialog}_loadModule(){return Promise.all([n.e(58433),n.e(22666),n.e(62253),n.e(5993),n.e(32109),n.e(9817),n.e(53842),n.e(92108),n.e(4015),n.e(68992),n.e(89842),n.e(38669),n.e(5145),n.e(25190),n.e(36747),n.e(45896),n.e(48155),n.e(52567),n.e(21625),n.e(61631),n.e(80538),n.e(25626),n.e(39760),n.e(80208),n.e(98625),n.e(27825),n.e(60399),n.e(23683),n.e(17905),n.e(39295),n.e(962),n.e(28424),n.e(7526),n.e(97829),n.e(71138)]).then(n.bind(n,948549))}}},616001:(e,t,n)=>{"use strict";n.d(t,{getNewsImageUrlsResolver:()=>s});var i=n(650151),a=n(588948);class o{constructor(e){(0,i.assert)(""!==e,"S3 base url must be a non-empty string"),this._baseUrl=e}getNewsProviderLogoUrls(e){return(0,i.assert)(""!==e,"logo id must be a non-empty string"),[this._baseUrl+`logo/${e}--theme-light.svg`,this._baseUrl+`logo/${e}--theme-dark.svg`]}getNewsImageUrl(e,t="jpeg"){return(0,i.assert)(""!==e,"image id must be a non-empty string"),this._baseUrl+`image/${e}-resized.${t}`}}let r;function s(){if(!r){const e=(0,a.getInitData)(),t=e.settings?e.settings.S3_NEWS_IMAGE_SERVICE_BASE_URL:"";r=new o(t)}return r}},971417:(e,t,n)=>{"use strict";function i(e){return e===a(e)}function a(e){const t=e.indexOf("$"),n=e.indexOf("@");return t<0&&n>=0?null:e.substring(Math.max(t+1,0),n>=0?n:e.length)}function o(e){return e.startsWith("PUB;")}function r(e){return e.startsWith("USER;")}function s(e){return e.startsWith("STD;")}function l(e){return e.includes("Candlestick%1Pattern%1")}function c(e){return e.startsWith("EDGR_")}n.d(t,{extractPineId:()=>a,isCandleStickId:()=>l,isCustomPineId:()=>r,isEdgrPineId:()=>c,isPineIdString:()=>i,isPublishedPineId:()=>o,isStandardPineId:()=>s})},273058:(e,t,n)=>{"use strict";n.d(t,{EtfAnalysisDialogController:()=>o});var i=n(111393);let a;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){var e
;null===(e=this._dialog)||void 0===e||e.hide()}static getInstance(){return a||(a=new o),a}_load(e){return Promise.all([n.e(68716),n.e(40273),n.e(74906),n.e(67647),n.e(77731),n.e(22666),n.e(62253),n.e(92191),n.e(72639),n.e(32109),n.e(9817),n.e(92108),n.e(4015),n.e(88548),n.e(48986),n.e(68992),n.e(89842),n.e(81643),n.e(38669),n.e(5145),n.e(25190),n.e(36747),n.e(45896),n.e(89261),n.e(84452),n.e(21860),n.e(52567),n.e(40866),n.e(21625),n.e(61631),n.e(84372),n.e(80538),n.e(89053),n.e(35542),n.e(66886),n.e(50254),n.e(89277),n.e(24510),n.e(80208),n.e(43981),n.e(66863),n.e(51157),n.e(27702),n.e(72786),n.e(53724),n.e(60399),n.e(50576),n.e(36464),n.e(962),n.e(13133),n.e(85464),n.e(76819),n.e(55639),n.e(40360),n.e(87445),n.e(7526),n.e(76987),n.e(65925),n.e(96824),n.e(58534)]).then(n.bind(n,635722)).then((t=>{var n,i;return null===(n=this._dialog)||void 0===n||n.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new t.EtfAnalysisDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}))}}},332450:(e,t,n)=>{"use strict";n.d(t,{CLOSE_POPUPS_AND_DIALOGS_COMMAND:()=>i,breakpointList:()=>a});const i="CLOSE_POPUPS_AND_DIALOGS_COMMAND",a=[1920,1440,1280,1024,768,480,0]},711496:(e,t,n)=>{"use strict";n.d(t,{hasFinancialsByAvailabilityFlags:()=>u,hasFinancialsByTypespecs:()=>c});var i=n(519073);const a=new Set(["stock","dr","right","warrant","structured","bond"]),o=new Set(["mutual","unit","trust","reit","closedend","etn"]),r=new Set(["etn"]),s=new Set(["convertible","corporate"]),l=new Set(["cfd"]);function c(e,t){return!(e&&t&&(0,i.isEtf)(e,t))&&("structured"===e&&(null==t?void 0:t.length)?t.filter((e=>r.has(e))).length>0:"fund"===e&&(null==t?void 0:t.length)?t.filter((e=>o.has(e))).length>0:"bond"===e&&(null==t?void 0:t.length)?t.filter((e=>s.has(e))).length>0:"stock"===e&&(null==t?void 0:t.length)?0===t.filter((e=>l.has(e))).length:Boolean(e&&a.has(e)))}function u(e,t,n){if(t&&n&&(0,i.isEtf)(t,n))return!1;const{dividendsAvailability:a,earningsAvailability:o,financialsAvailability:r}=e;return 1===r||1===a||1===o}},691328:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DetailsWrapper:()=>Zn});var i=n(50959),a=n(740619),o=n(386942),r=n(870679),s=n(57933),l=n(62802);const c=new Set(["Ranges","BidAndAsk"]);var u=n(77122),d=n(293612),m=n(500962),h=n(497754),p=n.n(h),v=n(494966),g=n(291285),b=n(894729),f=n(444372),w=n(316909),y=n(137674),E=n(361991),S=n(574608);function _(e){const{symbolName:t}=e;return i.createElement(w.ToolWidgetIconButton,{title:f.t(null,void 0,n(478378)),className:S.notesBtn,icon:E,onClick:function(){window.runOrSignIn((()=>{(0,y.createSymbolNote)(t)}),{source:"Add text note in details"})},"data-name":"details-add-note-button"})}var x=n(70829),C=n(83436),N=n(312420),I=n(182120),k=n(707957),M=n(320116),P=n(345848),B=n(251954),L=n(332450),R=n(125226),z=n(407786),T=n(29834);const A=[{widget:"BidAndAsk",label:f.t(null,void 0,n(267662))},{widget:"Ranges",label:f.t(null,void 0,n(837992))},{widget:"News",label:f.t(null,void 0,n(998161))},{widget:"Ideas",
label:f.t(null,void 0,n(870840))},{widget:"Minds",label:f.t(null,void 0,n(998431))},{widget:"Notes",label:f.t(null,void 0,n(385720))},{widget:"KeyStats",label:f.t(null,void 0,n(382031))},{widget:"Earnings",label:f.t(null,void 0,n(783851))},{widget:"Dividends",label:f.t(null,void 0,n(634135))},{widget:"Financials",label:f.t(null,void 0,n(677720))},{widget:"Performance",label:f.t(null,void 0,n(663089))},{widget:"Technicals",label:f.t(null,{context:"study"},n(950110))},{widget:"AnalystRecommendations",label:f.t(null,void 0,n(217382))},{widget:"Profile",label:f.t(null,void 0,n(497194))}];(0,R.isFeatureEnabled)("options_details_widget")&&A.push({widget:"Options",label:f.t(null,{context:"derivatives"},n(738060))});const O=new k.Delegate;function D(e){const{disabledSet:t,onDisabledSetChange:a}=e;return(0,i.useEffect)((()=>{const e=()=>{O.fire()};return B.subscribe(L.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null),()=>{B.unsubscribe(L.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null)}}),[]),i.createElement(M.CloseDelegateContext.Provider,{value:O},i.createElement(x.ToolWidgetMenu,{className:z.wrap,arrow:!1,"data-name":"details-settings-button",content:i.createElement(C.Icon,{icon:T}),isShowTooltip:!0,title:f.t(null,void 0,n(389517)),horizontalDropDirection:N.HorizontalDropDirection.FromRightToLeft,horizontalAttachEdge:N.HorizontalAttachEdge.Right},A.map((e=>{const{widget:n,label:a}=e;return!d.moveIdeasAndMindsIntoNewsTab||"Ideas"!==n&&"Minds"!==n?i.createElement(I.Checkbox,{key:n,className:z.checkbox,name:n,label:a,checked:!t.has(n),onChange:o(n)}):null}))));function o(e){return()=>{const n=new Set(t);n.has(e)?(n.delete(e),(0,P.trackEvent)("GUI","Details",`${e} on`)):(n.add(e),(0,P.trackEvent)("GUI","Details",`${e} off`)),a(n)}}}var U=n(634993),H=n(700134),V=n(762104),G=n(511214),W=n(293014),F=n(814133),Z=n(338115),$=n(875264),X=n(428026),j=n(722331),q=n(851994);function J(e){const{listedExchange:t,type:a,typespecs:o,pricescale:r,hasOptions:s}=e,l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=()=>{var e;null===(e=l.current)||void 0===e||e.close()};return B.subscribe(L.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null),()=>{B.unsubscribe(L.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null)}}),[]),i.createElement(x.ToolWidgetMenu,{className:q.wrap,"data-name":"details-metrics-button",arrow:!1,content:i.createElement(C.Icon,{icon:F}),isShowTooltip:!0,title:f.t(null,void 0,n(644400)),horizontalDropDirection:N.HorizontalDropDirection.FromLeftToRight,horizontalAttachEdge:N.HorizontalAttachEdge.Left,ref:l},i.createElement(U.PopupMenuItem,{className:q.item,label:f.t(null,void 0,n(677720)),icon:X,onClick:function(){var e;(0,H.showFinancialsDialog)(),null===(e=l.current)||void 0===e||e.close(),(0,P.trackEvent)("GUI","Financials","Detail header")}}),i.createElement(U.PopupMenuItem,{className:q.item,label:f.t(null,void 0,n(36772)),icon:Z,onClick:function(){var e;(0,G.showTechnicalsDialog)({snapshot:t&&a?{listed_exchange:t,type:a,typespecs:o,pricescale:r}:void 0,shouldForceFocus:!1}),null===(e=l.current)||void 0===e||e.close(),(0,
P.trackEvent)("GUI","Detail header","Technicals")}}),i.createElement(U.PopupMenuItem,{className:q.item,label:f.t(null,void 0,n(436972)),icon:$,onClick:function(){var e;(0,V.showForecastDialog)(),null===(e=l.current)||void 0===e||e.close(),(0,P.trackEvent)("GUI","Detail header","Forecast")}}),s&&(0,R.isFeatureEnabled)("options_overlay")&&i.createElement(U.PopupMenuItem,{className:q.item,label:f.t(null,{context:"derivatives"},n(738060)),icon:j,onClick:function(){var e;(0,W.showOptionsDialog)(),null===(e=l.current)||void 0===e||e.close(),(0,P.trackEvent)("GUI","Detail header","Options")}}))}var Q=n(891130),K=n(650151),Y=n(514586),ee=n(817298);function te(e){const{complete:t,logoId:n,symbolName:a,baseCurrencyLogoId:o,currencyLogoId:r,disabledSet:s,onDisabledSetChange:l,typespecs:c,pricescale:d,listedExchange:h,symbolType:f,hasOptions:w}=e,{header:y}=(0,Q.useEnsuredContext)(Y.DetailsContext),E=(0,g.useCompleteOrTimeout)(a,Boolean(t));u.enabled("show_symbol_logos");return m.createPortal(i.createElement("div",{className:ee.container},!u.enabled("widget")&&i.createElement(b.SymbolLogo,{logoId:n,currencyLogoId:r,baseCurrencyLogoId:o,placeholder:E?(0,v.safeShortName)(a)[0]:void 0}),i.createElement("span",{className:ee.title},(0,v.safeShortName)(a)),i.createElement("div",{className:p()(ee.groupWrap,s&&ee.hasDisabledSet)},!u.enabled("widget")&&i.createElement(J,{pricescale:d,listedExchange:h,type:f,typespecs:c,hasOptions:w}),!u.enabled("widget")&&i.createElement(_,{symbolName:a}),s&&l&&i.createElement(D,{disabledSet:s,onDisabledSetChange:l}))),(0,K.ensureNotNull)(y))}var ne=n(896618);const ie=d.moveIdeasAndMindsIntoNewsTab;function ae(e){const{detailsHeaderProps:t,detailsInfoProps:n,newsPreview:a,widgetWidth:r,showNews:d,visibility:m}=e,[h,p]=(0,i.useState)({showMinds:!1,showIdeas:!1,showNotes:!1}),[v,g]=u.enabled("widget")?[]:function(){const[e,t]=(0,i.useState)((function(){const e=l.getJSON("details.disabledSet"),t=l.getBool("details.force_uncheck_ranges_03_2023"),n=l.getBool("details.force_uncheck_bid_ask_03_2023");return t||(e&&!e.includes("Ranges")&&e.push("Ranges"),l.setValue("details.force_uncheck_ranges_03_2023",!0)),n||(e&&!e.includes("BidAndAsk")&&e.push("BidAndAsk"),l.setValue("details.force_uncheck_bid_ask_03_2023",!0)),new Set(null!=e?e:[...c])}));return[e,function(e){t(e),l.setJSON("details.disabledSet",Array.from(e))}]}(),b=(0,o.useSelector)(s.selectAllSymbolNotesGroups),f=(0,o.useSelector)(s.selectNotesStatus);return(0,i.useEffect)((()=>{!(null==n?void 0:n.proName)&&(null==n?void 0:n.invalid)||(null==n?void 0:n.proName)?p({showIdeas:!0,showMinds:!0,showNotes:!0}):(null==n?void 0:n.proName)||p({showIdeas:!1,showMinds:!1,showNotes:!1})}),[null==n?void 0:n.proName,null==n?void 0:n.invalid]),i.createElement(i.Fragment,null,t&&i.createElement(te,{disabledSet:v,onDisabledSetChange:g,...t}),n&&i.createElement(ne.Details,{...n,newsPreview:a,widgetWidth:r,symbolNotes:b,notesStatus:f,disabledSet:v,showIdeas:!ie&&h.showIdeas,showMinds:!ie&&h.showMinds,showNotes:h.showNotes,showNews:d,visibility:m}))}
var oe=n(631078),re=n(541558),se=n(14325),le=n(352137),ce=n(479592),ue=n(795394),de=n(876332);n(665570);function me(e){return{symbolName:e}}function he(e){return{source:"RightToolbar",symbol:e,dividendsData:{hasDividends:void 0}}}var pe=n(316109),ve=n(871965),ge=n(378661),be=n(421219),fe=n(777453),we=n(495916),ye=n(439652),Ee=n(661728),Se=n(583912),_e=n(515828),xe=n(175625),Ce=n(589352),Ne=n(541644);function Ie(e){const{filtersState:t,onBack:o,mindOpened:r,symbol:s,onFilterChange:l}=e,c=(0,a.useHistory)();return i.createElement(xe.SymbolGroupHeaderImpl,{"data-name":"details-symbol-minds-header",onBack:function(){if(r)return void o();if("user"===t)return void l("symbol");c.replace("/")},symbol:"symbol"===t?s:"",text:"user"===t?f.t(null,void 0,n(871640)):f.t(null,{replace:{symbol:(0,v.safeShortName)(s)}},n(608091)),rightSlot:"symbol"===t?i.createElement(w.ToolWidgetIconButton,{className:p()(Ne.button,"apply-common-tooltip"),icon:Ce,onClick:function(){l("user")},title:f.t(null,void 0,n(871640))}):null})}var ke=n(774860),Me=n(112844),Pe=n(181905),Be=n(132704),Le=n(541966),Re=n(643528),ze=n(583835),Te=n(18182),Ae=n(586240);function Oe(e){const{title:t,children:n,icon:a}=e,[o,r]=i.useState(!1),s=i.useRef(null);return i.createElement(i.Fragment,null,i.createElement(Re.LightButton,{iconOnly:!0,reference:s,size:"small",color:"gray",variant:"quiet-primary",startIcon:a,title:t,"data-name":e["data-name"],onClick:function(){r(!o)},isActive:o,"aria-checked":o}),o&&i.createElement(Te.MatchMedia,{rule:Ae["media-phone-vertical"]},(e=>n({isMobileWidth:e,buttonRef:s,onClose:l}))));function l(){r(!1)}}var De=n(844996);const Ue=i.lazy((async()=>({default:(await Promise.all([n.e(933),n.e(8387)]).then(n.bind(n,414832))).MindsSettingsDropdownMenuDesktop}))),He=i.lazy((async()=>({default:(await Promise.all([n.e(933),n.e(30983)]).then(n.bind(n,445402))).MindsSettingsDropdownMenuMobile})));function Ve(e){const t=f.t(null,void 0,n(389517));return i.createElement(Oe,{icon:De,title:t,"data-name":"minds-settings-button"},(({isMobileWidth:t,buttonRef:n,onClose:a})=>i.createElement(i.Suspense,{fallback:null},t?i.createElement(He,{onClose:a,...e}):i.createElement(Ue,{onClose:a,buttonRef:n,...e}))))}var Ge=n(310614),We=n(930358);function Fe(e){const{symbol:t,hidden:n,headerWithSymbol:a,header:o,onFilterChange:r,filtersState:s}=e,l=(0,ze.useLogos)(t);return i.createElement(i.Fragment,null,i.createElement("h3",{className:h(We.title,n&&We.hidden)},a&&i.createElement(b.SymbolLogo,{logoId:l.logoid,baseCurrencyLogoId:l["base-currency-logoid"],currencyLogoId:l["currency-logoid"],size:"xsmall"}),i.createElement("span",null,o),i.createElement("div",{className:h(We.buttons,n&&We.hidden)},i.createElement(Ve,{filtersState:s,onFilterChange:r}))))}function Ze(e){const{headerWithSymbol:t,header:a,hidden:o,onBack:r,symbol:s}=e,l=(0,ze.useLogos)(s);return i.createElement("div",{className:h(We["back-button-wrapper"],o&&We.hidden)},i.createElement(Re.LightButton,{"aria-label":f.t(null,void 0,n(762592)),className:We["back-button"],startIcon:Ge,color:"gray",size:"small",
iconOnly:!0,variant:"quiet-primary",onClick:r}),i.createElement("h3",{className:h(We.title,o&&We.hidden)},t&&i.createElement(b.SymbolLogo,{logoId:l.logoid,baseCurrencyLogoId:l["base-currency-logoid"],currencyLogoId:l["currency-logoid"],size:"xsmall"}),i.createElement("span",null,a)))}const $e=i.memo((e=>{const{filtersState:t,onBack:a,mindOpened:o,symbol:r,onFilterChange:s}=e,l="user"!==t,c=f.t(null,{replace:{symbol:(0,v.safeShortName)(r)}},n(419146)),u=f.t(null,void 0,n(998431)),d=l?c:u;return i.createElement(i.Fragment,null,i.createElement(Ze,{headerWithSymbol:l,header:d,onBack:a,symbol:r,hidden:!o}),i.createElement(Fe,{onFilterChange:s,headerWithSymbol:l,header:d,filtersState:t,symbol:r,hidden:o}))}));function Xe(e){const{container:t,mindOpened:n,symbol:a,onBack:o,widgetId:r,onFilterChange:s,filterState:l,HeaderComponent:c=$e}=e;return m.createPortal(i.createElement(c,{filtersState:l,mindOpened:n,symbol:a,onBack:o,widgetId:r,onFilterChange:s}),t)}var je=n(143543),qe=n(224743),Je=n(265005),Qe=n(735686),Ke=n(98354),Ye=n(848830),et=n(342395),tt=n(915812),nt=n(444530),it=n(430159),at=n(368020);function ot(e){var t,n;const[a,o]=(0,i.useState)({isAuthenticated:window.is_authenticated,username:window.user.username}),r=(0,i.useRef)(null),{text:s,onOpen:l,isOpened:c,buttonText:u,placement:d}=e,[h,v]=(0,i.useState)(!1),g=(0,i.useRef)(null),b=(0,nt.useResizeObserver)((e=>{v(e[0].contentRect.width>300)})),[f,w]=(0,i.useState)(c),y=p()(at["area-wrapper"],c?at.open:at.closed,at[d]);return(0,i.useEffect)((()=>{o({isAuthenticated:window.is_authenticated,username:window.user.username})}),[]),(0,i.useEffect)((()=>{c&&w(!0)}),[c]),i.createElement("div",{ref:b,onClick:function(){c||(0,it.runOrSigninWithFeature)((()=>{l&&l(!0)}),{feature:"socialPublish",source:"Minds button"})},className:p()(at["main-wrapper"],at[d],{[at.closed]:!f})},h?i.createElement("div",{className:p()(at["info-wrapper"],at[d])},a.isAuthenticated&&i.createElement("div",{className:p()(at["avatar-wrapper"],at[d])},i.createElement("span",{className:at["user-pic"]},i.createElement("img",{src:null!==(t=window.user.userpic_mid)&&void 0!==t?t:"",className:p()("tv-user-avatar__image",at.img),alt:""}))),i.createElement("span",{className:p()(at.text,at[d],c&&at.open)},c&&a.isAuthenticated?a.username:s),!f&&i.createElement(tt.SquareButton,{size:"xsmall",type:"button","aria-label":u,className:p()(at["dummy-button"],at[d],{[at.hidden]:c})},u)):i.createElement("button",{ref:g,title:u,"aria-label":u,className:at["info-wrapper"]},a.isAuthenticated&&i.createElement("div",{className:p()(at["avatar-wrapper"],at[d])},i.createElement("span",{className:at["user-pic"]},i.createElement("img",{src:null!==(n=window.user.userpic_mid)&&void 0!==n?n:"",className:p()("tv-user-avatar__image",at.img),alt:""}))),i.createElement("span",{className:p()(at.text,at[d],c&&at.open)},c&&a.isAuthenticated?a.username:s)),f&&i.createElement("div",{ref:r,onAnimationEnd:function(){var e;c||((0,m.flushSync)((()=>w(!1))),"details"!==d&&(null===(e=g.current)||void 0===e||e.focus()))},className:y},e.children))}
var rt=n(728811),st=n(481058),lt=n(470316),ct=n(210070),ut=n(820107),dt=n(391172);function mt(e){const{textareaRef:t,textareaId:n,value:a,minLength:o,maxLength:r,placeholder:s,isErrors:l,children:c}=e,u=(0,i.useRef)(null),[d,m]=(0,i.useState)(!1);(0,i.useEffect)((()=>{m(null!==u.current&&null!==t.current)}),[]),(0,i.useLayoutEffect)((()=>{function e(){n.style.height="0",n.style.height=n.scrollHeight+"px"}const n=(0,K.ensureNotNull)(t.current);return n.addEventListener("input",e,!1),n.setAttribute("style","height:"+n.scrollHeight+"px"),()=>{n.removeEventListener("input",e)}}),[]);const p=(0,i.useCallback)((t=>{e.onChange(t.target.value)}),[e.onChange]),v=(0,i.useCallback)(((n,i,a)=>{var o;e.onChange(i),null===(o=t.current)||void 0===o||o.setSelectionRange(a,a)}),[e.onChange,a]);return i.createElement("div",{onMouseDown:function(e){e.preventDefault()},onClick:function(){var e;null===(e=t.current)||void 0===e||e.focus()},ref:u,className:dt.wrapperTextarea},i.createElement("textarea",{onMouseDown:function(e){e.stopPropagation()},id:n,ref:t,minLength:o,maxLength:r,className:dt.textarea,placeholder:s,value:a,onChange:p}),i.createElement("div",{className:h(dt.highlight,l&&dt.errors)}),d&&i.createElement(ut.UsernameHintList,{input:t.current,container:u.current,simpleMode:!1,className:dt["hint-list"],fullBorder:!0,maxItems:10,onItemSelected:v}),c)}var ht=n(947928),pt=n(414044),vt=n(552019),gt=n(877861);function bt(e){const{snapshotURL:t,onRemove:a}=e;return i.createElement("div",{className:gt.wrapperSnapshot},i.createElement("div",{className:gt.imgContainer},i.createElement("img",{src:t,className:gt.snapshot,alt:f.t(null,void 0,n(502927))})),i.createElement("div",{className:gt.buttonWrapper},i.createElement("button",{"aria-label":f.t(null,void 0,n(830691)),className:gt.deleteSnapshot,onClick:a},i.createElement(C.Icon,{className:gt.snapshotIcon,icon:vt}))))}var ft=n(611325),wt=n(879092),yt=n(408124);function Et(e){const{disabledSnapshotButton:t,onAttachSnapshot:a,onSymbolSearch:o,snapshotURL:r,onRemoveSnapshot:s}=e;return i.createElement("div",{onClick:function(e){e.target!==e.currentTarget&&e.stopPropagation()},className:yt.wrapperButtons},r&&i.createElement(bt,{snapshotURL:r,onRemove:s}),a&&i.createElement(Re.LightButton,{"aria-label":f.t(null,void 0,n(549428)),startIcon:ft,className:"apply-common-tooltip",title:f.t(null,void 0,n(549428)),size:"xsmall",color:"gray",variant:"ghost",iconOnly:!0,onClick:a,disabled:t}),o&&i.createElement(Re.LightButton,{"aria-label":f.t(null,void 0,n(326915)),className:"apply-common-tooltip",title:f.t(null,void 0,n(57590)),startIcon:wt,size:"xsmall",color:"gray",variant:"ghost",iconOnly:!0,onClick:o}))}var St=n(201089),_t=n(640027),xt=n(385806),Ct=n(122272),Nt=n(21684);const It=(0,St.getLogger)("Minds.Form"),kt=i.memo((e=>{var t;const{onClose:a,editableItem:o,setEditableItem:r,takeChartSnapshot:s,minLength:l,maxLength:c,placeholderText:u,buttonText:d,placement:m}=e,[h,p]=(0,i.useState)(!1),[v,g]=(0,i.useState)([]),b=(0,i.useRef)(null),w=(0,st.createDomId)("text"),y=(0,_t.useIsMounted)(),E=(0,
i.useCallback)((e=>{const t=(0,lt.hashFromEvent)(e);t===lt.Modifiers.Mod+13&&k(e),27===t&&(a(),e.stopPropagation())}),[k]),S={"widget-page":"small","new-widget-page":"small",widgetbar:"xsmall","profile-page":"medium",details:"xsmall",chart:"small"},_=(0,i.useCallback)((()=>{const e=o.text.trim();return(0,pt.languageIsValid)(e).isValid&&e.length>0}),[o]),x=(0,xt.useOutsideEvent)({mouseDown:!0,touchStart:!0,handler:I});(0,i.useEffect)((()=>{var e,t;null===(e=b.current)||void 0===e||e.focus(),null===(t=b.current)||void 0===t||t.setSelectionRange(b.current.value.length,b.current.value.length)}),[]);const C=o.snapshot_id;(0,i.useEffect)((()=>{e.isOpened||I()}),[e.isOpened]);const N=void 0!==C?null===(t=(0,rt.createSnapshotImageUrls)(C))||void 0===t?void 0:t.url:void 0;return i.createElement("div",{ref:x},v.length>0&&i.createElement(ct.Informer,{errors:v}),i.createElement("form",{onKeyDown:E,onSubmit:k,noValidate:!0},i.createElement(mt,{textareaRef:b,textareaId:w,minLength:l,maxLength:c,placeholder:u,value:o.text,onChange:function(e){r({...o,text:e});const t=(0,pt.languageIsValid)(e);g(t.errors)},isErrors:v.length>0},(void 0!==s||void 0!==e.symbolSearch)&&i.createElement(Et,{snapshotURL:N,onRemoveSnapshot:function(){r({...o,snapshot_id:void 0})},onAttachSnapshot:void 0!==s?async function(e){if(e.preventDefault(),void 0===s)return;try{const e=await s();r({...o,snapshot_id:e})}catch(e){It.logError(`Error while taking chart snapshot: ${e.message}`),g([f.t(null,void 0,n(27649))])}}:void 0,onSymbolSearch:void 0!==e.symbolSearch?async function(t){var n,i,a,s,l;if(t.preventDefault(),e.symbolSearch){const t=(await e.symbolSearch())[0],c=t.symbol,u=null!==(i=null===(n=b.current)||void 0===n?void 0:n.selectionStart)&&void 0!==i?i:o.text.length-1;let d=t.resolved?`${(0,Ct.resolveMindsInputSymbol)(c)} `:`${c} `;" "!==o.text[u-1]&&(d=" "+d),r({...o,text:o.text.slice(0,u)+d+o.text.slice(u)}),null===(a=b.current)||void 0===a||a.focus(),null===(s=b.current)||void 0===s||s.setAttribute("style","height:"+(null===(l=b.current)||void 0===l?void 0:l.scrollHeight)+"px")}}:void 0,disabledSnapshotButton:void 0!==C})),i.createElement("div",{className:Nt["buttons-wrapper"]},i.createElement(tt.SquareButton,{type:"button","aria-label":f.t(null,void 0,n(620036)),size:S[m],variant:"secondary",color:"gray",stretch:!0,onClick:a},f.t(null,void 0,n(620036))),i.createElement(ht.SubmitButton,{size:S[m],disabled:!_(),text:d,loader:h}))));function I(){g([])}async function k(t){var n,i,a;if(t.preventDefault(),v.length>0)return void(null===(n=b.current)||void 0===n||n.focus());const r=o.text.trim();let s=(0,pt.languageIsValid)(r);if(!s.isValid)return null===(i=b.current)||void 0===i||i.focus(),void g(s.errors);if(s=(0,pt.requiredTextFieldValidator)(r,l,c),!s.isValid)return null===(a=b.current)||void 0===a||a.focus(),void g(s.errors);p(!0);try{await e.onSubmit()}catch(t){g([t.message])}y.current&&p(!1)}})),Mt=(0,i.forwardRef)(((e,t)=>{const{isOpened:n,onSubmit:a,editableItem:o,onOpen:r,onClose:s,setEditableItem:l,symbolSearch:c,placement:u}=e
;return i.createElement("div",{ref:t,className:p()(Nt.container,Nt[u])},i.createElement(ot,{isOpened:n,onOpen:r,text:e.closedPlaceholderText,buttonText:e.buttonText,placement:u},i.createElement(kt,{isOpened:n,editableItem:o,setEditableItem:l,onClose:s,onSubmit:a,takeChartSnapshot:e.takeChartSnapshot,symbolSearch:c,minLength:e.minLength,maxLength:e.maxLength,placeholderText:e.placeholderText,buttonText:e.buttonText,placement:u})))})),Pt=(0,i.memo)(Mt);var Bt=n(34831),Lt=n(778785),Rt=n(635228);const zt=f.t(null,void 0,n(305536)),Tt=f.t(null,{context:"minds"},n(73320)),At=f.t(null,void 0,n(231651)),Ot=f.t(null,void 0,n(870630)),Dt=f.t(null,void 0,n(870630)),Ut=(0,i.forwardRef)(((e,t)=>{const{isOpened:a,editableItem:o,chartWidgetCollection:r,setEditableItem:s,onOpen:l,onClose:c,onSubmit:u,type:d=1,symbol:m,placement:h="widgetbar"}=e;let p=10,g=4e3,b=zt,w=At;const y=1===d,E=1===d;return"widget-page"===h&&m&&(w=f.t(null,{replace:{symbol:(0,v.safeShortName)(m)}},n(17158))),"widgetbar"!==h&&"details"!==h||!m||(b=f.t(null,{replace:{symbol:(0,v.safeShortName)(m)}},n(644219))),0===d&&(p=1,g=2e3,b=Ot,w=Dt),i.createElement(Pt,{ref:t,symbolSearch:y?async function(){(0,Rt.trackMindsEvent)(h,"publish","mind__open_add_symbol");const{showSymbolSearchItemsDialog:e}=await(0,Bt.loadNewSymbolSearch)();return new Promise((t=>{e({defaultValue:"",autofocus:!Lt.mobiletouch,showSpreadActions:!0,onSearchComplete:t})}))}:void 0,takeChartSnapshot:E&&null!==r?function(){return r?(0,et.takeChartSnapshotPromise)(r):Promise.resolve("")}:void 0,isOpened:a,editableItem:o,setEditableItem:s,onOpen:l,onClose:c,onSubmit:u,minLength:p,maxLength:g,placeholderText:b,buttonText:Tt,closedPlaceholderText:w,placement:h})}));var Ht=n(779923);async function Vt(e){return(await(0,ue.snapshoter)().getSnapshotsForAll(e,new Set(["base_name"]))).map((e=>{if("error"!==e.status)return e.values.base_name}))}async function Gt(e){const t=await Vt(e),n={};return t.forEach(((t,i)=>{void 0!==t&&0!==t.length&&(n[e[i]]=t[0])})),n}var Wt=n(889267),Ft=n(296652);function Zt(e){var t;const n=(0,Wt.tokenize)(e);if(!(0,Ft.isSpread)(n))return e;return(null===(t=(0,Ft.getTokenAtPos)(n,0))||void 0===t?void 0:t.value)||e}async function $t(e,t){const i=e.text,a=function(e){return e.replace(/\r?[\n"'()\][\-`]/g," ").split(" ").filter((e=>e.startsWith("$"))).map((e=>e.slice(1).toUpperCase()))}(i).map(Zt);let o=await Gt(a);Object.keys(o).length||(o=await Gt([t])),Object.keys(o).forEach((e=>{/^\d+$/.test(e)&&delete o[e]}));const r=(0,v.safeShortName)(t);if(o[r]&&(o[r]=t),Object.keys(o).length>pt.MENTIONED_SYMBOLS_MAX_NUMBER)throw Error(f.t(null,void 0,n(855139)));if(!(0,pt.isValidNumberOfUsers)(i))throw Error(f.t(null,void 0,n(897178)));const s=function(e,t){const n=t.map((e=>{let t=e,n="";return"!"===t[t.length-1]&&(t=t.slice(0,-1),n="!"),`\\B\\$${t}\\b${n}`})),i=new RegExp(n.join("|"),"gi");return e.replace(i,(e=>e.toUpperCase()))}(i,Object.keys(o));return void 0!==e.uid?(0,ke.editMind)(e.uid,{text:s,symbols:o,snapshot_id:void 0===e.snapshot_id?null:e.snapshot_id}):(0,ke.createMind)({text:s,
symbols:o,snapshot_id:e.snapshot_id})}var Xt=n(201465),jt=n(476924);const qt=100;function Jt(e){const{publicationsCounter:t,onClick:a}=e,o=f.t(null,{plural:"{count} new Minds",count:t<=qt?t:qt,replace:{count:t<=qt?String(t):"100+"}},n(273009));return i.createElement("div",{className:jt["update-button-container"]},i.createElement(Xt.RoundButton,{"aria-label":f.t(null,void 0,n(477698)),className:jt["update-button"],variant:"secondary",size:"medium",onClick:a},o))}var Qt=n(451860),Kt=n(445343),Yt=n(789746);function en(e){const{children:t,onScrollCapture:n,className:a,wrapClassName:o}=e,[r,s,l,c]=(0,Kt.useOverlayScroll)();return i.createElement("div",{onScrollCapture:n,className:p()(Yt.container,a),...s},i.createElement(Qt.OverlayScrollContainer,{...r,className:Yt.overlayScrollWrap}),i.createElement("div",{className:p()(Yt.wrapper,o),ref:function(e){l.current=e},onScroll:c},t))}var tn=n(420548),nn=n(895389),an=n(35588),on=n(185202),rn=n(230285),sn=n(432466);function ln(e){const{informers:t,style:n,className:a,handleRemove:o}=e;return i.createElement("div",{style:n,className:h(sn.wrapper,a)},t.map((e=>i.createElement(cn,{onRemove:o,key:e.uid,...e}))))}const cn=(0,i.memo)((function(e){const{textNode:t,onRemove:n,uid:a}=e;return i.createElement("div",{onAnimationEnd:function(){n(a)},className:sn["informer-wrapper"]},i.createElement("div",{className:sn["informer-container"]},i.createElement(tn.Informer,{content:i.createElement(an.ASTTree,{rootNode:t,renderers:on.allASTRenderers}),isIconShown:!0,informerIntent:"success"})))}));function un(e,t){const i={};Object.keys(e).forEach((t=>{const n=(0,rn.splitSymbolName)(t)[1];i[n]||(i[n]=e[t])}));const a=Object.keys(i),o=1===a.length&&function(e,t){return(0,rn.splitSymbolName)(e)[1]===(0,rn.splitSymbolName)(t)[1]}(a[0],t);if(!a.length||o)return{type:"root",children:[f.t(null,void 0,n(619123))]};const r=f.t(null,{plural:"Successfully posted in {symbols} feed",count:a.length},n(482346)).split("{symbols}"),s=a.map(((e,t)=>({type:"symbol",params:{pageUrl:(0,nn.getSymbolPagePath)({proName:i[e],type:"spread"}),symbol:i[e],text:`$${e}${t!==a.length-1?", ":""}`}})));return{type:"root",children:[r[0],...s,r[1]]}}var dn=n(740254),mn=n(833813),hn=n(960337),pn=n(314802),vn=n(255453),gn=n(347531),bn=n(368182),fn=n(13066);function wn(e){var t,a;const{mindsList:o,loaderShown:r,chartWidgetCollection:s,fullNameSymbol:l,newPublicationsCounter:c,openCommentsByIndex:u,setLikeStatusByIndex:d,setHiddenStatusByIndex:m,deleteByUid:h,handleScroll:v,onDownloadMinds:g,onReload:b,addPublishedMind:w,onInputHeightChange:y,highlightedMinds:E,formState:S,isVisible:_,placement:x,filterState:C}=e,N=(0,Qe.useIntersectionObserver)((e=>{const t=e[e.length-1].isIntersecting&&r;D(t),t&&g()})),[I,k]=(0,i.useState)({text:(0,Ct.resolveMindsInputSymbol)(l),symbols:{[l]:l}}),[M,P]=(0,i.useState)(null!==(a=null===(t=null==S?void 0:S.value())||void 0===t?void 0:t.opened)&&void 0!==a&&a),[B,L]=(0,i.useState)(!1),z=(0,i.useRef)(null),[T,A]=(0,i.useState)(),[O,D]=(0,
i.useState)(!1),U=null==o?void 0:o.map((e=>e.uid+e.text)).join(),H=function(e){const[t,n]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{var t,i,a;n(e>=(null!==(i=null===(t=window.widgetbar)||void 0===t?void 0:t.resizerBridge.width.value())&&void 0!==i?i:0));const o=t=>n(e>=t);return null===(a=window.widgetbar)||void 0===a||a.resizerBridge.width.subscribe(o),()=>{var e;null===(e=window.widgetbar)||void 0===e||e.resizerBridge.width.unsubscribe(o)}}),[]),t}(310),V=(0,i.useRef)(null),{informers:G,pushInfo:W,removeInfo:F}=(()=>{const[e,t]=(0,i.useState)([]);return{informers:e,pushInfo:(0,i.useCallback)((async e=>{const n=(0,re.guid)();t((t=>[...t,{textNode:e,uid:n}]))}),[]),removeInfo:(0,i.useCallback)((e=>{t((t=>t.filter((t=>t.uid!==e))))}),[])}})();(0,i.useEffect)((()=>(void 0!==S&&P(S.value().opened),null==S||S.subscribe(K),()=>null==S?void 0:S.unsubscribe(K))),[S]),(0,i.useEffect)((()=>k({text:M?I.text:(0,Ct.resolveMindsInputSymbol)(l),symbols:{[l]:l}})),[l]),(0,i.useEffect)((()=>{var e;_&&"details"!==x&&(null===(e=V.current)||void 0===e||e.focus())}),[_]),(0,i.useEffect)((()=>{if(!_||!z.current||!y)return;const e=new ResizeObserver((e=>{y(e[0].target.clientHeight)}));return e.observe(z.current),()=>{z.current&&e.unobserve(z.current)}}),[y,_]);const Z=(0,i.useCallback)((async e=>{if(void 0===o)return;if(B&&!await async function(){return new Promise((e=>{(0,Ht.showConfirm)({title:f.t(null,void 0,n(533603)),text:f.t(null,void 0,n(815590)),mainButtonIntent:"danger",onConfirm:({dialogClose:t})=>{t(),e(!0)},onCancel:({dialogClose:t})=>{t(),e(!1)}})}))}())return;const t=o[e];k(t),P(!0)}),[U,B]),$=(0,i.useCallback)((e=>{u(e),P(!1)}),[u]),X=(0,i.useCallback)((()=>{k({text:(0,Ct.resolveMindsInputSymbol)(l),symbols:{[l]:l}}),P(!1),L(!1)}),[l]),j=(0,i.useCallback)((async()=>{if(!((0,dn.enabled)(mn.ProductFeatures.SOCIAL_ACTIVITY)||(0,pn.isOnMobileAppPage)("new")||(0,vn.isOldUser)()||(0,R.isFeatureEnabled)("minds_posting_enable_for_free_users")))return void(0,hn.createGoProDialog)({feature:"socialActivity"});const e=await $t(I,l);(0,Rt.trackMindsEvent)(x,"publish","mind__post",e.uid),w(e.uid),(Object.values(e.symbols).includes(l)||"user"===C)&&b(I.uid?void 0:"symbol"),X(),A(e.uid),I.uid||W(un(e.symbols,l))}),[b,X,I]),q=(0,i.useCallback)((e=>{k(e),L(!0)}),[]),J=(0,i.useCallback)((()=>{b("symbol").then(A)}),[b]),Q=(0,i.useCallback)((()=>{P(!0),(0,Rt.trackMindsEvent)(x,"publish","mind__open_publish")}),[]),K=(0,i.useCallback)((e=>P(e.opened)),[]);return i.createElement("div",{ref:V,tabIndex:-1,className:p()(fn.wrapper,!_&&fn.hidden)},i.createElement(Ut,{ref:z,isOpened:M,editableItem:I,chartWidgetCollection:s,setEditableItem:q,onClose:X,onOpen:Q,onSubmit:j,symbol:l,placement:x}),i.createElement("div",{className:fn.containerBlock},0===(null==o?void 0:o.length)&&i.createElement("div",{className:fn["minds-list"]},i.createElement(Ke.EmptyList,{text:"user"===C?f.t(null,void 0,n(949494)):void 0,placement:x})),c>0&&("symbol"===C||"popular_symbol"===C)&&i.createElement(Jt,{publicationsCounter:c,onClick:J
}),0!==(null==o?void 0:o.length)&&i.createElement(en,{onScrollCapture:v,className:fn["minds-list"]},null==o?void 0:o.map(((e,t)=>i.createElement(Ye.MindItem,{placement:x,mind:e,index:t,key:`mind_${e.uid}_${e.text.length}`,openCommentsByIndex:$,setLikeStatusByIndex:d,setHiddenStatusByIndex:m,deleteByUid:h,likeIcon:bn,dislikeIcon:gn,fullNameSymbol:l,editByIndex:Z,scrollIntoView:T===e.uid,isCollapsed:H,highlighted:E.includes(e.uid)}))),r&&i.createElement("div",{ref:N,key:`loader_mind_${null==o?void 0:o.length}`,className:fn.loader},O&&i.createElement(Je.Loader,{color:"black"}))),i.createElement(ln,{handleRemove:F,informers:G})))}var yn=n(273e3),En=n(480590),Sn=n(266325),_n=n(262078),xn=n(423871);const Cn=(0,St.getLogger)("Minds.Comments");function Nn(e){var t,a;const{mind:o,chartWidgetCollection:r,handleScroll:s,setMindLikeStatusByIndex:l,setMindHiddenStatusByIndex:c,onEdit:u,onDelete:d,closeMind:m,onInputHeightChange:p,fullNameSymbol:v,placement:g,initialMindEditable:b=!1}=e,[w,y]=(0,i.useState)(),[E,S]=(0,i.useState)(),[_,x]=(0,i.useState)(b?o:{text:""}),C=(0,i.useRef)(null),N=(0,i.useRef)(null),[I,k]=(0,i.useState)(b),[M,P]=(0,i.useState)(b?1:0),[B,L]=(0,i.useState)(),z=(0,i.useRef)(!1),[T,A]=(0,i.useState)([]),O=(0,_t.useIsMounted)(),D=f.t(null,{plural:"{count} Comments",count:null!==(t=null==w?void 0:w.length)&&void 0!==t?t:0,replace:{count:null!==(a=o.total_comments.toString())&&void 0!==a?a:"0"}},n(518325)),U=null==o?void 0:o.uid,H=void 0!==w&&w.length>0,V=0===(null==w?void 0:w.length),G=(0,i.useRef)(),W=(0,i.useRef)(!1),F=null!=E,Z=(0,Qe.useIntersectionObserver)((e=>{W.current=e[e.length-1].isIntersecting,W.current&&F&&ie(E)}),{threshold:[0,1]});(0,i.useEffect)((()=>{var e;return b||null===(e=C.current)||void 0===e||e.focus(),()=>{var e;null===(e=G.current)||void 0===e||e.destroy()}}),[]),(0,i.useEffect)((()=>{var t;if(U)return null===(t=G.current)||void 0===t||t.destroy(),G.current=new yn.CommentPaginationAdapter(U),void ie(E,e.scrollCommentIntoViewUid);y(void 0)}),[U]),(0,i.useEffect)((()=>{const e=U;return _n.pushStreamMultiplexer.addChannel(`minds.comments.${e}`),()=>{_n.pushStreamMultiplexer.removeChannel(`minds.comments.${e}`)}}),[U]),(0,i.useEffect)((()=>{const e=async e=>{var t,n,i,a,o;let r,s,l=!0;"publication"!==e.a||(s=null===(t=G.current)||void 0===t?void 0:t.pushComment(e.data),A([e.data.uid]),void 0===s||H)?("hide"===e.a&&(s=null===(n=G.current)||void 0===n?void 0:n.hideComment(e.data)),"show"===e.a&&(s=null===(i=G.current)||void 0===i?void 0:i.showComment(e.data)),"edit"===e.a&&(l=!1,r=e.data.author.username===window.user.username?e.data.uid:void 0,s=null===(a=G.current)||void 0===a?void 0:a.pushEditComment(e.data)),"delete"===e.a&&(s=null===(o=G.current)||void 0===o?void 0:o.pushDeleteComment(e.uid)),((e,t,n)=>{e&&(y(e.result),t&&S(e.cursor),n&&L(n))})(s,l,r)):await ie(s.cursor,r)},t=U;return _n.pushStreamMultiplexer.on(`minds.comments.${t}`,e),()=>{_n.pushStreamMultiplexer.off(`minds.comments.${t}`,e)}}),[U,H]),(0,i.useEffect)((()=>L(e.scrollCommentIntoViewUid)),[e.scrollCommentIntoViewUid]),(0,
i.useEffect)((()=>{if(!N.current||!p)return;const e=new ResizeObserver((e=>{p(e[0].target.clientHeight)}));return e.observe(N.current),()=>{N.current&&e.unobserve(N.current)}}),[p]);const $=(0,i.useCallback)((async(e,t)=>{var n;await(null===(n=G.current)||void 0===n?void 0:n.setCommentHiddenStatus(U,e,t))}),[U]),X=(0,i.useCallback)((async e=>{void 0!==w&&(k(!0),P(0),x({...w[e],index:e}))}),[w]),j=(0,i.useCallback)((async e=>{var t;await(null===(t=G.current)||void 0===t?void 0:t.deleteComment(U,e))}),[U]),q=(0,i.useCallback)((async e=>{(0,Rt.trackMindsEvent)(g,"action","click__comment_reply",U),k(!0),P(0),x({text:`@${e} `})}),[U]),J=(0,i.useCallback)((()=>{k(!0),P(1),x(o)}),[o]),Q=(0,i.useCallback)((async()=>{var e,t;if(!(0,pt.isValidNumberOfUsers)(_.text))throw Error(f.t(null,void 0,n(283218)));void 0!==_.index?await(null===(e=G.current)||void 0===e?void 0:e.editComment(U,_.index,_)):(await(null===(t=G.current)||void 0===t?void 0:t.postComment(U,_)),(0,Rt.trackMindsEvent)(g,"publish","comment__post",U)),O.current&&ne()}),[_,U]),K=(0,i.useCallback)((async()=>{const e=await $t(_,v);u(e),ne()}),[_,v]),Y=(0,i.useCallback)((e=>{27===(0,lt.hashFromEvent)(e)&&m()}),[m]),ee=(0,i.useCallback)((async()=>{if(1===M)await K();else{if(!((0,dn.enabled)(mn.ProductFeatures.SOCIAL_ACTIVITY)||(0,pn.isOnMobileAppPage)("new")||(0,vn.isOldUser)()||(0,R.isFeatureEnabled)("minds_comments_enable_for_free_users")))return void(0,hn.createGoProDialog)({feature:"socialActivity"});await Q()}}),[Q,K,M]),te=(0,i.useCallback)((()=>{(0,Rt.trackMindsEvent)(g,"publish",1===M?"mind__open_publish":"comment__open_publish"),k(!0),x({text:""})}),[M]);return i.createElement("div",{ref:C,onKeyDown:Y,tabIndex:1,className:xn.containerBlockComments},i.createElement(en,{onScrollCapture:s,className:xn["scroll-wrapper-container"],wrapClassName:xn["scroll-wrapper-wrap"]},i.createElement("div",{className:xn["minds-item"]},i.createElement(Ye.MindItem,{placement:g,mind:o,likeIcon:bn,dislikeIcon:gn,readMoreInitialState:!1,fullNameSymbol:v,index:e.mindIndex,setLikeStatusByIndex:l,setHiddenStatusByIndex:c,deleteByUid:d,editByIndex:J})),H&&i.createElement("h3",{className:xn["comments-title"]},D),i.createElement(Ut,{ref:N,isOpened:I,editableItem:_,chartWidgetCollection:r,setEditableItem:x,onOpen:te,onClose:ne,onSubmit:ee,type:M}),V&&i.createElement(Ke.EmptyList,{text:f.t(null,void 0,n(538747)),placement:g}),null==w?void 0:w.map(((e,t)=>i.createElement(En.CommentItem,{placement:g,comment:e,key:`comment_${e.uid}_${e.text.length}`,mindUid:o.uid,fullNameSymbol:v,setHiddenStatusByIndex:$,onEditByIndex:X,onDeleteByIndex:j,onReply:q,index:t,scrollIntoView:B===e.uid,highlighted:T.includes(e.uid)}))),i.createElement("div",{key:`loader_mind_comments_${null==w?void 0:w.length}`,className:h(xn.loader,{[xn.shown]:F}),ref:Z}," ",F&&i.createElement(Je.Loader,{color:"black"}))));function ne(){k(!1),P(0),x({text:""})}async function ie(e,t){const n=G.current;if(void 0!==n&&!z.current){z.current=!0;try{const i=await n.getComments(e,{findUid:t});z.current=!1,y(i.result),S(i.cursor)}catch(e){
(0,Sn.isAbortError)(e)||Cn.logError(e.message)}}}}function In(e){const{mindsList:t,openedMindIndex:n,scrollCommentIntoViewUid:a,chartWidgetCollection:o,loaderShown:r,fullNameSymbol:s,newPublicationsCounter:l,filterState:c,openCommentsByIndex:u,setLikeStatusByIndex:d,setHiddenStatusByIndex:m,deleteByUid:h,onDownloadMinds:p,onEditOpenedMind:v,onReload:g,onDeleteOpenedMind:b,addPublishedMind:f,closeMind:w,onInputHeightChange:y,highlightedMinds:E,formState:S,placement:_,initialMindEditable:x}=e,C=(0,i.useCallback)((()=>{qe.globalCloseDelegate.fire()}),[]),N=null!==n&&void 0!==t?t[n]:null,I=N&&null!==n;return i.createElement(i.Fragment,null,i.createElement(wn,{isVisible:!I,placement:_,mindsList:t,loaderShown:r,chartWidgetCollection:o,fullNameSymbol:s,openCommentsByIndex:u,setLikeStatusByIndex:d,setHiddenStatusByIndex:m,deleteByUid:h,handleScroll:C,onDownloadMinds:p,onReload:g,newPublicationsCounter:l,addPublishedMind:f,formState:S,highlightedMinds:E,filterState:c,onInputHeightChange:y}),I&&i.createElement(Nn,{placement:_,mindIndex:n,mind:N,scrollCommentIntoViewUid:a,chartWidgetCollection:o,fullNameSymbol:s,setMindLikeStatusByIndex:d,setMindHiddenStatusByIndex:m,handleScroll:C,onDelete:b,onEdit:v,closeMind:w,initialMindEditable:x,onInputHeightChange:y}))}const kn=new(n(129025).WatchedValue)(!1),Mn=(0,St.getLogger)("Minds");function Pn(e){const{initialMindUid:t,scrollCommentIntoViewUid:n,chartWidgetCollection:a,watchedSymbol:o,widgetId:r,initialMindsList:s,formState:l,isInitialMindEditable:c,initialFilterValue:u,onFilterChange:d,onInputHeightChange:m,HeaderComponent:h,placement:p="widgetbar"}=e,[v,g]=(0,i.useState)(s),[b,f]=(0,i.useState)(e.initialAlias),[w,y]=(0,i.useState)(null),[E,S]=(0,i.useState)(n),[_,x]=(0,i.useState)(null),[C,N]=(0,i.useState)(Zt(o.value())),I=(0,i.useRef)(!1),k=(0,_t.useIsMounted)(),M=(0,i.useRef)(!1),P=(0,i.useRef)(),B={};null==v||v.forEach(((e,t)=>{B[e.uid]=t}));const L=null==v?void 0:v.map((e=>e.uid)).join(),[R,z]=(0,i.useState)(),[T,A]=(0,i.useState)([]),[O,D]=(0,i.useState)(0),[U,H]=(0,i.useState)([]),[V,G]=(0,i.useState)(c),[W,F]=(0,i.useState)([]),[Z,$]=(0,i.useState)(u);(0,i.useEffect)((()=>("widgetbar"===p&&kn.setValue(!0),()=>{"widgetbar"===p&&kn.setValue(!1)})),[]);const X=(0,i.useCallback)((async(e,t,n="symbol",i=!0)=>{var a,o,r,s,l;try{const[c]=await Vt([e]);if(void 0===c||0===c.length)throw Error("Quotes snapshot is not recived");x(null),A([]),null===(a=P.current)||void 0===a||a.abort(),P.current=new AbortController;const u={f:n,limit:10};if("user"===n)u.user=window.user.username;else u.symbol=c[0];t&&(u.c=R,u.new_count=!0);const d=await(0,ke.getMinds)(u,P.current.signal);if(!k.current)return;if(z(null===(o=d.meta)||void 0===o?void 0:o.current_cursor),x(d.next),f(null===(r=d.meta)||void 0===r?void 0:r.alias),t){const t=(null===(s=d.meta)||void 0===s?void 0:s.new_count)?Number(null===(l=d.meta)||void 0===l?void 0:l.new_count):0;return void(t>10?X(e):D(t))}if(D(0),g((e=>(e&&i&&F(Ct.mindsHelpers.getHighlightedUids(d.results,e)),d.results))),d.results.length)return d.results[0].uid
}catch(e){(0,Sn.isAbortError)(e)||(g([]),x(void 0),f(void 0),Mn.logError(e.message))}}),[R]),j=(0,i.useCallback)((async()=>{var e;if(null!=_&&!M.current){M.current=!0;try{null===(e=P.current)||void 0===e||e.abort(),P.current=new AbortController;const t=await(0,ke.getNextMinds)(_,P.current.signal);if(!k.current)return;(0,Rt.trackMindsEvent)("widgetbar","loading","load_minds"),g((e=>void 0===e?t.results:[...e,...t.results])),x(t.next)}catch(e){(0,Sn.isAbortError)(e)||Mn.logError(e.message)}finally{M.current=!1}}}),[_]);(0,i.useEffect)((()=>(t?(I.current=!0,(0,ke.getMind)(t).then((e=>{k.current&&(g([e]),y(0))})).catch((()=>X(C,!1,Z)))):X(C,!1,Z),()=>{var e;null===(e=P.current)||void 0===e||e.abort()})),[]);const q=(0,i.useCallback)((e=>{g(void 0),N(Zt(e)),S(void 0),y(null),G(!1),$("symbol"),d("symbol"),X(e,!1,"symbol")}),[X]);(0,i.useEffect)((()=>(N(Zt(o.value())),o.subscribe(q),()=>{o.value()&&o.unsubscribe(q)})),[o,q]),(0,i.useEffect)((()=>{const e=b;if(e)return void 0!==e&&"symbol"===Z&&_n.pushStreamMultiplexer.addChannel(`minds.alias.${e}`),()=>{_n.pushStreamMultiplexer.removeChannel(`minds.alias.${e}`)}}),[b,Z]),(0,i.useEffect)((()=>{if("symbol"!==Z)return;const e=()=>(0,Le.randomDelay)((()=>X(C,!0)),0,30);return _n.pushStreamMultiplexer.onReconnect(e),()=>{_n.pushStreamMultiplexer.offReconnect(e)}}),[R,Z]),(0,i.useEffect)((()=>{const e=e=>{const{uid:t,total:n,a:i,l:a}=e,o=null==v?void 0:v.find((e=>e.uid===t));if("hide"===i)return A((e=>e.length>qt?e:e.filter((e=>e!==t)))),o&&(Ct.mindsHelpers.isAuthor(o.author)||Ct.mindsHelpers.isModerator(o.author))?g((e=>null==e?void 0:e.map((e=>e.uid===t?{...e,hidden:!0}:e)))):g((e=>null==e?void 0:e.filter((e=>e.uid!==t))));if("show"===i&&o)return g((e=>null==e?void 0:e.map((e=>e.uid===t?{...e,hidden:!1}:e))));if("publication"!==i){if("delete"===i)return A((e=>e.length>qt?e:e.filter((e=>e!==t)))),g((e=>null==e?void 0:e.filter((e=>e.uid!==t))));"likes"!==i&&"comment"!==i||g((e=>{if(void 0===e)return;const a=B[t],o=[...e],r={...o[a]};return"likes"===i?r.total_likes=n:"comment"===i&&(r.total_comments=n),o[a]=r,o}))}else{if(U.some((e=>e===t))||a!==window.locale)return;A((e=>e.length>qt?e:[...e,t]))}},t=b;return _n.pushStreamMultiplexer.on(`minds.alias.${t}`,e),()=>{_n.pushStreamMultiplexer.off(`minds.alias.${t}`,e)}}),[L,U,b]);const J=(0,i.useRef)(null),Q=(0,i.useCallback)((async(e,t,n)=>{let i;void 0!==n&&(i="like"===n),g((e=>{if(void 0===e)return;const a=e[t];null===J.current&&(J.current=[...e]);const o=[...J.current];let r;return void 0!==a.like_status&&(r="like"===a.like_status),o[t]={...a,like_status:n,total_likes:a.total_likes+Ct.mindsHelpers.getLikeChange(r,i)},o}));try{const n=await(0,Pe.setLike)(e,i);if(!k.current)return;J.current=null,g((e=>{if(void 0===e)return;const i=[...e];return i[t]=n,i}))}catch(e){(0,Sn.isAbortError)(e)||((0,je.showErrorDialog)(e.message),J.current&&(g(J.current),J.current=null))}}),[]),K=(0,i.useCallback)((async(e,t,n)=>{try{const i=await(0,Be.setHiddenStatus)(e,n);if(!k.current)return;g((e=>{if(void 0===e)return;const n=[...e];return n[t]=i,n}))
}catch(e){Mn.logError(e.message)}}),[]),Y=(0,i.useCallback)((async e=>{await(0,Me.deleteMind)(e),(0,Rt.trackMindsEvent)("widgetbar","action","click__mind_delete",e),k.current&&g((t=>null==t?void 0:t.filter((t=>t.uid!==e))))}),[]),ee=(0,i.useCallback)((async()=>{S(void 0),y(null),G(!1),I.current&&(I.current=!1,g(void 0),await X(C,!1,Z))}),[C,X,Z]);(0,i.useEffect)((()=>(null==l||l.subscribe(ee),()=>null==l?void 0:l.unsubscribe(ee))),[ee,l]);const te=(0,i.useCallback)((async()=>{if(void 0===v||null===w)return;if(!k.current)return;S(void 0),y(null),G(!1);const e=[...v.slice(0,w),...v.slice(w+1)];g(0===e.length?void 0:e);const t=v[w].uid;await(0,Me.deleteMind)(t),(0,Rt.trackMindsEvent)("widgetbar","action","click__mind_delete",t),I.current&&(I.current=!1,$("symbol"),d("symbol"),await X(C))}),[ee,w,X]),ne=(0,i.useCallback)((async e=>{if(void 0===v||null===w)return;const t=[...v];t[w]=e,g(t),I.current=!0}),[v,w]),ie=(0,i.useCallback)((e=>(e&&($(e),d(e)),X(C,!1,null!=e?e:Z,"symbol"===Z))),[C,X,Z]),ae=(0,i.useCallback)((e=>{$(e),d(e),F([]),X(C,!1,e,!1)}),[C,X]),oe=(0,i.useCallback)((e=>{H((t=>[...t,e]))}),[]);return i.createElement(i.Fragment,null,i.createElement(Xe,{container:e.headerContainer,mindOpened:null!==w,onBack:ee,symbol:C,widgetId:r,filterState:Z,onFilterChange:ae,HeaderComponent:h}),i.createElement(In,{placement:p,mindsList:v,onInputHeightChange:m,openedMindIndex:w,scrollCommentIntoViewUid:E,loaderShown:void 0!==_,chartWidgetCollection:a,fullNameSymbol:C,openCommentsByIndex:y,setLikeStatusByIndex:Q,setHiddenStatusByIndex:K,closeMind:ee,deleteByUid:Y,onDownloadMinds:j,onEditOpenedMind:ne,onReload:ie,newPublicationsCounter:T.length+O,onDeleteOpenedMind:te,addPublishedMind:oe,formState:l,initialMindEditable:V,highlightedMinds:W,filterState:Z}))}var Bn=n(31449);function Ln(e){var t,n;const o=(0,a.useHistory)(),{bridge:r,header:s,mindsFormState:l}=(0,Q.useEnsuredContext)(Y.DetailsContext),c=null===(t=null==r?void 0:r.getChartWidgetCollection)||void 0===t?void 0:t.call(r),u=(0,Bn.useQuery)();(0,i.useEffect)((()=>{function e(e){o.replace((0,_e.createMindsPath)(e))}return Se.linking.proSymbol.subscribe(e),()=>{Se.linking.proSymbol.unsubscribe(e),null==r||r.setMinHeight(0)}}),[]);const d=(0,i.useCallback)((e=>null==r?void 0:r.setMinHeight(e)),[]);return i.createElement(i.Fragment,null,s&&i.createElement(Pn,{widgetId:"details-minds",placement:"details",onFilterChange:()=>{},initialFilterValue:"symbol",watchedSymbol:Se.linking.proSymbol,chartWidgetCollection:null!=c?c:null,headerContainer:s,HeaderComponent:Ie,onInputHeightChange:d,formState:l,initialMindUid:null!==(n=u.get("mind"))&&void 0!==n?n:void 0,isInitialMindEditable:"true"===u.get("editable")}))}var Rn=n(881607),zn=n(94021),Tn=n(31341),An=n(597538),On=n(200382),Dn=n(679177),Un=n(7843);function Hn(e){const{symbol:t}=e,o=(0,a.useLocation)(),{bridge:r}=(0,Q.useEnsuredContext)(Y.DetailsContext),s=(0,oe.useWatchedValueReadonly)({watchedValue:null==r?void 0:r.width,defaultValue:0})<240,l=(0,i.useMemo)((()=>{var e,t,r,l,c,u;return[{id:"news",
children:s?i.createElement(C.Icon,{className:Un.icon,icon:An}):f.t(null,void 0,n(923278)),active:null!==(t=null===(e=(0,a.matchPath)(o.pathname,{path:fe.NEWS_GROUP_PATH_PATTERN}))||void 0===e?void 0:e.isExact)&&void 0!==t&&t},{id:"ideas",children:s?i.createElement(C.Icon,{className:Un.icon,icon:Dn}):f.t(null,void 0,n(870840)),active:null!==(l=null===(r=(0,a.matchPath)(o.pathname,{path:Rn.IDEAS_GROUP_PATH_PATTERN}))||void 0===r?void 0:r.isExact)&&void 0!==l&&l},{id:"minds",children:s?i.createElement(C.Icon,{className:Un.icon,icon:On}):f.t(null,void 0,n(998431)),active:null!==(u=null===(c=(0,a.matchPath)(o.pathname,{path:_e.MINDS_GROUP_PATH_PATTERN}))||void 0===c?void 0:c.isExact)&&void 0!==u&&u}]}),[s,o]);return i.createElement("div",{className:Un.container},i.createElement(zn.LightTabs,{id:"social-nav-tabs",items:l,isActive:e=>{var t;return null!==(t=e.active)&&void 0!==t&&t},isRtl:Tn.isRtl,onActivate:function(e){if(e.active)return;const n=null!=t?t:Se.linking.proSymbol.value();switch(e.id){case"news":(0,y.showSymbolNews)(n);break;case"ideas":(0,P.trackEvent)("GUI","Details","Ideas from news"),(0,y.showSymbolIdeas)(n);break;case"minds":(0,P.trackEvent)("GUI","Details","Minds from news"),(0,y.showMindsPage)(n)}}}))}var Vn=n(241266);function Gn(e){const{children:t,hideTabs:n,...a}=e;return!d.moveIdeasAndMindsIntoNewsTab||n?i.createElement(i.Fragment,null,t):i.createElement("div",{className:Vn.container},i.createElement(Hn,{...a}),t)}const Wn=!u.enabled("widget");function Fn(e){var t;const{bridge:n}=(0,Q.useEnsuredContext)(Y.DetailsContext),o=(0,oe.useWatchedValueReadonly)({watchedValue:(0,K.ensureDefined)(n).symbol},!0),r=(0,oe.useWatchedValueReadonly)({watchedValue:(0,K.ensureDefined)(n).width}),s=(0,oe.useWatchedValueReadonly)({watchedValue:(0,K.ensureDefined)(n).visible}),[l,c]=function(e,t){const[n,a]=(0,i.useState)((()=>me(e))),[o,r]=(0,i.useState)((()=>he(e))),s=(0,i.useRef)({detailsHeaderProps:n,detailsInfoProps:o}),l=(0,i.useRef)(t);l.current=t,(0,i.useEffect)((()=>{t&&(a(s.current.detailsHeaderProps),r(s.current.detailsInfoProps))}),[t]);{const{pro_name:t}=(0,se.useQuotesCachedData)(e,["pro_name"],{pro_name:e},ue.snapshoter);(0,i.useEffect)((()=>{if(s.current.detailsInfoProps=he(t),s.current.detailsHeaderProps=me(t),l.current&&(a((()=>me(t))),r((()=>he(t)))),!t)return;const e=(0,re.guid)(),n=new le.QuoteSessionScreenerMultiplexer((0,de.getQuoteSessionInstance)("full"));return n.subscribe(e,t,(function(e){const{header:n,body:i}=(0,ce.prepareDetailsWidgetProps)(t,e),o={...n,symbolName:t,complete:Boolean(e.complete)},c={source:"RightToolbar",completeScreener:Boolean(e.completeScreener),...i};s.current.detailsInfoProps=c,s.current.detailsHeaderProps=o,l.current&&(a(o),r(c))})),()=>{n.unsubscribe(e,t)}}),[t])}return(0,i.useMemo)((()=>[n,o]),[n,o])}(o,s),u=Wn?(0,ge.useNewsPreviewProvider)({symbol:null==c?void 0:c.proName,type:null==c?void 0:c.type}):null,d=(0,g.useCompleteOrTimeout)(c.symbol,Boolean(c.complete&&(null===(t=null==u?void 0:u.complete)||void 0===t||t)));return(0,we.useGetNotes)(),
i.createElement(a.Switch,null,i.createElement(a.Route,{path:be.GROUP_PATH_PATTERN},(({match:e})=>i.createElement(ve.GroupNotes,{key:null==e?void 0:e.params.symbol}))),i.createElement(a.Route,{path:be.UNATTENDED_PATH_PATTERN},i.createElement(ve.GroupNotes,null)),i.createElement(a.Route,{path:be.NOTES_PATH_PATTERN},i.createElement(pe.GroupsList,null)),i.createElement(a.Route,{path:fe.NEWS_GROUP_PATH_PATTERN},(({match:e})=>i.createElement(Gn,{symbol:null==e?void 0:e.params.symbol},i.createElement(ye.SymbolNews,{key:null==e?void 0:e.params.symbol})))),i.createElement(a.Route,{path:Rn.IDEAS_GROUP_PATH_PATTERN},(({match:e})=>i.createElement(Gn,{symbol:null==e?void 0:e.params.symbol},i.createElement(Ee.SymbolIdeas,{key:null==e?void 0:e.params.symbol,widgetWidth:r})))),i.createElement(a.Route,{path:_e.MINDS_GROUP_PATH_PATTERN},(({location:e,match:t})=>i.createElement(Gn,{symbol:null==t?void 0:t.params.symbol},i.createElement(Ln,{key:e.key})))),i.createElement(a.Route,null,i.createElement(ae,{detailsHeaderProps:l,detailsInfoProps:c,newsPreview:(null==u?void 0:u.newsPreview)||null,showNews:null==u?void 0:u.showNews,widgetWidth:r,visibility:d})))}function Zn(e){const{widgetHeaderElement:t,bridge:n,history:s,mindsFormState:l}=e,c=(0,i.useMemo)((()=>({header:t,bridge:n,mindsFormState:l})),[n,t,l]),u=i.createElement(Y.DetailsContext.Provider,{value:c},i.createElement(Fn,null));return i.createElement(a.Router,{history:(0,K.ensureNotNull)(s)},i.createElement(o.Provider,{store:r.symbolNotesStore},u))}},713931:(e,t,n)=>{"use strict";n.d(t,{hideDetailsDialogs:()=>l});var i=n(57761),a=n(719885),o=n(988534),r=n(316478),s=n(273058);function l(e){"forecast"!==e&&function(){const e=r.ForecastDialogController.getInstance();e.visible()&&e.hide()}(),"technicals"!==e&&function(){const e=a.TechnicalsDialogController.getInstance();e.visible()&&e.hide()}(),"financials"!==e&&function(){const e=o.FinancialsDialogController.getInstance();e.visible()&&e.hide()}(),"options"!==e&&function(){const e=i.OptionsDialogController.getInstance();e.visible()&&e.hide()}(),"etf-analysis"!==e&&function(){const e=s.EtfAnalysisDialogController.getInstance();e.visible()&&e.hide()}()}},137674:(e,t,n)=>{"use strict";n.d(t,{createSymbolNote:()=>v,showMindsPage:()=>p,showSymbolDetails:()=>g,showSymbolIdeas:()=>h,showSymbolNews:()=>m,showSymbolNotes:()=>d,showSymbolNotesGroups:()=>b});var i=n(2606),a=n(421219),o=n(777453);async function r(e){Promise.all([n.e(22666),n.e(62253),n.e(5993),n.e(92191),n.e(34465),n.e(32109),n.e(9817),n.e(69121),n.e(92108),n.e(4015),n.e(87845),n.e(89842),n.e(76592),n.e(35649),n.e(38669),n.e(5145),n.e(25190),n.e(73954),n.e(58056),n.e(21625),n.e(61631),n.e(90592),n.e(15518),n.e(34186),n.e(66154),n.e(98535),n.e(70235),n.e(86102),n.e(962),n.e(26300),n.e(86942),n.e(21115),n.e(91357),n.e(50996)]).then(n.bind(n,768175)).then((t=>{t.renderNotesDialog(e)}))}var s=n(881607);var l=n(515828);let c=null;function u(e,t){if(c&&i.isDetailsReady.unsubscribe(c),c=()=>{var n,i,a
;(null===(a=null===(i=null===(n=null===window||void 0===window?void 0:window.widgetbar)||void 0===n?void 0:n.layout)||void 0===i?void 0:i.getWidgetByType("detail"))||void 0===a?void 0:a.widgetObject).navigate(e,t)},i.isDetailsReady.value())return c(),void(c=null);i.isDetailsReady.subscribe(c,{once:!0})}function d(e=null,t){const n=(0,a.pathToGroup)(null!=e?e:"");t?r(n):u(n)}function m(e,t){const i=(0,o.newsPathToGroup)(null!=e?e:"");t?async function(e){(await Promise.all([n.e(22666),n.e(62253),n.e(5993),n.e(32109),n.e(9817),n.e(53842),n.e(92108),n.e(4015),n.e(13423),n.e(88548),n.e(89842),n.e(76592),n.e(35649),n.e(38669),n.e(5145),n.e(30006),n.e(25190),n.e(36747),n.e(58056),n.e(52567),n.e(21625),n.e(67080),n.e(50938),n.e(61631),n.e(54234),n.e(15518),n.e(24490),n.e(76972),n.e(58666),n.e(39164),n.e(45932),n.e(91729),n.e(962),n.e(85529),n.e(87633),n.e(54994),n.e(84482)]).then(n.bind(n,23154))).renderNewsDialog(e)}(i):u(i)}function h(e,t){const i=(0,s.ideasPathToGroup)(null!=e?e:"");t?async function(e){(await Promise.all([n.e(22666),n.e(62253),n.e(92191),n.e(32109),n.e(9817),n.e(92108),n.e(4015),n.e(88548),n.e(89842),n.e(76592),n.e(38669),n.e(5145),n.e(25190),n.e(36747),n.e(45896),n.e(58056),n.e(52567),n.e(42244),n.e(21625),n.e(50938),n.e(61631),n.e(15518),n.e(76972),n.e(35306),n.e(65864),n.e(71793),n.e(82173),n.e(98535),n.e(76140),n.e(962),n.e(23127),n.e(51579),n.e(94673)]).then(n.bind(n,790348))).renderIdeasDialog(e)}(i):u(i)}function p(e,t,n){u((0,l.createMindsPath)(null!=e?e:"",t,n))}function v(e=null,t){const n=(0,a.pathToGroup)(null!=e?e:"")+"?new="+performance.now();t&&r(n),u(n)}function g(){u("/")}function b(){u(a.NOTES_PATH_PATTERN)}},881607:(e,t,n)=>{"use strict";n.d(t,{IDEAS_GROUP_PATH_PATTERN:()=>i,ideasPathToGroup:()=>a});const i="/ideas/groups/:symbol/";function a(e){return i.replace(":symbol",encodeURIComponent(e))}},661728:(e,t,n)=>{"use strict";n.d(t,{SymbolIdeas:()=>X});var i=n(50959),a=n(740619),o=n(497754),r=n.n(o),s=n(444372),l=n(583912),c=n(881607),u=n(175625),d=n(403179),m=n(830493),h=n(662464),p=n(892036),v=n(881546),g=n(903495),b=n(194882),f=n(583305),w=n(338447),y=n(744068),E=n(132316),S=n(130447),_=n(359284),x=n(822122),C=n(26895),N=n(500521),I=n(774465),k=n(750473);function M(e){const{imageSources:t,imageFallbackSrc:n,imageBackgroundColor:a,symbolLogoUrls:o,symbolPageHref:s,symbolShortName:l,symbolLogoAlt:c,isEditorsPick:u,isPublic:d=!0,isVideoIdea:v,durationMs:g,ideaStrategy:M,brokerPlan:B,className:L,title:R,authorName:z,authorProfileHref:T,publicationTimestamp:A,scriptType:O,href:D,name:U,imageUrl:H,isSmallCard:V}=e,[G,W]=(0,h.useHover)(),F={"--ui-lib-image-card-preview-background":a},Z=l.slice(0,1);return i.createElement(C.CardExterior,{className:r()(k.article,L),onClick:function(e){if(null!==e.target.closest("a"))return;e.preventDefault(),$()},...W},i.createElement("a",{onClick:function(e){if(e.metaKey||e.ctrlKey)return;e.preventDefault(),$()},href:D,className:k.title},R),i.createElement(m.Preview,{className:r()(k.preview,V&&k.small),resizeMode:m.PreviewResizeMode.Ratio16by9
},i.createElement(m.PreviewGrid,null,B===x.BrokerPlans.Platinum&&i.createElement(p.BrokerLine,null),u&&i.createElement(m.PreviewTopLeftCorner,null,i.createElement(_.AnchorBadgeEditorsPick,{variant:"bookmark",href:"/ideas/editors-picks/",className:k.badgeEditorsPick,size:V?I.BadgeSize.Large:void 0})),i.createElement(m.PreviewTopRightCorner,null,O&&i.createElement(E.ScriptIcon,{size:"small",scriptType:O}),!d&&i.createElement(w.LockIcon,{publicationAccess:"private-idea",className:k.previewRowItem,size:"small"})),v&&i.createElement(m.PreviewMiddle,null,i.createElement(S.PlayIcon,{color:G?"brand":"gray"})),i.createElement(m.PreviewBottomLeftCorner,null,void 0===O&&(void 0!==s?i.createElement(y.LogoIconLink,{className:k.previewRowItem,href:s,logoUrls:o,placeholderLetter:Z,alt:null!=c?c:l,size:V?"xxsmall":void 0}):i.createElement(y.LogoIcon,{className:k.previewRowItem,logoUrls:o,placeholderLetter:Z,alt:null!=c?c:l,size:V?"xxsmall":void 0})),M&&i.createElement(b.IdeaStrategyIcon,{size:V?"small":void 0,strategy:M,className:k.previewRowItem})),v&&g&&i.createElement(m.PreviewBottomRightCorner,null,i.createElement(f.DurationBadge,{durationMs:g})),i.createElement(m.PreviewImage,{sources:t,fallbackSrc:n,style:F,alt:""}))),i.createElement(P,{authorName:z,authorProfileHref:T,publicationTimestamp:A}));function $(){(0,N.pushChartPage)({chartId:H,chartName:U,publishedUrl:D,shortSymbol:l})}}function P(e){const{authorName:t,authorProfileHref:n,publicationTimestamp:a}=e;return i.createElement("div",{className:k.credentialsAndButtons},i.createElement(v.Author,{typography:"platform",href:n,username:t}),i.createElement(g.PublicationDate,{typography:"platform",timestamp:a}))}var B=n(735686),L=n(120780);async function R(e){const{symbol:t,nextUrl:n,signal:i}=e,a=new URLSearchParams({symbol:t,sort:"week_popular"}),o=n||`/api/v1/ideas/?${a}`,r=await(0,L.fetch)(o,{method:"GET",signal:i});if(!r.ok){const e=await r.text();throw new Error(`Response is not ok. Status: ${r.status}; Text: ${e}`)}return r.json()}var z=n(540986),T=n(266325);var A=n(494966),O=n(443549),D=n(25517),U=n(314802),H=n(77122),V=n(898960),G=n(915812),W=n(510119),F=n(795394),Z=n(84837);const $=H.enabled("mobile_app_intercepts_load_idea_url");function X(e){var t;const{widgetWidth:o}=e,m=window.TradingView.onChartPage,h=decodeURIComponent(null!==(t=(0,a.useParams)().symbol)&&void 0!==t?t:""),p=Boolean(o&&o<232),v=(0,a.useHistory)(),g=(0,W.useQuotesSnapshot)(h,["pro_name"],(0,F.snapshoter)()),{loadMore:b,loadingStatus:f,ideas:w}=function(e){const t=(0,i.useRef)(new AbortController),[n,a]=(0,i.useState)((()=>({ideas:[],loadingStatus:"ready",loadMore:null})));return(0,i.useEffect)((()=>{if(!e)return;let n=t.current=new AbortController,i=null,o=!1;const r=async()=>{if(i&&!o){o=!0,n=new AbortController,a((e=>({...e,loadingStatus:"additionalLoading"})));try{const t=await R({symbol:e,nextUrl:i,signal:n.signal}),s=t.results.map((e=>(0,z.ideaFromDto)(e,void 0)));a((e=>({ideas:[...e.ideas,...s],loadMore:t.next?r:null,loadingStatus:"ready"}))),i=t.next,o=!1}catch(e){(0,T.skipAbortError)(e)}}}
;return a((e=>({...e,loadMore:null,loadingStatus:"initialLoading"}))),(async()=>{try{const t=await R({symbol:e,signal:n.signal});a({ideas:t.results.map((e=>(0,z.ideaFromDto)(e,void 0))),loadMore:t.next?r:null,loadingStatus:"ready"}),i=t.next}catch(e){(0,T.skipAbortError)(e)}})(),()=>{n.abort()}}),[e]),n}("ok"===(null==g?void 0:g.status)?h:void 0);(0,i.useEffect)((()=>{function e(e){v.replace((0,c.ideasPathToGroup)(e))}return l.linking.proSymbol.subscribe(e),()=>{l.linking.proSymbol.unsubscribe(e)}}),[]);const y=(0,B.useIntersectionObserver)((e=>{e[e.length-1].intersectionRatio>0&&w.length&&b&&b()}));return i.createElement(i.Fragment,null,i.createElement(u.SymbolGroupHeader,{"data-name":"details-symbol-ideas-header",onBack:function(){v.replace("/")},symbol:h,text:s.t(null,{replace:{symbol:(0,A.safeShortName)(h)}},n(21e3))}),"initialLoading"===f?i.createElement(O.Spinner,null):i.createElement(d.OverlayScrollWrapper,{className:0===w.length?Z.empty:void 0},w.length>0?i.createElement(i.Fragment,null,w.map((e=>i.createElement(M,{...e,key:e.href,isSmallCard:p}))),b&&i.createElement("div",{key:`ideas-observer-${w.length}`,ref:y,className:r()(Z.spinnerContainer,"additionalLoading"!==f&&Z.hidden)},i.createElement(O.Spinner,{size:"mini"}))):i.createElement(V.EmptyStateBlock,{className:Z.emptyState,iconClass:Z.emptyStateIcon,text:m?s.t(null,void 0,n(772907)):s.t(null,void 0,n(777858)),action:i.createElement(G.SquareButton,{size:"small",onClick:function(){if(!m)return void(window.location.href="/chart/");window.runOrSignIn((()=>{(0,D.publishChart)({onWidget:(0,U.isOnMobileAppPage)("any")&&!$})}),{source:"detail-publish-idea"})}},m?s.t(null,void 0,n(623951)):s.t(null,void 0,n(578251)))})))}},515828:(e,t,n)=>{"use strict";n.d(t,{MINDS_GROUP_PATH_PATTERN:()=>i,createMindsPath:()=>a});const i="/minds/groups/:symbol/";function a(e,t,n){let a=i.replace(":symbol",encodeURIComponent(e));if(!t)return a;const o=new URLSearchParams;return o.set("mind",t),n&&o.set("editable","true"),a+=`?${o.toString()}`,a}},817797:(e,t,n)=>{"use strict";n.d(t,{NewsCard:()=>s});var i=n(50959),a=n(774465),o=n(317007),r=n(735686);const s=(0,i.forwardRef)((function(e,t){const{isNew:n,onShown:s,...l}=e,c=(0,r.useIntersectionObserver)((function(e){e.some((e=>e.isIntersecting))&&s&&n&&s()}),{ref:t});return i.createElement(o.HeadlineCard,{...l,reference:c,badgeSize:a.BadgeSize.Small})}))},777453:(e,t,n)=>{"use strict";n.d(t,{NEWS_GROUP_PATH_PATTERN:()=>i,newsPathToGroup:()=>a});const i="/news/groups/:symbol/";function a(e){return i.replace(":symbol",encodeURIComponent(e))}},439652:(e,t,n)=>{"use strict";n.d(t,{SymbolNews:()=>q});var i=n(50959),a=n(740619),o=n(497754),r=n.n(o),s=n(444372),l=n(201465),c=n(238718),u=n(83436),d=n(830493),m=n(583912),h=n(777453),p=n(500962),v=n(891130),g=n(514586),b=n(494966),f=n(894729),w=n(583835),y=n(70829),E=n(634993),S=n(316909),_=n(578686),x=n(374168);function C(e){const{header:t}=(0,v.useEnsuredContext)(g.DetailsContext);return null===t?null:p.createPortal(i.createElement(N,{...e}),t)}function N(e){
const{symbol:t,onBack:a,sections:o,activeSection:l,setActiveSection:c,...u}=e,{isDialog:d}=(0,v.useEnsuredContext)(g.DetailsContext),m=(0,w.useLogos)(t),h=i.createElement("div",{className:x.titleWrap},Boolean(t)&&i.createElement(f.SymbolLogo,{className:x.logoIcon,logoId:m.logoid,currencyLogoId:m["currency-logoid"],baseCurrencyLogoId:m["base-currency-logoid"],placeholder:(0,b.safeShortName)(t)[0],size:d?"small":"xsmall"}),i.createElement("span",{className:r()(x.text,d&&x.mobile)},p(t,l)));return i.createElement("div",{...u,className:x.header},!d&&i.createElement(S.ToolWidgetIconButton,{className:x.backIcon,icon:_,onClick:a}),o.length?i.createElement(y.ToolWidgetMenu,{className:x.menu,content:h,isDrawer:d},i.createElement(E.PopupMenuItem,{label:p(null,null),onClick:()=>c(null),isActive:!l,className:d?x.drawerItem:void 0}),o.map((e=>i.createElement(E.PopupMenuItem,{key:e.id,label:p(null,e),onClick:()=>c(e),isActive:(null==l?void 0:l.id)===e.id,className:d?x.drawerItem:void 0})))):i.createElement("div",{className:x.contentWrap},h));function p(e,t){var i;const a=s.t(null,void 0,n(982928)),o=null!==(i=null==t?void 0:t.title)&&void 0!==i?i:a;return e?`${(0,b.safeShortName)(e)} ${o}`:o}}var I=n(443549),k=n(878056),M=n(317007),P=n(403179),B=n(995683),L=n(255613),R=n(517744),z=n(887357),T=n(650151),A=n(155235);function O(e,t){const{proName:n,type:i,...a}=t;return e.getNewsBySymbol({pro_name:(0,T.ensureDefined)(n),type:(0,T.ensureDefined)(i),...a}).catch((()=>null)).then((e=>e&&e.newsItems.length?e:null))}var D=n(735686),U=n(429179),H=n(795394),V=n(510119),G=n(817797),W=n(628702),F=n(506340);function Z(e){return i.createElement("div",{className:F.container},i.createElement(u.Icon,{icon:W,className:F.image}),i.createElement("h3",{className:F.title},s.t(null,void 0,n(372901))),i.createElement("p",{className:F.description},s.t(null,void 0,n(494285))))}var $=n(707807),X=n(868880);const j=(0,B.mergeThemes)(M.CARD_CONTENT_DEFAULT_THEME,{title:X.title,breadcrumbs:X.breadcrumbs,article:X.article,preview:X.preview});function q(e){var t;const o=decodeURIComponent(null!==(t=(0,a.useParams)().symbol)&&void 0!==t?t:""),p=(0,a.useHistory)(),[v,g]=(0,c.useRefsMap)(),[b,f]=(0,i.useState)(null),[{diffResolver:w,newsIterator:y,renderedItems:E,highlightCountItems:S,countNewItems:_,showTopDetector:x},N]=(0,i.useState)({diffResolver:null,newsIterator:null,renderedItems:null,highlightCountItems:null,countNewItems:0,showTopDetector:!1,interimHighlightCount:null}),M=(0,i.useRef)(null),B=(0,V.useQuotesSnapshot)(o,["pro_name","type","typespecs","country_code"],(0,H.snapshoter)()),{news:T,newsMode:W,isLoading:F,sections:q}=function(e){const{proName:t,type:n,section:a}=e,[o]=(0,i.useState)((()=>new A.TradingViewNewsProvider(z.NewsWidgetPlacement.WidgetBar))),[r,s]=(0,i.useState)((()=>({news:null,newsMode:"full update",isLoading:Boolean(t&&n),sections:[]}))),l=(0,R.usePrevious)(t),c=(0,R.usePrevious)(a);return(0,i.useLayoutEffect)((()=>{const i=e=>{s((n=>{var i,a;return{...n,isLoading:!1,news:null!==(i=null==e?void 0:e.newsItems)&&void 0!==i?i:null,
sections:l===t?n.sections:null!==(a=null==e?void 0:e.sections)&&void 0!==a?a:[]}}))};if(!t||!n)return;if(t===l&&c===a)return;s((e=>({isLoading:!0,newsMode:"full update",news:null,sections:t!==l?[]:e.sections})));const r=new AbortController;O(o,{...e,signal:r.signal}).then(i);const u=setInterval((()=>{s((e=>({...e,newsMode:"partial update"}))),O(o,{...e,signal:r.signal}).then(i)}),o.timeout());return()=>{s((e=>({newsMode:"full update",news:null,isLoading:!1,sections:e.sections}))),clearInterval(u),r.abort()}}),[t,n,a]),{...r,provider:o}}("ok"===(null==B?void 0:B.status)?{proName:B.values.pro_name,type:B.values.type,typespecs:B.values.typespecs,country:B.values.country_code,section:null==b?void 0:b.id}:{}),J=(0,D.useIntersectionObserver)((e=>{if(e[e.length-1].intersectionRatio>0&&(null==E?void 0:E.length)&&null!==y){const e=y.next().value;e.length&&N((t=>({...t,renderedItems:[...E,...e]})))}})),Q=(0,D.useIntersectionObserver)((e=>{e[e.length-1].intersectionRatio>0&&(null==E?void 0:E.length)&&x&&N((e=>({...e,highlightCountItems:e.interimHighlightCount,showTopDetector:!1})))}));(0,i.useEffect)((()=>{function e(e){p.replace((0,h.newsPathToGroup)(e))}return m.linking.proSymbol.subscribe(e),()=>{m.linking.proSymbol.unsubscribe(e)}}),[]),(0,i.useEffect)((()=>{if(F||null===T)N((e=>({...e,newsIterator:null,renderedItems:null})));else if(M.current){if("full update"===W){if(0===T.length)return;const e=(0,L.getNewsItemDigest)(T[0]),t=(0,L.getNewsDiffResolver)(e),n=(0,U.iterateInChunks)(T,20);N((e=>({...e,diffResolver:t,newsIterator:n,renderedItems:n.next().value})))}if("partial update"===W&&w){if(null===E)return;const e=w.getDiff(T),t=0===M.current.scrollTop,n=(0,L.getNewsItemDigest)(T[0]),i=(0,L.getNewsDiffResolver)(n);N((n=>({...n,renderedItems:[...e,...E],diffResolver:i,countNewItems:t?n.countNewItems:n.countNewItems+e.length,highlightCountItems:t?e.length:n.highlightCountItems})))}return()=>{N((e=>({...e,diffResolver:null,highlightCountItems:null})))}}}),[W,T,F]),(0,i.useEffect)((()=>{if(null===S)return;const e=setTimeout((()=>{N((e=>({...e,highlightCountItems:null,interimHighlightCount:null})))}),2e3);return()=>{clearTimeout(e)}}),[S]);return i.createElement(i.Fragment,null,i.createElement(C,{"data-name":"details-symbol-news-header",onBack:function(){p.replace("/")},symbol:o,sections:q,activeSection:b,setActiveSection:f}),"full update"===W&&F||!Boolean(null==B?void 0:B.status)?i.createElement(I.Spinner,null):null!==T&&T.length?i.createElement(P.OverlayScrollWrapper,{scrollContainerRef:M},_>0&&i.createElement(l.RoundButton,{className:X.showNewNews,variant:"primary",color:"brand",size:"small",onClick:function(){var e,t;if(!E)return;N((e=>({...e,showTopDetector:!0,interimHighlightCount:_}))),null===(t=null===(e=v.current)||void 0===e?void 0:e.get(E[0].id))||void 0===t||t.scrollIntoView({behavior:"smooth"})},animated:!1},i.createElement("span",{className:X.content},i.createElement(u.Icon,{className:X.icon,icon:$}),i.createElement("span",null,s.t(null,{plural:"{count} new stories",count:_},n(606405))))),x&&i.createElement("div",{
ref:Q}),null==E?void 0:E.map(((e,t)=>i.createElement(G.NewsCard,{...(0,k.getNewsCardVisualProps)(e,window.is_authenticated),theme:j,ref:g(e.id),key:e.id,onShown:()=>{return e=t,void N((t=>({...t,countNewItems:e<_-1?e:_-1})));var e},isNew:!!_&&t<_,previewResizeMode:d.PreviewResizeMode.Ratio2by1,className:r()(X.card,S&&t<S&&X.highlight),linkTarget:"_blank",onAction:e.clickHandler}))),Boolean((null==E?void 0:E.length)&&null!==y)&&i.createElement("div",{className:X.intersectionBottom,ref:J})):i.createElement("div",{className:X.emptyStateWrap},i.createElement(Z,null)))}},421219:(e,t,n)=>{"use strict";n.d(t,{GROUP_PATH_PATTERN:()=>a,NOTES_PATH_PATTERN:()=>i,UNATTENDED_PATH_PATTERN:()=>o,pathToGroup:()=>r});const i="/notes/",a="/notes/groups/:symbol/",o="/notes/unattended/";function r(e){return e?a.replace(":symbol",encodeURIComponent(e)):o}},988534:(e,t,n)=>{"use strict";n.d(t,{FinancialsDialogController:()=>o});var i=n(111393);let a;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}static getInstance(){return a||(a=new o),a}_load(e){return Promise.all([n.e(68716),n.e(22089),n.e(22666),n.e(62253),n.e(5993),n.e(92191),n.e(72639),n.e(34465),n.e(32109),n.e(9817),n.e(69121),n.e(53842),n.e(92108),n.e(4015),n.e(88194),n.e(66639),n.e(13423),n.e(88548),n.e(68992),n.e(89842),n.e(81643),n.e(76592),n.e(35649),n.e(13152),n.e(38669),n.e(5145),n.e(30006),n.e(25190),n.e(84281),n.e(91033),n.e(36747),n.e(45896),n.e(48155),n.e(52567),n.e(40866),n.e(21625),n.e(90684),n.e(67080),n.e(61631),n.e(36842),n.e(84372),n.e(80538),n.e(24215),n.e(163),n.e(98149),n.e(35542),n.e(66886),n.e(34186),n.e(50254),n.e(89277),n.e(71838),n.e(24510),n.e(80208),n.e(66154),n.e(43981),n.e(77370),n.e(87554),n.e(72817),n.e(36493),n.e(78059),n.e(53724),n.e(60399),n.e(20087),n.e(25036),n.e(21058),n.e(962),n.e(90051),n.e(17621),n.e(73026),n.e(76819),n.e(55639),n.e(40360),n.e(9488),n.e(62318),n.e(7526),n.e(76987),n.e(69954),n.e(53577),n.e(24878)]).then(n.bind(n,571592)).then((t=>{var n,i;return null===(n=this._dialog)||void 0===n||n.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new t.FinancialsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}))}}},700134:(e,t,n)=>{"use strict";n.d(t,{showFinancialsDialog:()=>o});var i=n(988534),a=n(713931);function o(e){i.FinancialsDialogController.getInstance().show({...e,onOpen:()=>{(0,a.hideDetailsDialogs)("financials")}})}},316478:(e,t,n)=>{"use strict";n.d(t,{ForecastDialogController:()=>r});var i=n(111393),a=n(583912);let o;class r extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}async canBeShown(e){const t=e||a.linking.proSymbol.value(),i=new Set(["recommendation_mark","pro_name"]),o=await(async()=>{
const{snapshoter:e}=await n.e(62495).then(n.bind(n,960669));return e().getSnapshot(t,i)})();return!("error"===o.status||!o.values.recommendation_mark)}static getInstance(){return o||(o=new r),o}_load(e){return Promise.all([n.e(68716),n.e(73486),n.e(22666),n.e(62253),n.e(5993),n.e(72639),n.e(32109),n.e(9817),n.e(53842),n.e(92108),n.e(4015),n.e(88548),n.e(68992),n.e(89842),n.e(38669),n.e(5145),n.e(25190),n.e(36747),n.e(45896),n.e(48155),n.e(52567),n.e(40866),n.e(21625),n.e(61631),n.e(80538),n.e(35542),n.e(66886),n.e(89277),n.e(25626),n.e(5345),n.e(24510),n.e(80208),n.e(43981),n.e(98625),n.e(10690),n.e(21661),n.e(27825),n.e(36493),n.e(60399),n.e(39855),n.e(35269),n.e(71520),n.e(962),n.e(45835),n.e(58349),n.e(76819),n.e(40360),n.e(28424),n.e(7526),n.e(55080),n.e(85080)]).then(n.bind(n,231078)).then((t=>{var n,i;return null===(n=this._dialog)||void 0===n||n.hide(),null===(i=this._dialog)||void 0===i||i.visible().unsubscribe(this._subscribe),this._dialog=new t.ForecastDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}))}}},31449:(e,t,n)=>{"use strict";n.d(t,{useQuery:()=>o});var i=n(50959),a=n(740619);function o(){const{search:e}=(0,a.useLocation)();return(0,i.useMemo)((()=>new URLSearchParams(e)),[e])}},359284:(e,t,n)=>{"use strict";n.d(t,{AnchorBadgeEditorsPick:()=>v,BadgeEditorsPick:()=>p});var i=n(50959),a=n(497754),o=n(444372),r=n(558470);const s=n.p+"logo-tradingview.f3af8e3579cc12751704.svg";var l=n(84646);function c(e){const{size:t=r.BadgeSize.Medium,variant:n="normal",className:i}=e;return a(l["badge-editors-pick"],l[`variant-${n}`],l[`size-${t}`],"bookmark"===n&&"apply-common-tooltip",i)}function u(e){return a(c(e),l.anchor)}const d=()=>o.t(null,void 0,n(192490));function m(e){return"bookmark"===e?d():void 0}function h(e){const{size:t,variant:n}=e;return i.createElement(i.Fragment,null,"bookmark"===n&&i.createElement("span",{className:l["bookmark-bg"]}),t!==r.BadgeSize.XSmall&&i.createElement("img",{src:s,className:l["logo-icon"],role:"presentation",loading:"lazy"}),i.createElement("span",{className:l.text},d()))}function p(e){const{size:t,variant:n,className:a,...o}=e,s=null!=t?t:"bookmark"===n?r.BadgeSize.XLarge:r.BadgeSize.Medium;return i.createElement(r.Badge,{...o,className:c({size:s,variant:n,className:a}),size:s,title:m(n)},i.createElement(h,{size:s,variant:n}))}function v(e){const{size:t,variant:n,className:a,...o}=e,s=null!=t?t:"bookmark"===n?r.BadgeSize.XLarge:r.BadgeSize.Medium;return i.createElement(r.AnchorBadge,{...o,className:u({size:s,variant:n,className:a}),size:s,title:m(n)},i.createElement(h,{size:s,variant:n}))}},898960:(e,t,n)=>{"use strict";n.d(t,{EmptyStateBlock:()=>l});var i=n(50959),a=n(497754),o=n.n(a),r=n(782430);function s(e){const{title:t,tagName:n,titleSize:a}=e,s=n||"strong";return i.createElement(s,{className:o()(r.title,r[`title_${a}`])},t)}function l(e){return i.createElement("div",{className:a(r.container,e.className)},i.createElement("div",{className:a(r.icon,e.iconClass)}),e.title&&i.createElement(s,{title:e.title,titleSize:e.titleSize,
tagName:e.titleTagName}),e.text&&i.createElement("div",{className:a(r.text,"large"===e.textSize&&r.text_large)},e.text),e.action&&i.createElement("div",{className:r.action},e.action))}},881546:(e,t,n)=>{"use strict";n.d(t,{Author:()=>h});var i=n(50959),a=n(497754),o=n(444372),r=(n(586463),n(461495)),s=n(712797),l=n(465872),c=n(970704),u=n(558470),d=n(841409);const m=i.memo((e=>{const{badges:t=[]}=e,n=(0,r.getBadgeAccountName)(t);return 0!==t.length&&n&&(0,c.isBadgeBroker)(n)?i.createElement(l.BadgeBroker,{name:n,href:(0,s.getBadgeAccountLink)(n),title:(0,r.getBadgeAccountTitle)(t),size:u.BadgeSize.Small,className:d.badge}):i.createElement(i.Fragment,null)}));function h(e){const{username:t,className:r,href:s,rel:l,target:c,badges:u,typography:h="social",...p}=e;return i.createElement("address",{...p,className:a(d["card-author-wrap"],r)},i.createElement("a",{href:s,rel:l,target:c,className:a(d["card-author-link"],"js-userlink-popup"),"data-username":t},i.createElement("span",{className:a(d["card-author"],d[`typography-${h}`])},o.t(null,void 0,n(518472)).format({username:t}))),i.createElement(m,{badges:u}))}m.displayName="Badge"},892036:(e,t,n)=>{"use strict";n.d(t,{BrokerLine:()=>o});var i=n(50959),a=n(336877);function o(e){return i.createElement("div",{className:a["broker-line"]})}},583305:(e,t,n)=>{"use strict";n.d(t,{DurationBadge:()=>r});var i=n(50959),a=n(558470);function o(e){const t=[...e],n=["s","m","h"];t.reverse();const i=t.map(((e,t)=>`${e}${n[t]}`));return i.reverse(),i.join(" ")}function r(e){const{durationMs:t,...n}=e,r=function(e){const t=Math.floor(e/1e3);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].reduce(((e,t)=>e.length>0||t>0?[...e,t]:e),[])}(t);return i.createElement(a.Badge,{...n},i.createElement("time",{dateTime:o(r)},function(e){return(1===e.length?[0,...e]:e).map((e=>e.toString(10).padStart(2,"0"))).join(":")}(r)))}},194882:(e,t,n)=>{"use strict";n.d(t,{IdeaStrategyIcon:()=>m});var i=n(50959),a=n(497754),o=(n(309103),n(444372)),r=n(83436),s=n(90487),l=n(525712),c=n(153682),u=n(841777);const d={long:s,short:l,education:c};function m(e){const{className:t,strategy:s,size:l="medium",...c}=e,m={long:o.t(null,void 0,n(273064)),short:o.t(null,void 0,n(777851)),education:o.t(null,void 0,n(432172))};return i.createElement("span",{title:m[s],className:a(u["idea-strategy-icon-wrap"],u[`size-${l}`],"apply-common-tooltip",t)},i.createElement(r.Icon,{...c,icon:d[s],className:a(u["idea-strategy-icon"],u[`strategy-${s}`]),"aria-hidden":!0}),i.createElement("span",{className:u["visually-hidden-label"]},m[s]))}},338447:(e,t,n)=>{"use strict";n.d(t,{LockIcon:()=>d});var i=n(50959),a=n(497754),o=(n(309103),n(444372)),r=n(83436),s=n(84858),l=n(611443),c=n(713892);const u={small:l,medium:s};function d(e){const{className:t,publicationAccess:s,size:l="medium",...d}=e,m={"invite-only-close":o.t(null,void 0,n(69619)),"invite-only-open":o.t(null,void 0,n(604259)),protected:o.t(null,void 0,n(624477)),"private-script":o.t(null,void 0,n(65033)),"private-idea":o.t(null,void 0,n(677231))}
;return i.createElement("span",{title:m[s],className:a(c["lock-icon-wrap"],c[`size-${l}`],"apply-common-tooltip",t)},i.createElement(r.Icon,{...d,icon:u[l],className:a(c["lock-icon"],c[`access-${s}`]),"aria-hidden":!0}),i.createElement("span",{className:c["visually-hidden-label"]},m[s]))}},744068:(e,t,n)=>{"use strict";n.d(t,{LogoIcon:()=>u,LogoIconLink:()=>d});var i=n(50959),a=n(497754),o=(n(309103),n(160742)),r=n(375);function s(e){const{logoUrls:t,alt:n,placeholderLetter:a,visibleSymbolShortName:s,size:l}=e,c=l||void 0!==s?"xxxsmall":"xsmall";return i.createElement(i.Fragment,null,i.createElement(o.CircleLogoAny,{size:c,logoUrls:t||[],placeholderLetter:a,alt:n}),s&&i.createElement("span",{className:r["short-name"]},s))}function l(e){return!e.visibleSymbolShortName&&void 0!==e.alt&&e.alt.length>0}function c(e){return a(r["logo-icon"],e.visibleSymbolShortName&&r["with-short-name"],l(e)&&"apply-common-tooltip",e.href&&r.link,e.className)}function u(e){const{logoUrls:t,placeholderLetter:n,alt:a,visibleSymbolShortName:o,className:r,size:u,...d}=e;return i.createElement("span",{...d,title:l(e)?a:void 0,className:c(e)},i.createElement(s,{size:u,logoUrls:t,placeholderLetter:n,visibleSymbolShortName:o}))}function d(e){const{logoUrls:t,placeholderLetter:n,alt:a,href:o,rel:r,target:u,visibleSymbolShortName:d,className:m,size:h,...p}=e;return i.createElement("a",{...p,href:o,rel:r,target:u,title:l(e)?a:void 0,className:c(e)},i.createElement(s,{size:h,logoUrls:t,placeholderLetter:n,alt:a,visibleSymbolShortName:d}))}},903495:(e,t,n)=>{"use strict";n.d(t,{PublicationDate:()=>c});var i=n(50959),a=n(444372),o=n(497754),r=(n(309103),n(55826)),s=n(780488);function l(e,t){return{...e,...t.payload}}const c=i.memo((e=>{const{timestamp:t,disableTooltip:c,children:u,className:d,typography:m="social",updated:h,...p}=e,v=(0,i.useMemo)((()=>new Date(t).toISOString()),[]),[g,b]=(0,i.useReducer)(l,{dateTime:v}),{dateTime:f,formattedDate:w,fullDate:y}=g,E=(0,i.useRef)(),S=h?`${a.t(null,void 0,n(672341))} ${y}`:y,_=(0,i.useCallback)((()=>{const e=new Date(t),{text:n,formattedDate:i,updateTimeout:a}=(0,r.getFormattedDataByDate)({date:e});b({type:"update",payload:{dateTime:e.toISOString(),formattedDate:n,fullDate:i}}),E.current=void 0,a&&(E.current=setTimeout((()=>_()),a))}),[t]);return(0,i.useEffect)((()=>(_(),()=>{E.current&&clearTimeout(E.current)})),[t]),i.createElement("time",{...p,className:o(s["publication-date"],!c&&"apply-common-tooltip",s[`typography-${m}`],d),dateTime:f,title:c?void 0:S},h?`${a.t(null,void 0,n(672341))} `:"",null!=u?u:w)}));c.displayName="PublicationDate"},132316:(e,t,n)=>{"use strict";n.d(t,{ScriptIcon:()=>g});var i=n(50959),a=n(497754),o=(n(309103),n(444372)),r=n(83436),s=n(783359),l=n(345909),c=n(194913),u=n(827911),d=n(225492),m=n(765268),h=n(394256),p=n(291066);const v={small:{[s.ScriptType.Indicator]:c,[s.ScriptType.Strategy]:d,[s.ScriptType.Library]:h},medium:{[s.ScriptType.Indicator]:l,[s.ScriptType.Strategy]:m,[s.ScriptType.Library]:u}};function g(e){const{scriptType:t,className:l,size:c="medium",...u}=e,d={
[s.ScriptType.Indicator]:o.t(null,void 0,n(663809)),[s.ScriptType.Strategy]:o.t(null,void 0,n(659437)),[s.ScriptType.Library]:o.t(null,void 0,n(459918))};return i.createElement("span",{...u,title:d[t],className:a(p["script-icon-wrap"],p[`size-${c}`],"apply-common-tooltip",l)},i.createElement(r.Icon,{icon:v[c][t],className:p["script-icon"],"aria-hidden":!0}),i.createElement("span",{className:p["visually-hidden-label"]},d[t]))}},774280:(e,t,n)=>{"use strict";function i(e,t){return"forex"===t?function(e){return"FX_IDC:"+e.substring(e.indexOf(":")+1)}(e):e}n.r(t),n.d(t,{getTickerSymbol:()=>i})},111393:(e,t,n)=>{"use strict";n.d(t,{DialogRenderer:()=>a});var i=n(129025);class a{constructor(){this._container=document.createElement("div"),this._visibility=new i.WatchedValue(!1)}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},34831:(e,t,n)=>{"use strict";function i(){return Promise.all([n.e(18809),n.e(11165),n.e(17497),n.e(31410),n.e(22666),n.e(62253),n.e(5993),n.e(92191),n.e(72639),n.e(34465),n.e(32109),n.e(9817),n.e(69121),n.e(53842),n.e(92108),n.e(4015),n.e(88194),n.e(66639),n.e(89842),n.e(76592),n.e(35649),n.e(38669),n.e(5145),n.e(30006),n.e(25190),n.e(91033),n.e(58056),n.e(26855),n.e(40866),n.e(21625),n.e(43610),n.e(90684),n.e(61631),n.e(96899),n.e(99916),n.e(36956),n.e(77807),n.e(9227),n.e(56388),n.e(35542),n.e(43445),n.e(58289),n.e(16579),n.e(55480),n.e(33444),n.e(962),n.e(26300),n.e(30979),n.e(29594),n.e(6676),n.e(71286),n.e(46551),n.e(60111),n.e(80333),n.e(18552),n.e(3780),n.e(21754)]).then(n.bind(n,837490))}n.d(t,{loadNewSymbolSearch:()=>i})},611325:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M4 1.5h10A2.5 2.5 0 0 1 16.5 4v10a2.5 2.5 0 0 1-2.5 2.5H4A2.5 2.5 0 0 1 1.5 14V4A2.5 2.5 0 0 1 4 1.5ZM0 4a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Zm14.52 3.54a.75.75 0 1 0-1.04-1.08l-2.88 2.8-2.82-2.11a.75.75 0 0 0-.97.06l-3.33 3.25a.75.75 0 0 0 1.04 1.08l2.88-2.8 2.82 2.11c.3.22.7.2.97-.06l3.33-3.25Z"/></svg>'},879092:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.09 16.28c.88 0 1.69-.16 2.44-.47a4.28 4.28 0 0 0 1.8-1.4c.44-.61.67-1.37.67-2.27v-.02c0-1.09-.35-1.93-1.04-2.53A6.98 6.98 0 0 0 10 8.19L8.5 7.84a4.79 4.79 0 0 1-1.37-.54 2.17 2.17 0 0 1-.73-.75 1.9 1.9 0 0 1-.23-.91v-.02c0-.38.1-.74.33-1.07.22-.34.55-.61.98-.82A3.6 3.6 0 0 1 9.1 3.4c.54 0 1.02.1 1.45.29a2.48 2.48 0 0 1 1.51 2.15v.02l1.81-.01v-.01a3.86 3.86 0 0 0-.7-2.17c-.43-.62-1-1.1-1.7-1.44-.71-.34-1.5-.5-2.37-.5a5.7 5.7 0 0 0-2.44.5 3.68 3.68 0 0 0-2.3 3.52v.01c0 .68.16 1.27.45 1.77.3.5.72.9 1.3 1.25.57.33 1.27.6 2.1.8l1.48.38c.66.17 1.17.36 1.53.58.35.22.6.47.75.75.16.28.23.62.23 1v.02c0 .42-.1.8-.3 1.16-.21.35-.54.62-1 .83-.45.2-1.04.3-1.78.3-.72 0-1.31-.1-1.78-.32a2.52 2.52 0 0 1-1.06-.9c-.24-.38-.4-.8-.46-1.28v-.02L4 12.09v.01c.03.87.28 1.62.75 2.24.47.63 1.09 1.1 1.84 1.44.77.33 1.6.5 2.5.5ZM8.46 18h1.19V0H8.46v18Z"/></svg>'},153682:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M9.38 2.6a.75.75 0 0 0-.76 0l-6.75 4a.75.75 0 0 0 0 1.3L4.5 9.46V11.6c0 .85.51 1.82 1.26 2.55A4.64 4.64 0 0 0 9 15.5c1.35 0 2.47-.6 3.24-1.34a3.83 3.83 0 0 0 1.26-2.55V9.46l1.5-.9v1.89h1.5v-3.2a.75.75 0 0 0-.37-.65l-6.75-4ZM12 10.34 9.38 11.9a.75.75 0 0 1-.76 0L6 10.34v1.27c0 .32.24.92.8 1.47.55.53 1.3.92 2.2.92.9 0 1.65-.39 2.2-.92.56-.55.8-1.15.8-1.47V10.35Zm-3 .04 5.28-3.13L9 4.12 3.72 7.25 9 10.38Z"/></svg>'},279197:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M5.5 2.75A2.75 2.75 0 002.75 5.5v7a2.75 2.75 0 002.75 2.75h7a2.75 2.75 0 002.75-2.75V10h-1.5v2.5c0 .69-.56 1.25-1.25 1.25h-7c-.69 0-1.25-.56-1.25-1.25v-7c0-.69.56-1.25 1.25-1.25H8v-1.5H5.5zm5.5 1.5h1.69L8.97 7.97l1.06 1.06 3.72-3.72V7h1.5V2.75H11v1.5z"/></svg>'},194913:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M16.37 6.33l-3.4 3.79c-.79.87-2.15.9-2.98.07L7.3 7.51a1.06 1.06 0 0 0-1.54.04l-3.4 3.78-.74-.66 3.4-3.79a2.06 2.06 0 0 1 2.98-.07l2.68 2.68c.43.42 1.13.4 1.54-.04l3.4-3.78.74.66z"/></svg>'},225492:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M11 11.8V4h1v5.76a3 3 0 1 1 0 4.48V15h-1v-2.8a3.03 3.03 0 0 1 0-.4Zm1 .36a2 2 0 1 0 0-.32v.32ZM2 14.47V4h1v9.97h4.01v1H2v-.5ZM8 15V7.99h1V15H8Zm1-8.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"/></svg>'},394256:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.97 6.12l3.4-3.79-.74-.66-3.4 3.78c-.4.45-1.1.46-1.54.04L8.01 2.8c-.83-.84-2.2-.8-2.98.07l-3.4 3.79.74.66 3.4-3.78c.4-.45 1.1-.46 1.54-.04L9.99 6.2c.83.84 2.2.8 2.98-.07zM12 11l2.5-3 2.5 3h-2v4h-1v-4h-2zM8 9h1v4h2l-2.5 3L6 13h2V9z"/></svg>'},525712:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M3.3 4.7l7.29 7.3H6v2h8V6h-2v4.59l-7.3-7.3-1.4 1.42z"/></svg>'},90487:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12 4h2v8h-2V7.41l-7.3 7.3-1.4-1.42L10.58 6H6V4h6z"/></svg>'},611443:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M7 5.5a2.5 2.5 0 0 1 5 0V7H7V5.5ZM6 7V5.5a3.5 3.5 0 1 1 7 0V7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2Z"/></svg>'},345909:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M24.53 10.53l-5.09 5.09a2.75 2.75 0 0 1-3.88 0l-3.18-3.18a1.25 1.25 0 0 0-1.76 0l-5.09 5.09-1.06-1.06 5.09-5.09a2.75 2.75 0 0 1 3.88 0l3.18 3.18c.48.48 1.28.48 1.76 0l5.09-5.09 1.06 1.06z"/></svg>'},827911:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M16 21V7h1.5v6.92a4 4 0 1 1 0 6.19V21H16Zm-12-.71V7h1.5v12.54H10v1.5H4v-.75Zm7.99.71v-9h1.5v9h-1.5Zm1.5-10.75c0 .43-.34.78-.75.78a.76.76 0 0 1-.75-.78c0-.43.33-.78.75-.78.41 0 .75.35.75.78ZM17.52 17a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Z"/></svg>'},765268:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M18.44 10.62l5.09-5.09-1.06-1.06-5.09 5.09c-.48.48-1.28.48-1.76 0l-3.18-3.18a2.75 2.75 0 0 0-3.88 0l-5.09 5.09 1.06 1.06 5.09-5.09a1.25 1.25 0 0 1 1.76 0l3.18 3.18a2.75 2.75 0 0 0 3.88 0zM14.25 19v-5h-1.5v5H10l3.5 4 3.5-4h-2.75zM18 18l3.5-4 3.5 4h-2.75v5h-1.5v-5H18z"/></svg>'},875264:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M15 3h-1v2h1V3Zm0 4h-1v2h1V7Zm-1 4h1v2h-1v-2Zm1 8h-1v2h1v-2Zm-1 4h1v2h-1v-2Zm8.5-15H18v1h3.3l-6.84 6.83-4.65-3.72-.35-.28-.31.32-5 5 .7.7 4.69-4.68 4.65 3.72.35.28.31-.32L22 9.71V13h1V8h-.5Z"/></svg>'},338115:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M4.75 13.19a9.97 9.97 0 0 0-.2 7.08L6.43 20l.14 1-2.29.31-.39.06-.14-.37a11 11 0 1 1 20.5 0l-.14.37-.4-.06-2.28-.31.14-1 1.88.27a9.99 9.99 0 0 0-.2-7.08l-1.53.76-.44-.9 1.54-.77A10 10 0 0 0 14 7v2h-1V7.05a10 10 0 0 0-7.82 5.23l1.54.77-.44.9-1.53-.76Zm10.74 2.48 2.93-4.4-.84-.55-2.92 4.4a2 2 0 1 0 .83.55Z"/></svg>'},84858:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M10.5 12h7V9a3.5 3.5 0 1 0-7 0v3zm-1.5.17A3 3 0 0 0 7 15v5a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-5a3 3 0 0 0-2-2.83V9A5 5 0 0 0 9 9v3.17z"/></svg>'},465890:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'},350254:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="white" d="M9 6.76619C9 5.9889 9.84797 5.50879 10.5145 5.9087L22.5708 13.1425C23.2182 13.5309 23.2182 14.4691 22.5708 14.8575L10.5145 22.0913C9.84797 22.4912 9 22.0111 9 21.2338V6.76619Z"/></svg>'},564400:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="#fff" d="M7.88 24.2a1.28 1.28 0 0 0 2.03 1.04l14.23-10.2c.72-.51.72-1.57 0-2.08L9.91 2.76c-.85-.6-2.03 0-2.03 1.04v20.4Z"/></svg>'},137519:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="#fff" d="M8.24 25.48a1.44 1.44 0 0 0 2.28 1.17l16.02-11.48c.8-.57.8-1.77 0-2.34L10.52 1.35c-.95-.68-2.28 0-2.28 1.17v22.95Z"/></svg>'},722331:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M5 3V25H6.5V20L13.0219 20.0015C13.3121 20.0015 13.5763 19.834 13.7002 19.5715L19.8736 6.48403L18.517 5.84409L15.6132 12H6.5V3H5ZM23.0003 13.5H18.1998L18.803 12.2184L18.9057 12H23.0003V13.5Z"/></svg>'},707807:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="m8.5 3.84.34.28 4 3.5-.66.76L9.01 5.6V14H8V5.6L4.84 8.38l-.66-.76 4-3.5.33-.28H8.5Z"/></svg>'},428026:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M17.5 7H17v6h-3v-3H9v6H5v6h17V7h-4.5zm.5 14h3V8h-3v13zm-1 0v-7h-3v7h3zm-4-7.5V21h-3V11h3v2.5zM9 21v-4H6v4h3z"/></svg>'},628702:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120"><path fill="currentColor" fill-rule="evenodd" d="M14 12h80v29h15v60.5a9.5 9.5 0 0 1-8.15 9.4v.1H27.7A13.69 13.69 0 0 1 14 97.31V12zm77.75 95H27.7A9.69 9.69 0 0 1 18 97.31V16h72v85.5c0 2.05.65 3.95 1.75 5.5zm7.75 0a5.5 5.5 0 0 0 5.5-5.5V45H94v56.5a5.5 5.5 0 0 0 5.5 5.5zM81 69H27v-4h54v4zM27 87h33v-4H27v4zm54-54H61v-4h20v4zM61 51h20v-4H61v4zM35.17 40l-8.58-8.59 2.82-2.82L38 37.17l8.59-8.58 2.82 2.82L40.83 40l8.58 8.59-2.82 2.82L38 42.83l-8.59 8.58-2.82-2.82L35.17 40z"/></svg>'},310614:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M17.7071 8.00001L11.7071 14L17.7071 20L17 20.7071L10.2929 14L17 7.29291L17.7071 8.00001Z"/></svg>'},361991:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M15 6H7.5C6.67 6 6 6.67 6 7.5v13c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5V16h1v4.5a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 5 20.5v-13A2.5 2.5 0 0 1 7.5 5H15v1Z"/><path fill="currentColor" d="M22.41 5.7a2 2 0 0 0-2.82 0L11 14.3V18h3.7l8.6-8.59a2 2 0 0 0 0-2.82l-.89-.88Zm-2.12.71a1 1 0 0 1 1.42 0l.88.88a1 1 0 0 1 0 1.42l-.59.58L19.7 7l.6-.59Zm1 3.59-7 7H12v-2.3l7-7 2.3 2.3Z"/></svg>'},814133:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M7 6h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1ZM5 7c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7Zm12-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1Zm-2 1c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V7Zm-4 9H7a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1Zm-4-1a2 2 0 0 0-2 2v4c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2H7Zm10 1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1Zm-2 1c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-4Z"/></svg>'},29834:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM19 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"/></svg>'},315882:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}n.d(t,{default:()=>i})},330950:(e,t,n)=>{"use strict";function i(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{default:()=>i})},327714:(e,t,n)=>{"use strict";function i(e){var t=e.width,n=e.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:n}}function a(e,t){return e.width===t.width&&e.height===t.height}n.d(t,{CanvasRenderingTarget2D:()=>c,bindCanvasElementBitmapSizeTo:()=>s,equalSizes:()=>a,size:()=>i,tryCreateCanvasRenderingTarget2D:()=>u});var o=function(){function e(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return e.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(e.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(e){var t=this,n={next:e}
;return this._observers.push(n),{unsubscribe:function(){t._observers=t._observers.filter((function(e){return e!==n}))}}},e.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach((function(t){return t.next(e._window.devicePixelRatio)})),this._reinstallResolutionListener()},e}();var r=function(){function e(e,t,n){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=i({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=t?t:function(e){return e},this._allowResizeObserver=null===(a=null==n?void 0:n.allowResizeObserver)||void 0===a||a,this._chooseAndInitObserver()}return e.prototype.dispose=function(){var e,t;if(null===this._canvasElement)throw new Error("Object is disposed");null===(e=this._canvasElementResizeObserver)||void 0===e||e.disconnect(),this._canvasElementResizeObserver=null,null===(t=this._devicePixelRatioObservable)||void 0===t||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitmapSize",{get:function(){return i({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),e.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=i(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},e.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(t){return t!==e}))},
Object.defineProperty(e.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),e.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(t){return t!==e}))},e.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},e.prototype._resizeBitmap=function(e){var t=this.bitmapSize;a(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},e.prototype._emitBitmapSizeChanged=function(e,t){var n=this;this._bitmapSizeChangedListeners.forEach((function(i){return i.call(n,e,t)}))},e.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,n=i(this._transformBitmapSize(e,this._canvasElementClientSize)),o=a(this.bitmapSize,n)?null:n;null===t&&null===o||null!==t&&null!==o&&a(t,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(t,o))},e.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var n=this;this._suggestedBitmapSizeChangedListeners.forEach((function(i){return i.call(n,e,t)}))},e.prototype._chooseAndInitObserver=function(){var e=this;this._allowResizeObserver?new Promise((function(e){var t=new ResizeObserver((function(n){e(n.every((function(e){return"devicePixelContentBoxSize"in e}))),t.disconnect()}));t.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},e.prototype._initDevicePixelRatioObservable=function(){var e=this;if(null!==this._canvasElement){var t=l(this._canvasElement);if(null===t)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(e){return new o(e)}(t),this._devicePixelRatioObservable.subscribe((function(){return e._invalidateBitmapSize()})),this._invalidateBitmapSize()}},e.prototype._invalidateBitmapSize=function(){var e,t;if(null!==this._canvasElement){var n=l(this._canvasElement);if(null!==n){var a=null!==(t=null===(e=this._devicePixelRatioObservable)||void 0===e?void 0:e.value)&&void 0!==t?t:n.devicePixelRatio,o=this._canvasElement.getClientRects(),r=void 0!==o[0]?function(e,t){return i({width:Math.round(e.left*t+e.width*t)-Math.round(e.left*t),height:Math.round(e.top*t+e.height*t)-Math.round(e.top*t)})}(o[0],a):i({width:this._canvasElementClientSize.width*a,height:this._canvasElementClientSize.height*a});this._suggestNewBitmapSize(r)}}},e.prototype._initResizeObserver=function(){var e=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(t){var n=t.find((function(t){return t.target===e._canvasElement}))
;if(n&&n.devicePixelContentBoxSize&&n.devicePixelContentBoxSize[0]){var a=n.devicePixelContentBoxSize[0],o=i({width:a.inlineSize,height:a.blockSize});e._suggestNewBitmapSize(o)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},e}();function s(e,t){if("device-pixel-content-box"===t.type)return new r(e,t.transform,t.options);throw new Error("Unsupported binding target")}function l(e){return e.ownerDocument.defaultView}var c=function(){function e(e,t,n){if(0===t.width||0===t.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,0===n.width||0===n.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return e.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},e.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(e.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),e}();function u(e,t){var n=e.canvasElementClientSize;if(0===n.width||0===n.height)return null;var i=e.bitmapSize;if(0===i.width||0===i.height)return null;var a=e.canvasElement.getContext("2d",t);return null===a?null:new c(a,n,i)}}}]);
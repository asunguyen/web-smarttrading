(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[50845],{982434:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},977253:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},723490:e=>{e.exports={dropTargetInside:"dropTargetInside-e_nPSSdZ",dropTarget:"dropTarget-e_nPSSdZ",before:"before-e_nPSSdZ",after:"after-e_nPSSdZ"}},875564:e=>{e.exports={wrap:"wrap-IEe5qpW4",selected:"selected-IEe5qpW4",childOfSelected:"childOfSelected-IEe5qpW4",disabled:"disabled-IEe5qpW4",expandHandle:"expandHandle-IEe5qpW4",expanded:"expanded-IEe5qpW4"}},376106:e=>{e.exports={separator:"separator-MgF6KBas",tree:"tree-MgF6KBas",overlayScrollWrap:"overlayScrollWrap-MgF6KBas",listContainer:"listContainer-MgF6KBas"}},451860:(e,t,n)=>{"use strict";n.d(t,{OverlayScrollContainer:()=>S});var r=n(50959),o=n(497754),s=n.n(o),l=n(31341),i=n(650151),c=n(678515);const d=n(977253),a={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},u=40;function f(e){const{size:t,scrollSize:n,clientSize:o,scrollProgress:l,onScrollProgressChange:f,scrollMode:p,theme:E=d,onDragStart:S,onDragEnd:T,minBarSize:h=u}=e,g=(0,r.useRef)(null),v=(0,r.useRef)(null),[m,D]=(0,r.useState)(!1),I=(0,r.useRef)(0),{isHorizontal:N,isNegative:_,sizePropName:y,minSizePropName:C,startPointPropName:L,currentMousePointPropName:O,progressBarTransform:P}=a[p];(0,r.useEffect)((()=>{const e=(0,i.ensureNotNull)(g.current).ownerDocument;return m?(S&&S(),e&&(e.addEventListener("mousemove",U),e.addEventListener("mouseup",z))):T&&T(),()=>{e&&(e.removeEventListener("mousemove",U),e.removeEventListener("mouseup",z))}}),[m]);const R=t/n||0,b=o*R||0,M=Math.max(b,h),x=(t-M)/(t-b),w=n-t,A=_?-w:0,k=_?0:w,F=H((0,c.clamp)(l,A,k))||0;return r.createElement("div",{ref:g,className:s()(E.wrap,N&&E["wrap--horizontal"]),style:{[y]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=B(e.nativeEvent,(0,i.ensureNotNull)(g.current)),n=Math.sign(t),r=(0,i.ensureNotNull)(v.current).getBoundingClientRect();I.current=n*r[y]/2;let o=Math.abs(t)-Math.abs(I.current);const s=H(w);o<0?(o=0,I.current=t):o>s&&(o=s,I.current=t-n*s);f(W(n*o)),D(!0)}},r.createElement("div",{ref:v,className:s()(E.bar,N&&E["bar--horizontal"]),style:{[C]:h,[y]:M,transform:`${P}(${F}px)`},onMouseDown:function(e){e.preventDefault(),I.current=B(e.nativeEvent,(0,i.ensureNotNull)(v.current)),D(!0)}},r.createElement("div",{
className:s()(E.barInner,N&&E["barInner--horizontal"])})));function U(e){const t=B(e,(0,i.ensureNotNull)(g.current))-I.current;f(W(t))}function z(){D(!1)}function B(e,t){const n=t.getBoundingClientRect()[L];return e[O]-n}function H(e){return e*R*x}function W(e){return e/R/x}}var p=n(962624),E=n(982434);function S(e){const{reference:t,className:n,containerHeight:s=0,containerWidth:i=0,contentHeight:c=0,contentWidth:d=0,scrollPosTop:a=0,scrollPosLeft:u=0,onVerticalChange:S,onHorizontalChange:T,visible:h}=e,[g,v]=(0,p.useHover)(),[m,D]=(0,r.useState)(!1),I=s<c,N=i<d,_=I&&N?8:0;return r.createElement("div",{...v,ref:t,className:o(n,E.scrollWrap),style:{visibility:h||g||m?"visible":"hidden"}},I&&r.createElement(f,{size:s-_,scrollSize:c-_,clientSize:s-_,scrollProgress:a,onScrollProgressChange:function(e){S&&S(e)},onDragStart:y,onDragEnd:C,scrollMode:0}),N&&r.createElement(f,{size:i-_,scrollSize:d-_,clientSize:i-_,scrollProgress:u,onScrollProgressChange:function(e){T&&T(e)},onDragStart:y,onDragEnd:C,scrollMode:(0,l.isRtl)()?2:1}));function y(){D(!0)}function C(){D(!1)}}},960466:(e,t,n)=>{"use strict";n.d(t,{SizeContext:()=>r});const r=n(50959).createContext({size:0,smallSizeTreeNodeAction:1})},126425:(e,t,n)=>{"use strict";n.d(t,{dropSelection:()=>f,endDrag:()=>_,hideDropTarget:()=>E,moveNodes:()=>T,multiSelectNext:()=>a,multiSelectPrevious:()=>d,processDropTarget:()=>u,resetTree:()=>o,scrollToId:()=>m,selectNext:()=>c,selectPrevious:()=>i,setDisabledNodes:()=>N,setFocusedNode:()=>v,setIsExpanded:()=>I,setIsSelected:()=>D,setNodes:()=>l,setSelectedIds:()=>S,startMultiSelect:()=>h,stopMultiSelect:()=>g,syncNodes:()=>s,updateDropTarget:()=>p});var r=n(570225);const o=()=>({type:r.RESET_TREE}),s=e=>({type:r.SYNC_NODES,nodes:e}),l=e=>({type:r.SET_NODES,nodes:e}),i=()=>({type:r.SELECT_PREVIOUS}),c=()=>({type:r.SELECT_NEXT}),d=()=>({type:r.MULTI_SELECT_PREVIOUS}),a=()=>({type:r.MULTI_SELECT_NEXT}),u=(e,t,n,o,s)=>({type:r.PROCESS_DROP_TARGET,dropTarget:e,dropType:t,isHoveredLeft:n,boundBox:o,isLastChild:s}),f=()=>({type:r.DROP_SELECTION}),p=(e,t,n)=>({type:r.UPDATE_DROP_TARGET,node:e,dropType:t,boundBox:n}),E=()=>({type:r.HIDE_DROP_TARGET}),S=e=>({type:r.SET_SELECTED_IDS,ids:e}),T=(e,t,n)=>({type:r.MOVE_NODES,ids:e,targetId:t,dropType:n}),h=()=>({type:r.START_MULTI_SELECT}),g=()=>({type:r.STOP_MULTI_SELECT}),v=e=>({type:r.SET_FOCUSED_NODE,nodeId:e}),m=e=>({type:r.SCROLL_TO_ID,nodeId:e}),D=(e,t,n=0)=>({type:r.SET_IS_SELECTED,nodeId:e,isSelected:t,mode:n}),I=(e,t)=>({type:r.SET_IS_EXPANDED,nodeId:e,isExpanded:t}),N=e=>({type:r.SET_DISABLED_NODES,ids:e}),_=()=>({type:r.END_DRAG})},570225:(e,t,n)=>{"use strict";n.d(t,{DROP_SELECTION:()=>a,END_DRAG:()=>C,HIDE_DROP_TARGET:()=>h,MOVE_NODES:()=>y,MULTI_SELECT_NEXT:()=>E,MULTI_SELECT_PREVIOUS:()=>p,PROCESS_DROP_TARGET:()=>S,RESET_TREE:()=>c,SCROLL_TO_ID:()=>D,SELECT_NEXT:()=>f,SELECT_PREVIOUS:()=>u,SET_DISABLED_NODES:()=>_,SET_FOCUSED_NODE:()=>m,SET_IS_EXPANDED:()=>N,SET_IS_SELECTED:()=>I,SET_NODES:()=>o,SET_SELECTED_IDS:()=>d,START_MULTI_SELECT:()=>g,STOP_MULTI_SELECT:()=>v,
SYNC_NODES:()=>s,UPDATE_DROP_TARGET:()=>T,UPDATE_NODE:()=>l,UPDATE_NODES:()=>i});const r=(0,n(66889).createActionTypeFactory)("OBJECT_TREE"),o=r("SET_NODES"),s=r("SYNC_NODES"),l=r("UPDATE_NODE"),i=r("UPDATE_NODES"),c=r("RESET_TREE"),d=r("SET_SELECTED_IDS"),a=r("DROP_SELECTION"),u=r("SELECT_PREVIOUS"),f=r("SELECT_NEXT"),p=r("MULTI_SELECT_PREVIOUS"),E=r("MULTI_SELECT_NEXT"),S=r("PROCESS_DROP_TARGET"),T=r("UPDATE_DROP_TARGET"),h=r("HIDE_DROP_TARGET"),g=r("START_MULTI_SELECT"),v=r("STOP_MULTI_SELECT"),m=(r("REMOVE_NODE"),r("SET_FOCUSED_NODE")),D=r("SCROLL_TO_ID"),I=r("SET_IS_SELECTED"),N=r("SET_IS_EXPANDED"),_=r("SET_DISABLED_NODES"),y=r("MOVE_NODES"),C=(r("START_DRAG"),r("END_DRAG"))},557314:(e,t,n)=>{"use strict";n.d(t,{dropTargetSelector:()=>i,isDisabledSelector:()=>E,isExpandedSelector:()=>p,isMultiSelectingSelector:()=>g,isSelectedSelector:()=>f,lastFocusedNodeIdSelector:()=>h,nodeIdsSelector:()=>S,nodeSelector:()=>u,nodesSelector:()=>s,orderedNodesSelector:()=>D,renderDragListSelector:()=>_,renderListSelector:()=>N,scrollToIdSelector:()=>d,selectedIdsSelector:()=>T,selectedNodesSelector:()=>v});var r=n(377145),o=n(650151);const s=e=>e.nodes,l=e=>e.selection,i=e=>e.dropTarget,c=e=>e.expanded,d=e=>e.scrollToId,a=(e,t)=>t,u=(0,r.createSelector)([s,a],((e,t)=>e[t])),f=(0,r.createSelector)([l,a],((e,t)=>e.ids.includes(t))),p=(0,r.createSelector)([c,a],((e,t)=>e.includes(t))),E=(0,r.createSelector)([e=>e.disabled,l,a],((e,t,n)=>!t.ids.includes(n)&&e.includes(n))),S=(0,r.createSelector)(s,(e=>Object.keys(e))),T=(0,r.createSelector)(l,(({ids:e})=>e)),h=(0,r.createSelector)(l,(({lastFocusedNodeId:e})=>e)),g=(0,r.createSelector)(l,(({isMultiSelecting:e})=>e)),v=(0,r.createSelector)([s,T],((e,t)=>t.map((t=>e[t])))),m=(0,r.createSelector)(s,(e=>Object.values(e).filter((e=>0===e.level)))),D=(0,r.createSelector)([s,m],((e,t)=>t.reduce(((t,n)=>[...t,...I(e,(0,o.ensureDefined)(n))]),[])));function I(e,t){const n=[];for(const r of t.children)n.push(e[r]),n.push(...I(e,e[r]));return n}const N=(0,r.createSelector)([s,m,c],((e,t,n)=>{const r=new Set(n);return t.reduce(((t,n)=>[...t,...y(e,(0,o.ensureDefined)(n),r)]),[])})),_=(0,r.createSelector)([s,T,c],((e,t,n)=>{const r=new Set(n);return[{id:"drag-list",level:-1,children:t}].reduce(((t,n)=>[...t,...y(e,(0,o.ensureDefined)(n),r)]),[])}));function y(e,t,n){const r=[];for(const o of t.children){const t=e[o];void 0!==t&&(r.push(t),n.has(o)&&r.push(...y(e,t,n)))}return r}},28473:(e,t,n)=>{"use strict";n.d(t,{getInsertIndex:()=>l,logger:()=>s});var r=n(201089),o=n(650151);const s=(0,r.getLogger)("Platform.GUI.ObjectTree.CallApi"),l=(e,t,n)=>{switch(n){case"before":return e.indexOf((0,o.ensureDefined)(t));case"inside":return e.length;case"after":return e.indexOf((0,o.ensureDefined)(t))+1;default:return 0}}},478293:(e,t,n)=>{"use strict";n.d(t,{Tree:()=>Re});var r=n(50959),o=n(254773),s=n(386942),l=n(10170),i=n(207809),c=n(23642),d=n(336349),a=n(570225),u=n(126425),f=n(557314);function*p(e){const{selectedIds:t,nodes:n}=yield(0,d.call)(e),r={};for(let e=0;e<n.length;++e){const t=n[e]
;r[t.id]=t}yield(0,d.put)((0,u.setNodes)(r)),yield(0,d.put)((0,u.setSelectedIds)(t));!(0,f.lastFocusedNodeIdSelector)(yield(0,d.select)())&&t.length>0&&(yield(0,d.put)((0,u.setFocusedNode)(t[0])),yield(0,d.put)((0,u.scrollToId)(t[0])))}var E=n(650151);function*S(e){for(;;){if((yield(0,d.take)([a.START_MULTI_SELECT,a.STOP_MULTI_SELECT])).type===a.START_MULTI_SELECT){const t=(0,f.nodeIdsSelector)(yield(0,d.select)()).filter((t=>!e(t)));yield(0,d.put)((0,u.setDisabledNodes)(t))}else yield(0,d.put)((0,u.setDisabledNodes)([]))}}function*T(){for(;;){const{type:e}=yield(0,d.take)([a.MULTI_SELECT_NEXT,a.MULTI_SELECT_PREVIOUS]),t=yield(0,d.select)(),n=(0,f.orderedNodesSelector)(t),r=n.length,o=(0,f.lastFocusedNodeIdSelector)(t),s=[...(0,f.selectedIdsSelector)(t)],l=1===s.length&&s[0]!==o,i=n.findIndex((e=>e.id===(l?s[0]:o)));if(e===a.MULTI_SELECT_PREVIOUS&&0===i||e===a.MULTI_SELECT_NEXT&&i===r-1)continue;const c=N(t,e===a.MULTI_SELECT_NEXT?"next":"previous",n,i),{id:p}=c;s.includes(p)&&o?(yield(0,d.put)((0,u.setIsSelected)(o,!1,1)),yield(0,d.put)((0,u.setFocusedNode)(p))):yield(0,d.put)((0,u.setIsSelected)(p,!0,1)),yield(0,d.put)((0,u.scrollToId)(p))}}function*h(e,t){for(;;){const{type:n}=yield(0,d.take)([a.SELECT_NEXT,a.SELECT_PREVIOUS]),r=yield(0,d.select)(),o=(0,f.orderedNodesSelector)(r),s=(0,f.selectedNodesSelector)(r),l=(0,f.lastFocusedNodeIdSelector)(r);if(1===s.length&&s[0].id!==l&&!l){if(n===a.SELECT_NEXT){yield(0,d.put)((0,u.setFocusedNode)(s[0].id));continue}if(n===a.SELECT_PREVIOUS){const e=o.findIndex((e=>e.id===s[0].id)),t=N(r,"previous",o,e);yield(0,d.put)((0,u.setFocusedNode)(t.id));continue}}const i=o.findIndex((e=>e.id===l)),c=n===a.SELECT_NEXT?"next":"previous",p=N(r,c,o,i),{id:E}=p;e?e([E],c):yield(0,d.put)((0,u.setSelectedIds)([E])),t&&t(E),yield(0,d.put)((0,u.setFocusedNode)(E))}}function*g(e,t=(()=>!0)){for(;;){const{mode:n,nodeId:r,isSelected:o}=yield(0,d.take)(a.SET_IS_SELECTED);let s=[...(0,f.selectedIdsSelector)(yield(0,d.select)())];const l=(0,f.orderedNodesSelector)(yield(0,d.select)());if(1===n)o?s.push(r):s.splice(s.indexOf(r),1);else if(2===n&&s.length>0){const e=(0,f.lastFocusedNodeIdSelector)(yield(0,d.select)());let n=l.findIndex((t=>t.id===e));-1===n&&(n=l.reduce(((e,t,n)=>s.includes(t.id)?n:e),-1));const o=l.findIndex((e=>e.id===r));if(n!==o)for(let e=Math.min(n,o);e<=Math.max(n,o);e++){const n=l[e].id;!s.includes(n)&&t(n)&&s.push(n)}}else s=r?[r]:[];const i=new Set(s);s=l.reduce(((e,t)=>(i.has(t.id)&&e.push(t.id),e)),[]),e?e(s):yield(0,d.put)((0,u.setSelectedIds)(s)),yield(0,d.put)((0,u.setFocusedNode)(r))}}function*v(e=(()=>!0),t){const{dropTarget:n,dropType:r,isHoveredLeft:o,boundBox:s,isLastChild:l}=t,i=(0,f.dropTargetSelector)(yield(0,d.select)()),c=(0,f.nodeSelector)(yield(0,d.select)(),(0,E.ensureDefined)(n.parentId)),a=l&&"after"===r,p=(0,f.selectedNodesSelector)(yield(0,d.select)()),S=!a||!o&&e(p,n,r)?n:c,T=i.node&&i.node.id!==S.id||i.dropType!==r;p.map((e=>e.id)).includes(S.id)?yield(0,d.put)((0,u.hideDropTarget)()):T&&e(p,S,r)&&(yield(0,d.put)((0,u.updateDropTarget)(S,r,s)))}
function*m(e){yield(0,d.throttle)(0,a.PROCESS_DROP_TARGET,v,e)}function*D(e){for(;;){yield(0,d.take)(a.DROP_SELECTION);const t=(0,f.selectedNodesSelector)(yield(0,d.select)()),{node:n,dropType:r}=(0,f.dropTargetSelector)(yield(0,d.select)());if(n&&r){const o=new CustomEvent("tree-node-drop",{detail:{nodes:t,target:n.id,type:r}});if(e&&e(o),!o.defaultPrevented){const e=(0,f.selectedIdsSelector)(yield(0,d.select)());yield(0,d.put)((0,u.moveNodes)(e,n.id,r))}}}}function*I(e){for(;;){yield(0,d.take)(a.MOVE_NODES);e((0,f.nodesSelector)(yield(0,d.select)()))}}function N(e,t,n,r){const o=n.length;let s;-1===r&&"previous"===t&&(r=o);let l=0;for(;!s||Math.abs(l)<o&&((i=s).level>1&&!(0,f.isExpandedSelector)(e,(0,E.ensureDefined)(i.parentId)));)l+="next"===t?1:-1,s=n[(r+l+o)%o];var i;return s}function*_(e={}){const{saga:t,onDrop:n,canMove:r,onMove:o,onSelect:s,onKeyboardSelect:l,initState:i,canBeAddedToSelection:c}=e,u=[(0,d.fork)(m,r),(0,d.fork)(D,n),(0,d.fork)(g,s,c),(0,d.fork)(h,s,l),(0,d.fork)(T)];for(t&&u.push((0,d.fork)(t)),o&&u.push((0,d.fork)(I,o)),c&&u.push((0,d.fork)(S,c));;){i&&(yield(0,d.call)(p,i));const e=yield(0,d.all)(u);yield(0,d.take)(a.RESET_TREE);for(const t of e)yield(0,d.cancel)(t)}}var y=n(691622),C=n(457825),L=n(389137),O=n(28473);const P={ids:[],lastFocusedNodeId:void 0,isMultiSelecting:!1};const R={node:void 0,dropType:void 0,boundBox:void 0};const b=(0,y.combineReducers)({nodes:function(e={},t){switch(t.type){case a.SET_NODES:return t.nodes;case a.SYNC_NODES:{const{nodes:n}=t,r=n.map((e=>e.id)),o={...e};for(const t of Object.keys(e))if(!r.includes(t)){const{parentId:e}=o[t];e&&(o[e]={...o[e],children:o[e].children.filter((e=>e!==t))}),delete o[t]}for(const e of n){const t=e.id;if(o.hasOwnProperty(t)){!(0,L.deepEquals)(o[t].children,e.children)[0]&&(o[t]={...o[t],children:[...e.children]})}else{o[t]=e;const{parentId:n}=e;if(n&&!o[n].children.includes(t))throw new Error("Not implemented")}}return o}case a.UPDATE_NODE:{const{type:n,nodeId:r,...o}=t;return{...e,[r]:{...e[r],...o}}}case a.UPDATE_NODES:{const{nodes:n}=t,r={...e};return Object.keys(n).forEach((e=>{r[e]={...r[e],...n[e]}})),{...e,...r}}case a.MOVE_NODES:{const{ids:n,targetId:r,dropType:o}=t,s=(0,E.ensureDefined)(e[r].parentId),l=e[s],i={};for(const t of n){const n=e[t];if(n.parentId){const r=i[n.parentId]||e[n.parentId];i[n.parentId]={...r,children:r.children.filter((e=>e!==t))}}i[t]={...n,parentId:s,level:l.level+1}}const c=l.children.filter((e=>!n.includes(e)));return c.splice((0,O.getInsertIndex)(c,r,o),0,...n),i[s]={...e[s],children:c,isExpanded:!0},{...e,...i}}default:return e}},selection:function(e=P,t){switch(t.type){case a.SET_SELECTED_IDS:{const{ids:n}=t;return{...e,ids:n,lastFocusedNodeId:n.length>0?e.lastFocusedNodeId:void 0}}case a.START_MULTI_SELECT:return{...e,isMultiSelecting:!0};case a.STOP_MULTI_SELECT:return{...e,isMultiSelecting:!1};case a.SET_FOCUSED_NODE:return{...e,lastFocusedNodeId:t.nodeId};case a.SYNC_NODES:{const n=new Set(t.nodes.map((e=>e.id)))
;return e.lastFocusedNodeId&&!n.has(e.lastFocusedNodeId)&&delete e.lastFocusedNodeId,{...e,ids:e.ids.filter((e=>n.has(e)))}}default:return e}},dropTarget:function(e=R,t){switch(t.type){case a.UPDATE_DROP_TARGET:{const{node:n,dropType:r,boundBox:o}=t;return{...e,node:n,dropType:r,boundBox:o}}case a.HIDE_DROP_TARGET:case a.END_DRAG:case a.RESET_TREE:return{...R};default:return e}},expanded:function(e=[],t){if(t.type===a.SET_IS_EXPANDED){const{nodeId:n,isExpanded:r}=t;if(r)return[...e,n];const o=[...e];return o.splice(e.indexOf(n),1),o}return e},disabled:function(e=[],t){return t.type===a.SET_DISABLED_NODES?[...t.ids]:e},scrollToId:function(e=null,t){return t.type===a.SCROLL_TO_ID?null===t.nodeId?null:{id:t.nodeId}:e}});var M=n(497754),x=n.n(M),w=n(240933),A=n(130979),k=n(638456);var F=n(42357),U=n(298314),z=n(83436),B=n(470316),H=n(763341),W=n(962624),V=n(960466);const X={[B.Modifiers.Mod]:1,[B.Modifiers.Shift]:2};var G=n(569533),j=n(875564);const K=()=>{};class q extends r.PureComponent{constructor(){super(...arguments),this._ref=null,this._handleRef=e=>{this._ref=e;const{connectDragSource:t,connectDropTarget:n,connectDragPreview:r}=this.props;(0,E.ensureDefined)(n)(this._ref),(0,E.ensureDefined)(t)(this._ref),(0,E.ensureDefined)(r)((0,U.getEmptyImage)(),{captureDraggingState:!0})},this._handleTouchStart=e=>{const t=(e,t)=>{const n=function(e,t){try{const n=document.createEvent("TouchEvent");return n.initTouchEvent(e,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.touches,t.targetTouches,t.changedTouches),n}catch(e){return null}}(e,t);if(n)return n;const r=Array.from(t.changedTouches),o=Array.from(t.touches),s=Array.from(t.targetTouches);return new TouchEvent(e,{bubbles:!0,changedTouches:r,touches:o,targetTouches:s})},n=e.target;if(n instanceof Element){const e=e=>{const r=e;if(!n.isConnected){r.preventDefault();const e=t("touchmove",r);document.body.dispatchEvent(e)}},r=o=>{const s=o;if(!n.isConnected){s.preventDefault();const e=t("touchend",s);document.body.dispatchEvent(e)}n.removeEventListener("touchend",r),n.removeEventListener("touchmove",e)};n.addEventListener("touchend",r),n.addEventListener("touchmove",e)}}}componentDidMount(){var e;null===(e=this._ref)||void 0===e||e.addEventListener("touchstart",this._handleTouchStart)}componentWillUnmount(){var e;null===(e=this._ref)||void 0===e||e.removeEventListener("touchstart",this._handleTouchStart)}render(){return r.createElement(Y,{...this.props,reference:this._handleRef})}getNode(){return(0,E.ensureNotNull)(this._ref)}}const Y=e=>{const{id:t,isSelected:n,isOffset:o,isExpandable:s,setIsSelected:l,isDisabled:i,isExpanded:c,onClick:d,parentId:a,setIsExpanded:u,reference:f,isFirstListItem:p,isLastListItem:E,nodeRenderer:S,isChildOfSelected:T=!1}=e,{size:h,smallSizeTreeNodeAction:g}=(0,r.useContext)(V.SizeContext),v=(0,r.useRef)(null),m=(0,H.createSafeMulticastEventHandler)((e=>v.current=e),f);let[D,I]=(0,W.useHover)();return(k.CheckMobile.any()||k.CheckMobile.isIPad())&&(D=n,I={onMouseOut:K,onMouseOver:K}),r.createElement("div",{
className:M(j.wrap,n&&j.selected,T&&j.childOfSelected,i&&j.disabled,s&&j.expandable),onClick:1===h&&0===g?N:function(e){if(e.defaultPrevented)return;const r=X[(0,B.modifiersFromEvent)(e)]||0;!i&&l&&l(t,!n,r);d&&0===r&&d(e,t)},onContextMenu:N,ref:m,...I},s&&r.createElement(z.Icon,{icon:G,className:M(j.expandHandle,c&&j.expanded),onClick:function(e){e.preventDefault(),s&&u(t,!c)},onMouseDown:function(e){e.preventDefault()}}),S({id:t,isOffset:o,parentId:a,isDisabled:i,isSelected:n,isChildOfSelected:T,isHovered:D,isExpanded:c,isFirstListItem:p,isLastListItem:E}));function N(){i||n||!l||l(t,!0)}},$=r.createContext({});function Z(e,t){const{id:n}=t,r=(0,f.nodeSelector)(e,n),o=(0,f.isSelectedSelector)(e,n);let s=!1,l=r.parentId;for(;l&&!s;)s=(0,f.isSelectedSelector)(e,l),l=(0,f.nodeSelector)(e,l).parentId;return{...r,isSelected:o,isChildOfSelected:s,isExpanded:r.children.length>0&&(0,f.isExpandedSelector)(e,n),isExpandable:r.children.length>0,isDisabled:(0,f.isDisabledSelector)(e,n)}}function J(e){return(0,y.bindActionCreators)({setIsExpanded:u.setIsExpanded,processDropTarget:u.processDropTarget,dropSelection:u.dropSelection,selectNext:u.selectNext,selectPrevious:u.selectPrevious,setIsSelected:u.setIsSelected,endDrag:u.endDrag},e)}const Q=(0,s.connect)(Z,J,null,{context:$})((function(e){const t=(0,r.useRef)(null),[,n,o]=(0,F.useDrag)({type:"node",item:t=>{const{id:n,isDisabled:r,isSelected:o}=e;return r||o||e.setIsSelected(n,!0),e},end:e=>{e.endDrag()}}),[,s]=(0,w.useDrop)({accept:"node",hover:(n,r)=>{const o=t.current;if(!o)return;const s=o.getNode(),l=s.getBoundingClientRect(),i=l.bottom-l.top,c=r.getClientOffset();if(c){const t=c.y-l.top;let n,r;if(n=0===e.children.length?t<i/2?"before":"after":t<i/3?"before":e.isExpanded||t>=i/3&&t<2*i/3?"inside":"after",void 0!==e.getContainerElement){const t=e.getContainerElement().getBoundingClientRect();r={top:l.top-t.top,left:l.left-t.left,bottom:l.top-t.top+l.height,right:l.left-t.left+l.width,height:l.height,width:l.width}}else r={top:s.offsetTop,left:s.offsetLeft,bottom:s.offsetTop+s.offsetHeight,right:s.offsetLeft+s.offsetWidth,height:s.offsetHeight,width:s.offsetWidth};e.processDropTarget(e,n,c.x-l.left<48,r,e.isLastChild)}}});return r.createElement(q,{...e,connectDragSource:n,connectDropTarget:s,connectDragPreview:o,ref:t})})),ee=(0,s.connect)(Z,J,null,{context:$})(Y);var te=n(515312),ne=n(85783),re=n(636098);function oe(e){const t=e(),n=(0,r.useRef)(t);n.current=t;const[o,s]=(0,r.useState)(n.current),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{null===l.current&&(l.current=requestAnimationFrame((()=>{l.current=null,s(n.current)})))})),(0,r.useEffect)((()=>()=>{l.current&&cancelAnimationFrame(l.current)}),[]),o}function se(e){const{dropTargetOffset:t,mousePosition:n}=e;if(!t)return{display:"none"};const{x:r,y:o}=t,s=n&&t?n.y-t.y:0,l=`translate(${r+(n&&t?n.x-t.x:0)}px, ${o+s}px)`;return{transform:l,WebkitTransform:l}}const le={top:0,left:0,position:"fixed",pointerEvents:"none",zIndex:100,opacity:.5,width:300,backgroundColor:"red"};function ie(e){return{
isDragging:e.isDragging()&&"node"===e.getItemType(),mousePosition:e.getClientOffset(),dropTargetOffset:e.getSourceClientOffset()}}const ce=(0,s.connect)((function(e){return{items:(0,f.renderDragListSelector)(e)}}),null,null,{context:$})((function(e){const{items:t,isDragging:n,nodeRenderer:o,dragPreviewRenderer:s}=e;return oe((function(){return n?r.createElement(re.Portal,null,r.createElement("div",{style:{...le,...se(e)}},t.map((e=>{if(s){const t=s;return r.createElement(t,{key:e.id,...e})}return r.createElement(ee,{id:e.id,key:e.id,nodeRenderer:o,isDragPreview:!0,isOffset:e.level>1})})))):null}))}));function de(e){return r.createElement(ce,{...e,...(0,ne.useDragLayer)(ie)})}var ae=n(890523),ue=n(451860),fe=n(445343);const pe=r.forwardRef(((e,t)=>{const n=(0,r.useRef)(null);return e.connectDropTarget(n),(0,r.useImperativeHandle)(t,(()=>({getNode:()=>(0,E.ensureNotNull)(n.current)})),[]),r.createElement("div",{ref:n,style:{height:"100%",width:"100%"}})}));function Ee(e){const t=(0,r.useRef)(null),[,n]=(0,w.useDrop)({accept:"node",hover:(n,r)=>{if(!t.current)return;const o=r.getClientOffset();if(null===o)return;const s=e.getOrderedNodes();if(0===s.length)return;const l=t.current.getNode().getBoundingClientRect(),i=e.getContainerElement().getBoundingClientRect();if("first"===e.type){const t={top:l.top-i.top+l.height,left:l.left-i.left,bottom:l.top-i.top+l.height,right:l.left-i.left+l.width,height:0,width:l.width};e.processDropTarget(s[0],"before",!1,t,!1)}if("last"===e.type){const t=o.x-l.left<48,n=s[s.length-1],r=t&&2===n.level?(0,E.ensureDefined)(s.find((e=>e.id===n.parentId))):n,c={top:l.top-i.top,left:l.left-i.left,bottom:l.top-i.top,right:l.left-i.left+l.width,height:l.height,width:l.width};e.processDropTarget(r,"after",t,c,!1)}}});return r.createElement(pe,{...e,connectDropTarget:n,ref:t})}const Se=r.createContext({isOver:!1,transform:void 0});var Te=n(723490);function he(e){const{dropType:t,boundBox:n}=e,{top:r,bottom:o,left:s}=(0,E.ensureDefined)(n);return[s,"before"===t||"inside"===t?r:o]}function ge(e){return{isDragging:e.isDragging()}}const ve=(0,s.connect)((function(e){const{boundBox:t,dropType:n,node:r}=(0,f.dropTargetSelector)(e);return{boundBox:t,dropType:n,level:r?r.level:void 0}}),null,null,{context:$})((function(e){const{dropType:t,boundBox:n,isDragging:o,level:s,transform:l=he}=e;return oe((function(){if(!o||!t||!n)return null;const i={[Te.dropTarget]:"inside"!==t,[Te.dropTargetInside]:"inside"===t},{width:c,height:d}=n,[a,u]=l(e),f=`translate(${a}px, ${u}px)`;return r.createElement("div",{className:M(i),style:{position:"absolute",transform:f,WebkitTransform:f,top:0,left:2===s?"46px":0,width:2===s?c-46+"px":c,height:"inside"===t?d:"2px"}})}))}));function me(e){const{isDragging:t}=(0,ne.useDragLayer)(ge);return r.createElement(ve,{...e,isDragging:t})}const De=r.forwardRef(((e,t)=>{const n=(0,r.useContext)(Se);return r.createElement("div",{...e,ref:t},e.children,n.isOver&&r.createElement(me,{transform:n.transform}))}));var Ie=n(31341),Ne=n(580602),_e=n(376106)
;const ye=38+B.Modifiers.Shift,Ce=40+B.Modifiers.Shift;const Le=r.forwardRef((function(e,t){const{navigationKeys:n,renderList:o,stopMultiSelect:s,startMultiSelect:l,isMultiSelecting:i,nodeRenderer:c,dragPreviewRenderer:d,className:a,connectDropTarget:u,readOnly:f,onClick:p,dropLayerTransform:S,setFocusedNode:T,scrollToId:h,rowHeight:g,onMultiSelectPrevious:v,onMultiSelectNext:m,onMoveCursorToNext:D,onMoveCursorToPrevious:I,onKeyDown:N,outerRef:_,width:y,height:C,isOver:L,processDropTarget:O,autofocus:P}=e,R=(0,r.useContext)(ae.ObjectTreeContext),b=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;P&&(null===(e=b.current)||void 0===e||e.focus())}),[]),(0,r.useEffect)((()=>{const e=e=>{[B.Modifiers.Mod,B.Modifiers.Shift].includes((0,B.modifiersFromEvent)(e))&&l()},t=e=>{i&&![B.Modifiers.Mod,B.Modifiers.Shift].includes((0,B.modifiersFromEvent)(e))&&s()};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),document.addEventListener("mousemove",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),document.removeEventListener("mousemove",t)}}),[i]),function(e){(0,r.useEffect)((()=>{if(k.isEdge){let t=null;const n=(0,E.ensureNotNull)(e.current),r=e=>{if(e.target instanceof Element){const n=(0,E.ensureNotNull)(e.target.closest("[draggable]"));n instanceof HTMLElement&&(n.style.opacity="0",t=requestAnimationFrame((()=>n.style.opacity="1")))}};return n.addEventListener("dragstart",r),()=>{n.removeEventListener("dragstart",r),null!==t&&cancelAnimationFrame(t)}}return()=>{}}),[])}(b);const M=(0,r.useCallback)((()=>(0,E.ensureNotNull)(Y.current)),[]),w=(0,r.useCallback)((()=>o),[o]),F=(0,r.useMemo)((()=>{const e=f?ee:Q,t=[];let n;t.push({type:"padding",node:r.createElement(Ee,{type:"first",key:"padding-top",getContainerElement:M,getOrderedNodes:w,processDropTarget:O})});for(let s=0;s<o.length;s++){const l=o[s];1===l.level&&(void 0!==n&&n!==l.parentId&&t.push({type:"separator",node:r.createElement("div",{key:n+"_separator",className:_e.separator})}),n=l.parentId),t.push({type:"node",node:r.createElement(e,{id:l.id,key:l.id,isFirstListItem:0===s,isLastListItem:s===o.length-1,isExpandable:l.children.length>0,nodeRenderer:c,readOnly:f,onClick:p,isOffset:l.level>1,getContainerElement:M})})}return t.push({type:"padding",node:r.createElement(Ee,{type:"last",key:"padding-bottom",getContainerElement:M,getOrderedNodes:w,processDropTarget:O})}),t}),[o]),U=(0,r.useRef)([]);U.current=F;const z=(0,r.useCallback)((e=>{let{style:t}=e;const{index:n}=e;return n===U.current.length-1&&(t={...t,bottom:0,minHeight:t.height},delete t.height),r.createElement("div",{style:t},U.current[n].node)}),[]),H=(0,r.useCallback)((e=>{const t=U.current[e];return"padding"===t.type?6:"function"==typeof g?g(e,t):g}),[g]),W=(0,r.useCallback)((e=>(0,E.ensure)(U.current[e].node.key)),[]),V=(0,r.useMemo)((()=>null===h?{index:-1}:{index:U.current.findIndex((e=>e.node.key===h.id))}),[h]);u(b);const[X,G,j,K]=(0,fe.useOverlayScroll)(),q=(0,r.useRef)(null);(0,r.useEffect)((()=>(0,
E.ensureNotNull)(q.current).resetAfterIndex(0,!0)),[F]),(0,r.useEffect)((()=>(0,E.ensureNotNull)(q.current).scrollToItem(V.index)),[V]);const Y=(0,r.useRef)(null),$=(0,r.useMemo)((()=>({isOver:L,transform:S})),[L,S]),Z=(0,r.useRef)(null),J=(0,r.useRef)({startScroll(e){const t=()=>{null!==j.current&&(Z.current=requestAnimationFrame(t),j.current.scrollBy({top:e}))};this.stopScroll(),t()},stopScroll(){null!==Z.current&&(cancelAnimationFrame(Z.current),Z.current=null)},getListElement:()=>j.current});return(0,r.useImperativeHandle)(t,(()=>J.current),[]),(0,r.useEffect)((()=>()=>J.current.stopScroll()),[L]),(0,r.useEffect)((()=>{if(!b.current||!Ne.PLATFORM_ACCESSIBILITY_ENABLED)return;function e(e){if(!t.matches(":focus-visible"))return;if(!R)return;const{viewModel:n}=R,r=n.selection();e.defaultPrevented||e.currentTarget!==e.target||r.selected().length||D()}const t=b.current;return t.addEventListener("focus",e),()=>{t.removeEventListener("focus",e)}}),[b,D,R]),r.createElement(Se.Provider,{value:$},r.createElement("div",{...G,className:x()(_e.tree,a),ref:b,"data-name":"tree",tabIndex:Ne.PLATFORM_ACCESSIBILITY_ENABLED?0:-1,onKeyDown:function(e){const t=(0,B.hashFromEvent)(e);if(e.defaultPrevented||(0,te.isNativeUIInteraction)(t,e.target))return;const r=(0,E.ensureDefined)(X.scrollPosTop),o=(0,E.ensureDefined)(X.contentHeight),s=(0,E.ensureDefined)(X.containerHeight);if(s){const n=.875*s,l=r+s===o;switch(t){case 35:l||(e.preventDefault(),ne(o));break;case 36:0!==r&&(e.preventDefault(),ne(0));break;case 33:0!==r&&(e.preventDefault(),ne(Math.max(0,r-n)));break;case 34:l||(e.preventDefault(),ne(Math.min(r+n,o)))}}R||t!==ye||(e.preventDefault(),v());R||t!==Ce||(e.preventDefault(),m());(38===t||void 0!==n&&"previous"===n[t])&&(e.preventDefault(),I());(40===t||void 0!==n&&"next"===n[t])&&(e.preventDefault(),D());if((8===t||46===t)&&R){const{viewModel:e}=R,t=e.selection(),n=t.selected();if(1!==n.length)return;const r=e.getNextNodeIdAfterRemove(n[0]);if(null===r)return;e.onChange().subscribe(null,(()=>{if(t.selected().length)return;const n=e.entity(r);n&&(t.set([n]),T(r))}),!0)}null==N||N(e)}},r.createElement(ue.OverlayScrollContainer,{...X,className:_e.overlayScrollWrap}),r.createElement(A.VariableSizeList,{ref:function(e){q.current=e},className:_e.listContainer,width:y,height:C,itemCount:F.length,itemSize:H,children:z,itemKey:W,outerRef:function(e){j.current=e,_&&_(e)},innerRef:function(e){Y.current=e},innerElementType:De,onItemsRendered:function(){K()},overscanCount:20,direction:(0,Ie.isRtl)()?"rtl":"ltr"}),r.createElement(de,{dragPreviewRenderer:d,nodeRenderer:c})));function ne(e){var t;null===(t=j.current)||void 0===t||t.scrollTo({left:0,top:e})}}));const Oe=(0,s.connect)((function(e){return{renderList:(0,f.renderListSelector)(e),orderedNodes:(0,f.orderedNodesSelector)(e),isMultiSelecting:(0,f.isMultiSelectingSelector)(e),selectedIds:(0,f.selectedIdsSelector)(e),scrollToId:(0,f.scrollToIdSelector)(e)}}),(function(e){return(0,y.bindActionCreators)({startMultiSelect:u.startMultiSelect,stopMultiSelect:u.stopMultiSelect,
setFocusedNode:u.setFocusedNode,processDropTarget:u.processDropTarget,onMoveCursorToNext:u.selectNext,onMoveCursorToPrevious:u.selectPrevious,onMultiSelectPrevious:u.multiSelectPrevious,onMultiSelectNext:u.multiSelectNext},e)}),null,{context:$})((function(e){const t=(0,r.useRef)(null),[{isOver:n},o]=(0,w.useDrop)({accept:"node",drop:(n,r)=>{var o;("touch"===e.drag||k.isFF)&&(null===(o=t.current)||void 0===o||o.stopScroll()),r.getItem().dropSelection()},hover:(n,r)=>{var o,s;if("touch"!==e.drag&&!k.isFF)return;const l=r.getClientOffset();if(null===l)return;const i=null!==(s=null===(o=t.current)||void 0===o?void 0:o.getListElement())&&void 0!==s?s:null;if(null===i)return;const c=i.getBoundingClientRect();((n,r,o)=>{var s;const l=Math.abs(n-o),i=Math.abs(n-r);if(i>40&&l>40||l<=40&&i<=40)return void(null===(s=t.current)||void 0===s||s.stopScroll());((n,r,o,s)=>{var l,i,c,d;r||n?"touch"===e.drag?null===(l=t.current)||void 0===l||l.startScroll(r?-5:5):null===(i=t.current)||void 0===i||i.startScroll(r?-2:2):(o||s)&&("touch"===e.drag?null===(c=t.current)||void 0===c||c.startScroll(o?-10:10):null===(d=t.current)||void 0===d||d.startScroll(o?-5:5))})(i>20&&i<=40,l>20&&l<=40,l<=20,i<=20)})(l.y,c.bottom,c.top)},collect:e=>({isOver:e.isOver()})});return r.createElement(Le,{...e,isOver:n,connectDropTarget:o,ref:t})})),Pe={delayTouchStart:100};function Re(e){const{canBeAddedToSelection:t,initState:n,onSelect:s,canMove:l,onDrop:i,onMove:c,nodes:d,selectedIds:a,onKeyboardSelect:f,saga:p,lastFocusedNodeObject:E,lastSyncTimestampRef:S,scrollToId:T,...h}=e,[g,v]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=(0,o.default)();v(function(e){const t=(0,C.composeWithDevTools)((0,y.applyMiddleware)(e));return(0,y.createStore)(b,t)}(e));const r=e.run(_,{initState:n,onKeyboardSelect:f,saga:p,canMove:l,onMove:c,onDrop:i,onSelect:s,canBeAddedToSelection:t});return()=>r.cancel()}),[]),(0,r.useEffect)((()=>(null!==g&&d&&(S&&(S.current=performance.now()),g.dispatch((0,u.syncNodes)(d))),()=>{})),[g,d]),(0,r.useEffect)((()=>{null!==g&&a&&g.dispatch((0,u.setSelectedIds)(a))}),[g,a]),(0,r.useEffect)((()=>{null!==g&&(null==E?void 0:E.id)&&g.dispatch((0,u.setFocusedNode)(E.id))}),[g,E]),null===g?null:r.createElement(be,{store:g,scrollToId:T,...h})}const be=r.memo((function(e){const{store:t,scrollToId:n,...o}=e,d="touch"===e.drag?i.TouchBackend:l.HTML5Backend;return(0,r.useEffect)((()=>{var e;t.dispatch((0,u.scrollToId)(null!==(e=null==n?void 0:n.id)&&void 0!==e?e:null))}),[n]),r.createElement(c.DndProvider,{backend:d,options:Pe},r.createElement(s.Provider,{store:t,context:$},r.createElement(Oe,{...o})))}))},890523:(e,t,n)=>{"use strict";n.d(t,{ObjectTreeContext:()=>r});const r=n(50959).createContext(null)},445343:(e,t,n)=>{"use strict";n.d(t,{useOverlayScroll:()=>c});var r=n(50959),o=n(650151),s=n(962624),l=n(638456);const i={onMouseOver:()=>{},onMouseOut:()=>{}};function c(e,t=l.CheckMobile.any()){const n=(0,r.useRef)(null),c=e||(0,r.useRef)(null),[d,a]=(0,s.useHover)(),[u,f]=(0,r.useState)({reference:n,containerHeight:0,containerWidth:0,
contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){f((t=>({...t,scrollPosTop:e}))),(0,o.ensureNotNull)(c.current).scrollTop=e},onHorizontalChange:function(e){f((t=>({...t,scrollPosLeft:e}))),(0,o.ensureNotNull)(c.current).scrollLeft=e},visible:d}),p=(0,r.useCallback)((()=>{if(!c.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:r,clientWidth:o,scrollWidth:s,scrollLeft:l}=c.current,i=n.current?n.current.offsetTop:0;f((n=>({...n,containerHeight:e-i,contentHeight:t-i,scrollPosTop:r,containerWidth:o,contentWidth:s,scrollPosLeft:l})))}),[]);function E(){f((e=>({...e,scrollPosTop:(0,o.ensureNotNull)(c.current).scrollTop,scrollPosLeft:(0,o.ensureNotNull)(c.current).scrollLeft})))}return(0,r.useEffect)((()=>{d&&p(),f((e=>({...e,visible:d})))}),[d]),(0,r.useEffect)((()=>{const e=c.current;return e&&e.addEventListener("scroll",E),()=>{e&&e.removeEventListener("scroll",E)}}),[c]),[u,t?i:a,c,p]}},133055:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M17.086 6.207a2 2 0 0 1 2.828 0l1.879 1.879a2 2 0 0 1 0 2.828l-.94.94-9 9-1 1-.146.146H6v-4.707l.146-.146 1-1 9-9 .94-.94zm2.121.707a1 1 0 0 0-1.414 0l-.586.586 1.647 1.646 1.646 1.647.586-.586a1 1 0 0 0 0-1.414l-1.879-1.879zm.586 4.586L18.5 10.207 10.207 18.5l1.293 1.293 8.293-8.293zm-9 9l-1.647-1.646L7.5 17.207l-.5.5V21h3.293l.5-.5zm-2.586-4L9.5 17.793 17.793 9.5 16.5 8.207 8.207 16.5z"/></svg>'},569533:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 5l3.5 3.5L8 12"/></svg>'}}]);
(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[48305],{488803:e=>{e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","small-height-breakpoint":"screen and (max-height: 360px)","tablet-small-breakpoint":"screen and (max-width: 430px)"}},405964:(e,t,r)=>{"use strict";r.d(t,{useFocus:()=>i});var n=r(50959);function i(e,t){const[r,i]=(0,n.useState)(!1);(0,n.useEffect)((()=>{t&&r&&i(!1)}),[t,r]);const o={onFocus:(0,n.useCallback)((function(t){void 0!==e&&e.current!==t.target||i(!0)}),[e]),onBlur:(0,n.useCallback)((function(t){void 0!==e&&e.current!==t.target||i(!1)}),[e])};return[r,o]}},662929:(e,t,r)=>{"use strict";r.d(t,{useMergedRefs:()=>o});var n=r(50959),i=r(551080);function o(e){return(0,n.useCallback)((0,i.mergeRefs)(e),e)}},642709:(e,t,r)=>{"use strict";r.d(t,{DialogBreakpoints:()=>i});var n=r(488803);const i={SmallHeight:n["small-height-breakpoint"],TabletSmall:n["tablet-small-breakpoint"],TabletNormal:n["tablet-normal-breakpoint"]}},333730:(e,t,r)=>{"use strict";r.d(t,{splitThousands:()=>i});var n=r(150335);function i(e,t="&nbsp;"){let r=e+"";-1!==r.indexOf("e")&&(r=function(e){return(0,n.fixComputationError)(e).toFixed(10).replace(/\.?0+$/,"")}(Number(e)));const i=r.split(".");return i[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+(i[1]?"."+i[1]:"")}},751366:(e,t,r)=>{"use strict";r.d(t,{pipsToPrice:()=>a,pipsToRiskInCurrency:()=>u,pipsToRiskInPercent:()=>c,priceToPips:()=>i,riskInCurrencyToPips:()=>o,riskInPercentToPips:()=>s});var n=r(960521);function i(e,t,r,i){return(0,n.Big)(e).minus(t).div(i).div(r).toNumber()}function o(e,t,r,i,o){const s=(0,n.Big)(r).mul(t).mul(o||1);if(s.eq(0))return 0;const a=(0,n.Big)(e).div(s).mul(i).toNumber();return Math.floor(a)}function s(e,t,r,i,o,s){const a=(0,n.Big)(i).mul(t).mul(s||1).mul(100);if(a.eq(0))return 0;const u=(0,n.Big)(e).mul(r).div(a).mul(o).toNumber();return Math.floor(u)}function a(e,t,r,i){return(0,n.Big)(r).mul(e).mul(i).plus(t).toNumber()}function u(e,t,r,i,o){return(0,n.Big)(e).mul(r).mul(t).mul(o||1).div(i).toNumber()}function c(e,t,r,i,o,s){return r?(0,n.Big)(e).mul(i).mul(t).mul(s||1).mul(100).div(r).div(o).toNumber():0}},199356:(e,t,r)=>{"use strict";var n,i,o,s,a,u,c,d,l,p,f,m,g,S,T;r.r(t),r.d(t,{AccountType:()=>m,BracketType:()=>d,CONNECTSTATUSES:()=>n,DisconnectType:()=>g,NOTIFICATION:()=>p,ORDERSTATUS:()=>s,ORDERSTATUSFILTER:()=>a,ORDERTYPE:()=>i,OrderOrPositionMessageType:()=>f,PARENTTYPE:()=>c,PipValueType:()=>S,RestrictionType:()=>T,SIDE:()=>o,TICKETFOCUS:()=>l,TradingEntityType:()=>u}),function(e){e[e.CONNECTED=1]="CONNECTED",e[e.CONNECTING=2]="CONNECTING",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.ERROR=4]="ERROR"}(n||(n={})),function(e){e[e.LIMIT=1]="LIMIT",e[e.MARKET=2]="MARKET",e[e.STOP=3]="STOP",e[e.STOPLIMIT=4]="STOPLIMIT"}(i||(i={})),function(e){e[e.BUY=1]="BUY",e[e.SELL=-1]="SELL"}(o||(o={})),function(e){e[e.CANCELED=1]="CANCELED",e[e.FILLED=2]="FILLED",e[e.INACTIVE=3]="INACTIVE",e[e.PLACING=4]="PLACING",e[e.REJECTED=5]="REJECTED",e[e.WORKING=6]="WORKING"}(s||(s={})),function(e){e[e.ALL=0]="ALL",
e[e.CANCELED=1]="CANCELED",e[e.FILLED=2]="FILLED",e[e.INACTIVE=3]="INACTIVE",e[e.REJECTED=5]="REJECTED",e[e.WORKING=6]="WORKING"}(a||(a={})),function(e){e[e.Order=1]="Order",e[e.Position=2]="Position"}(u||(u={})),function(e){e[e.ORDER=1]="ORDER",e[e.POSITION=2]="POSITION"}(c||(c={})),function(e){e[e.StopLoss=0]="StopLoss",e[e.TakeProfit=1]="TakeProfit",e[e.TrailingStop=2]="TrailingStop"}(d||(d={})),function(e){e[e.LIMITPRICE=1]="LIMITPRICE",e[e.STOPPRICE=2]="STOPPRICE",e[e.TAKEPROFIT=3]="TAKEPROFIT",e[e.STOPLOSS=4]="STOPLOSS"}(l||(l={})),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS"}(p||(p={})),function(e){e.Information="information",e.Warning="warning",e.Error="error"}(f||(f={})),function(e){e.Demo="demo",e.Live="live"}(m||(m={})),function(e){e[e.LogOut=0]="LogOut",e[e.FailedRestoring=1]="FailedRestoring",e[e.Offline=2]="Offline",e[e.APIError=3]="APIError",e[e.TwoFactorRequired=4]="TwoFactorRequired",e[e.CancelAuthorization=5]="CancelAuthorization",e[e.TimeOutForAuthorization=6]="TimeOutForAuthorization",e[e.OauthError=7]="OauthError",e[e.BrokenConnection=8]="BrokenConnection",e[e.FailedSignIn=9]="FailedSignIn"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Pips=1]="Pips",e[e.Ticks=2]="Ticks"}(S||(S={})),function(e){e.Halted="HALTED",e.NotShortable="NOT-SHORTABLE",e.HardToBorrow="HARD-TO-BORROW"}(T||(T={}))},588929:(e,t,r)=>{"use strict";var n;r.d(t,{StopType:()=>n}),function(e){e[e.StopLoss=0]="StopLoss",e[e.TrailingStop=1]="TrailingStop"}(n||(n={}))},414048:(e,t,r)=>{"use strict";r.d(t,{DisconnectError:()=>s,extractDisconnectionInfoAndConnectionStatus:()=>a});var n=r(199356),i=r(17980),o=r(675295);class s extends o.UserFriendlyError{constructor({disconnectInfo:e,...t}){super(t),this.name="DisconnectError",this.disconnectInfo=e}}function a(e){const t=function(e){const t={message:(0,i.getErrorMessage)(e)};e instanceof s&&(t.disconnectType=e.disconnectInfo.disconnectType);return t}(e);let r=4;return void 0!==t.disconnectType&&[n.DisconnectType.CancelAuthorization,n.DisconnectType.TimeOutForAuthorization].includes(t.disconnectType)&&(r=3),{disconnectionInfo:t,connectionStatus:r}}},675295:(e,t,r)=>{"use strict";function n(e){return e instanceof i}r.d(t,{UserFriendlyError:()=>i,isUserFriendlyError:()=>n});class i extends Error{constructor({detailedErrorMessage:e,userFriendlyMessage:t,cause:r}){super(t),this.name="UserFriendlyError",this.detailedErrorMessage=e,this.cause=r}}},17980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ErrorCode:()=>b,TasksWithTermination:()=>U,addBrokerPrefixToTvSymbol:()=>ie,addTrailingSlash:()=>Z,convertToStringIfNeeded:()=>ae,decodeAmpersandHtmlEntity:()=>K,findArraysDifferences:()=>A,formatNumber:()=>R,getErrorCauses:()=>te,getErrorMessage:()=>G,getHttpStatusMessageForCode:()=>C,getHttpStatusUserFriendlyMessage:()=>O,getLoggerMessage:()=>z,getMaxDecimalPlacesCount:()=>ue,httpStatusMessages:()=>x,httpStatusUserFriendlyMessages:()=>k,inferDisconnectType:()=>re,isFinalOrderStatus:()=>V,isOrderOrPositionMessageType:()=>B,isStandardFormatterName:()=>ee,isSyncMapper:()=>Q,
makeNonTradableSymbolText:()=>$,makeRetryWarningLogger:()=>ne,orderStatusToText:()=>I,orderTypeToText:()=>D,pipSizeForForex:()=>_,pipsToPrice:()=>oe,positionSideToText:()=>H,priceToPips:()=>se,retryWithChangingIntervals:()=>F,roundToStepByPriceTypeAndSide:()=>L,roundUpToPowerOf10:()=>q,sideToText:()=>N,throwUserFriendlyErrorWithBracketType:()=>Y});var n=r(444372),i=r(960521),o=r(199356),s=r(588929),a=r(333730),u=r(389137),c=r(201089),d=r(919476),l=r(266325),p=r(667353),f=r(999626),m=r(675295),g=r(414048);const S={2:{},1:{}},T={2:{},1:{}},h={},v={},y={};let E=!1;const P=(0,c.getLogger)("Trading.Utils");var b;!function(e){e[e.Unauthorized=401]="Unauthorized",e[e.TooManyRequests=429]="TooManyRequests"}(b||(b={}));const x={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:'Length Required The "Content-Length" is not defined',412:"Precondition Failed",413:"Request Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},k={429:n.t(null,void 0,r(378505))};function O(e){const t=k[e];return void 0===t?C(e):t}function C(e){const t=x[e];return void 0===t?(P.logError(`Status message for code: ${e} is not specified`),""):t}function I(e){return M(),y[e]}function M(){E||(E=!0,S[2][2]=n.t(null,{context:"Market order"},r(610952)),S[2][1]=n.t(null,{context:"Limit order"},r(382377)),S[2][3]=n.t(null,{context:"order"},r(608921)),S[2][4]=n.t(null,{context:"Stop limit order"},r(779062)),S[1][2]=n.t(null,void 0,r(359758)),S[1][1]=n.t(null,void 0,r(398157)),S[1][3]=n.t(null,{context:"order"},r(7122)),S[1][4]=n.t(null,void 0,r(900853)),T[2][o.BracketType.TakeProfit]=n.t(null,{context:"Take profit order"},r(347947)),T[2][o.BracketType.StopLoss]=n.t(null,{context:"Stop loss order"},r(15307)),T[2][o.BracketType.TrailingStop]=n.t(null,{context:"Trailing stop order"},r(154462)),T[1][o.BracketType.TakeProfit]=n.t(null,void 0,r(129266)),T[1][o.BracketType.StopLoss]=n.t(null,void 0,r(241648)),T[1][o.BracketType.TrailingStop]=n.t(null,void 0,r(86430)),h[1]=n.t(null,{context:"trading"},r(63470)),h[-1]=n.t(null,{context:"trading"},r(742259)),v[1]=n.t(null,{context:"trading"},r(274771)),v[-1]=n.t(null,{context:"trading"},r(951219)),y[2]=n.t(null,void 0,r(885323)),y[1]=n.t(null,void 0,r(767207)),y[6]=n.t(null,void 0,r(328231)),y[3]=n.t(null,void 0,r(614841)),
y[4]=n.t(null,void 0,r(373425)),y[5]=n.t(null,void 0,r(442060)))}function N(e,t){M();const r=h[e];return t?r.toUpperCase():r}function D(e){const{orderType:t,uppercase:r,shorten:n,parentId:i,stopType:a}=e;M();const u=n?2:1;let c=S,d=t;return void 0!==i&&(c=T,3===t&&(d=a===s.StopType.TrailingStop?o.BracketType.TrailingStop:o.BracketType.StopLoss),1===t&&(d=o.BracketType.TakeProfit)),r?c[u][d].toUpperCase():c[u][d]}function A(e,t,r,n,i){const o={added:[],modified:[],removed:[]},s=e.slice(0);return t.forEach((t=>{const a=e.findIndex((e=>e[r]===t[r]));if(-1===a)return void o.added.push(t);s[a]=null;const c=e[a];for(const e of n){let r=!0;if(null===c[e]||"object"!=typeof c[e]?r=c[e]===t[e]:i&&(r=(0,u.deepEquals)(c[e],t[e])[0]),!r)return void o.modified.push(t)}})),s.forEach((e=>{e&&o.removed.push(e)})),o}function R(e){return Math.abs(e||0)<.001?"0.00":(0,a.splitThousands)((e||0).toFixed(2))}function F(e){const{fn:t,intervals:r=[1,100,1e3,5e3],logWithRetryCount:n}=e;return function e(i){return t().catch((t=>{return(0,l.isAbortError)(t)?Promise.reject(t):i<r.length?(o=r[i],new Promise((e=>{setTimeout(e,o)}))).then((()=>(null==n||n(i),e(i+1)))):Promise.reject(t);var o}))}(0)}function B(e){return-1!==Object.keys(o.OrderOrPositionMessageType).map((e=>o.OrderOrPositionMessageType[e])).indexOf(e)}function L(e,t,r,n){const o=(0,i.Big)(e).div(t);return 1===r&&1===n||2===r&&-1===n?o.round(0,0).mul(t).toNumber():1===r&&-1===n||2===r&&1===n?o.round(0,3).mul(t).toNumber():0}const w=n.t(null,void 0,r(609372));class U{constructor(e){this._isFinished=!1,this._isTerminated=!1,this._tasks=e}execute(){return this._isTerminated=!1,this._isExecuted()&&!this._isFinished?this.terminate().then((()=>this._execution=this._execute())):this._execution=this._execute()}async terminate(){if(this._isExecuted()&&!this._isFinished){this._isTerminated=!0;try{await this._execution}catch(e){return void P.logWarn(e)}}}_isExecuted(){return!!this._execution}async _execute(){for(const e of this._tasks){if(this._isTerminated)throw new Error("Login tasks are terminated");try{await e()}catch(e){this._isFinished=!0;const t={detailedErrorMessage:`${w}${W(z(e))}`,userFriendlyMessage:`${w}${W(G(e))}`};throw e instanceof g.DisconnectError?new g.DisconnectError({...t,disconnectInfo:e.disconnectInfo}):new m.UserFriendlyError(t)}}this._isFinished=!0}}function W(e){return void 0===e||""===e?"":`: ${e}`}function q(e){const t=Math.ceil(Math.log10(e));return(0,i.Big)(10).pow(t).toNumber()}function _(e){return e.indexOf("JPY")===e.length-3?.01:1e-4}function V(e){return-1!==[2,1,5].indexOf(e)}function H(e){return M(),v[e]}function $(e,t){return n.t(null,void 0,r(221456)).replace("{symbol}",e).replace("{broker}",t)}function G(e){if(void 0===e)return n.t(null,void 0,r(328523));let t;return t=e instanceof Error?e.message:"object"==typeof e?JSON.stringify(e):e.toString(),(0,d.removeTags)(t)}function z(e){return e instanceof m.UserFriendlyError?(0,d.removeTags)(e.detailedErrorMessage):G(e)}function K(e){return e.replace(/&amp;/g,"&")}function Q(e){return"ready"in e}const j={
[o.BracketType.StopLoss]:n.t(null,void 0,r(241648)),[o.BracketType.TakeProfit]:n.t(null,void 0,r(129266)),[o.BracketType.TrailingStop]:n.t(null,void 0,r(86430))},J={[o.BracketType.StopLoss]:"Stop Loss",[o.BracketType.TakeProfit]:"Take Profit",[o.BracketType.TrailingStop]:"Trailing Stop"};function Y(e){const t=J[e],r=j[e];return e=>{throw new m.UserFriendlyError({detailedErrorMessage:`${t}: ${z(e)}`,userFriendlyMessage:`${r}: ${G(e)}`})}}function Z(e){return e="/"===e[e.length-1]?e:e+"/"}const X=new Set(["date","dateOrDateTime","default","fixed","variablePrecision","formatQuantity","formatPrice","formatPriceForexSup","integerSeparated","localDate","localDateOrDateTime","percentage","pips","profit","profitInInstrumentCurrency","side","positionSide","status","symbol","text","type","marginPercent","empty"]);function ee(e){return void 0!==e&&X.has(e)}function te(e){return(0,m.isUserFriendlyError)(e)&&void 0!==e.cause?[...te(e.cause),e.cause]:[e]}function re(e,t){return t||e instanceof f.WSConnectionClosedError?o.DisconnectType.BrokenConnection:o.DisconnectType.APIError}function ne(e){return t=>r=>{e(`${t}. Retrying (${r} attempts already made)...`)}}function ie(e,t){return`${e}:${t.split(":")[1]}`}function oe(e,t,r,n){return(0,i.Big)(r).mul(e).mul(n).plus(t).toNumber()}function se(e,t,r,n){return(0,i.Big)(e).minus(t).div(n).div(r).toNumber()}function ae(e){return"string"!=typeof e?String(e):e}function ue(...e){return Math.max(...e.map((e=>(0,p.numOfDecimalPlaces)(e))))}},999626:(e,t,r)=>{"use strict";r.d(t,{WSConnectionClosedError:()=>n});class n extends Error{constructor(){super(...arguments),this.name="WSConnectionClosedError"}}},18808:(e,t,r)=>{"use strict";r.d(t,{addAsciiDotIfTextDoesNotEndWithSentenceEndingMark:()=>re,adjustSavedCustomFieldsValues:()=>U,alignToMinTick:()=>ie,bottomTradingTabClassName:()=>m,brokersListFromPlans:()=>S,checkIsExistingPosition:()=>Q,convertActionDescriptionsToActions:()=>v,executionText:()=>h,filterDurationsByOrderType:()=>L,filterDurationsBySymbolDurations:()=>B,filteredBrokerIds:()=>g,findDurationMetaInfo:()=>D,formatValue:()=>Z,getAsk:()=>_,getBid:()=>V,getCryptoBalanceValue:()=>X,getCurrency:()=>b,getDefaultOrderType:()=>W,getLast:()=>H,getOrderDuration:()=>A,getOrderPrice:()=>ee,getPlatform:()=>j,getPriceStep:()=>z,getQuotePrice:()=>G,getTimestamp:()=>w,isBatsQuotes:()=>I,isBrokerSupportOrderModification:()=>k,isDefined:()=>M,isEmptySymbol:()=>Y,isMintickMultiple:()=>q,isMobileWeb:()=>J,isModifyOrderSupported:()=>O,isMoveOrderSupported:()=>C,isNoQuotes:()=>$,isOAuthAuthType:()=>T,isOrderActive:()=>y,isOrderTypeAllowed:()=>ne,makeBrokerSideMaintananceFeatureToggleName:()=>E,makeDatePlus24UTCHours:()=>N,makeInitialOrderDuration:()=>R,makeMaintananceFeatureToggleName:()=>P,makeOrderDuration:()=>F,orderStatusToText:()=>p.orderStatusToText,roundToStepRequired:()=>K});var n=r(960521),i=r(650151),o=r(389137),s=r(638456),a=r(314802),u=r(588929),c=r(747971),d=r(373571),l=r(217504),p=r(17980);const f="Paper",m="js-bottom-trading-tab";function g(e){const t=[f];return e.forEach((e=>{
e.brokerPlan&&!e.brokerPlan.hidden&&e.brokerPlan.slug_name&&t.push(e.brokerPlan.slug_name)})),t}function S(e,t){const r=new Map(e.map((e=>[e.id,e]))),n=new Map(t.map((e=>[e.slug_name,e]))),o=[{metainfo:(0,i.ensureDefined)(r.get(f))}];return t.forEach((e=>{r.has(e.slug_name)&&o.push({metainfo:(0,i.ensureDefined)(r.get(e.slug_name)),brokerPlan:e})})),e.forEach((e=>{n.has(e.id)||e.id===f||o.push({metainfo:e})})),o}function T(e){return void 0!==e&&["oauth","oauth2-implicit-flow","oauth2-code-flow"].includes(e)}function h(e,t){const r=(0,p.sideToText)(e.side)+" "+e.qty+" @ "+t.format(e.price);return r.substring(0,1).toUpperCase()+r.substring(1).toLowerCase()}function v(e){return e?e.map((e=>"-"===e.text||e.separator?new d.Separator:new c.ActionWithStandardIcon({actionId:"Trading.CustomActionId",options:{name:e.name,checkable:e.checkable,checked:e.checked,disabled:void 0!==e.enabled&&!e.enabled,label:e.text,statName:e.statName,icon:e.icon,iconId:e.iconId,shortcutHint:e.shortcutHint,onExecute:t=>{const r=t.getState();e.action({checkable:r.checkable,checked:r.checked,enabled:!r.disabled,text:r.label})}}}))):[]}function y(e){return 6===e||3===e}function E(e){return`${e}-brokers-side-maintenance`.toLowerCase()}function P(e){return`${e}-maintenance`.toLowerCase()}function b(e,t){return!t&&e.currencySign||e.currency||""}function x(e,t){return Boolean(void 0!==e.parentId&&t.supportModifyBrackets&&(t.supportTrailingStop&&t.supportModifyTrailingStop||e.stopType!==u.StopType.TrailingStop))}function k(e){return e.supportModifyOrderPrice||e.supportEditAmount||e.supportModifyBrackets||!1}function O(e,t){const r=2!==e.type&&void 0===e.parentId&&k(t),n=x(e,t);return r||n}function C(e,t){const r=void 0===e.parentId&&t.supportModifyOrderPrice,n=x(e,t);return Boolean(r||n)}function I(e){var t;return"BATS"===(null===(t=e.originalName)||void 0===t?void 0:t.split(":")[0])}function M(e){return null!=e}function N(){const e=new Date;return e.setUTCHours(e.getUTCHours()+24),e}function D(e,t){return e.find((e=>e.value===t))}function A(e){const{orderDuration:t,orderType:r,savedDuration:n,orderDurations:i,symbolDurations:o}=e;if(void 0!==t)return t;const s=function(e){const{duration:t,orderDurations:r,orderType:n,symbolDurations:i}=e;if(null===t||void 0===r)return null;const o=B(r,i),s=D(L(o,null!=n?n:null),t.type);if(void 0===s)return null;if(void 0!==t.datetime&&(s.hasDatePicker||s.hasTimePicker)){const e=864e5,r=s.hasTimePicker?t.datetime<Date.now():Math.floor((t.datetime-Date.now())/e)<0;t.datetime=r?N().getTime():t.datetime}return t}({duration:n,orderType:r,orderDurations:i,symbolDurations:o});return null!==s?{...s}:R(r,i,o)}function R(e,t,r){var n;if(void 0===t)return null;const i=L(B(t,r),e);if(0===i.length)return null;return F(null!==(n=i.find((e=>e.default)))&&void 0!==n?n:i[0])}function F(e){const t={type:e.value};return Boolean(e.hasTimePicker||e.hasDatePicker)&&(t.datetime=w(N())),t}function B(e,t){return 0===e.length||void 0===t||0===t.length?e:e.filter((({value:e})=>t.includes(e)))}function L(e,t){const r=[1,3,4];return e.filter((e=>{
var n;const i=null!==(n=e.supportedOrderTypes)&&void 0!==n?n:r;return null===t||i.includes(t)}))}function w(e){return e.valueOf()}function U(e,t){if(void 0===t.customFields)return{};const r={};return t.customFields.forEach((t=>{var n;const i="ComboBox"===t.inputType;if(i&&t.forceUserEnterInitialValue)return;const o=i?t.items[0].value:t.value,s=null!==(n=e[t.id])&&void 0!==n?n:o;void 0!==s&&(r[t.id]=s)})),r}function W(e){return e.supportLimitOrders?1:e.supportMarketOrders?2:e.supportStopLimitOrders?4:e.supportStopOrders?3:void 0}function q(e,t){if(0===t)return!1;const r=Math.round(1e15*t)/1e15,i=new n.Big(e),o=new n.Big(r);return i.mod(o).eq(0)}function _(e){return(0,o.isNumber)(e.ask)?e.ask:(0,o.isNumber)(e.trade)?e.trade:0}function V(e){return(0,o.isNumber)(e.bid)?e.bid:(0,o.isNumber)(e.trade)?e.trade:0}function H(e){return(0,o.isNumber)(e.trade)?e.trade:0}function $(e){return null===e||void 0===e.ask||void 0===e.bid}function G(e,t){return 1===t?_(e):V(e)}function z(e){const{priceType:t,minTick:r,price:n,variableMinTickData:i,limitPriceStep:o,stopPriceStep:s}=e;return 1===t&&void 0!==o?o:2===t&&void 0!==s?s:void 0!==i&&void 0!==n?(0,l.getMinTick)({minTick:r,price:n,variableMinTickData:i}):r}function K(e){const{priceType:t,minTick:r,limitPriceStep:n,stopPriceStep:i}=e;return 1===t&&void 0!==n?n!==r:2===t&&void 0!==i&&i!==r}function Q(e){return void 0!==e&&(0!==e.qty||0!==e.longQty||0!==e.shortQty)}function j(){if((0,s.isDesktopApp)())return"Desktop App";const e=(0,a.isOnMobileAppPage)("old");return s.CheckMobile.isIPad()?e?"iPad App":"iPad Web":s.CheckMobile.any()?s.CheckMobile.Android()?(0,a.isOnMobileAppPage)("new")?"Android App":"Android Web":s.CheckMobile.iOS()?e?"iPhone App":"iPhone Web":"Unknown Mobile Web":"Desktop Web"}function J(){const e=j();return"Android Web"===e||"iPad Web"===e||"iPhone Web"===e||"Unknown Mobile Web"===e}function Y(e){return""===e}function Z(e,t){if(null===e)return null;const r=t.format(e);if(t.parse){const e=t.parse(r);if(e.res)return e.value}return parseFloat(r)}function X({balance:e,...t}){return null===e?null:function(e){const{side:t,isExistingOrder:r,qty:i,orderPrice:o}=e;return r&&i&&o?-1===t?new n.Big(i):new n.Big(i).mul(o):new n.Big(0)}({...t}).plus(e.available).toNumber()}function ee(e,t){switch(e.type){case 1:case 4:return e.limitPrice;case 3:return e.stopPrice;default:return G(t,e.side)}}const te={visible:[".","｡","。","!","?","？","！"],invisible:["︀","︁"]};function re(e){const t=e.trim(),r=t.slice(-1),n=te.invisible.includes(r)?t.charAt(t.length-2):r;return te.visible.includes(n)?t:t+"."}function ne(e,t){return void 0===t||0===t.length||t.includes(e)}function ie(e,t){return t>1?e:(0,n.Big)(e).div(t).round(0,1).mul(t).toNumber()}},192685:(e,t,r)=>{"use strict";r.d(t,{checkQtyError:()=>u,qtyErrors:()=>s});var n=r(444372),i=r(960521),o=r.n(i);const s={min:n.t(null,void 0,r(430999)),max:n.t(null,void 0,r(734266)),step:n.t(null,void 0,r(136443)),balance:n.t(null,void 0,r(409232))},a=(n.t(null,void 0,r(611835)),n.t(null,void 0,r(706035)));function u(e,t,r=!1){if(null===t)return{
res:!0,msg:a};const n=e.step,i=e.min,u=e.max;if(t<i)return{res:!0,msg:s.min.format({min:i.toString()})};if(t>u)return{res:!0,msg:s.max.format({max:u.toString()})};const c=new(o())(t).minus(i).mod(n);return r&&!c.eq(0)?{res:!0,msg:s.step.format({step:n.toString()})}:{res:!1}}},991101:(e,t,r)=>{"use strict";r.d(t,{numberFormattersParsersChain:()=>s});var n=r(519435);function i(e=0){return{magnitude:Math.abs(e),signum:e>=0?"positive":"negative"}}const o={createEmptyProperties:i,createPropertiesOutOfValue:i,createValueOutOfProperties:function(e){return e.magnitude*("negative"===e.signum?-1:1)}};function s(e){return(0,n.formattersParsersChain)({builder:o,chain:e.chain})}},69737:(e,t,r)=>{"use strict";r.d(t,{defaultQuantityFormatter:()=>d,quantityFormatter:()=>c});var n=r(991101),i=r(707128),o=r(34057);function s(){return e={match:e=>isNaN(e.nextStepProperties.magnitude),errorMessage:"Value is NaN"},{formatStep:o.identityFormat,parseStep:t=>e.match(t)?{res:!1,error:e.errorMessage}:(0,i.parseSuccess)([t.nextStepString,t.nextStepProperties])};var e}var a=r(560017),u=r(131690);function c(e){const t=null==e?void 0:e.decimalPlaces,r=null==e?void 0:e.roundingMode,i=null==e?void 0:e.step;return(0,n.numberFormattersParsersChain)({chain:[s(),(0,a.fixedNumberMagnitudeStep)({decimalPlaces:t,roundingMode:r,step:i}),(0,u.signumStep)({negativeSign:u.longMinusSign})]})}const d=c()},519435:(e,t,r)=>{"use strict";r.d(t,{formattersParsersChain:()=>a,isEveryParserAbleToParse:()=>o});var n=r(707128),i=r(34057);function o(e){return e.every((e=>void 0!==e.parseStep))}function s(e,t){if(!o(t))return i.unparsableStep;const r=function(e){if(!o(e))return i.unparsableStep;const t=[...e].reverse();return{parseStep:e=>{let r=e.nextStepString,i=e.nextStepProperties;for(const e of t){const t=e.parseStep({nextStepString:r,nextStepProperties:i});if(!1===t.res)return t;[r,i]=t.value}return(0,n.parseSuccess)([r,i])}}}(t);return{parse:t=>{const i=r.parseStep({nextStepString:t,nextStepProperties:e.createEmptyProperties()});return!1===i.res?i:(0,n.parseSuccess)(e.createValueOutOfProperties(i.value[1]))},parseStep:e=>r.parseStep(e)}}function a(e){const t=function(e,t){const r=function(e){return{formatStep:t=>{let r=t.previousStepString;for(const n of e)r=n.formatStep({previousStepString:r,properties:t.properties,value:t.value});return r}}}(t);return{format:t=>r.formatStep({previousStepString:"",properties:e.createPropertiesOutOfValue(t),value:t}),formatStep:e=>r.formatStep(e)}}(e.builder,e.chain);if(!o(e.chain))return{...t,parse:void 0,parseStep:void 0};const r=s(e.builder,e.chain);return{...t,...r}}},707128:(e,t,r)=>{"use strict";function n(e){return{res:!0,value:e}}r.d(t,{parseSuccess:()=>n})},34057:(e,t,r)=>{"use strict";r.d(t,{identityFormat:()=>n,unparsableStep:()=>i});const n=e=>e.previousStepString,i={parseStep:void 0}},362390:(e,t,r)=>{"use strict";r.d(t,{appendAffix:()=>o,hasAffix:()=>s,prefixStep:()=>u,suffixStep:()=>c,trimAffix:()=>i});var n=r(707128);function i(e,t,r){switch(r){case"prefix":return function(e,t){
return e.startsWith(t)?e.substring(t.length):e}(e,t);case"suffix":return function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e}(e,t)}}function o(e,t,r){switch(r){case"prefix":return function(e,t){return t+e}(e,t);case"suffix":return function(e,t){return e+t}(e,t)}}function s(e,t,r){switch(r){case"prefix":return e.startsWith(t);case"suffix":return e.endsWith(t)}}function a(e){return{formatStep:t=>o(t.previousStepString,e.affix,e.side),parseStep:t=>(0,n.parseSuccess)([i(t.nextStepString,e.affix,e.side),t.nextStepProperties])}}function u(e){return a({affix:e.prefix,side:"prefix"})}function c(e){return a({affix:e.suffix,side:"suffix"})}},560017:(e,t,r)=>{"use strict";r.d(t,{fixedNumberMagnitudeStep:()=>p,significantFixedNumberMagnitudeStep:()=>m});var n=r(702053),i=r(182436),o=r(707128);const s={positive:"roundHalfUp",negative:"roundHalfDown"};function a(e,t,r){const i=`${e}`;return"."===n.formatterOptions.decimalSign?i:i.replace(t,r)}function u(e){return parseFloat(a(e,n.formatterOptions.decimalSign,"."))}const c={floor:Math.floor,ceil:Math.ceil,roundHalfUp:e=>Math.round(e),roundHalfDown:e=>-Math.round(-e)};function d(e,t,r=s,i){let o=e.magnitude;const u=10**t/(i||1);return o*=u,o=function(e,t,r){const n="string"==typeof r?r:r[t];return c[n](e)}(o,e.signum,r),o/=u,a(o.toFixed(t),".",n.formatterOptions.decimalSign)}function l(e,t){return+e.toFixed(t)}function p(e){const t=null==e?void 0:e.decimalPlaces;if(void 0===t)return{formatStep:e=>i.NumericFormatter.formatNoE(e.properties.magnitude),parseStep:e=>(0,o.parseSuccess)(["",{...e.nextStepProperties,magnitude:u(e.nextStepString)}])};const r=null==e?void 0:e.roundingMode,n=null==e?void 0:e.step;return{formatStep:e=>d(e.properties,t,r,n),parseStep:e=>(0,o.parseSuccess)(["",{...e.nextStepProperties,magnitude:l(u(e.nextStepString),t)}])}}function f(e,t,r){if(0===t)return 0;const n=i.NumericFormatter.formatNoE(e).split(".");if(n.length<=1)switch(r){case"hideDecimalPointAndZeros":return 0;case"showDecimalPointAndZeros":return t}return n[1].split("").findIndex((e=>"0"!==e))+t}function m(e){const t=e.onIntegerBehavior||"showDecimalPointAndZeros";return{formatStep:r=>d(r.properties,f(r.properties.magnitude,e.decimalPlaces,t)),parseStep:r=>{const n=u(r.nextStepString),i=l(n,f(n,e.decimalPlaces,t));return(0,o.parseSuccess)(["",{...r.nextStepProperties,magnitude:i}])}}}},131690:(e,t,r)=>{"use strict";r.d(t,{longMinusSign:()=>c,signumStep:()=>d});var n=r(362390),i=r(519435),o=r(707128),s=r(34057);function a(e){return t=>t.value>e}function u(e){const t=(r=e.cases,{formatStep:e=>{for(const t of r)if(t.matchValue(e))return t.formatStep(e);return e.previousStepString}});var r;if(!(0,i.isEveryParserAbleToParse)(e.cases))return{...t,parseStep:void 0};const n=function(e){return(0,i.isEveryParserAbleToParse)(e)?{parseStep:t=>{for(const r of e)if(r.matchString(t))return r.parseStep(t);return(0,o.parseSuccess)([t.nextStepString,t.nextStepProperties])}}:s.unparsableStep}(e.cases);return{...t,...n}}const c="−";function d(e){var t,r;return function(e){return u({
cases:e.cases.map((t=>({formatStep:r=>(0,n.appendAffix)(r.previousStepString,t.affix,e.side),parseStep:r=>(0,o.parseSuccess)([(0,n.trimAffix)(r.nextStepString,t.affix,e.side),void 0!==t.parse?t.parse(r):r.nextStepProperties]),matchValue:e=>void 0===t.matchValue||t.matchValue(e),matchString:r=>(0,n.hasAffix)(r.nextStepString,t.affix,e.side)})))})}({side:e.side||"prefix",cases:[{affix:e.negativeSign,matchValue:(r=0,e=>e.value<r),parse:e=>({signum:"negative",magnitude:Math.abs(e.nextStepProperties.magnitude)})},{affix:null!==(t=e.positiveSign)&&void 0!==t?t:"",matchValue:a(0),parse:e=>({signum:"positive",magnitude:Math.abs(e.nextStepProperties.magnitude)})}]})}}}]);
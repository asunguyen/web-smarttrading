(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[30913,745],{470048:e=>{e.exports={wrapper:"wrapper-GZajBGIm",input:"input-GZajBGIm",box:"box-GZajBGIm",icon:"icon-GZajBGIm",noOutline:"noOutline-GZajBGIm","intent-danger":"intent-danger-GZajBGIm",check:"check-GZajBGIm",dot:"dot-GZajBGIm"}},869789:e=>{e.exports={checkbox:"checkbox-vyj6oJxw",reverse:"reverse-vyj6oJxw",label:"label-vyj6oJxw",baseline:"baseline-vyj6oJxw"}},192517:e=>{e.exports={divider:"divider-pzdcWv_c","orientation-horizontal":"orientation-horizontal-pzdcWv_c","orientation-vertical":"orientation-vertical-pzdcWv_c","size-xsmall":"size-xsmall-pzdcWv_c","size-small":"size-small-pzdcWv_c","size-medium":"size-medium-pzdcWv_c","size-large":"size-large-pzdcWv_c","size-xlarge":"size-xlarge-pzdcWv_c","size-xxlarge":"size-xxlarge-pzdcWv_c","type-primary":"type-primary-pzdcWv_c"}},705734:e=>{e.exports={dialog:"dialog-aRAWUDhF",rounded:"rounded-aRAWUDhF",shadowed:"shadowed-aRAWUDhF",fullscreen:"fullscreen-aRAWUDhF",darker:"darker-aRAWUDhF",backdrop:"backdrop-aRAWUDhF"}},625650:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa"}},755596:e=>{e.exports={dialog:"dialog-b8SxMnzX",wrapper:"wrapper-b8SxMnzX",separator:"separator-b8SxMnzX",bounded:"bounded-b8SxMnzX"}},869827:e=>{e.exports={"small-height-breakpoint":"screen and (max-height: 360px)",container:"container-BZKENkhT",unsetAlign:"unsetAlign-BZKENkhT",title:"title-BZKENkhT",subtitle:"subtitle-BZKENkhT",textWrap:"textWrap-BZKENkhT",ellipsis:"ellipsis-BZKENkhT",close:"close-BZKENkhT",icon:"icon-BZKENkhT"}},308326:e=>{e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","tooltip-offset":"20px",dialog:"dialog-qyCw0PaN",dragging:"dragging-qyCw0PaN",dialogAnimatedAppearance:"dialogAnimatedAppearance-qyCw0PaN",dialogAnimation:"dialogAnimation-qyCw0PaN",dialogTooltip:"dialogTooltip-qyCw0PaN"}},203223:(e,t,i)=>{"use strict";i.d(t,{CheckboxInput:()=>p});var r=i(50959),o=i(497754),s=i(8626),n=i(83436),a=i(465890),l=i(470048),c=i.n(l);function p(e){const t=o(c().box,c()[`intent-${e.intent}`],{[c().check]:!Boolean(e.indeterminate),[c().dot]:Boolean(e.indeterminate),[c().noOutline]:-1===e.tabIndex}),i=o(c().wrapper,e.className);return r.createElement("span",{className:i,title:e.title,style:e.style},r.createElement("input",{id:e.id,tabIndex:e.tabIndex,className:c().input,type:"checkbox",name:e.name,checked:e.checked,disabled:e.disabled,value:e.value,autoFocus:e.autoFocus,role:e.role,onChange:function(){e.onChange&&e.onChange(e.value)},ref:e.reference,"aria-required":e["aria-required"],"aria-describedby":e["aria-describedby"],"aria-invalid":e["aria-invalid"],...(0,s.filterDataProps)(e)}),r.createElement("span",{className:t},r.createElement(n.Icon,{icon:a,className:c().icon})))}},182120:(e,t,i)=>{"use strict";i.d(t,{Checkbox:()=>c,GroupedCheckbox:()=>p})
;var r=i(50959),o=i(497754),s=i(451608),n=i(203223),a=i(869789),l=i.n(a);class c extends r.PureComponent{render(){const{inputClassName:e,labelClassName:t,...i}=this.props,s=o(this.props.className,l().checkbox,{[l().reverse]:Boolean(this.props.labelPositionReverse),[l().baseline]:Boolean(this.props.labelAlignBaseline)}),a=o(l().label,t,{[l().disabled]:this.props.disabled});let c=null;return this.props.label&&(c=r.createElement("span",{className:a,title:this.props.title},this.props.label)),r.createElement("label",{className:s},r.createElement(n.CheckboxInput,{...i,className:e}),c)}}c.defaultProps={value:"on"};const p=(0,s.makeSwitchGroupItem)(c)},319796:(e,t,i)=>{"use strict";i.d(t,{Divider:()=>a});var r=i(50959),o=i(497754),s=i(192517),n=i.n(s);function a(e){const{className:t,type:i="secondary",size:s="small",orientation:a="horizontal"}=e,l=o(t,n().divider,n()[`size-${s}`],n()[`type-${i}`],n()[`orientation-${a}`]);return r.createElement("hr",{className:l,"aria-orientation":a})}},600234:(e,t,i)=>{"use strict";i.d(t,{Dialog:()=>c});var r=i(50959),o=i(497754),s=i(692822),n=i(351290),a=i(8626),l=i(705734);class c extends r.PureComponent{constructor(){super(...arguments),this._manager=new n.OverlapManager,this._handleSlot=e=>{this._manager.setContainer(e)}}render(){const{rounded:e=!0,shadowed:t=!0,fullscreen:i=!1,darker:n=!1,className:c,backdrop:p,containerTabIndex:u=-1}=this.props,d=o(c,l.dialog,e&&l.rounded,t&&l.shadowed,i&&l.fullscreen,n&&l.darker),h=(0,a.filterDataProps)(this.props),m=this.props.style?{...this._createStyles(),...this.props.style}:this._createStyles();return r.createElement(r.Fragment,null,r.createElement(s.SlotContext.Provider,{value:this._manager},p&&r.createElement("div",{onClick:this.props.onClickBackdrop,className:l.backdrop}),r.createElement("div",{...h,className:d,style:m,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:u,"aria-label":this.props.containerAriaLabel},this.props.children)),r.createElement(s.Slot,{reference:this._handleSlot}))}_createStyles(){const{bottom:e,left:t,width:i,right:r,top:o,zIndex:s,height:n}=this.props;return{bottom:e,left:t,right:r,top:o,zIndex:s,maxWidth:i,height:n}}}},640027:(e,t,i)=>{"use strict";i.d(t,{useIsMounted:()=>o});var r=i(50959);const o=()=>{const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},265005:(e,t,i)=>{"use strict";i.d(t,{Loader:()=>r.Loader});var r=i(386290)},386290:(e,t,i)=>{"use strict";i.d(t,{Loader:()=>a});var r=i(50959),o=i(497754),s=i(625650),n=i.n(s);function a(e){const{className:t,size:i="medium",staticPosition:s,color:a="black"}=e,l=o(n().item,n()[a],n()[i]);return r.createElement("span",{className:o(n().loader,s&&n().static,t)},r.createElement("span",{className:l}),r.createElement("span",{className:l}),r.createElement("span",{className:l}))}},451608:(e,t,i)=>{"use strict";i.d(t,{SwitchGroup:()=>r.SwitchGroup,makeSwitchGroupItem:()=>n})
;var r=i(367254),o=i(50959),s=i(973920);function n(e){var t;return t=class extends o.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return o.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=s.SwitchGroupContext,t}},973920:(e,t,i)=>{"use strict";i.d(t,{SwitchGroupContext:()=>s});var r=i(50959),o=i(174786);const s=(0,r.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>o.default,subscribe:o.default,unsubscribe:o.default})},367254:(e,t,i)=>{"use strict";i.d(t,{SwitchGroup:()=>s});var r=i(50959),o=i(973920);class s extends r.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return r.createElement(o.SwitchGroupContext.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((i=>t.includes(i)?!e.includes(i):e.includes(i)))}}},139195:(e,t,i)=>{"use strict";i.d(t,{userSpecificDecrypt:()=>p,userSpecificEncrypt:()=>c});var r=i(62802),o=i(125226);const s="crypto-key",n="AES-GCM";async function a(){const e=await async function(){const e=r.getJSON(s,null);if(null!==e)return crypto.subtle.importKey("jwk",e,n,!1,["encrypt","decrypt"])}();return void 0===e?async function(){const e=await crypto.subtle.generateKey({name:n,length:128},!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("jwk",e);return r.setJSON(s,{alg:t.alg,kty:t.kty,k:t.k},{forceFlush:!0}),e}():e}const l=(0,o.isFeatureEnabled)("disable_user_specific_encryption");async function c(e){if(l)return e;const t=(new TextEncoder).encode(e),i=await a(),r=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:n,iv:r},i,t),s=new Uint8Array(12+o.byteLength);return s.set(r,0),s.set(new Uint8Array(o),12),Array.from(s,(e=>String.fromCharCode(e+10240))).join("")}async function p(e){if(l)return u(e)?null:e;if(!u(e))return null;const t=Uint8Array.from(e,(e=>e.charCodeAt(0)-10240)),i=await a(),r=t.subarray(0,12),o=t.subarray(12);try{const e=new Uint8Array(await crypto.subtle.decrypt({name:n,iv:r},i,o));return(new TextDecoder).decode(e)}catch(e){return null}}function u(e){return/^[\u2800-\u28FF]+$/gi.test(e)}},619027:(e,t,i)=>{
"use strict";i.d(t,{AdaptivePopupDialog:()=>C});var r=i(50959),o=i(650151),s=i(790934),n=i(497754),a=i.n(n),l=i(470316),c=i(31341),p=i(515312),u=i(500745),d=i(221155),h=i(642709),m=i(18182),g=i(8629),b=i(744359),v=i(332450),_=i(251954),f=i(772626),y=i(551080),S=i(8626),k=i(755596);const P={vertical:20},w={vertical:0};class C extends r.PureComponent{constructor(){super(...arguments),this._controller=null,this._reference=null,this._orientationMediaQuery=null,this._renderChildren=(e,t)=>(this._controller=e,this.props.render({requestResize:this._requestResize,centerAndFit:this._centerAndFit,isSmallWidth:t})),this._handleReference=e=>this._reference=e,this._handleCloseBtnClick=()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleClose()},this._handleClose=()=>{this.props.onClose()},this._handleOpen=()=>{void 0!==this.props.onOpen&&this.props.isOpened&&this.props.onOpen(this.props.fullScreen||window.matchMedia(h.DialogBreakpoints.TabletSmall).matches)},this._handleKeyDown=e=>{if(!e.defaultPrevented){if(this.props.onKeyDown&&this.props.onKeyDown(e),27===(0,l.hashFromEvent)(e)){if(e.defaultPrevented)return;if(this.props.forceCloseOnEsc&&this.props.forceCloseOnEsc())return this.props.onKeyboardClose&&this.props.onKeyboardClose(),void this._handleClose();const{activeElement:i}=document,r=(0,o.ensureNotNull)(this._reference);if(null!==i){if(e.preventDefault(),"true"===(t=i).getAttribute("data-haspopup")&&"true"!==t.getAttribute("data-expanded"))return void this._handleClose();if((0,p.isTextEditingField)(i))return void r.focus();if(r.contains(i))return this.props.onKeyboardClose&&this.props.onKeyboardClose(),void this._handleClose()}}var t;(function(e){if("function"==typeof e)return e();return Boolean(e)})(this.props.disableTabNavigationContainment)||(0,b.containTabNavigation)(e)}},this._requestResize=()=>{null!==this._controller&&this._controller.recalculateBounds()},this._centerAndFit=()=>{null!==this._controller&&this._controller.centerAndFit()},this._calculatePositionWithOffsets=(e,t)=>{const i=(0,o.ensureDefined)(this.props.fullScreenViewOffsets).value();return{top:i.top,left:(0,c.isRtl)()?-i.right:i.left,width:t.clientWidth-i.left-i.right,height:t.clientHeight-i.top-i.bottom}}}componentDidMount(){this.props.ignoreClosePopupsAndDialog||_.subscribe(v.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null),this._handleOpen(),void 0!==this.props.onOpen&&(this._orientationMediaQuery=window.matchMedia("(orientation: portrait)"),(0,s.mediaQueryAddEventListener)(this._orientationMediaQuery,this._handleOpen)),this.props.fullScreenViewOffsets&&this.props.fullScreen&&this.props.fullScreenViewOffsets.subscribe(this._requestResize)}componentWillUnmount(){this.props.ignoreClosePopupsAndDialog||_.unsubscribe(v.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null),null!==this._orientationMediaQuery&&(0,s.mediaQueryRemoveEventListener)(this._orientationMediaQuery,this._handleOpen),this.props.fullScreenViewOffsets&&this.props.fullScreen&&this.props.fullScreenViewOffsets.unsubscribe(this._requestResize)}focus(){(0,
o.ensureNotNull)(this._reference).focus()}getElement(){return this._reference}contains(e){var t,i;return null!==(i=null===(t=this._reference)||void 0===t?void 0:t.contains(e))&&void 0!==i&&i}render(){const{className:e,wrapperClassName:t,headerClassName:i,isOpened:o,title:s,titleTextWrap:n,dataName:l,onClickOutside:c,additionalElementPos:p,additionalHeaderElement:b,backdrop:v,shouldForceFocus:_=!0,shouldReturnFocus:C,onForceFocus:T,showSeparator:E,subtitle:M,draggable:B=!0,fullScreen:D=!1,showCloseIcon:O=!0,rounded:A=!0,isAnimationEnabled:I,growPoint:L,dialogTooltip:F,unsetHeaderAlign:x,onDragStart:R,dataDialogName:N,closeAriaLabel:U,containerAriaLabel:V,reference:q,containerTabIndex:G,closeButtonReference:W,onCloseButtonKeyDown:z,shadowed:$,fullScreenViewOffsets:K,fixedBody:H}=this.props,j="after"!==p?b:void 0,X="after"===p?b:void 0,Q="string"==typeof s?s:N||"",Y=(0,S.filterDataProps)(this.props),J=(0,y.mergeRefs)([this._handleReference,q]);return r.createElement(m.MatchMedia,{rule:h.DialogBreakpoints.SmallHeight},(p=>r.createElement(m.MatchMedia,{rule:h.DialogBreakpoints.TabletSmall},(h=>r.createElement(u.PopupDialog,{rounded:!(h||D)&&A,className:a()(k.dialog,D&&K&&k.bounded,e),isOpened:o,reference:J,onKeyDown:this._handleKeyDown,onClickOutside:c,onClickBackdrop:c,fullscreen:h||D,guard:p?w:P,boundByScreen:h||D,shouldForceFocus:_,onForceFocus:T,shouldReturnFocus:C,backdrop:v,draggable:B,isAnimationEnabled:I,growPoint:L,name:this.props.dataName,dialogTooltip:F,onDragStart:R,containerAriaLabel:V,containerTabIndex:G,calculateDialogPosition:D&&K?this._calculatePositionWithOffsets:void 0,shadowed:$,fixedBody:H,...Y},r.createElement("div",{className:a()(k.wrapper,t),"data-name":l,"data-dialog-name":Q},void 0!==s&&r.createElement(f.DialogHeader,{draggable:B&&!(h||D),onClose:this._handleCloseBtnClick,renderAfter:X,renderBefore:j,subtitle:M,title:s,titleTextWrap:n,showCloseIcon:O,className:i,unsetAlign:x,closeAriaLabel:U,closeButtonReference:W,onCloseButtonKeyDown:z}),E&&r.createElement(d.Separator,{className:k.separator}),r.createElement(g.PopupContext.Consumer,null,(e=>this._renderChildren(e,h||D)))))))))}}},909591:(e,t,i)=>{"use strict";i.d(t,{DialogHeaderContext:()=>r});const r=i(50959).createContext({setHideClose:()=>{}})},772626:(e,t,i)=>{"use strict";i.d(t,{DialogHeader:()=>p});var r=i(444372),o=i(50959),s=i(497754),n=i.n(s),a=i(4908),l=i(909591),c=i(869827);function p(e){const{title:t,titleTextWrap:s=!1,subtitle:p,showCloseIcon:u=!0,onClose:d,onCloseButtonKeyDown:h,renderBefore:m,renderAfter:g,draggable:b,className:v,unsetAlign:_,closeAriaLabel:f=r.t(null,void 0,i(680395)),closeButtonReference:y}=e,[S,k]=(0,o.useState)(!1);return o.createElement(l.DialogHeaderContext.Provider,{value:{setHideClose:k}},o.createElement("div",{className:n()(c.container,v,(p||_)&&c.unsetAlign)},m,o.createElement("div",{"data-dragg-area":b,className:c.title},o.createElement("div",{className:n()(s?c.textWrap:c.ellipsis)},t),p&&o.createElement("div",{className:n()(c.ellipsis,c.subtitle)},p)),g,u&&!S&&o.createElement(a.CloseButton,{
className:c.close,"data-name":"close","aria-label":f,onClick:d,onKeyDown:h,ref:y,size:"medium",preservePaddings:!0})))}},795394:(e,t,i)=>{"use strict";i.r(t),i.d(t,{resolveSymbolName:()=>l,resolveSymbolNameForAll:()=>c,resolveSymbolNameForAllDistinct:()=>p,snapshoter:()=>n});var r=i(740406),o=i(675128);const s=new Set(["pro_name","base_name","short_name","description","type","exchange","typespecs","listed_exchange","last_price","country_code","provider_id","symbol-primaryname","logoid","base-currency-logoid","currency-logoid","source-logoid","update_mode","source","source2","pricescale","minmov","fractional","visible-plots-set","industry","sector"]),n=(0,o.lazyValue)((()=>new r.QuoteSessionSnapshoter({name:"basic-symbol-quotes",fields:[...s]}))),a=new Set(["pro_name"]);function l(e){return n().getSnapshot(e,a).then((e=>"error"===e.status?e.symbolname:e.values.pro_name))}function c(e){return Promise.all(e.map(l))}function p(e){return c(e).then((e=>[...new Set(e)]))}},488653:(e,t,i)=>{"use strict";i.d(t,{DragHandler:()=>o});var r=i(686668);class o{constructor(e,t,i={boundByScreen:!0}){this._drag=null,this._canBeTouchClick=!1,this._frame=null,this._onMouseDragStart=e=>{if(0!==e.button||this._isTargetNoDraggable(e))return;e.preventDefault(),document.addEventListener("mousemove",this._onMouseDragMove),document.addEventListener("mouseup",this._onMouseDragEnd);const t=(0,r.clampPosition)((0,r.positionFromMouseEvent)(e));this._dragStart(t)},this._onTouchDragStart=e=>{if(this._isTargetNoDraggable(e))return;this._canBeTouchClick=!0,e.preventDefault(),this._header.addEventListener("touchmove",this._onTouchDragMove,{passive:!1});const t=(0,r.clampPosition)((0,r.positionFromTouchEvent)(e));this._dragStart(t)},this._onMouseDragEnd=e=>{e.target instanceof Node&&this._header.contains(e.target)&&e.preventDefault(),document.removeEventListener("mousemove",this._onMouseDragMove),document.removeEventListener("mouseup",this._onMouseDragEnd),this._onDragStop()},this._onTouchDragEnd=e=>{this._header.removeEventListener("touchmove",this._onTouchDragMove),this._onDragStop(),this._canBeTouchClick&&(this._canBeTouchClick=!1,(0,r.simulateClick)(e.target))},this._onMouseDragMove=e=>{const t=(0,r.clampPosition)((0,r.positionFromMouseEvent)(e));this._dragMove(t)},this._onTouchDragMove=e=>{this._canBeTouchClick=!1,e.preventDefault();const t=(0,r.clampPosition)((0,r.positionFromTouchEvent)(e));this._dragMove(t)},this._onDragStop=()=>{this._drag=null,this._header.classList.remove("dragging"),this._options.onDragEnd&&this._options.onDragEnd()},this._dialog=e,this._header=t,this._options=i,this._header.addEventListener("mousedown",this._onMouseDragStart),this._header.addEventListener("touchstart",this._onTouchDragStart),this._header.addEventListener("touchend",this._onTouchDragEnd)}destroy(){null!==this._frame&&cancelAnimationFrame(this._frame),this._header.removeEventListener("mousedown",this._onMouseDragStart),document.removeEventListener("mouseup",this._onMouseDragEnd),this._header.removeEventListener("touchstart",this._onTouchDragStart),
this._header.removeEventListener("touchend",this._onTouchDragEnd),document.removeEventListener("mouseleave",this._onMouseDragEnd)}updateOptions(e){this._options=e}_dragStart(e){const t=this._dialog.getBoundingClientRect();this._drag={startX:e.x,startY:e.y,finishX:e.x,finishY:e.y,dialogX:t.left,dialogY:t.top};const i=Math.round(t.left),r=Math.round(t.top);this._dialog.style.transform=`translate(${i}px, ${r}px)`,this._header.classList.add("dragging"),this._options.onDragStart&&this._options.onDragStart()}_dragMove(e){if(this._drag){if(this._drag.finishX=e.x,this._drag.finishY=e.y,null!==this._frame)return;this._frame=requestAnimationFrame((()=>{if(this._drag){const t=e.x-this._drag.startX,i=e.y-this._drag.startY;this._moveDialog(this._drag.dialogX+t,this._drag.dialogY+i)}this._frame=null}))}}_moveDialog(e,t){const i=this._dialog.getBoundingClientRect(),{boundByScreen:o}=this._options,s=(0,r.clampSegment)(e,i.width,o?0:-1/0,o?window.innerWidth:1/0),n=(0,r.clampSegment)(t,i.height,o?0:-1/0,o?window.innerHeight:1/0);this._dialog.style.transform=`translate(${Math.round(s)}px, ${Math.round(n)}px)`}_isTargetNoDraggable(e){return e.target instanceof Element&&null!==e.target.closest("[data-disable-drag]")}}},8629:(e,t,i)=>{"use strict";i.d(t,{PopupContext:()=>r});const r=i(50959).createContext(null)},500745:(e,t,i)=>{"use strict";i.d(t,{PopupDialog:()=>y});var r=i(50959),o=i(497754),s=i(650151),n=i(600234),a=i(368337),l=i(58407),c=i(488653),p=i(686668);const u={vertical:0};class d{constructor(e,t){this._frame=null,this._isFullscreen=!1,this._handleResize=()=>{null===this._frame&&(this._frame=requestAnimationFrame((()=>{this.recalculateBounds(),this._frame=null})))},this._dialog=e,this._guard=t.guard||u,this._calculateDialogPosition=t.calculateDialogPosition,this._initialHeight=e.style.height,window.addEventListener("resize",this._handleResize)}updateOptions(e){this._guard=e.guard||u,this._calculateDialogPosition=e.calculateDialogPosition}setFullscreen(e){this._isFullscreen!==e&&(this._isFullscreen=e,this.recalculateBounds())}centerAndFit(){const{x:e,y:t}=this.getDialogsTopLeftCoordinates(),i=this._calcAvailableHeight(),r=this._calcDialogHeight();if(i===r)if(this._calculateDialogPosition){const{left:e,top:t}=this._calculateDialogPosition(this._dialog,document.documentElement,this._guard);this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else this._dialog.style.height=r+"px";this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${e}px, ${t}px)`}getDialogsTopLeftCoordinates(){const{clientHeight:e,clientWidth:t}=document.documentElement,i=this._calcDialogHeight(),r=t/2-this._dialog.clientWidth/2,o=e/2-i/2;return{x:Math.round(r),y:Math.round(o)}}recalculateBounds(){var e;const{clientHeight:t,clientWidth:i}=document.documentElement,{vertical:r}=this._guard,o=null===(e=this._calculateDialogPosition)||void 0===e?void 0:e.call(this,this._dialog,{clientWidth:i,clientHeight:t},{vertical:r});if(this._isFullscreen){if(this._dialog.style.top="0px",
this._dialog.style.left="0px",this._dialog.style.width="100%",this._dialog.style.height="100%",this._dialog.style.transform="none",o){const{left:e,top:t,width:i,height:r}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`,i&&(this._dialog.style.width=`${i}px`,this._dialog.style.minWidth="unset"),r&&(this._dialog.style.height=`${r}px`,this._dialog.style.minHeight="unset")}}else if(o){const{left:e,top:t}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else{this._dialog.style.width="",this._dialog.style.height="";const e=this._dialog.getBoundingClientRect(),o=t-2*r,s=(0,p.clampSegment)(e.left,e.width,0,i),n=(0,p.clampSegment)(e.top,e.height,r,t);this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${Math.round(s)}px, ${Math.round(n)}px)`,this._dialog.style.height=o<e.height?o+"px":this._initialHeight}}destroy(){window.removeEventListener("resize",this._handleResize),null!==this._frame&&(cancelAnimationFrame(this._frame),this._frame=null)}_calcDialogHeight(){const e=this._calcAvailableHeight();return e<this._dialog.clientHeight?e:this._dialog.clientHeight}_calcAvailableHeight(){return document.documentElement.clientHeight-2*this._guard.vertical}}var h=i(636098),m=i(8629),g=i(575658),b=i(12173),v=i(308326);const _=v["tooltip-offset"];class f extends r.PureComponent{constructor(e){super(e),this._dialog=null,this._cleanUpFunctions=[],this._prevActiveElement=null,this._handleDialogRef=e=>{const{reference:t}=this.props;this._dialog=e,"function"==typeof t&&t(e)},this._handleFocus=e=>{this._moveToTop()},this._handleMouseDown=e=>{this._moveToTop()},this._handleTouchStart=e=>{this._moveToTop()},this.state={canFitTooltip:!1}}render(){return r.createElement(m.PopupContext.Provider,{value:this},r.createElement(l.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this.props.onClickOutside},(e=>r.createElement("div",{ref:e,"data-outside-boundary-for":this.props.name,onFocus:this._handleFocus,onMouseDown:this._handleMouseDown,onTouchStart:this._handleTouchStart,"data-dialog-name":this.props["data-dialog-name"]},r.createElement(n.Dialog,{style:this._applyAnimationCSSVariables(),...this.props,reference:this._handleDialogRef,className:o(v.dialog,this.props.className)},this.props.dialogTooltip&&this.state.canFitTooltip&&r.createElement(b.TooltipWidget,{className:v.dialogTooltip},this.props.dialogTooltip),this.props.children)))))}componentDidMount(){const{draggable:e,boundByScreen:t,onDragStart:i}=this.props,r=(0,s.ensureNotNull)(this._dialog);if(e){const e=r.querySelector("[data-dragg-area]");if(e&&e instanceof HTMLElement){const o=new c.DragHandler(r,e,{boundByScreen:Boolean(t),onDragStart:i});this._cleanUpFunctions.push((()=>o.destroy())),this._drag=o}}this._prevActiveElement=document.activeElement,this.props.autofocus&&!r.contains(document.activeElement)&&r.focus(),(this._isFullScreen()||this.props.fixedBody)&&(0,g.setFixedBodyState)(!0);const{guard:o,calculateDialogPosition:n}=this.props
;if(this.props.resizeHandler)this._resize=this.props.resizeHandler;else{const e=new d(r,{guard:o,calculateDialogPosition:n});this._cleanUpFunctions.push((()=>e.destroy())),this._resize=e}if(this.props.isAnimationEnabled&&this.props.growPoint&&this._applyAppearanceAnimation(this.props.growPoint),this.props.centeredOnMount&&this._resize.centerAndFit(),this._resize.setFullscreen(this._isFullScreen()),this.props.dialogTooltip&&this._handleTooltipFit(),this.props.shouldForceFocus){if(this.props.onForceFocus)return void this.props.onForceFocus(r);r.focus()}}componentDidUpdate(){if(this._resize){const{guard:e,calculateDialogPosition:t}=this.props;this._resize.updateOptions({guard:e,calculateDialogPosition:t}),this._resize.setFullscreen(this._isFullScreen())}this._drag&&this._drag.updateOptions({boundByScreen:Boolean(this.props.boundByScreen),onDragStart:this.props.onDragStart})}componentWillUnmount(){var e;if(this.props.shouldReturnFocus&&this._prevActiveElement&&document.body.contains(this._prevActiveElement)&&(null===document.activeElement||document.activeElement===document.body||(null===(e=this._dialog)||void 0===e?void 0:e.contains(document.activeElement))))try{this._prevActiveElement.focus({preventScroll:!0})}catch(e){}for(const e of this._cleanUpFunctions)e();(this._isFullScreen()||this.props.fixedBody)&&(0,g.setFixedBodyState)(!1)}focus(){this._dialog&&this._dialog.focus()}centerAndFit(){this._resize&&this._resize.centerAndFit()}recalculateBounds(){this._resize&&this._resize.recalculateBounds()}_moveToTop(){null!==this.context&&this.context.moveToTop()}_applyAnimationCSSVariables(){return{"--animationTranslateStartX":null,"--animationTranslateStartY":null,"--animationTranslateEndX":null,"--animationTranslateEndY":null}}_applyAppearanceAnimation(e){if(this._resize&&this._dialog){const{x:t,y:i}=e,{x:r,y:o}=this._resize.getDialogsTopLeftCoordinates();this._dialog.style.setProperty("--animationTranslateStartX",`${t}px`),this._dialog.style.setProperty("--animationTranslateStartY",`${i}px`),this._dialog.style.setProperty("--animationTranslateEndX",`${r}px`),this._dialog.style.setProperty("--animationTranslateEndY",`${o}px`),this._dialog.classList.add(v.dialogAnimatedAppearance)}}_handleTooltipFit(){if(this._resize){const e=this._resize.getDialogsTopLeftCoordinates().y-parseInt(_)>=0;this.setState({canFitTooltip:e})}}_isFullScreen(){return Boolean(this.props.fullscreen)}}f.contextType=h.PortalContext,f.defaultProps={boundByScreen:!0,draggable:!0,centeredOnMount:!0,shouldReturnFocus:!0};const y=(0,a.makeOverlapable)(f)},686668:(e,t,i)=>{"use strict";i.d(t,{clampPosition:()=>s,clampSegment:()=>o,positionFromMouseEvent:()=>a,positionFromTouchEvent:()=>l,simulateClick:()=>n});var r=i(678515);function o(e,t,i,r){return e+t>r&&(e=r-t),e<i&&(e=i),e}function s(e){return{x:(0,r.clamp)(e.x,20,document.documentElement.clientWidth-20),y:(0,r.clamp)(e.y,20,window.innerHeight-20)}}function n(e){if(e instanceof SVGElement){const t=document.createEvent("SVGEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}
e instanceof HTMLElement&&e.click()}function a(e){return{x:e.clientX,y:e.clientY}}function l(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}}},744359:(e,t,i)=>{"use strict";i.d(t,{containTabNavigation:()=>o});var r=i(470316);function o(e){[9,r.Modifiers.Shift+9].includes((0,r.hashFromEvent)(e))&&e.stopPropagation()}},10787:(e,t,i)=>{"use strict";i.d(t,{checkRealtimeDataSubscription:()=>u,removeRealtimeDataSubscription:()=>h,verifyLiveAccount:()=>d});var r=i(120780),o=i(461794),s=i(201089),n=i(454984),a=i(125226),l=i(17980);const c=(0,s.getLogger)("Trading.AccountVerifier");function p(e,t){return e.hasOwnProperty(t)&&e[t].hasOwnProperty("message")?e[t].message:""}async function u(e,t,i){if(m())return c.logWarn("Failed to check realtime data subscription: Broker Account Verifier maintenance."),!1;let s=!1;if(0===Object.keys(t).length)return c.logWarn("Realtime data check skipped: credentials not supplied."),!1;const a={broker_id:e,params:t};void 0!==i&&(a.alt_broker_id=i);const u={headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify(a)};try{const e=await(0,n.makeTimeLimited)((0,r.fetch)("/trading/check-realtime/",u),3e4,"Timeout during check realtime has occurred."),t=await e.json();let i="fail",o="";const a=t.hasOwnProperty("get_permissions")?t.get_permissions.status:"fail";let l=p(t,"check_credentials"),d=p(t,"get_permissions");if(t.hasOwnProperty("check_credentials")&&(i=t.check_credentials.status,o=void 0!==t.check_credentials.exchanges?`Exchanges: ${t.check_credentials.exchanges.join(", ")}`:""),"ok"===i)s=!0,l=`realtime data is enabled for the user. ${o}`;else{if("skip"!==i)throw new Error(l);l="skip enable realtime data for the user - was already enabled."}c.logInfo(`Realtime data check: ${l}`),"ok"===a&&(s=!0,d="permissions applied for the user."),c.logInfo(`Get user permissions: ${d}`)}catch(e){c.logError(`Realtime data check failed: ${(0,o.clean)((0,l.getLoggerMessage)(e))}`)}return s}async function d(e){if(m())return void c.logWarn("Failed to check verification: Broker Account Verifier maintenance.");const t=e.metainfo(),i=t.id,s=t.altBrokerId;try{const i=e.getVerifyLiveAccountParams();if(0===Object.keys(i).length)throw new Error("Credentials not supplied");if(i.hasOwnProperty("broker_id"))throw new Error("Parameters should not contain broker identifier");const o={broker_id:t.id,...i};void 0!==s&&(o.alt_broker_id=s);const a={method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},l=await(0,n.makeTimeLimited)((0,r.fetch)("/api/v1/brokers/verify-account/",a),3e4,"Timeout during verifying account.");if(!l.ok)throw new Error("Response is not ok");const p=await l.json();if("ok"!==p.status)throw new Error(p.detail);c.logInfo(`Account verified: ${JSON.stringify(p)}`)}catch(e){throw c.logError(`Account verification for broker ${i} failed: ${(0,o.clean)((0,l.getLoggerMessage)(e))}`),e}}async function h(e){let t=!1;try{const i=await(0,n.makeTimeLimited)((0,r.fetch)("/trading/remove-subscriptions/",{headers:{
"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({broker_id:e})}),3e4,"Failed to remove subscriptions during timeout period");if(!i.ok)throw new Error(`Response is not ok. Status: ${i.status}`);const o=await i.json();if("detail"in o)throw new Error(o.detail);c.logInfo(`Successfully removed realtime data subscriptions for broker ${e}`),t=!0}catch(t){c.logError(`Failed to remove realtime data subscriptions for broker ${e}: ${(0,o.clean)((0,l.getLoggerMessage)(t))}`)}return t}function m(){return(0,a.isFeatureEnabled)("account_verifier_maintenance")}},702889:(e,t,i)=>{"use strict";i.d(t,{AccountType:()=>o.AccountType,BracketType:()=>o.BracketType,DisconnectType:()=>o.DisconnectType,OrderOrPositionMessageType:()=>o.OrderOrPositionMessageType,StopType:()=>r.StopType,removeTags:()=>s.removeTags});var r=i(588929),o=i(199356),s=i(919476)},890466:(e,t,i)=>{"use strict";i.d(t,{BrokerRealtimeAdapter:()=>c});var r=i(181728),o=i(402084),s=i(876332),n=i(24490),a=i(519073);function l(e){return(0,a.hasCryptoTypespec)(e.typespecs)||(0,r.isIndexSymbol)(e.type,e.typespecs)}class c{constructor(e){this._realtimeSubscriptions={},this._domSubscriptions={},this._lastQuoteValues={},this._realtimeSubscriptions={},this._lastQuoteValues={},this._connectionId=e}isTradable(e){return Promise.resolve({tradable:!1})}connectionStatus(){return 3}formatter(e){return(0,s.getQuoteSessionInstance)("simple").formatter(e,!0)}spreadFormatter(e){const t=(0,s.getQuoteSessionInstance)("simple");return Promise.all([t.snapshot(e),t.formatter(e)]).then((([e,t])=>{const i=t.state();return("forex"===e.type||(0,r.isCFDSymbol)(e.type,e.typespecs))&&i.minMove2?new o.PriceFormatter(i.minMove2):t}))}quantityFormatter(e){return Promise.resolve(new n.QuantityFormatter)}symbolInfo(e){return(0,s.getQuoteSessionInstance)("simple").snapshot(e).then((e=>({minTick:e.minmov/e.pricescale,qty:{min:1,max:1e10,step:1},description:e.description,pipValue:NaN,pipSize:NaN})))}subscribeRealtime(e,t){let i=!1;this._realtimeSubscriptions[e]||(this._realtimeSubscriptions[e]=[],i=!0);const o=this._realtimeSubscriptions[e];function n(e){let t;const i=e.values,o=i.ask||i.last_price,s=i.bid||i.last_price;i.spread?t=i.spread:("forex"===i.type||(0,r.isCFDSymbol)(i.type,i.typespecs))&&void 0!==s&&void 0!==o&&i.minmove2&&i.pricescale&&(t=(o-s)*i.pricescale/i.minmove2);const n="delayed"===e.values.update_mode||"delayed_streaming"===e.values.update_mode;return{ask:o,ask_size:i.ask_size,bid:s,bid_size:i.bid_size,size:i.volume,spread:t,trade:i.last_price,type:i.type,originalName:i.original_name,isDelayed:n,tradingBy:i["trading-by"]}}if(o.push(t),i)(0,s.getQuoteSessionInstance)("full").subscribe(this._connectionId,e,((t,i)=>{if(t.error||!t.values||!t.values.pricescale)return;this._lastQuoteValues[e]=t;const r=n(t);"is_tradable"in t.values&&(r.is_tradable=t.values.is_tradable);for(let t=0;t<o.length;t++)o[t](e,r)}));else if(this._lastQuoteValues[e]){const i=n(this._lastQuoteValues[e]);t(e,i)}}unsubscribeRealtime(e,t){var i;const r=this._realtimeSubscriptions[e]
;if(!r)return;const o=r.indexOf(t);-1!==o&&(r.splice(o,1),r.length||(delete this._realtimeSubscriptions[e],null===(i=(0,s.getQuoteSessionNoEnsure)("full"))||void 0===i||i.unsubscribe(this._connectionId,e)))}subscribeDOM(e,t){let i=!1;this._domSubscriptions[e]||(this._domSubscriptions[e]=[],i=!0);const r=this._domSubscriptions[e];function o(e){const t=e.values.ask||e.values.last_price,i=e.values.bid||e.values.last_price,r=l(e.values)?0:e.values.ask_size||1/0,o=l(e.values)?0:e.values.bid_size||1/0;return{snapshot:!0,asks:t?[{price:t,volume:r}]:[],bids:i?[{price:i,volume:o}]:[]}}if(r.push(t),i)(0,s.getQuoteSessionInstance)("full").subscribe(this._connectionId+"dom",e,((t,i)=>{if(t.error||!t.values||!t.values.pricescale)return;this._lastQuoteValues[e]=t;const s=o(t);for(let t=0;t<r.length;t++)r[t](e,s)}));else if(this._lastQuoteValues[e]){const i=o(this._lastQuoteValues[e]);t(e,i)}}unsubscribeDOM(e,t){const i=this._domSubscriptions[e];if(!i)return;const r=i.indexOf(t);-1!==r&&(i.splice(r,1),i.length||(delete this._domSubscriptions[e],(0,s.getQuoteSessionInstance)("full").unsubscribe(this._connectionId+"dom",e)))}quotesSnapshot(e){return new Promise((t=>{const i=(e,r)=>{this.unsubscribeRealtime(e,i),t(r)};this.subscribeRealtime(e,i)}))}}},205346:(e,t,i)=>{"use strict";i.d(t,{addBrokerLogos:()=>o,getBrokerLogos:()=>s});const r=new Map;function o(e,t){r.set(e,t)}function s(e){return r.get(e)}},177259:(e,t,i)=>{"use strict";i.d(t,{getBrokerPlan:()=>n,getBrokersPlans:()=>s});var r=i(120780),o=i(589354);const s=(0,o.memoizeWithTimeout)((async()=>(await(0,r.fetch)("/api/v1/brokers/trading_panel",{method:"GET"})).json()),6e5),n=(0,o.memoizeWithTimeout)((async e=>{const t=await(0,r.fetch)(`/api/v1/brokers/trading_panel?broker=${e}`,{method:"GET"}),[i]=await t.json();return i}),6e5)},973110:(e,t,i)=>{"use strict";function r(e){const t=new URLSearchParams;for(const[i,r]of Object.entries(e))void 0!==r&&t.set(i,String(r));return t.toString()}i.d(t,{createQueryParams:()=>r})},862963:(e,t,i)=>{"use strict";i.d(t,{addBroker:()=>He,brokersList:()=>je,createBrokerConnection:()=>Qe,getBrokerMetainfo:()=>Ye});var r=i(5488),o=i(125226),s=i(824851),n=i(444372),a=i(116193),l=i(266325),c=i(586639),p=i(275734),u=i(77122),d=i(199356),h=i(389137),m=i(707957),g=i(650151);class b{constructor(e){this._objects={},this._started=!1,this._isObjectsRequestActual=!1,this._ordersPromise=null,this._getter=e,this.updateDelegate=new m.Delegate,this.partialUpdateDelegate=new m.Delegate}start(){this._started||(this._started=!0,this._ordersPromise=this._requestObjects())}stop(){this._objects={},this._started=!1,this._ordersPromise=null,this._isObjectsRequestActual=!1}update(e,t){this._started&&(this._isObjectsRequestActual?this._isObjectsRequestActual=!1:(this._objects[e.id]=e,this._onObjectUpdated(e,t)))}partialUpdate(e,t){if(!this._started)return;if(this._isObjectsRequestActual)return void(this._isObjectsRequestActual=!1);let i,r;(0,h.isObject)(e)?(i=e.id,r=e):(i=e,r=(0,g.ensure)(t));const o=this._objects[i];o&&(Object.assign(o,r),
this.partialUpdateDelegate.fire(o,r))}fullUpdate(){this._started&&(this._isObjectsRequestActual?this._isObjectsRequestActual=!1:this._ordersPromise=this._requestObjects())}getObjects(){return this._ordersPromise||Promise.resolve(Object.values(this._objects))}_onObjectUpdated(e,t){this.updateDelegate.fire(e,t)}_onAllObjectsUpdated(){this._objectsCache().forEach((e=>this.updateDelegate.fire(e,!0)))}_objectsCache(){return Object.values(this._objects)}async _requestObjects(){let e=[];do{this._isObjectsRequestActual=!0,e=await this._getter()}while(!this._isObjectsRequestActual);var t;return this._objects=(t="id",e.reduce(((e,i)=>(e[i[t]]=i,e)),{})),this._ordersPromise=null,this._isObjectsRequestActual=!1,this._onAllObjectsUpdated(),e}}var v=i(201089),_=i(454984);class f extends b{constructor(e,t){super(e),this._brokerConfigGetter=t}_onObjectUpdated(e,t){this._patchIndividualPositions(this._objectsCache().filter((t=>t.symbol===e.symbol&&0!==t.qty)),e,t),super._onObjectUpdated(e,t)}_onAllObjectsUpdated(){this._patchIndividualPositions(this._objectsCache().filter((e=>0!==e.qty))),super._onAllObjectsUpdated()}_patchIndividualPositions(e,t,i){const r=this._brokerConfigGetter();let o;o=r.requiresFIFOCloseIndividualPositions?r.fifoOnlyForSameQty?k:S:y;const s=o(e);for(const e of s)t!==e&&super._onObjectUpdated(e,i)}}function y(e){const t=[];for(const i of e)i.canBeClosed||(i.canBeClosed=!0,t.push(i));return t}function S(e){const t={};for(const i of e){let e=t[i.symbol];void 0===e&&(e={oldest:null,all:[]},t[i.symbol]=e),(null===e.oldest||e.oldest.date>i.date)&&(e.oldest=i),e.all.push(i)}const i=[];for(const e of Object.keys(t)){const r=(0,g.ensureDefined)(t[e]);for(const e of r.all){const t=r.oldest===e,o=t!==e.canBeClosed;e.canBeClosed=t,o&&i.push(e)}}return i}function k(e){const t={};for(const i of e){let e=t[i.symbol];void 0===e&&(e={},t[i.symbol]=e);let r=e[i.qty];void 0===r&&(r={oldest:null,all:[]},e[i.qty]=r),(null===r.oldest||r.oldest.date>i.date)&&(r.oldest=i),r.all.push(i)}const i=[];for(const e of Object.keys(t)){const r=(0,g.ensureDefined)(t[e]);for(const e of Object.keys(r)){const t=(0,g.ensureDefined)(r[e]);for(const e of t.all){const r=t.oldest===e,o=r!==e.canBeClosed;e.canBeClosed=r,o&&i.push(e)}}}return i}const P=(0,v.getLogger)("Trading.Migrations");var w=i(17980),C=i(919476),T=i(103221),E=i(541558),M=i(18808);function B(e,t){return{symbol:t.symbol,type:2,side:1===t.side?-1:1,qty:Math.abs(e),seenPrice:null,isClose:!0}}var D=i(485501);class O{constructor(){this._validators=new Map}add(e,t){this._validators.set(t,e)}validate(e){const t={};let i=!0;for(const[r,o]of this._validators.entries()){const s=o.validate(e);s.isValid||(i=!1,t[r]=s.errorMessage)}return i?{isValid:i}:{isValid:i,errorMessages:t}}}class A{constructor(e,t,i=[]){this._status=D.PlaceOrEditContextStatus.Undefined,this._onStatusChange=new m.Delegate,this._onDataChange=new m.Delegate,this._errors={},this._isValidationEnabled=t,this._source=e,this._validator=new O;for(const{validator:e,validatorName:t}of i)this._validator.add(e,t)}onReady(){
return this._onReady}source(){return this._source}data(){return this._orderData}async setData(e,t){this._orderData=await this._processOrderData(e),this._assertOrderIsValid(),this._source=t,this._onDataChange.fire()}status(){return this._status}errors(){return this._errors}onStatusChange(){return this._onStatusChange}onDataChange(){return this._onDataChange}async send(e){if(this._status===D.PlaceOrEditContextStatus.Error)return this._processError(new Error(Object.values(this._errors)[0])),!1;if(this._status!==D.PlaceOrEditContextStatus.Undefined)return!1;this._setStatus(D.PlaceOrEditContextStatus.Loading),await this._onReady;const t=await this._processSend(e),i=t?D.PlaceOrEditContextStatus.Undefined:D.PlaceOrEditContextStatus.Error;return this._setStatus(i),t}async preview(){return this._status===D.PlaceOrEditContextStatus.Error?{sections:[]}:(await this._onReady,this._preview(this._orderData))}_assertOrderIsValid(){const{isValid:e,errorMessages:t}=this._validate();let i=!1;if(e)i=this._status!==D.PlaceOrEditContextStatus.Undefined,this._errors={},this._status=D.PlaceOrEditContextStatus.Undefined;else{const[e]=(0,h.deepEquals)(this._errors,t);i=!e,this._errors=t,this._status=D.PlaceOrEditContextStatus.Error}i&&this._onStatusChange.fire()}_setStatus(e){this._status!==e&&(this._status=e,this._onStatusChange.fire())}_validate(){return this._isValidationEnabled?this._validator.validate(this._orderData):{isValid:!0}}}var I=i(884448),L=i(217504);class F{constructor(e){const{priceType:t,quotesGetter:i,formatter:r,instrumentInfo:o,supportStopOrdersInBothDirections:s,supportStopLimitOrdersInBothDirections:n,supportStrictCheckingLimitOrderPrice:a}=e;this._priceType=t,this._getQuotes=i,this._formatter=r,this._supportStopOrdersInBothDirections=Boolean(s),this._supportStopLimitOrdersInBothDirections=Boolean(n),this._supportStrictCheckingLimitOrderPrice=Boolean(a),this._symbolType=o.type||"",this._minTick=o.minTick,this._limitPriceStep=o.limitPriceStep,this._stopPriceStep=o.stopPriceStep,this._variableMinTickData=o.variableMinTick?(0,L.makeVariableMinTickData)(this._minTick,o.variableMinTick):void 0}validate(e){const{type:t,side:r,stopPrice:o,limitPrice:s}=e,a=2===this._priceType;if(2===t||a&&1===t||!a&&3===t)return{isValid:!0};const l=a?o:s;if(void 0===l)return{isValid:!1,errorMessage:n.t(null,void 0,i(347957))};const c=(0,M.getPriceStep)({price:l,priceType:this._priceType,minTick:this._minTick,variableMinTickData:this._variableMinTickData,limitPriceStep:this._limitPriceStep,stopPriceStep:this._stopPriceStep}),p=(0,M.roundToStepRequired)({priceType:this._priceType,minTick:this._minTick,limitPriceStep:this._limitPriceStep,stopPriceStep:this._stopPriceStep}),u=(0,I.validatePrice)({price:l,askOrBid:(0,M.getQuotePrice)(this._getQuotes(),r),orderType:t,side:r,isStopPrice:a,isForex:"forex"===this._symbolType,formatter:this._formatter,supportStopOrdersInBothDirections:this._supportStopOrdersInBothDirections,supportStopLimitOrdersInBothDirections:this._supportStopLimitOrdersInBothDirections,
supportStrictCheckingLimitOrderPrice:this._supportStrictCheckingLimitOrderPrice,step:c,roundedToStep:p});return u.res?{isValid:!1,errorMessage:u.msg}:{isValid:!0}}}var x=i(192685);class R{constructor(e){this._quantityMetainfo=e}validate(e){const t=(0,x.checkQtyError)(this._quantityMetainfo,e.qty,!0);return t.res?{isValid:!1,errorMessage:t.msg}:{isValid:!0}}}var N=i(960521),U=i(895537);class V{constructor(e){const{instrumentInfo:t,quotesGetter:i,baseCurrencyCryptoBalanceGetter:r,quoteCurrencyCryptoBalanceGetter:o}=e;this._quantityMetainfo=t.qty,this._getQuotes=i,this._getBaseCurrencyCryptoBalance=r,this._getQuoteCurrencyCryptoBalance=o}validate(e){const t=(0,x.checkQtyError)(this._quantityMetainfo,e.qty,!0);if(t.res)return{isValid:!1,errorMessage:t.msg};const r=(0,M.getOrderPrice)(e,this._getQuotes()),o=e.hasOwnProperty("id");if(void 0===r)return{isValid:!1,errorMessage:n.t(null,void 0,i(347957))};const s=(0,M.getCryptoBalanceValue)({balance:this._getBaseCurrencyCryptoBalance(),side:e.side,isExistingOrder:o,qty:e.qty,orderPrice:r}),a=(0,M.getCryptoBalanceValue)({balance:this._getQuoteCurrencyCryptoBalance(),side:e.side,isExistingOrder:o,qty:e.qty,orderPrice:r}),l=(0,U.validateBalance)({side:e.side,baseValue:e.qty,baseBalanceValue:s,quoteValue:(0,N.Big)(e.qty).mul(r).toNumber(),quoteBalanceValue:a});return l.res?{isValid:!1,errorMessage:l.msg}:{isValid:!0}}}var q=i(702889),G=i(253165),W=i(751366);class z{constructor(e){this._bracketPercentPriceRuleCheckers=[];const{bracketType:t,priceType:i,parentType:r,quotesGetter:o,formatter:s,instrumentInfo:n,validationRules:a}=e;if(this._bracketType=t,this._priceType=i,this._parentType=r,this._getQuotes=o,this._formatter=s,this._pipSize=n.pipSize,this._priceStep=(0,M.getPriceStep)({priceType:i,minTick:n.minTick||n.pipSize,limitPriceStep:n.limitPriceStep,stopPriceStep:n.stopPriceStep}),this._roundToStepRequired=(0,M.roundToStepRequired)({priceType:i,minTick:n.minTick||n.pipSize,limitPriceStep:n.limitPriceStep,stopPriceStep:n.stopPriceStep}),void 0!==a)for(const e of a)this._bracketPercentPriceRuleCheckers.push((0,G.makeBracketPercentPriceRuleChecker)(e.options.min,e.options.max))}validate(e){const{side:t,takeProfit:r,stopLoss:o,trailingStopPips:s}=e;if(this._bracketType===q.BracketType.TakeProfit&&void 0===r||this._bracketType===q.BracketType.StopLoss&&void 0===o||this._bracketType===q.BracketType.TrailingStop&&void 0===s)return{isValid:!0};const a=(0,M.getOrderPrice)(e,this._getQuotes());if(void 0===a)return{isValid:!1,errorMessage:n.t(null,void 0,i(762686))};const l=(this._bracketType!==q.BracketType.TakeProfit?-1:1)*t,c=this._getPrice(e,a,l),p=this._getPips(e,a,l),u=(0,G.checkBracketError)({quotes:this._getQuotes(),side:t,price:c,pips:p,priceType:this._priceType,priceStep:this._priceStep,parentPrice:a,parentType:this._parentType,bracketType:this._bracketType,isStatusEditing:!1,isEnabled:!0,bracketPercentPriceRuleCheckers:this._bracketPercentPriceRuleCheckers,priceFormatter:this._formatter,isRoundToPriceStep:this._roundToStepRequired});return u.res?{isValid:!1,errorMessage:u.msg
}:{isValid:!0}}_getPrice(e,t,i){var r,o;switch(this._bracketType){case q.BracketType.TakeProfit:return null!==(r=e.takeProfit)&&void 0!==r?r:null;case q.BracketType.StopLoss:return null!==(o=e.stopLoss)&&void 0!==o?o:null;case q.BracketType.TrailingStop:return void 0===e.trailingStopPips?null:(0,W.pipsToPrice)(e.trailingStopPips,t,i,this._pipSize);default:return null}}_getPips(e,t,i){var r;switch(this._bracketType){case q.BracketType.TakeProfit:return void 0===e.takeProfit?null:(0,W.priceToPips)(e.takeProfit,t,i,this._pipSize);case q.BracketType.StopLoss:return void 0===e.stopLoss?null:(0,W.priceToPips)(e.stopLoss,t,i,this._pipSize);case q.BracketType.TrailingStop:return null!==(r=e.trailingStopPips)&&void 0!==r?r:null;default:return null}}}class ${constructor(e){const{orderDialogOptions:t}=e;this._orderDialogOptions=t}validate(e){var t;const{customFields:r}=e;if(void 0===(null===(t=this._orderDialogOptions)||void 0===t?void 0:t.customFields)||0===this._orderDialogOptions.customFields.length)return{isValid:!0};const o=[];return this._orderDialogOptions.customFields.forEach((e=>{void 0===(null==r?void 0:r[e.id])&&o.push(e.title)})),0===o.length?{isValid:!0}:{isValid:!1,errorMessage:n.t(null,void 0,i(346881)).format({customFields:o.join(", ")})}}}var K=i(268222);const H="promise rejected by time-out";function j(e,t){let i;const r=(0,K.createDeferredPromise)();return{subscription:e.subscribe((e=>{var o;r.resolve(),i=e,null===(o=null==t?void 0:t.onValueChange)||void 0===o||o.call(t)})),getter:()=>i,ready:(null==t?void 0:t.timeout)?(0,_.makeTimeLimited)(r.promise,t.timeout,H).catch((e=>{if(e!==H)throw e;void 0!==(null==t?void 0:t.timeoutValue)&&(i=t.timeoutValue)})):r.promise}}class X extends A{constructor(e){const{orderData:t,source:i,instrumentInfo:r,quotes$:o,configFlags:s,formatter:n,tpValidationRules:a,slValidationRules:l,isValidationEnabled:c,orderDialogOptions:p,callbacks:u,baseCurrencyCryptoBalance$:h,quoteCurrencyCryptoBalance$:m}=e,g={onValueChange:()=>{}},b={...g,timeout:2e3,timeoutValue:null},{subscription:v,getter:_,ready:f}=j(o,g),{subscription:y,getter:S,ready:k}=j(h,b),{subscription:P,getter:w,ready:C}=j(m,b),T=s.supportCryptoExchangeOrderTicket||s.supportSymbolSpecificCryptoOrderTicket&&"crypto"===r.type?new V({instrumentInfo:r,quotesGetter:_,baseCurrencyCryptoBalanceGetter:S,quoteCurrencyCryptoBalanceGetter:w}):new R(r.qty);super(i,c,[{validator:T,validatorName:"qty"},{validator:new F({priceType:2,quotesGetter:_,formatter:n,instrumentInfo:r,supportStopOrdersInBothDirections:s.supportStopOrdersInBothDirections,supportStopLimitOrdersInBothDirections:s.supportStopLimitOrdersInBothDirections}),validatorName:"stopPrice"},{validator:new F({priceType:1,quotesGetter:_,formatter:n,instrumentInfo:r,supportStrictCheckingLimitOrderPrice:s.supportStrictCheckingLimitOrderPrice}),validatorName:"limitPrice"},{validator:new $({orderDialogOptions:p}),validatorName:"customFields"},{validator:new z({bracketType:d.BracketType.TakeProfit,priceType:1,parentType:1,quotesGetter:_,formatter:n,instrumentInfo:r,validationRules:a}),
validatorName:"takeProfit"},{validator:new z({bracketType:d.BracketType.StopLoss,priceType:2,parentType:1,quotesGetter:_,formatter:n,instrumentInfo:r,validationRules:l}),validatorName:"stopLoss"},{validator:new z({bracketType:d.BracketType.TrailingStop,priceType:2,parentType:1,quotesGetter:_,formatter:n,instrumentInfo:r,validationRules:l}),validatorName:"trailingStopPips"}]),this._quotesSubscription=v,this._quoteCurrencyCryptoBalanceSubscription=P,this._baseCurrencyCryptoBalanceSubscription=y,this._createInitialPreOrder=u.createInitialPreOrder,this._placeOrder=u.placeOrder,this._previewOrder=u.previewOrder,this._handleError=u.handleError,this._onReady=Promise.all([f,k,C]).then((()=>this.setData(t,i))).then((()=>{g.onValueChange=()=>this._assertOrderIsValid()}))}externalContext(){return{type:D.PlaceOrEditContextType.PlaceOrder,source:()=>this.source(),data:()=>this.data(),preview:()=>this.preview(),send:()=>this.send(),status:()=>this.status(),errors:()=>this.errors()}}destroy(){this._quotesSubscription.unsubscribe(),this._quoteCurrencyCryptoBalanceSubscription.unsubscribe(),this._baseCurrencyCryptoBalanceSubscription.unsubscribe()}_processSend(e){return this._placeOrder(this._orderData,e)}_processError(e){this._handleError(e)}_processOrderData(e){return this._createInitialPreOrder(e)}_preview(e){return this._previewOrder(e)}}var Q=i(822914),Y=i(588929);class J extends A{constructor(e){const{orderData:t,source:i,callbacks:r}=e;super(i,!1),this._modifyOrder=r.modifyOrder,this._metainfo=r.metainfo,this._symbolInfo=r.symbolInfo,this._orderById=r.orderById,this._previewOrder=r.previewOrder,this._handleError=r.handleError,this._onReady=this.setData(t,i)}externalContext(){return{type:D.PlaceOrEditContextType.EditOrder,source:()=>this.source(),data:()=>this.data(),send:()=>this.send(),status:()=>this.status(),errors:()=>this.errors(),preview:()=>this.preview()}}destroy(){}async _processOrderData(e){if(!this._metainfo().configFlags.supportModifyTrailingStop){const t=await this._orderById(e.id);e.hasTrailingStopBracket=void 0!==t&&void 0!==t.trailingStopPips}const{limitPriceStep:t,stopPriceStep:i}=await this._symbolInfo(e.symbol);if(e.limitPrice=void 0!==t&&void 0!==e.limitPrice?(0,w.roundToStepByPriceTypeAndSide)(e.limitPrice,t,1,e.side):e.limitPrice,e.stopPrice=void 0!==i&&void 0!==e.stopPrice?(0,w.roundToStepByPriceTypeAndSide)(e.stopPrice,i,2,e.side):e.stopPrice,void 0!==e.parentId&&!u.enabled("always_pass_called_order_to_modify")){let t;try{t=await this._orderById(e.parentId)}catch(e){(0,w.getLoggerMessage)(e)}if(void 0!==t&&(0,M.isOrderActive)(t.status)){const i=(0,Q.default)(t);return void 0!==e.limitPrice&&(i.takeProfit=e.limitPrice),void 0!==e.stopPrice&&(e.stopType===Y.StopType.TrailingStop&&void 0!==e.trailingStopPips?(i.trailingStopPips=e.trailingStopPips,delete i.stopLoss):(i.stopLoss=e.stopPrice,delete i.trailingStopPips)),i}}return e}_processSend(e){return this._modifyOrder(this._orderData,e)}_processError(e){this._handleError(e)}_preview(e){return this._previewOrder({...e,seenPrice:null})}
_configureValidator(){}}var Z=i(926884);const ee=(0,v.getLogger)("Trading.BrokerConnectionAdapter"),te=n.t(null,void 0,i(473142)),ie=n.t(null,void 0,i(945593));function re(e){(0,g.assert)("object"!=typeof e,"Expected not an object")}class oe{constructor({brokerMetainfo:e,brokerConnection:t,host:r,brokerRealtimeAdapter:o,tradingStat:s,tradingSettingsStorageGetter:a,brokerPlan:l}){this.connectionStatusUpdate=new m.Delegate,this.executionUpdate=new m.Delegate,this.tradingOperationFinished=new m.Delegate,this.currentAccountUpdate=new m.Delegate,this._brokerPlan=null,this._subscriptions={},this._lastFireResult={},this._fakeDOMSubscriptions={},this._formattersCache={},this._spreadFormattersCache={},this._quantityFormattersCache={},this._individualPositionsCache=null,this._fakePositionUpdateDelegate=null,this._realtimeSubscriptionState=[],this._loggedInManually=!1,this._pendingSubscriptions=[],this._sessionId=(0,E.guid)(),this.createAccount=e=>{if(this.config.supportCreateAccount&&this._brokerConnection.createAccount)return this._brokerConnection.createAccount(e);throw new Error("Method createAccount is not implemented")},this.accountSettingsInfo=e=>{if((this.config.supportCreateAccount||this.config.supportResetAccount||this.config.supportChangeAccountSettings)&&this._brokerConnection.accountSettingsInfo)return this._brokerConnection.accountSettingsInfo(e);throw new Error("Method accountSettingsInfo is not implemented")},this.resetAccount=e=>{if(this.config.supportResetAccount&&this._brokerConnection.resetAccount)return this._brokerConnection.resetAccount(e);throw new Error("Method resetAccount is not implemented")},this.changeAccountSettings=e=>{if(this.config.supportChangeAccountSettings&&this._brokerConnection.changeAccountSettings)return this._brokerConnection.changeAccountSettings(e);throw new Error("Method changeAccountSettings is not implemented")},this.deleteAccount=e=>{if(this.config.supportDeleteAccount&&this._brokerConnection.deleteAccount)return this._brokerConnection.deleteAccount(e);throw new Error("Method deleteAccount is not implemented")},this.leverageInfo=e=>{if(this.config.supportLeverage&&this._brokerConnection.leverageInfo)return this._brokerConnection.leverageInfo(e);throw new Error("Method leverage is not implemented")},this.setLeverage=e=>{if(this.config.supportLeverage&&this._brokerConnection.setLeverage)return this._brokerConnection.setLeverage(e);throw new Error("Method setLeverage is not implemented")},this.previewLeverage=e=>{if(this.config.supportLeverage&&this._brokerConnection.previewLeverage)return this._brokerConnection.previewLeverage(e);throw new Error("Method previewLeverage is not implemented")},this.maintenanceStatus=async()=>{try{return void 0!==this._brokerConnection.maintenanceStatus?await this._brokerConnection.maintenanceStatus():{isMaintenance:!1}}catch(e){return this._brokerLogger.logError(`Failed to fetch maintenance status: ${(0,w.getLoggerMessage)(e)}`),{isMaintenance:!0,message:n.t(null,{replace:{brokerName:this._brokerMetainfo.title}},i(8793))}}},
this._handleStatusChange=e=>{var t;1!==e&&(null===(t=this._placeOrderContextWithMetaInfo)||void 0===t||t.context.destroy())},this.config=Object.assign({},e.configFlags),this._brokerMetainfo=this._patchMetainfo(e),this._brokerPlan=l||null,this._brokerConnection=t,this._host=r,this._tradingStat=s,this._getTradingSettingsStorage=a,this._brokerLogger=(0,v.getLogger)("Trading."+this._brokerMetainfo.id+".Connection"),r.setBrokerConnectionAdapter(this),this._initializeConnectProtection(),this._positionsCache=t.positions?new b((()=>t.positions?t.positions():Promise.resolve([]))):null,this._individualPositionsCache=t.individualPositions?new f((()=>t.individualPositions?t.individualPositions():Promise.resolve([])),(()=>this.config)):null,this._ordersCache=new b((()=>t.orders()));const c=e=>{1===e?(null!==this._positionsCache&&this._positionsCache.start(),this._ordersCache.start(),this._individualPositionsCache&&this._individualPositionsCache.start()):(null!==this._positionsCache&&this._positionsCache.stop(),this._ordersCache.stop(),this._individualPositionsCache&&this._individualPositionsCache.stop())};this.connectionStatusUpdate.subscribe(null,c),c(this.connectionStatus()),this.connectionStatusUpdate.subscribe(null,this._handleStatusChange),this._originalDOMSubscriptionMethods={subscribeDOM:t.subscribeDOM,unsubscribeDOM:t.unsubscribeDOM},this._patchBrokerSubscribeUnsubscribeDOMMethods(),this.connectionStatusUpdate.subscribe(null,(e=>{1===e&&this._patchBrokerSubscribeUnsubscribeDOMMethods()})),e.configFlags.supportPositions||(this._fakePositionUpdateDelegate=new m.Delegate),this._brokerRealtimeAdapter=o}tryRestoreSession(){if(this._brokerConnection.tryRestoreSession)return this._brokerConnection.tryRestoreSession()}get orderUpdate(){return this._ordersCache.updateDelegate}get positionUpdate(){return null===this._fakePositionUpdateDelegate?(0,g.ensure)(this._positionsCache).updateDelegate:this._fakePositionUpdateDelegate}get individualPositionUpdate(){return(0,g.ensure)(this._individualPositionsCache).updateDelegate}get orderPartialUpdate(){return this._ordersCache.partialUpdateDelegate}get positionPartialUpdate(){return null===this._fakePositionUpdateDelegate?(0,g.ensure)(this._positionsCache).partialUpdateDelegate:this._fakePositionUpdateDelegate}get individualPositionPartialUpdate(){return(0,g.ensure)(this._individualPositionsCache).partialUpdateDelegate}onOrderUpdate(e){this._ordersCache.update(e)}onOrderPartialUpdate(e,t){this._ordersCache.partialUpdate(e,t)}onPositionUpdate(e,t){if((0,g.assert)(!!this.config.supportPositions,"Broker doesn`t support positions"),0===e.qty){const t=this._lastFireResult[e.id];t&&delete t.PL}(0,g.ensure)(this._positionsCache).update(e,t)}onPositionPartialUpdate(e,t){(0,g.assert)(!!this.config.supportPositions,"Broker doesn`t support positions"),(0,g.ensure)(this._positionsCache).partialUpdate(e,t)}onIndividualPositionUpdate(e,t){if((0,g.assert)(!!this.config.supportPositionNetting,"Broker doesn`t support individual positions"),0===e.qty){const t=this._lastFireResult[e.symbol]
;t&&delete t.IndividualPositionPL}(0,g.ensure)(this._individualPositionsCache).update(e,t)}onIndividualPositionPartialUpdate(e,t){(0,g.ensure)(this._individualPositionsCache).partialUpdate(e,t)}onCurrentAccountChanged(){null!==this._positionsCache&&this._positionsCache.fullUpdate(),this._ordersCache.fullUpdate(),this._individualPositionsCache&&this._individualPositionsCache.fullUpdate();const e=this.currentAccount();this.currentAccountUpdate.fire(e)}patchConfig(e){var t;!(t=e).hasOwnProperty("supportBrackets")||t.hasOwnProperty("supportOrderBrackets")||t.hasOwnProperty("supportPositionBrackets")||(P.logWarn("supportBrackets is deprecated. Use supportOrderBrackets and supportPositionBrackets instead."),t.supportOrderBrackets=t.supportBrackets,t.supportPositionBrackets=t.supportBrackets),t.hasOwnProperty("supportModifyOrder")&&(P.logWarn("supportModifyOrder is deprecated. Use supportModifyOrderPrice, supportEditAmount and supportModifyBrackets instead."),t.supportModifyOrderPrice=t.supportModifyOrder,t.supportEditAmount=t.supportModifyOrder,t.supportModifyBrackets=t.supportModifyOrder),Object.assign(this.config,e),Object.assign(this._brokerMetainfo.configFlags,e),this._brokerMetainfo=this._patchMetainfo(this._brokerMetainfo),this._updateConfigDependentProperties()}async getOrderDialogOptions(e){if(void 0!==this._brokerConnection.getOrderDialogOptions)try{return await this._brokerConnection.getOrderDialogOptions(e)}catch(e){return void this._brokerLogger.logError(`Failed to fetch options for the order dialog: ${(0,w.getLoggerMessage)(e)}`)}}getPositionDialogOptions(){return void 0!==this._brokerConnection.getPositionDialogOptions?this._brokerConnection.getPositionDialogOptions():void 0}async getSymbolSpecificTradingOptions(e){var t,i;try{const{allowedDurations:r,allowedOrderTypes:o}=await this.symbolInfo(e),{supportOrderBrackets:s,supportPositionBrackets:n,supportIndividualPositionBrackets:a,supportReversePosition:l,supportModifyBrackets:c,supportAddBracketsToExistingOrder:p}=this._brokerMetainfo.configFlags;return{allowedDurations:r,allowedOrderTypes:o,supportOrderBrackets:s,supportPositionBrackets:n,supportIndividualPositionBrackets:a,supportReversePosition:l,supportModifyBrackets:c,supportAddBracketsToExistingOrder:p,...await(null===(i=(t=this._brokerConnection).getSymbolSpecificTradingOptions)||void 0===i?void 0:i.call(t,e))}}catch(e){return void this._brokerLogger.logWarn((0,w.getLoggerMessage)(e))}}getValidationRules(e){return void 0!==this._brokerConnection.getValidationRules?this._brokerConnection.getValidationRules(e):void 0}chartContextMenuActions(e,t){return this._brokerConnection.chartContextMenuActions(e,t)}buttonDropdownActions(){return this._host.buttonDropdownActions()}connectionStatus(){return this._brokerConnection.connectionStatus()}isConnected(){return 1===this._brokerConnection.connectionStatus()}signIn(e,t,i,r){return this._brokerLogger.logNormal(`Try to login with username: ${e}`),this._loggedInManually=!0,this._brokerConnection.signIn(e,t,i,r)}loggedInManually(){return this._loggedInManually}
disconnect(e=!1){try{return this._brokerConnection.disconnect(e)}catch(e){ee.logWarn("Failed to disconnect")}}currentAccount(){return this._brokerConnection.currentAccount?this._brokerConnection.currentAccount():""}currentAccountType(){return this._brokerConnection.currentAccountType?this._brokerConnection.currentAccountType():void 0}checkUserHasLiveAccount(){return void 0!==this._brokerConnection.checkUserHasLiveAccount?this._brokerConnection.checkUserHasLiveAccount():this.currentAccountType()===d.AccountType.Live}metainfo(){return this._brokerMetainfo}brokerPlan(){return this._brokerPlan}bro(){return this._brokerConnection}fireSubscription(e,t,i,r){if(void 0===this._lastFireResult[t]&&(this._lastFireResult[t]={Realtime:null,PL:null,Equity:null,DOM:null,IndividualPositionPL:null,PipValue:null,MarginAvailable:null,CryptoBalance:null}),(0,g.ensure)(this._lastFireResult[t])[e]={data:i,time:Date.now()},void 0===this._subscriptions[t])return;const o=(0,g.ensure)(this._subscriptions[t]);(0,g.ensure)(o[e]).forEach((e=>e(t,i,r)))}positions(e){return this.config.supportPositions?(this._makeSureBrokerIsConnected(),this._positions().then((t=>t.filter((t=>void 0===e||t.symbol===e))))):Promise.resolve([])}disconnectWarningMessage(){return this._brokerConnection.disconnectWarningMessage?this._brokerConnection.disconnectWarningMessage():null}connectWarningMessage(){return this._brokerConnection.connectWarningMessage?this._brokerConnection.connectWarningMessage():null}individualPositions(e){return this._makeSureBrokerIsConnected(),(0,g.assert)(!!this.config.supportPositionNetting,"Broker doesn`t support individual positions"),this._individualPositions().then((t=>t.filter((t=>void 0===e||t.symbol===e))))}positionById(e){return this._brokerConnection.positionById?this._brokerConnection.positionById(e):this.positions().then((t=>t.find((t=>t.id===e))))}individualPositionById(e){return(0,g.assert)(!!this.config.supportPositionNetting,"Broker doesn`t support individual positions"),this.individualPositions().then((t=>t.find((t=>t.id===e))))}orders(e){return this._makeSureBrokerIsConnected(),this._orders().then((t=>t.filter((t=>void 0===e||t.symbol===e))))}ordersHistory(){return this._makeSureBrokerIsConnected(),this.config.supportOrdersHistory&&this._brokerConnection.ordersHistory?this._brokerConnection.ordersHistory():Promise.resolve([])}async executions(e){return this.config.supportExecutions?(this._makeSureBrokerIsConnected(),this._brokerConnection.executions(e)):[]}async allExecutions(){return void 0===this._brokerConnection.allExecutions?[]:this._brokerConnection.allExecutions()}orderById(e){return this._makeSureBrokerIsConnected(),this._brokerConnection.orders().then((t=>t.find((t=>t.id===e))))}accountManagerInfo(){return this._brokerConnection.accountManagerInfo()}isTradable(e){return this._makeSureBrokerIsConnected(),this._brokerConnection.isTradable(e).then((t=>("object"!=typeof t&&(t={tradable:t}),t.tradable||void 0!==t.reason||(t.reason=(0,w.makeNonTradableSymbolText)((0,C.htmlEscape)(e),this._brokerMetainfo.title)),t)))}
formatter(e,t=!0){return this._makeSureBrokerIsConnected(),this._formattersCache[e]||(this._formattersCache[e]=this._brokerConnection.formatter&&this._brokerConnection.formatter(e,t)||this._host.defaultFormatter(e,t)),(0,_.makeTimeLimited)(this._formattersCache[e],1e4,"formatter not received")}spreadFormatter(e){return this._makeSureBrokerIsConnected(),this._spreadFormattersCache[e]||(this._spreadFormattersCache[e]=this._brokerConnection.spreadFormatter&&this._brokerConnection.spreadFormatter(e)||this._host.defaultFormatter(e,!1)),(0,_.makeTimeLimited)(this._spreadFormattersCache[e],1e4,"spreadFormatter not received")}quantityFormatter(e){return this._makeSureBrokerIsConnected(),this._quantityFormattersCache[e]||(this._quantityFormattersCache[e]=this._brokerConnection.quantityFormatter&&this._brokerConnection.quantityFormatter(e)||this._host.quantityFormatter()),(0,_.makeTimeLimited)(this._quantityFormattersCache[e],1e4,"quantityFormatter not received")}async createInitialPreOrder(e){const[t,i]=await Promise.all([this.getOrderDialogOptions(e.symbol),this.symbolInfo(e.symbol)]);return this._createInitialPreOrder(e,i,t)}async createPlaceOrderContext(e,t,i=!0){var r;const o=this._placeOrderContextWithMetaInfo;if(void 0!==o&&o.context.data().symbol===e.symbol&&o.isValidationEnabled===i)return await o.context.setData(e,t),o.context;null===(r=this._placeOrderContextWithMetaInfo)||void 0===r||r.context.destroy();const s=await this._createPlaceOrderContext(e,t,i);return o===this._placeOrderContextWithMetaInfo&&(this._placeOrderContextWithMetaInfo={context:s,isValidationEnabled:i}),s}async createEditOrderContext(e,t,i=!0){const r=this._editOrderContextWithMetaInfo;if(void 0!==r&&r.context.data().id===e.id&&r.isValidationEnabled===i)return await r.context.setData(e,t),r.context;const o=await this._createEditOrderContext(e,t,i);return r===this._editOrderContextWithMetaInfo&&(this._editOrderContextWithMetaInfo={context:o,isValidationEnabled:i}),o}placeOrder(e,t){return this._placeOrder(e,t)}previewOrder(e){return this._previewOrder(e)}modifyOrder(e,t){return this._modifyOrder(e,t)}cancelOrder(e){return this._isMaintenance()?(r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):this._isBrokerSideMaintenance()?(s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):(re(e),this._makeSureBrokerIsConnected(),this.processErrors(this._brokerConnection.cancelOrder(e),!0,n.t(null,void 0,i(915926))))}cancelOrders(e,t,o){return this._isMaintenance()?(r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):this._isBrokerSideMaintenance()?(s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):(this._makeSureBrokerIsConnected(),this.processErrors(this._brokerConnection.cancelOrders(e,t,o),!0,n.t(null,void 0,i(305140))))}async closePosition(e,t){if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),!1;if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),!1;let i;re(e),
this._makeSureBrokerIsConnected(),(0,g.assert)(void 0===t||!!this.config.supportPartialClosePosition,"Broker doesn`t support partial position closing");const o=new Promise((async(r,o)=>{try{const o=await this._positionCopyById(e);i=e=>{void 0!==o&&e.id===o.id&&e.symbol===o.symbol&&e.qty!==o.qty&&(this.positionUpdate.unsubscribe(this,i),r(!0))},this.positionUpdate.subscribe(this,i),await this._closePosition(e,t)}catch(e){o(e)}}));return(0,_.makeTimeLimited)(o,3e4,"Position closing timeout").catch((e=>(this._brokerLogger.logError(`${te}: ${(0,w.getLoggerMessage)(e)}`),this.positionUpdate.unsubscribe(this,i),!1)))}async closeIndividualPosition(e,t){var o;if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);re(e),this._makeSureBrokerIsConnected(),(0,g.assert)(!!this.config.supportPositionNetting,"Broker doesn`t support individual positions"),(0,g.assert)(void 0===t||null!==(o=this.config.supportPartialCloseIndividualPosition)&&void 0!==o&&o,"Broker doesn`t support partial individual position closing");const a=(0,g.ensureDefined)(await this.individualPositionById(e));if(0===a.qty)return this._host.showNotification(n.t(null,void 0,i(791401)),n.t(null,void 0,i(715842)),0),!1;if(void 0===t||t<=Math.abs(a.qty)){if(this._brokerConnection.closeIndividualPosition){const i=B(null!=t?t:Math.abs(a.qty),a);return this.processErrors(this._brokerConnection.closeIndividualPosition(e,t),!0,te,(()=>(0,g.ensureNotNull)(this._tradingStat).trackOrderPlaced(i)))}throw new Error("Method closeIndividualPosition is not implemented")}return this._host.showNotification(n.t(null,void 0,i(791401)),n.t(null,void 0,i(365389)),0),!1}reversePosition(e){if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(re(e),this._makeSureBrokerIsConnected(),this.config.supportMultiposition&&!this.config.supportNativeReversePosition)throw new Error("Cannot reverse position on multiposition account");let t;const i=new Promise((async(i,r)=>{try{const r=await this._positionCopyById(e);t=e=>{void 0!==r&&e.symbol===r.symbol&&e.side!==r.side&&(this.positionUpdate.unsubscribe(this,t),i(!0))},this.positionUpdate.subscribe(this,t),await this._reversePosition(e)}catch(e){r(e)}}));return(0,_.makeTimeLimited)(i,3e4,"Position reversing timeout").catch((e=>(this._brokerLogger.logError(`${ie}: ${(0,w.getLoggerMessage)(e)}`),this.positionUpdate.unsubscribe(this,t),!1)))}editPositionBrackets(e,t,o){if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._makeSureBrokerIsConnected(),
this._brokerConnection.editPositionBrackets)return this.processErrors(this._brokerConnection.editPositionBrackets(e,t,o),!0,n.t(null,void 0,i(140766)));throw new Error("Method editPositionBrackets is not implemented")}editIndividualPositionBrackets(e,t){if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._makeSureBrokerIsConnected(),(0,g.assert)(!!this.config.supportIndividualPositionBrackets,"Broker doesn`t support brackets on individual positions"),this._brokerConnection.editIndividualPositionBrackets)return this.processErrors(this._brokerConnection.editIndividualPositionBrackets(e,t),!0,n.t(null,void 0,i(140766)));throw new Error("Method editIndividualPositionBrackets is not implemented")}async subscribeRealtime(e,t){this._makeSureBrokerIsConnected();const i={symbol:e,listener:t,provider:0};this._realtimeSubscriptionState.push(i);const r=await this.symbolInfo(e),o=this._realtimeSubscriptionState.findIndex((i=>i.symbol===e&&i.listener===t));if(-1!==o)return void 0!==r.hasQuotes&&!1===r.hasQuotes?(this._realtimeSubscriptionState[o].provider=1,(0,g.ensure)(this._brokerRealtimeAdapter).subscribeRealtime(e,t)):(this._realtimeSubscriptionState[o].provider=2,this._addSubscription("Realtime",e,t))}async quotesSnapshot(e){let t,i;const r=(e,o)=>{i=o,(o.ask||o.bid)&&(this.unsubscribeRealtime(e,r),null==t||t(o))},o=new Promise((i=>{t=i,this.subscribeRealtime(e,r)}));try{return await(0,_.makeTimeLimited)(o,1e4,"quotesSnapshot not received")}catch(t){if(this.unsubscribeRealtime(e,r),void 0!==i)return i;throw t}}subscribeDOM(e,t){return this._makeSureBrokerIsConnected(),this._addSubscription("DOM",e,t)}subscribePipValue(e,t){return this._makeSureBrokerIsConnected(),this._addSubscription("PipValue",e,t)}subscribePL(e,t){this._makeSureBrokerIsConnected(),this._addSubscription("PL",e,t)}subscribeIndividualPositionPL(e,t){return this._makeSureBrokerIsConnected(),this._addSubscription("IndividualPositionPL",e,t)}subscribeCryptoBalance(e,t){return this._makeSureBrokerIsConnected(),this._addSubscription("CryptoBalance",e,t)}subscribeEquity(e){return this._makeSureBrokerIsConnected(),this._addSubscription("Equity","Equity",e)}subscribeMarginAvailable(e){return this._makeSureBrokerIsConnected(),this._addSubscription("MarginAvailable","MarginAvailable",e)}unsubscribeRealtime(e,t){const i=this._realtimeSubscriptionState.findIndex((i=>i.symbol===e&&i.listener===t));-1!==i&&(1===this._realtimeSubscriptionState[i].provider?(0,g.ensure)(this._brokerRealtimeAdapter).unsubscribeRealtime(e,t):this._removeSubscription("Realtime",e,t),this._realtimeSubscriptionState.splice(i,1))}unsubscribeDOM(e,t){this._removeSubscription("DOM",e,t)}unsubscribePipValue(e,t){this._removeSubscription("PipValue",e,t)}unsubscribePL(e,t){this._removeSubscription("PL",e,t)}unsubscribeIndividualPositionPL(e,t){this._removeSubscription("IndividualPositionPL",e,t)}unsubscribeCryptoBalance(e,t){
this._removeSubscription("CryptoBalance",e,t)}unsubscribeEquity(e){this._removeSubscription("Equity","Equity",e)}unsubscribeMarginAvailable(e){this._removeSubscription("MarginAvailable","MarginAvailable",e)}async accountMetainfo(){const e=await this.accountsMetainfo(),t=this.currentAccount(),i=e.find((e=>e.id===t));if(void 0===i)throw new Error("accountMetainfo not received");return i}accountsMetainfo(){return(0,_.makeTimeLimited)(this._brokerConnection.accountsMetainfo(),1e4,"accountsMetainfo not received")}setCurrentAccount(e){if(void 0===this._brokerConnection.setCurrentAccount)throw new Error(`${this._brokerMetainfo.title} doesn't support sub-accounts`);this._brokerConnection.setCurrentAccount(e)}symbolInfo(e){return(0,_.makeTimeLimited)(this._brokerConnection.symbolInfo(e),1e4,"symbolInfo not received")}async getPositionCurrency(e){try{const t=await this._brokerConnection.symbolInfo(e);if(this._brokerMetainfo.configFlags.positionPLInInstrumentCurrency&&void 0!==t.currency)return t.currency;const i=await this.accountMetainfo();return(0,M.getCurrency)(i,!0)}catch(e){return void ee.logError(e)}}sessionId(){return this._sessionId}bugReportInfo(){function e(e){return JSON.parse(JSON.stringify(e))}function t(e){if("object"!=typeof e)return e;if((0,h.isArray)(e))return e.map(t);const i={};for(const t in e)"object"!=typeof e[t]&&(i[t]=e[t]);return i}return Promise.all([this.orders(),this.positions(),this.config.supportPositionNetting?this.individualPositions():Promise.resolve([])]).then((i=>({activeBroker:this.metainfo().title,orders:t(e(i[0])),positions:t(e(i[1])),individualPositions:t(e(i[2])),silentOrdersPlacement:this._host.silentOrdersPlacement().value(),floatingPanel:(0,g.ensureNotNull)(this._host.sellBuyButtonsVisibility()).value(),account:this.currentAccount(),accountType:this.currentAccountType(),lastUpdates:this._lastFireResult,time:Date.now(),brokerSpecific:this._brokerConnection.bugReportInfo?this._brokerConnection.bugReportInfo():null,sessionId:this._sessionId})))}processErrors(e,t,i,r){if(!(0,h.isPromise)(e))throw new Error("Broker incorrectly implements API, should return Promise");return e.then((e=>r&&r(e))).then((e=>"boolean"!=typeof e||e)).catch((e=>((0,l.isAbortError)((0,w.getErrorCauses)(e)[0])||(t&&u.enabled("trading_notifications")?this._showErrorNotification(e,i):ee.logWarn(e)),Promise.resolve(!1)))).then((e=>(this.tradingOperationFinished.fire(e),e)))}setDurations(e){this._brokerMetainfo.durations=e.slice()}setSymbolSearchId(e){this._brokerMetainfo.backendBrokerName=e}getRealtimeDataCheckParams(){return this._brokerConnection.getRealtimeDataCheckParams?this._brokerConnection.getRealtimeDataCheckParams():{}}getVerifyLiveAccountParams(){if(void 0===this._brokerConnection.getVerifyLiveAccountParams)throw new Error(`Method getVerifyLiveAccountParams for broker ${this._brokerMetainfo.id} is not implemented`);return this._brokerConnection.getVerifyLiveAccountParams()}unhideSymbolSearchGroups(){return this._brokerConnection.unhideSymbolSearchGroups?this._brokerConnection.unhideSymbolSearchGroups():[]}
destroy(){void 0!==this._brokerConnection.destroy&&this._brokerConnection.destroy()}currentBroker(){return this._brokerMetainfo.id}_showErrorNotification(e,t){let r="";"string"==typeof e?r=e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&(r=(0,C.removeTags)(e.message)),0!==r.length&&(r=(0,M.addAsciiDotIfTextDoesNotEndWithSentenceEndingMark)(r)+" "),r+=n.t(null,void 0,i(352303)),this._host.showNotification(t||"",r,0)}_makeContextErrorHandler(e){return u.enabled("trading_notifications")?t=>this._showErrorNotification(t,e):e=>ee.logWarn((0,w.getErrorMessage)(e))}async _createEditOrderContext(e,t,r=!0){const o=new J({orderData:e,source:t,callbacks:{modifyOrder:this._modifyOrder.bind(this),metainfo:this.metainfo.bind(this),symbolInfo:this.symbolInfo.bind(this),orderById:this.orderById.bind(this),previewOrder:this._previewOrder.bind(this),handleError:this._makeContextErrorHandler(n.t(null,void 0,i(54746)))}});return await o.onReady(),o}async _createPlaceOrderContext(e,t,r=!0){const[o,s,a]=await Promise.all([this.symbolInfo(e.symbol),this.formatter(e.symbol),this.getOrderDialogOptions(e.symbol)]),{configFlags:l}=this.metainfo(),u=l.supportBalances&&o.baseCurrency?this._cryptoBalanceObservable(o.baseCurrency):(0,c.of)(null),d=l.supportBalances&&o.quoteCurrency?this._cryptoBalanceObservable(o.quoteCurrency):(0,c.of)(null),h=(0,Z.extractTakeProfitValidationRules)(this,e.symbol),m=(0,Z.extractStopLossValidationRules)(this,e.symbol),g=(0,p.fromEventPattern)((t=>this.subscribeRealtime(e.symbol,t)),(t=>this.unsubscribeRealtime(e.symbol,t)),((e,t)=>t)),b=new X({orderData:e,source:t,instrumentInfo:o,quotes$:g,configFlags:l,formatter:s,isValidationEnabled:r,orderDialogOptions:a,tpValidationRules:h,slValidationRules:m,baseCurrencyCryptoBalance$:u,quoteCurrencyCryptoBalance$:d,callbacks:{createInitialPreOrder:async e=>this._createInitialPreOrder(e,o,a),placeOrder:(e,t)=>this._placeOrder(e,t),previewOrder:e=>this._previewOrder(e),handleError:this._makeContextErrorHandler(n.t(null,void 0,i(842180)))}});return await b.onReady(),b}_createInitialPreOrder(e,t,i){var r,o,s;if(void 0===e.duration){const{durations:i}=this.metainfo(),n=(0,M.getOrderDuration)({orderDuration:void 0,orderType:e.type,savedDuration:null!==(s=null===(o=null===(r=this._getTradingSettingsStorage)||void 0===r?void 0:r.call(this))||void 0===o?void 0:o.duration(e.symbol,e.type))&&void 0!==s?s:null,orderDurations:i,symbolDurations:t.allowedDurations});null!==n&&(e.duration=n)}if(void 0===e.customFields){const t=this._getSavedCustomFields(e.symbol,e.type,i);void 0!==t&&(e.customFields=t)}return e}_getSavedCustomFields(e,t,i){var r,o;const s=null!==(o=null===(r=this._getTradingSettingsStorage)||void 0===r?void 0:r.call(this))&&void 0!==o?o:void 0;if(void 0===s||void 0===(null==i?void 0:i.customFields)||0===i.customFields.length)return;const n=i.customFields.map((e=>e.id)),a=s.customFields(e,t,n),l=(0,M.adjustSavedCustomFieldsValues)(a,i);return 0!==Object.keys(l).length?l:void 0}_placeOrder(e,t){
return this._isMaintenance()?(r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):this._isBrokerSideMaintenance()?(s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1)):(this._makeSureBrokerIsConnected(),this.processErrors(this._brokerConnection.placeOrder(e,t),!0,n.t(null,void 0,i(842180)),(t=>{(0,g.ensureNotNull)(this._tradingStat).trackOrderPlaced({...e,id:t.orderId}),this._host.trackEvent("","SilentMode",this._host.silentOrdersPlacement().value()?"On":"Off")})))}async _modifyOrder(e,t){if(this._isMaintenance())return r.maintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);if(this._isBrokerSideMaintenance())return s.brokerSideMaintenance.show(this._brokerMetainfo.title),Promise.resolve(!1);this._makeSureBrokerIsConnected();const o=new Set((await this._orders()).map((({id:e})=>e)));o.delete(e.id);return await this.processErrors(this._brokerConnection.modifyOrder(e,t),!0,n.t(null,void 0,i(54746)),(()=>(0,g.ensureNotNull)(this._tradingStat).trackOrderModified(e)))&&this._waitForOrderModification(e,o)}_previewOrder(e){if(!this._brokerConnection.previewOrder)throw new Error("Order preview is not supported");return this._brokerConnection.previewOrder(e)}_initializeConnectProtection(){let e=null;this.connectionStatusUpdate.subscribe(null,(t=>{if(e&&(clearTimeout(e),e=null),2===t){const t=(0,M.isOAuthAuthType)(this.config.authorizationType)?3e5:6e4;e=setTimeout((()=>{this._host.selectBroker(),this._host.showNotification(n.t(null,void 0,i(170891)),n.t(null,void 0,i(247956)))}),t)}}))}_fakeSubscribeDOM(e){this._fakeDOMSubscriptions[e]=(e,t)=>{const i=t.ask||t.trade,r=t.bid||t.trade,o={snapshot:!0,asks:i?[{price:i,volume:t.ask_size||1/0}]:[],bids:r?[{price:r,volume:t.bid_size||1/0}]:[]};this._host.domUpdate(e,o)},this.subscribeRealtime(e,this._fakeDOMSubscriptions[e])}_fakeUnsubscribeDOM(e){this.unsubscribeRealtime(e,this._fakeDOMSubscriptions[e])}_isMaintenance(){return(0,o.isFeatureEnabled)((0,M.makeMaintananceFeatureToggleName)(this._brokerMetainfo.id))}_isBrokerSideMaintenance(){return(0,o.isFeatureEnabled)((0,M.makeBrokerSideMaintananceFeatureToggleName)(this._brokerMetainfo.id))}async _positionCopyById(e){const t=await this.positionById(e);return void 0!==t?(0,a.default)(t):void 0}_patchBrokerSubscribeUnsubscribeDOMMethods(){const e=!this._brokerMetainfo.configFlags.supportLevel2Data;this._brokerConnection.subscribeDOM=e?e=>{this._fakeSubscribeDOM(e)}:this._originalDOMSubscriptionMethods.subscribeDOM,this._brokerConnection.unsubscribeDOM=e?e=>{this._fakeUnsubscribeDOM(e)}:this._originalDOMSubscriptionMethods.unsubscribeDOM}_patchMetainfo(e){const t=(0,T.deepCopy)(e);return t.configFlags.supportNativeReversePosition=!this.config.supportMultiposition||this.config.supportNativeReversePosition,t.configFlags.supportClosePosition=!0,t.configFlags.supportPLUpdate=!0,t}_addSubscription(e,t,i){this._pendingSubscriptions.push({brokerMethodName:e,symbol:t,listener:i});const r=this._lastFireResult[t];if(void 0!==r&&void 0!==r[e]&&null!==r[e]&&i(t,r[e].data),
!this._removePendingSubscription({brokerMethodName:e,symbol:t,listener:i}))return;void 0===this._subscriptions[t]&&(this._subscriptions[t]={Realtime:[],PL:[],Equity:[],DOM:[],IndividualPositionPL:[],PipValue:[],MarginAvailable:[],CryptoBalance:[]});const o=(0,g.ensure)(this._subscriptions[t]),s=o[e].length>0;if(o[e].push(i),!s&&(o[e].length>0||"CryptoBalance"===e)){const i="subscribe"+e;this._brokerConnection[i]&&this._brokerConnection[i](t)}}_removePendingSubscription(e){const t=this._pendingSubscriptions.findIndex((t=>t.symbol===e.symbol&&t.brokerMethodName===e.brokerMethodName&&t.listener===e.listener));return-1!==t&&(this._pendingSubscriptions.splice(t,1),!0)}_removeSubscription(e,t,i){if(this._removePendingSubscription({brokerMethodName:e,symbol:t,listener:i}))return;if(void 0===this._subscriptions[t])return;const r=(0,g.ensure)(this._subscriptions[t]),o=r[e].indexOf(i);if(o>-1&&r[e].splice(o,1),0===r[e].length){const i="unsubscribe"+e;this._brokerConnection[i]&&this._brokerConnection[i](t)}}_positions(){return this._positionsCache?this._positionsCache.getObjects():Promise.resolve([])}_individualPositions(){return this._individualPositionsCache?this._individualPositionsCache.getObjects():Promise.resolve([])}_orders(){return this._ordersCache.getObjects()}_makeSureBrokerIsConnected(){(0,g.assert)(1===this.connectionStatus(),"Broker is not connected")}_placeReversePositionOrder(e){const t=B(2*e.qty,e);return this._placeOrder(t)}async _closePosition(e,t){const r=(0,g.ensureDefined)(await this.positionById(e));if(!(0,M.checkIsExistingPosition)(r)){const e=n.t(null,void 0,i(715842));throw this._host.showNotification(te,e,0),new Error(e)}if(!(void 0===t||t<=Math.abs(r.qty))){const e=n.t(null,void 0,i(365389));throw this._host.showNotification(te,e,0),new Error(e)}{const i=B(null!=t?t:Math.abs(r.qty),r);if(this.config.supportClosePosition&&this._brokerConnection.closePosition){if(!await this.processErrors(this._brokerConnection.closePosition(e,t),!0,te,(()=>(0,g.ensureNotNull)(this._tradingStat).trackOrderPlaced(i))))throw new Error(te)}else{if(!await this.processErrors(this._brokerConnection.placeOrder(i),!0,te,(()=>(0,g.ensureNotNull)(this._tradingStat).trackOrderPlaced(i))))throw new Error(te)}}}async _reversePosition(e){const t=(0,g.ensureDefined)(await this.positionById(e));if(0===t.qty){const e=n.t(null,void 0,i(726500));throw this._host.showNotification(ie,e,0),new Error(e)}this.config.supportNativeReversePosition&&this._brokerConnection.reversePosition?await this.processErrors(this._brokerConnection.reversePosition(e),!0,ie):await this.processErrors(this._placeReversePositionOrder(t),!0,ie,(()=>(0,g.ensureNotNull)(this._tradingStat).trackOrderPlaced()))}async _waitForOrderModification(e,t){return new Promise((async i=>{const r=()=>{i(!0),s(),clearTimeout(n)},o=t=>{this._areOrdersEqual(t,e)&&r()},s=()=>this.orderUpdate.unsubscribe(this,o),n=setTimeout((()=>{i(!1),this._brokerLogger.logError("Failed to modify order: timeout waiting for new order"),s()}),3e4);this.orderUpdate.subscribe(this,o)
;for(const i of await this._orders())if(!t.has(i.id)&&this._areOrdersEqual(e,i))return void r()}))}_areOrdersEqual(e,t){const{checkBracketsAfterOrderModification:i}=this._brokerMetainfo.configFlags;return function(e,t){return e.type===t.type&&e.qty===t.qty&&e.limitPrice===t.limitPrice&&e.stopPrice===t.stopPrice}(e,t)&&(!i||function(e,t){return e.stopLoss===t.stopLoss&&e.takeProfit===t.takeProfit&&e.trailingStopPips===t.trailingStopPips}(e,t))}_updateConfigDependentProperties(){var e,t;const{supportPositions:i}=this._brokerMetainfo.configFlags;i?(null===(e=this._fakePositionUpdateDelegate)||void 0===e||e.destroy(),this._fakePositionUpdateDelegate=null):null!==(t=this._fakePositionUpdateDelegate)&&void 0!==t||(this._fakePositionUpdateDelegate=new m.Delegate)}_cryptoBalanceObservable(e){return(0,p.fromEventPattern)((t=>this.subscribeCryptoBalance(e,t)),(t=>this.unsubscribeCryptoBalance(e,t)),((e,t)=>t))}}var se=i(62802),ne=i.n(se),ae=i(129025),le=i(988124),ce=i(182436),pe=i(24490),ue=i(876332),de=i(402084),he=i(175203),me=i(839391),ge=i.n(me),be=i(214931),ve=i(755785);function _e(e){he.telemetry.sendReport("trading","symbol_mapper_http_status",{value:e})}const fe=(0,v.getLogger)("Trading.SymbolMapperAsync");function ye(e){if(!e.includes(":"))return{text:e};const[t,i]=e.split(":");return{exchange:t,text:i}}function Se(e){return fe.logWarn(`Symbol ${e} is not mapped`),null}class ke{constructor(e,t,i){this._tvToBrokerCache=new Map,this._brokerToTvCache=new Map,this._brokerName=e,this._serverLogger=t,this._unhideSymbolSearchGroups=null==i?void 0:i.unhideSymbolSearchGroups,this._requestBrokerToTv=(0,ve.memoize)(ge()(this._batchRequestBrokerToTv,150,{accumulate:!0})),this._requestTvToBroker=(0,ve.memoize)(this._requestTvToBroker)}async tvToBroker(e){var t;const i=null!==(t=this._tvToBrokerCache.get(e))&&void 0!==t?t:await this._requestTvToBroker(e);return null===i||(0,M.isEmptySymbol)(i)?null:i}async brokerToTv(e){var t;const i=null!==(t=this._brokerToTvCache.get(e))&&void 0!==t?t:await this._requestBrokerToTv(e);return null===i||(0,M.isEmptySymbol)(i)?null:i}async _requestTvToBroker(e){const t=this._tvToBrokerCache.get(e);if(void 0!==t)return t;const i=this._makeTvToBrokerSymbolSearchOptions(e);try{const t=await(0,w.retryWithChangingIntervals)({fn:()=>(0,be.searchSymbols)(i),intervals:[2,200,2e3,1e4]});if(0===t.length)return this._processNotMappedTvSymbol(e);_e(200);const r=this._extractBrokerSymbol(t[0]);return null===this._brokerToTvCache.get(r)?this._processNotMappedTvSymbol(e):(this._tvToBrokerCache.set(e,r),this._brokerToTvCache.set(r,e),r)}catch(t){return _e(500),fe.logError(`Symbol search request error: ${(0,w.getLoggerMessage)(t)}`),this._processNotMappedTvSymbol(e)}}async _batchRequestBrokerToTv(e){const t=[].concat(...e),i=t.filter((e=>!this._brokerToTvCache.has(e)));if(0===i.length)return this._rearrangeSymbolSearchResult([],t);const r=this._makeBrokerToTvSymbolSearchOptions(i);try{const e=await(0,w.retryWithChangingIntervals)({fn:()=>(0,be.searchSymbols)(r),intervals:[2,200,2e3,1e4]})
;return 0===e.length?i.map(Se):(_e(200),this._rearrangeSymbolSearchResult(e,t))}catch(i){_e(500),fe.logError(`Symbol search request error: ${(0,w.getLoggerMessage)(i)}`);for(const e of t)this._brokerToTvCache.set(e,null);return Array(e.length).fill(null)}}_rearrangeSymbolSearchResult(e,t){const i=this._convertSymbolSearchResultsToBrokerToTvMapping(e);return t.map((e=>{const t=this._brokerToTvCache.get(e);if(void 0!==t)return t;const r=i.get(e);return void 0===r||null===this._tvToBrokerCache.get(r)?this._processNotMappedBrokerSymbol(e):(this._brokerToTvCache.set(e,r),this._tvToBrokerCache.set(r,e),r)}))}_makeCommonSymbolSearchOptions(e){return{brokerId:e,serverHighlight:!1,onlyTradable:!0,strictMatch:!0,serverLogger:this._serverLogger}}_makeTvToBrokerSymbolSearchOptions(e){var t;return{...this._makeCommonSymbolSearchOptions(this._brokerName),...ye(e),unhideSymbolSearchGroups:null===(t=this._unhideSymbolSearchGroups)||void 0===t?void 0:t.join(",")}}_makeBrokerToTvSymbolSearchOptions(e){var t;return{...this._makeCommonSymbolSearchOptions(this._brokerName),brokerSymbols:e,noLimits:!0,unhideSymbolSearchGroups:null===(t=this._unhideSymbolSearchGroups)||void 0===t?void 0:t.join(",")}}_extractBrokerSymbol(e){return void 0!==e.contracts?e.contracts[0].broker_symbol:e.broker_symbol}_makeMappingPair(e){const{brokerSymbol:t,tvSymbol:i,symbolExchange:r,symbolPrefix:o,contractPrefix:s}=e;return[t,`${s||o||r}:${i}`]}_convertSymbolSearchResultsToBrokerToTvMapping(e){return new Map(e.reduce(((e,t)=>{const{prefix:i,exchange:r}=t;return void 0===t.contracts?e.push(this._makeMappingPair({brokerSymbol:t.broker_symbol,tvSymbol:t.symbol,symbolPrefix:i,symbolExchange:r})):e.push(...t.contracts.map((e=>this._makeMappingPair({brokerSymbol:e.broker_symbol,tvSymbol:e.symbol,symbolPrefix:i,symbolExchange:r,contractPrefix:e.prefix})))),e}),[]))}_processNotMappedTvSymbol(e){return this._tvToBrokerCache.set(e,null),Se(e)}_processNotMappedBrokerSymbol(e){return this._brokerToTvCache.set(e,null),Se(e)}}var Pe=i(345848);const we=(0,v.getLogger)("Trading.SymbolMapperSync");function Ce(e){he.telemetry.sendReport("trading","symbol_mapper_sync_http_status",{value:e})}class Te{constructor(e,t,i){this._tvToBroker={},this._brokerToTv={},this.ready=()=>this._readyPromise,this._appendSymbol=e=>{const t=this._getTvSymbols(e),i=this._getBrokerSymbols(e);t.forEach(((e,t)=>{const r=i[t];this._tvToBroker[e]=r,this._brokerToTv[r]=e}))},this._serverLogger=t,void 0!==(null==i?void 0:i.unhideSymbolSearchGroups)&&(this._unhideSymbolSearchGroups=i.unhideSymbolSearchGroups),this._readyPromise=(0,w.retryWithChangingIntervals)({fn:()=>this._initSymbolSearch(e,null==i?void 0:i.exchange)})}tvToBroker(e){const t=this._tvToBroker[e];return void 0===t||(0,M.isEmptySymbol)(t)?null:t}brokerToTv(e){const t=this._brokerToTv[e];return void 0===t||(0,M.isEmptySymbol)(t)?null:t}async _initSymbolSearch(e,t){we.logNormal(`Requesting mapping for ${e} broker`);const i=this._getSymbolSearchOptions(e,t);try{const t=await(0,be.searchSymbols)(i)
;if(!t.length)throw new Error("cannot get mappings: symbols list is empty");t.forEach(this._appendSymbol),we.logNormal(`Mapping for ${e} is loaded for ${t.length} symbol(s)`),Ce(200)}catch(t){throw we.logWarn(`Symbol search initialization failed: ${t.message}`),Ce(400),(0,Pe.trackEvent)("SymbolMapper",e,t.message),new Error("Cannot get mappings: Symbol search initialization failed")}}_getBrokerSymbols(e){return void 0!==e.contracts?e.contracts.map((e=>e.broker_symbol)):[e.broker_symbol]}_getTvSymbols(e){return void 0!==e.contracts?e.contracts.map((t=>`${t.prefix||e.prefix||e.exchange}:${t.symbol}`)):[`${e.prefix||e.exchange}:${e.symbol}`]}_getSymbolSearchOptions(e,t){const i={text:"",brokerId:e,noLimits:!0,serverHighlight:!1,onlyTradable:!0,exchange:t,serverLogger:this._serverLogger};if(void 0!==this._unhideSymbolSearchGroups){const e=this._unhideSymbolSearchGroups;e.length&&(i.unhideSymbolSearchGroups=e.join(","))}return i}}var Ee=i(795394),Me=i(779923),Be=i(460670),De=i(321873),Oe=i(158432),Ae=i(627181),Ie=i(941012);class Le{constructor(e,t,i,r){this._lastPL=0,this._isActive=!1,this._realtimeUpdate=(e,t)=>{this._realtimeData=t,this._updatePL()},this._symbol=e.symbol,this._adapter=i,this._onPlUpdate=t,this._side=e.side,this._qty=e.qty,this._avgPrice=e.avgPrice||e.price,this._instrumentInfo=r,this.positionUpdate(e)}positionUpdate(e){this._avgPrice=e.avgPrice||e.price,this._qty=e.qty,this._side=e.side,this._updatePL()}lastPL(){return this._lastPL}start(){this._isActive||(this._adapter.subscribeRealtime(this._symbol,this._realtimeUpdate),this._isActive=!0)}stop(){this._isActive&&(this._adapter.unsubscribeRealtime(this._symbol,this._realtimeUpdate),this._isActive=!1)}_updatePL(){var e;if(!this._realtimeData||void 0===this._realtimeData.bid||void 0===this._realtimeData.ask)return;const t=Number(new N.Big(1===this._side?this._realtimeData.bid:this._realtimeData.ask).minus(Math.abs(this._avgPrice)).mul(1===this._side?1:-1).mul(this._qty).mul(null!==(e=this._instrumentInfo.lotSize)&&void 0!==e?e:1).div(this._instrumentInfo.pipSize).mul(this._instrumentInfo.pipValue));this._lastPL=t,this._onPlUpdate(t)}}new Set(["type","typespecs","pricescale","minmov","fractional"]);function Fe(e,t){return(0,Ee.snapshoter)().getSnapshot(e,new Set(t))}function xe(e){return"error"===e.status}class Re{constructor(e,t,i,r){var o;this._setDefaultDropdownActionsBound=this._setDefaultDropdownActions.bind(this),this._qtyChangedSubscriptions=new Map,this.serverLogger=()=>this._serverLogger,this.orderPartialUpdate=(e,t)=>{this._adapter.onOrderPartialUpdate(e,t)},this.positionPartialUpdate=(e,t)=>{this._adapter.onPositionPartialUpdate(e,t)},this.individualPositionPartialUpdate=(e,t)=>{this._adapter.onIndividualPositionPartialUpdate(e,t)},this.createMapperAsync=(e,t)=>new ke(e,this._serverLogger,t),this.createMapperSync=(e,t)=>{let i=null;return i=new Te(e,this._serverLogger,t),i},this._trading=e,this._metainfo=t,this._serverLogger=null!==i?this._makeServerLoggerWithFilledInfo(i):null,
this._setDefaultDropdownActionsBound=this._setDefaultDropdownActions.bind(this),this._defaultDropdownActions=!0,this._credentialsStorage=r,this._setDefaultDropdownActions(),null!==this._trading&&(null===(o=this.sellBuyButtonsVisibility())||void 0===o||o.subscribe(this._setDefaultDropdownActionsBound),(0,g.ensureNotNull)(this.orderPanelVisibility()).subscribe(this._setDefaultDropdownActionsBound),(0,g.ensureNotNull)(this.domPanelVisibility()).subscribe(this._setDefaultDropdownActionsBound))}createPLEmitter(e,t,i){return new Le(e,t,this._adapter,i)}getLogger(){return(0,v.getLogger)("Trading."+this._metainfo.id)}translate(e){return e}setBrokerConnectionAdapter(e){this._adapter=e}patchConfig(e){this._adapter.patchConfig(e)}showOrderDialog(e,t){return(0,g.ensureNotNull)(this._trading).orderViewController().showOrderView({order:e,focus:t})}showPositionBracketsDialog(e,t,i){return(0,g.ensureNotNull)(this._trading).orderViewController().showPositionView(e,t,i)}showCancelOrderDialog(e,t){return Oe.ConfirmOrderCancelDialog.get().open(e).then((e=>{e&&this._adapter.processErrors(t(),!0,n.t(null,void 0,i(915926)))}))}showCancelMultipleOrdersDialog(e,t,r,o){return Oe.ConfirmOrderCancelDialog.get().multiple(e,t,r).then((e=>{e&&this._adapter.processErrors(o(),!0,n.t(null,void 0,i(305140)))}))}showCancelBracketsDialog(e,t){return Ae.ConfirmBracketsCancelDialog.get().open(e).then((e=>{e&&this._adapter.processErrors(t(),!0,n.t(null,void 0,i(951099)))}))}showCancelMultipleBracketsDialog(e,t){return Ae.ConfirmBracketsCancelDialog.get().multiple(e).then((e=>{e&&this._adapter.processErrors(t(),!0,n.t(null,void 0,i(951099)))}))}showReversePositionDialog(e,t){return(0,Ie.reversePositionDialog)({positionId:e,showErrorNotification:(0,g.ensureNotNull)(this._trading).showErrorNotification,handler:t})}showMessageDialog(e,t,i=!1){i?(0,Me.showWarning)({title:e,html:t}):(0,Me.showWarning)({title:e,text:t})}showConfirmDialog(e,t,i,r,o){return(0,Be.showConfirmDialog)({title:e,content:t,mainButtonText:i,cancelButtonText:r,showDisableConfirmationsCheckbox:o})}showSimpleConfirmDialog(e,t,i,r,o){return(0,De.showSimpleConfirmDialog)({title:e,text:Array.isArray(t)?t.join(" "):t,mainButtonText:i,mainButtonIntent:"primary",cancelButtonText:r,showDisableConfirmationsCheckbox:o})}showSimpleConfirmDialogAndRespectAbort(e,t,i,r,o,s){return(0,De.showSimpleConfirmDialog)({title:e,text:Array.isArray(t)?t.join(" "):t,abortSignal:i,mainButtonText:r,mainButtonIntent:"primary",cancelButtonText:o,showDisableConfirmationsCheckbox:s})}setDurations(e){this._adapter.setDurations(e)}setSymbolSearchId(e){this._adapter.setSymbolSearchId(e)}activateBottomWidget(){return null!==this._trading?this._trading.toggleTradingWidget():Promise.reject("Activate bottom widget failed: trading is not defined")}bottomWidgetMode(){if(null===this._trading)throw new Error("Unable to provide bottom widget mode: trading is not defined");return this._trading.bottomWidgetBarMode()}trackEvent(e,t,i){null!==this._trading&&this._trading.trackEvent(e,t,i)}defaultFormatter(e,t){return(0,
ue.getQuoteSessionInstance)("simple").formatter(e,t)}numericFormatter(e){return Promise.resolve(new ce.NumericFormatter(e))}quantityFormatter(e){return Promise.resolve(new pe.QuantityFormatter(e))}selectBroker(){null!==this._trading&&this._trading.selectBroker(null)}showTradingProperties(){null!==this._trading&&this._trading.showTradingProperties()}async getSymbolTypespecs(e){var t;const i=await Fe(e,["typespecs"]);return"values"in i?xe(i)||void 0===i.values.typespecs?[]:i.values.typespecs:null!==(t=i.typespecs)&&void 0!==t?t:[]}async getSymbolType(e){var t;const i=await Fe(e,["type"]);return"values"in i?xe(i)?"undefined":i.values.type:null!==(t=i.type)&&void 0!==t?t:"undefined"}async getSymbolMinTick(e){const t=await Fe(e,["minmov","pricescale"]);return"values"in t?xe(t)||void 0===t.values.minmov||void 0===t.values.pricescale?1:(0,N.Big)(t.values.minmov).div(t.values.pricescale).toNumber():(0,N.Big)(t.minmov).div(t.pricescale).toNumber()}silentOrdersPlacement(){return(0,g.ensureNotNull)(this._trading).noConfirmEnabled}sellBuyButtonsVisibility(){return null!==this._trading&&u.enabled("buy_sell_buttons")?this._trading.showSellBuyButtons:null}domPanelVisibility(){return null!==this._trading?this._trading.domPanelVisibility():null}orderPanelVisibility(){return null!==this._trading?this._trading.orderPanelVisibility():null}showPricesWithZeroVolume(){return(0,g.ensureNotNull)(this._trading).showPricesWith().zeroVolume}showNotification(e,t,i=0){null!==this._trading&&(0===i?this._trading.showErrorNotification(e,t):this._trading.showSuccessNotification(e,t))}connectionStatusUpdate(e,t){this._adapter.connectionStatusUpdate.fire(e,t),1===e&&this._setDefaultDropdownActions()}orderUpdate(e){this._adapter.onOrderUpdate(e)}positionUpdate(e,t){this._adapter.onPositionUpdate(e,t)}individualPositionUpdate(e,t){this._adapter.onIndividualPositionUpdate(e,t)}executionUpdate(e){this._adapter.executionUpdate.fire(e)}currentAccountUpdate(){this._adapter.onCurrentAccountChanged()}realtimeUpdate(e,t){this._adapter.fireSubscription("Realtime",e,t)}domUpdate(e,t){this._adapter.fireSubscription("DOM",e,t)}pipValueUpdate(e,t){this._adapter.fireSubscription("PipValue",e,t)}setQty(e,t){(0,g.ensureNotNull)(this._trading).getQtySuggester().setQty(e,t)}getQty(e){return(0,g.ensureNotNull)(this._trading).getQtySuggester().getQty(e)}subscribeSuggestedQtyChange(e,t){var i;const r=null!==(i=this._qtyChangedSubscriptions.get(e))&&void 0!==i?i:new Map;if(r.has(t))return;this._qtyChangedSubscriptions.has(e)||this._qtyChangedSubscriptions.set(e,r);const o=(0,g.ensureNotNull)(this._trading).getQtySuggester().suggestedQtyChanged(e);r.set(t,o.subscribe(t))}unsubscribeSuggestedQtyChange(e,t){const i=this._qtyChangedSubscriptions.get(e);if(void 0===i)return;const r=i.get(t);void 0!==r&&(r.unsubscribe(),i.delete(t),0===i.size&&this._qtyChangedSubscriptions.delete(e))}plUpdate(e,t){this._adapter.fireSubscription("PL",e,t)}individualPositionPLUpdate(e,t){this._adapter.fireSubscription("IndividualPositionPL",e,t)}equityUpdate(e){
this._adapter.fireSubscription("Equity","Equity",e)}marginAvailableUpdate(e){this._adapter.fireSubscription("MarginAvailable","MarginAvailable",e)}cryptoBalanceUpdate(e,t){this._adapter.fireSubscription("CryptoBalance",e,t)}setButtonDropdownActions(e){var t;null!==this._trading&&this._defaultDropdownActions&&(this._defaultDropdownActions=!1,null===(t=this.sellBuyButtonsVisibility())||void 0===t||t.unsubscribe(this._setDefaultDropdownActionsBound),(0,g.ensureNotNull)(this.orderPanelVisibility()).unsubscribe(this._setDefaultDropdownActionsBound),(0,g.ensureNotNull)(this.domPanelVisibility()).unsubscribe(this._setDefaultDropdownActionsBound)),this._buttonDropdownActions=e}buttonDropdownActions(){return this._buttonDropdownActions}defaultContextMenuActions(...e){return null!==this._trading?this._trading.defaultContextMenuActions(...e):Promise.resolve([])}defaultDropdownMenuActions(e){return null!==this._trading?this._trading.defaultDropdownMenuActions(e):[]}get factory(){return{createDelegate:()=>new m.Delegate,createWatchedValue:e=>new ae.WatchedValue(e),createPriceFormatter:(e,t,i,r,o)=>new de.PriceFormatter(e,t,i,r,o)}}get settings(){return{save:(e,t)=>ne().setJSON(`${this._metainfo.id}.${e}`,t),load:(e,t)=>ne().getJSON(`${this._metainfo.id}.${e}`,t),clear:(e,t)=>ne().remove(`${this._metainfo.id}.${e}`,t)}}get credentialsStorage(){return this._credentialsStorage}convertTimezone(e,t,i){const r=le.get_timezone(t),o=le.get_timezone(i),s=le.cal_to_utc(r,e);return le.utc_to_cal(o,s)}language(){return window.language}getUserSpecificHash(){return window.user.private_channel||""}activateFXCMCFD(){ne().setValue("fxcm_cfd",!0)}async isFractional(e){var t;const i=await Fe(e,["fractional"]);return"values"in i?!xe(i)&&void 0!==i.values.fractional&&i.values.fractional:null!==(t=i.fractional)&&void 0!==t&&t}_makeServerLoggerWithFilledInfo(e){return{log:t=>e.log({...this._makeServerLoggerEventAdditionalInfo(),...t}),debounceLog:(t,i,r)=>e.debounceLog({...this._makeServerLoggerEventAdditionalInfo(),...t},i,r)}}_makeServerLoggerEventAdditionalInfo(){return{accountType:this._adapter.currentAccountType(),brokerId:this._adapter.metainfo().id,sessionId:this._adapter.sessionId(),tvUsername:window.user.username,ref:location.href,online:navigator.onLine,platform:(0,M.getPlatform)()}}_setDefaultDropdownActions(){null!==this._trading&&this._defaultDropdownActions&&(this._buttonDropdownActions=this.defaultDropdownMenuActions())}}var Ne=i(996348),Ue=i(205346),Ve=i(59221);const qe="credentials-storage";class Ge{constructor(e,t,i){this._rememberCredentials=e,this._encryptedLocalStorage=t,this._encryptedSessionStorage=i}async save(e,t){this._currentEncryptedStorage().setItem(e,t)}load(e,t){return this._currentEncryptedStorage().getItem(e,t)}async clear(e){this._currentEncryptedStorage().removeItem(e)}destroy(){this._encryptedLocalStorage.destroy(),this._encryptedSessionStorage.destroy()}static async create(e,t,i){const r=await Ve.EncryptedWebStorage.create(e,qe,localStorage,i),o=await Ve.EncryptedWebStorage.create(e,qe,sessionStorage,i)
;return new Ge(t,r,o)}_currentEncryptedStorage(){return this._rememberCredentials.value()?this._encryptedLocalStorage:this._encryptedSessionStorage}}var We=i(890466),ze=i(820878),$e=i(892899);const Ke=[];function He(e,t){e.configFlags=(0,ze.applyDefaultsToConfigFlags)(e.configFlags),(0,o.isFeatureEnabled)("use_broker_logos_from_single_source")&&function(e){const t=(0,Ue.getBrokerLogos)(e.id);void 0!==t&&(e.logoMiniUrl=t.logoSquare,e.logoMiniBlackUrl=t.logoSquare)}(e),Ke.push({metainfo:e,createBrokerFunction:t})}function je(){return Ke.map((e=>e.metainfo))}let Xe;async function Qe(e,t,i,r,o){const s=Ke.filter((e=>e.metainfo.id===t))[0];let n;if(null===r){const i=await Ge.create(t,new $e.RememberCredentials(t),Xe),r=o=>{(null==o?void 0:o.metainfo().id)!==t&&(null==e||e.onBrokerChange.unsubscribe(null,r),i.destroy())};null==e||e.onBrokerChange.subscribe(null,r),n=i}else n=r;const a=new Re(e,s.metainfo,i,n);try{const t=await s.createBrokerFunction(a,null==e?void 0:e.brokerTelemetry),i=new We.BrokerRealtimeAdapter(s.metainfo.id);return new oe({brokerMetainfo:s.metainfo,brokerConnection:t,host:a,brokerRealtimeAdapter:i,tradingStat:e&&e.tradingStat(),tradingSettingsStorageGetter:e&&e.getBrokerTradingSettingsStorage,brokerPlan:o})}catch(e){return Promise.reject(`${t} broker creation error: ${(0,w.getLoggerMessage)(e)}`)}}function Ye(e){return je().filter((t=>t.id===e))[0]}Xe=(0,Ne.makeUserSpecificCryptographer)()},11429:(e,t,i)=>{"use strict";i.d(t,{getBrokersList:()=>Ii,registerBroker:()=>Li,registerBrokers:()=>Fi});var r=i(125226),o=i(77122),s=i(201089),n=i(17980),a=i(834075),l=i(177259),c=i(205346)
;const p=JSON.parse('{"ACTIVTRADES":{"title":"ActivTrades"},"AFTERPRIME":{"title":"Afterprime"},"ALLY":{"title":"Ally Invest"},"ALOR":{"title":"Alor Broker"},"ALPACA":{"title":"Alpaca"},"AMP":{"title":"AMP"},"BINANCE":{"title":"Binance"},"BINGBON":{"title":"BingX"},"BITGET":{"title":"Bitget"},"BITSTAMP":{"title":"Bitstamp"},"BLACKBULL":{"title":"BlackBull Markets"},"BLUELINE":{"title":"Blue Line Futures"},"CAPITALCOM":{"title":"Capital.com"},"CITYINDEX":{"title":"City Index"},"COMPOSITEDGE":{"title":"COMPOSITEDGE"},"CQG":{"title":"CQG"},"CURRENCYCOM":{"title":"Currency.com"},"DERAYAH":{"title":"Derayah"},"DHAN":{"title":"Dhan"},"DORMAN":{"title":"Dorman Trading"},"EASYMARKETS":{"title":"easyMarkets"},"EIGHTCAP":{"title":"Eightcap"},"FINANZEN":{"title":"Finanzen.net zero"},"FOREXCOM":{"title":"FOREX.com"},"FPMARKETS":{"title":"FP Markets"},"FTX":{"title":"FTX"},"FXCM":{"title":"FXCM"},"FXOPEN":{"title":"FXOpen"},"FYERS":{"title":"Fyers"},"GBEBROKERS":{"title":"GBE brokers"},"GEMINI":{"title":"Gemini"},"GLOBALPRIME":{"title":"Global Prime"},"IBKR":{"title":"Interactive Brokers"},"IBROKER":{"title":"iBroker"},"ICMARKETS":{"title":"IC Markets"},"INFOYATIRIM":{"title":"Info Yatirim"},"INNOVESTX":{"title":"InnovestX"},"IRONBEAM":{"title":"IRONBEAM"},"OANDA":{"title":"OANDA"},"OKX":{"title":"OKX"},"OPTIMUS":{"title":"Optimus Futures"},"ORAMA":{"title":"Orama"},"OSMANLI":{"title":"Osmanli Yatirim"},"PAYTM":{"title":"Paytm Money"},"PEPPERSTONE":{"title":"Pepperstone"},"PHEMEX":{"title":"Phemex"},"PHILLIPNOVA":{"title":"Phillip Nova"},"ROBOMARKETS":{"title":"RoboMarkets"},"SAXOBANK":{"title":"Saxo"},"SKILLING":{"title":"Skilling"},"SPREADEX":{"title":"Spreadex Trading"},"STONEX":{"title":"StoneX"},"TICKMILL":{"title":"Tickmill"},"TIGER":{"title":"Tiger Brokers"},"TIMEX":{"title":"Timex"},"TINKOFF":{"title":"Tinkoff Investments"},"TRADESTATION":{"title":"TradeStation"},"TRADIER":{"title":"Tradier"},"TRADOVATE":{"title":"Tradovate"},"VANTAGE":{"title":"Vantage"},"VELOCITY":{"title":"Velocity Trade"},"WEBULL":{"title":"Webull"},"WHITEBIT":{"title":"Whitebit"},"WHSELFINVEST":{"title":"WH Selfinvest"}}'),u=new Set(["DUMMY","Paper","MOCKBROKER"]),d={DUMMY:"Dummy Broker",Paper:"Paper Trading",MOCKBROKER:"Mock Broker"};function h(e){if(e in p)return p[e];if(function(e){return u.has(e)}(e))return{title:d[e]};throw new Error(`Broker ${e} is not registered`)}var m=i(862963),g=i(314802),b=i(820878);async function v(e){const t=(0,r.isFeatureEnabled)("enable_trading_server_logger")&&(0,r.isFeatureEnabled)("trading_request_server_logger")&&(0,r.isFeatureEnabled)("rest_request_server_logger")?e():null;if(null===t)return;const{makeFetchWithServerLogger:o}=await i.e(56577).then(i.bind(i,750983));return o(t)}function _(e,t,o){const s=(0,r.isFeatureEnabled)("force_max_allowed_pulling_intervals");return async(n,a)=>{const[{Broker:l},{makeRestRequestsEnvironments:c}]=await Promise.all([Promise.all([i.e(31327),i.e(46718),i.e(74195),i.e(83541)]).then(i.bind(i,709310)),i.e(36533).then(i.bind(i,645426))]);return new l({host:n,
metainfo:Object.assign({},{configFlags:b.defaultConfigFlags},t),accessToken:null,isFastRenewTokenEnabled:(0,r.isFeatureEnabled)("trading-fast-renew-oauth-token"),forceMaxAllowedPullingInterval:s,requestsEnvironments:c(e,o),customFetch:await v(n.serverLogger),brokerTelemetryReportSender:null==a?void 0:a.sendReport,useMobileAppRedirect:(0,g.isOnMobileAppPage)("any"),serverTimestampGetter:()=>window.ChartApiInstance.serverTime()})}}const f=i.p+"activtrades.cbf1216345a2dfb25521.svg",y=i.p+"activtrades.46837772022a8e1cc5d3.webp";const S=i.p+"afterprime.d798ac4db13fa218712a.svg",k=i.p+"afterprime.72cdd4adf2acecc0ac57.webp";const P=i.p+"ally.bc67bbc7db7067512870.svg",w=i.p+"ally.de2e6b28a1cdba2dd3bb.webp",C={realtime:1e3,orders:1e3,positions:1e3,pl:1e3,executions:1e3,summaryRow:1e4,summaryTable:1e4};var T=i(444372);const E=i.p+"alor.57e2796130a38acf86a3.svg",M=i.p+"alor.ca7c73cea891996aeca0.webp";const B=i.p+"alpaca.5d3469bd1f41e2594c74.svg",D=i.p+"alpaca.18fc2f15133d4fcb544a.webp";const O=[{name:"DAY",value:"DAY"},{name:"GTC",value:"GTC"},{name:"GTD",value:"GTD",hasDatePicker:!0},{name:"GTT",value:"GTT",hasDatePicker:!0,hasTimePicker:!0},{name:"FAK",value:"FAK"},{name:"FOK",value:"FOK"},{name:"ATO",value:"ATO"},{name:"ATC",value:"ATC"}],A={supportOrderBrackets:!0,supportPositionBrackets:!0,authorizationType:"password",showQuantityInsteadOfAmount:!0,supportLevel2Data:!0,supportPLUpdate:!0,supportStopLimitOrders:!0,supportSymbolSearch:!0,supportRealtimeDataCheck:!1,calculatePLUsingLast:!0,supportPositionNetting:!0,supportCloseIndividualPosition:!1,supportOrdersHistory:!0,supportPartialClosePosition:!0,supportPartialCloseIndividualPosition:!0,supportTrailingStop:!0,supportModifyTrailingStop:!1,positionPLInInstrumentCurrency:!0,supportExecutions:!0};function I(e){const{id:t,title:o,configFlags:s,logoMiniUrl:n,logoMiniWebpUrl:a,isBeta:l,note:c,cqgBrokerIdentifier:p,demoConnectionParams:u,connectIssueSolutionId:d}=e;(0,m.addBroker)({id:t,title:o,telemetryId:"CQG",configFlags:s,customNotificationFields:[],loginPlaceholder:"CQG"!==t?T.t(null,void 0,i(696561)):void 0,description:"",durations:O,logoMiniUrl:n,logoMiniWebpUrl:a,isBeta:l,note:c,connectIssueSolutionId:d,checkCredentialsBeforeLogin:!0},function(e,t,o){return async s=>{const[{default:n},{default:a}]=await Promise.all([Promise.all([i.e(53861),i.e(54765),i.e(63165),i.e(98676),i.e(18577)]).then(i.t.bind(i,298905,23)),Promise.all([i.e(53861),i.e(54765),i.e(63165),i.e(98676),i.e(18577)]).then(i.t.bind(i,779744,23))]);return new n({host:s,title:e,cqgBrokerIdentifier:t,changePasswordForm:a,demoConnectionParams:o,isRealtimeBandwidthLimitEnabled:(0,r.isFeatureEnabled)("cqg-realtime-bandwidth-limit")})}}(t,p,u))}const L={AMP:{brokerageNames:["AMP","AMP3","AMP-CQG","AMP School","AMP Farm"],salesSeries:null},BLUELINE:{salesSeries:["Blueline"]},DORMAN:{brokerageNames:["Dorman Trading"],salesSeries:null},IRONBEAM:{salesSeries:["IRB","IRONBEAM"]},OPTIMUS:{salesSeries:null},STONEX:{salesSeries:["CQG  Bridge"]},TICKMILL:{
salesSeries:["House Account","Internal - Professional Non TTCA","Internal - Professional TTCA","Professional","Retail","Professional - TTCA","Corporate","Internal Connections","Internal - Retail","Educate to Trade"]}},F=i.p+"amp.934deb23707b18d88e98.svg",x=i.p+"amp.f7877599bbf128ff6ee8.webp";const R=i.p+"binance.686ef99542aae3b68c5c.svg",N=i.p+"binance.72f29c6fb604f8968d59.svg",U=i.p+"binance.18fa0556a12e4c37a8ec.webp",V=i.p+"binance.40367bb2470049c8169e.webp";const q=i.p+"bingbon.03362cabe31d44c8f166.svg",G=i.p+"bingbon.ad2d46dc390a88ee051c.webp";const W=i.p+"bitget.77429e73d4ac6cb4fb00.svg",z=i.p+"bitget.70b9e66df3d3c4425f63.webp";const $=i.p+"bitstamp.df7ac2355b9807efb7e1.svg",K=i.p+"bitstamp.4c66d029b1df3adc6240.webp",H=()=>{const e="BITSTAMP",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:$,logoMiniWebpUrl:K,isDevEnvironment:i,symbolPrefix:"BITSTAMP"},s=i?"https://front.clients.stagebts.net/api-internal/tradingview/":"https://www.bitstamp.net/api-internal/tradingview/";(0,m.addBroker)(o,_(s,o))},j=i.p+"blackbull.98e6e3e1879503fa9089.svg",X=i.p+"blackbull.fa9a74401c124a8e6da4.webp",Q=()=>{const e="BLACKBULL",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:j,logoMiniWebpUrl:X,symbolPrefix:"BLACKBULL"},s=i?"https://tradingview-api-client-staging.blackbullmarkets.com/":"https://tradingview-api-client.blackbullmarkets.com/";(0,m.addBroker)(o,_(s,o))},Y=i.p+"blueline.40f611e3a47713572b59.svg",J=i.p+"blueline.84a8b2100dafb0caf296.webp";const Z=i.p+"capital.cdac334887a4bfcefd24.svg",ee=i.p+"capital.9a63aafd0319ff7ca0b7.webp";const te={baseUrl:"https://ciapipreprod.cityindextest9.co.uk/tradingapi",streamingUrl:"https://pushpreprod.cityindextest9.co.uk/"};function ie(e,t){return async r=>{const{Broker:o}=await Promise.all([i.e(38016),i.e(89153),i.e(51316)]).then(i.bind(i,436467));return new o(r,e,t)}}const re=i.p+"cityindex.314f3f6e37ad3fac3fbc.svg",oe=i.p+"cityindex.290d126bdf4d28b7a625.webp";const se=i.p+"compositedge.cb0f6d1c637e4fc0e463.svg",ne=i.p+"compositedge.71b23de703a922205aa8.webp",ae=()=>{const e="COMPOSITEDGE",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isDevEnvironment:i,isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),logoMiniUrl:se,logoMiniWebpUrl:ne},s=i?"https://uat.compositedge.com/tradingview/v1/":"https://trading.compositedge.com/tradingview/v1/";(0,
m.addBroker)(o,_(s,o))},le=i.p+"cqg.b046000335f1aff62d63.svg",ce=i.p+"cqg.073477445aa71bb545c9.webp";const pe=i.p+"currencycom.9761491e38e4fbedc3cc.svg",ue=i.p+"currencycom.361e8ac6676a8a14affc.webp";const de=i.p+"derayah.1e189075949d53492671.svg",he=i.p+"derayah.7cdbca52e20ec5409b48.webp";const me=i.p+"dhan.374b9a0553b601666032.svg",ge=i.p+"dhan.dbdf2fe64b2381680f04.webp";const be=i.p+"dorman.c2fde89e31d58a7882c7.svg",ve=i.p+"dorman.df4a36736b1f4fcf7f19.webp";const _e=i.p+"easymarkets.23481a78aa40333cf1b5.svg",fe=i.p+"easymarkets.6e13a325b54d228791bf.webp";const ye=i.p+"eightcap.82526995704e06a146cd.svg",Se=i.p+"eightcap.020c744470342ae01024.webp",ke=()=>{const e="EIGHTCAP",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",symbolPrefix:"EIGHTCAP",logoMiniUrl:ye,logoMiniWebpUrl:Se,loginPlaceholder:T.t(null,void 0,i(430101)),customNotificationFields:["expiry"],connectIssueSolutionId:43000692322},n=o?"https://tradingview-api-client-staging.eightcap.com/":"https://tradingview-api-client.eightcap.com/";(0,m.addBroker)(s,_(n,s))},Pe=i.p+"finanzen.9b8944548d8523ed1978.svg",we=i.p+"finanzen.4dfd77e1ce8c51ed98d2.webp";const Ce=i.p+"forexcom.340fec405623eb873aa7.svg",Te=i.p+"forexcom.04b95708c6235e9c3e94.webp",Ee=T.t(null,{replace:{risk_disclosure_link_start:'<a href="https://www.forex.com/en-us/terms-and-policies/risk-disclosure/">',tdr_link_start:'<a href="https://www.forex.com/en-us/terms-and-policies/risk-disclosure/#transaction-data-report">',link_end:"</a>"}},i(755134));const Me=i.p+"fpmarkets.ebd01caf77ca6676a550.svg",Be=i.p+"fpmarkets.71e00ac6f13b422ba4c3.webp";const De=i.p+"ftx.f573965bf716015dd6be.svg",Oe=i.p+"ftx.c4d896d7186aa7993acf.svg",Ae=i.p+"ftx.f17042c6fd305c8d0d2e.webp",Ie=i.p+"ftx.86251c88332eba427066.webp",Le={positions:1e3};const Fe=i.p+"fxcm.3d5b49dda0ee1257c82f.svg",xe=i.p+"fxcm.b91111b05816c621b803.webp",Re={1:{connection:"Demo",tradingSystemUrl:"https://www.fxcorporate.com"},0:{connection:"Real",tradingSystemUrl:"https://www.fxcorporate.com"}},Ne={1:{connection:"QAReal",tradingSystemUrl:"https://fxcorpx.fxcorporate.com"},0:{connection:"UATReal",tradingSystemUrl:"https://fxcorpz.fxcorporate.com"}};const Ue=i.p+"fxopen.e46b0a5d4d3184608a08.svg",Ve=i.p+"fxopen.5cefaac3ec331793b004.webp";const qe=i.p+"fyers.3815636937428eb291a0.svg",Ge=i.p+"fyers.f318e8c53480edad575a.webp";const We=i.p+"gbebrokers.67124098c4ee6768e005.svg",ze=i.p+"gbebrokers.88cb956bb206159d0a9f.webp";const $e=i.p+"gemini.7426ddf2b466c8d4f580.svg",Ke=i.p+"gemini.a59dbf4cbfd1219714d0.webp";const He=i.p+"globalprime.5d16e9773e1f1ed76e31.svg",je=i.p+"globalprime.d1a1e045db2439c9e5ed.svg",Xe=i.p+"globalprime.ff367749e87e85bed6cf.webp",Qe=i.p+"globalprime.1f572ab8e957cd23243f.webp";const Ye=i.p+"ibkr.6841121c4a780f84aa77.svg",Je=i.p+"ibkr.9ff6c53e093d7f99d392.webp"
;const Ze=[3,1,4,2];const et=i.p+"ibroker.b2204fd15abc4f4d5cf7.svg",tt=i.p+"ibroker.75e32d55b256669d9e51.webp";const it=i.p+"icmarkets.b582501691b33aed779b.svg",rt=i.p+"icmarkets.abcc66879e85d26e5884.webp";const ot=i.p+"infoyatirim.0445427d61abd7894570.svg",st=i.p+"infoyatirim.ead887838540ce61b8b3.webp",nt=()=>{const e="INFOYATIRIM",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`${e}_beta`),s=(0,r.isFeatureEnabled)(`broker_${e}_dev`),n={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,passLocalesLangInOAuth:!0},description:"",logoMiniUrl:ot,logoMiniWebpUrl:st,isBeta:o,isDevEnvironment:s,realtimeDataPermissionsToggleConfig:{enableRealtimeDataPermissionsTitleText:T.t(null,void 0,i(635970)),disableRealtimeDataPermissionsTitleText:T.t(null,void 0,i(153016)),enableRealtimeDataPermissionsToggleText:T.t(null,void 0,i(628516)),disableRealtimeDataPermissionsToggleText:T.t(null,void 0,i(491717)),realtimeDataPermissionsToggleText:T.t(null,void 0,i(822439)),solutionId:43000693755}},a=s?"https://info-tv-sandbox.fintables.com/":"https://info-tv.fintables.com/";(0,m.addBroker)(n,_(a,n))},at=i.p+"innovestx.0ba8e427343e0be22733.svg",lt=i.p+"innovestx.b041e99299ad4f5bae9e.webp";const ct=i.p+"ironbeam.bfd42d97e9c2f067fd9e.svg",pt=i.p+"ironbeam.93f908b9ca7b2e077ce0.webp";const ut=i.p+"paper.516c136ac73297ecbaa5.svg",dt=i.p+"paper.b49db1bcc1542b628082.webp";var ht=i(62802);const mt=i.p+"oanda.b214121cae1e570e5ee7.svg",gt=i.p+"oanda.1c5b84c98b3fa5e63984.webp";function bt(){const e="OANDA",{title:t}=h(e);(0,m.addBroker)({id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportOrderBrackets:!0,supportTrailingStop:!0,supportPositionNetting:!0,supportCloseIndividualPosition:!0,supportIndividualPositionBrackets:!0,requiresFIFOCloseIndividualPositions:!0,fifoOnlyForSameQty:!0,supportClosePosition:!0,supportModifyDuration:!0,supportMultiposition:!0,supportPLUpdate:!0,supportSymbolSearch:!0,requiresTermsOfServiceConfirmation:!0,supportMargin:!0,supportUnhideSymbolSearchGroups:!0,supportPartialClosePosition:!0,supportPartialCloseIndividualPosition:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportExecutions:!0,supportStopOrdersInBothDirections:!0},description:"",customTermsOfServiceText:T.t(null,void 0,i(894402)),logoMiniUrl:mt,logoMiniWebpUrl:gt},(async e=>{const{Broker:t}=await Promise.all([i.e(38541),i.e(32655)]).then(i.bind(i,571259));return new t(e,(0,r.isFeatureEnabled)("trading-fast-renew-oauth-token"),(0,r.isFeatureEnabled)("oanda-european-accounts-warning"))}))}const vt={"launch-oanda-country-group-1":["AT","BG","BE","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"],
"launch-oanda-country-group-2":["DZ","AO","BJ","BW","BV","BI","CV","CF","TD","KM","CI","DJ","EG","ER","ET","GQ","GA","GM","GH","GN","GW","KE","LS","LR","MG","MW","MR","MU","YT","MA","NA","NE","RW","SH","ST","SC","SL","SZ","TG","EH","ZM","AQ","AM","AZ","BD","BT","BN","GE","HK","ID","LA","KZ","KG","MO","MY","MV","MN","NP","PH","LK","TW","TJ","TH","TL","TM","UZ","VN","BZ","CR","SV","GT","HN","MX","BH","IL","KW","LB","OM","QA","SA","AE","BM","GL","CC","CK","FJ","KI","MH","FM","NR","NC","NU","PW","PG","PN","WS","SB","TK","TO","TN","TV","WF","AR","BO","BR","CL","CO","EC","GY","PY","PE","SR","UY","VE","AG","AW","BS","CW","DM","DO","GD","KN","LC","VC"],"launch-oanda-country-group-3":["AS","GU","JP","MP","PR","VI","UM","US"]};function _t(e){return function(e,t=window.countryCode){var i;for(const o of Object.keys(e))if((0,r.isFeatureEnabled)(o)&&(null===(i=e[o])||void 0===i?void 0:i.includes(t)))return!0;return!1}(vt,e)}const ft=i.p+"okx.68abef5f84d75874ca2d.svg",yt=i.p+"okx.e4b1ce01bdcbad7a0a9b.webp";const St=i.p+"optimus.beedce21b5a6b905bd90.svg",kt=i.p+"optimus.64e20a15c804971a4818.webp";const Pt=i.p+"orama.f78b03989daee39987eb.svg",wt=i.p+"orama.e6dcfb1e407559188c8b.webp";const Ct=i.p+"osmanli.ef5fd0be0b27e6d558df.svg",Tt=i.p+"osmanli.3fa49a2cfb08fe87a822.webp";var Et=i(707957),Mt=i(876332);const Bt="USD";class Dt{constructor(e,t){this.value=NaN,this.equity=NaN,this.onValueChanged=new Et.Delegate,this._pointvalue=1,this._currency="USD",this._reverseCurrency=!1,this._qsmId="profit-loss-emitter"+Math.random(),this._tradingModel=e,this._symbol=t.symbol,this._avgPrice=+t.avg_price,this._qty=+t.qty||0,this._position=t;let i=null;if("forex"===t.symboltype){const e=/^(?:.*?:)?(\w{3})(\w{3})$/.exec(this._symbol);e&&(i=[e[1],e[2]])}i?i[0]===Bt?this._reverseCurrency=!0:i[1]===Bt?this._reverseCurrency=!1:this._currency=i[1]:t.currency&&(this._currency=t.currency),t.pointvalue&&(this._pointvalue=t.pointvalue),this._boundQuoteListener=(e,i)=>{let r;r=e.values.current_session&&"market"!==e.values.current_session||"last"===e.values["trading-by"]?i.values.last_price:("sell"===t.side?e.values.ask:e.values.bid)||i.values.last_price,null!=r&&(this._lastPrice=r,this._update())},this._boundPositionListener=e=>{e.symbol===this._symbol&&(this._qty=e.qty,this._avgPrice=e.avg_price,this._update())},Promise.resolve().then((()=>(0,Mt.getQuoteSessionInstance)("full").subscribe(this._qsmId,this._symbol,this._boundQuoteListener))),this._tradingModel.onPositionUpdate.subscribe(null,this._boundPositionListener)}destroy(){const e=(0,Mt.getQuoteSessionNoEnsure)("full");e&&e.unsubscribe(this._qsmId,this._symbol),this._tradingModel.onPositionUpdate.unsubscribe(null,this._boundPositionListener)}_update(){const e=void 0!==this._lastPrice?this._lastPrice:NaN;let t,i=(e-this._avgPrice)*this._qty*this._pointvalue;if(t=this._qty<0?i:e*this._qty*this._pointvalue,this._currency!==Bt){const e=this._tradingModel.currencyRate(this._currency);i*=e,t*=e}this._reverseCurrency&&(i/=e,t/=e,t+=i),isFinite(i)?(this.value=i,isFinite(t)?this.equity=t:this.equity=NaN,
this._position.pl=i,this.onValueChanged.fire(this)):this.value=NaN}}function Ot(e,t){return new Dt(e,t)}const At=i.p+"paper.0e255bd6a50a44985778.svg",It=["exp"];function Lt(){(0,m.addBroker)({id:"Paper",title:h("Paper").title,configFlags:{authorizationType:"none",showQuantityInsteadOfAmount:!0,supportOrderBrackets:!0,supportPositionBrackets:!0,supportClosePosition:!1,supportPLUpdate:!0,supportNativeReversePosition:!0,supportDemoLiveSwitcher:!1,supportOrdersHistory:!0,supportPartialClosePosition:!0,showNotificationsLog:!1,supportExecutions:!0,supportCreateAccount:!0,supportDeleteAccount:!0,supportResetAccount:!0,supportChangeAccountSettings:!0,supportContinuousTrading:!0},concurrentSessionsAllowance:"allowed",customNotificationFields:It,description:"",durations:[{name:T.t(null,void 0,i(465577)),value:"DAY"},{name:T.t(null,void 0,i(91722)),value:"WEEK",default:!0},{name:T.t(null,void 0,i(818749)),value:"MONTH"},{name:T.t(null,void 0,i(911563)),value:"GTD",hasDatePicker:!0,hasTimePicker:!0}],logoMiniUrl:ut,logoMiniBlackUrl:At,logoMiniWebpUrl:dt,note:T.t(null,void 0,i(681330))},(async e=>{const{default:t}=await Promise.all([i.e(79702),i.e(92188)]).then(i.t.bind(i,479846,23));return new t(e,Ot)}))}const Ft=i.p+"paytm.57ebdc7576dc5abd1d8b.svg",xt=i.p+"paytm.fe4abc7dbd4f99551dc0.webp";const Rt=i.p+"pepperstone.6524c63a3a2439ffcf49.svg",Nt=i.p+"pepperstone.b1d5eff44f6caf864aff.webp",Ut=T.t(null,void 0,i(798686)),Vt=()=>{const e="PEPPERSTONE",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportCredentialsHeader:!0,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:Rt,logoMiniWebpUrl:Nt,symbolPrefix:"PEPPERSTONE",isDevEnvironment:i,connectWarningMessageInfo:{message:Ut}},s=i?"https://ctrader-tradingview-api-staging.pepperstone.com/api/":"https://ctrader-tradingview-api.pepperstone.com/api/";(0,m.addBroker)(o,_(s,o))},qt=i.p+"phemex.dc647ad5e4407b30ba0f.svg",Gt=i.p+"phemex.a41ebee54a3dac995512.webp";const Wt=i.p+"phillipnova.b67138de186fc0386a56.svg",zt=i.p+"phillipnova.a6cc8469f63710e160a8.webp";const $t=i.p+"robomarkets.d4632f91a85e0414bb66.svg",Kt=i.p+"robomarkets.83a1a15a98b0d7077dec.webp",Ht=()=>{const e="ROBOMARKETS",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o=(0,r.isFeatureEnabled)(`${e}_beta`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!1,supportSymbolSearch:!0,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,passLocalesLangInOAuth:!0},description:"",logoMiniUrl:$t,logoMiniWebpUrl:Kt,isDevEnvironment:i,isBeta:o},n=i?"https://preprod-server-tradingview.umstel.com/api/tw/v1/":"https://roboforex-server-one.umstel.com/api/tw/v1/";(0,m.addBroker)(s,_(n,s))},jt=i.p+"saxobank.cba3df9eb49b869bbc2c.svg",Xt=i.p+"saxobank.82373a016cb964ef6a0b.webp"
;const Qt=i.p+"skilling.e9a4fa4c04635b63ec7b.svg",Yt=i.p+"skilling.dce1eb4835d3f2870594.webp";const Jt=i.p+"spreadex.df1760050ebddb33906e.svg",Zt=i.p+"spreadex.f1754b263f89710abe32.webp";const ei=i.p+"stonex.97b099514b4ba9fc19ce.svg",ti=i.p+"stonex.390a2e2bf53d526eeaa4.webp";const ii=i.p+"tickmill.7ca09138fd2e19b00b94.svg",ri=i.p+"tickmill.4d240e7be6e014602ca3.webp";const oi=i.p+"tiger.62fa40891dd25c8729f1.svg",si=i.p+"tiger.e2e102f15bebd025d493.webp";const ni=i.p+"timex.47c00bc2c90eaeb88687.svg",ai=i.p+"timex.59765928560205228913.webp";const li=i.p+"tinkoff.2dc8c061785a57bed3d4.svg",ci=i.p+"tinkoff.0792296025db3958a951.webp";const pi=i.p+"tradestation.6e0a5bdf9e8601871dda.svg",ui=i.p+"tradestation.daa6c66f1b52c4f71349.webp";const di=[3,1,4,2];const hi=i.p+"tradier.13dddf06bd3bae31979a.svg",mi=i.p+"tradier.6f81d2697fade0d833a6.webp",gi=()=>{const e="TRADIER",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,passLocalesLangInOAuth:!0,supportVerifyLiveAccount:!0,supportRealtimeDataCheck:!0},description:"",logoMiniUrl:hi,logoMiniWebpUrl:mi,isDevEnvironment:i},s=i?"https://staging.api.tradier.com/tv/":"https://api.tradier.com/tv/";(0,m.addBroker)(o,_(s,o))},bi=i.p+"tradovate.b97dc416fddc2852d50c.svg",vi=i.p+"tradovate.7e31971704b66fe83c1e.webp";const _i=i.p+"vantage.b3276c1b1c678c9f602b.svg",fi=i.p+"vantage.6bcb87d28b60b16ceeb4.webp";const yi=i.p+"velocity.3b5989afe83479e38bda.svg",Si=i.p+"velocity.67a037c1be4824cfe895.webp",ki=()=>{const e="VELOCITY",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:yi,logoMiniWebpUrl:Si,isBeta:i,symbolPrefix:"VELOCITY"},n=o?"https://uat-tv1.vtfs.cloud/tradingview/v1/":"https://prd-tv1.vtfs.cloud/tradingview/v1/";(0,m.addBroker)(s,_(n,s))},Pi=i.p+"webull.2f15652f8eaace4f308a.svg",wi=i.p+"webull.6a04adb955c39d2a544b.webp";const Ci=i.p+"whitebit.e53504868fc8670945a0.svg",Ti=i.p+"whitebit.46b3ec0da48a47b58f48.webp";const Ei=i.p+"wh.5387b2037c1e4ede9f5e.svg",Mi=i.p+"wh.ad65c3ac078c5ab1da56.webp";const Bi=(0,s.getLogger)("Trading.BrokerRegistration"),Di=(0,r.isFeatureEnabled)("use_broker_logos_from_single_source");let Oi=new Map;!o.enabled("real_brokers")||(0,a.isMobileTradingAvailable)()&&(0,r.isFeatureEnabled)("hide_real_brokers_on_mobile")||(Oi=new Map([["ACTIVTRADES",function(){const e="ACTIVTRADES",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},
description:"",symbolPrefix:"ACTIVTRADES",isBeta:i,isDevEnvironment:o,logoMiniUrl:f,logoMiniWebpUrl:y},n=o?"https://staging-tradingapi.activtrades.com/":"https://tradingapi.activtrades.com/";(0,m.addBroker)(s,_(n,s))}],["AFTERPRIME",function(){const e="AFTERPRIME",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",isBeta:i,symbolPrefix:"AFTERPRIME",logoMiniUrl:S,logoMiniWebpUrl:k},n=o?"https://trading.traderevolution.com/tradingview/v1":"https://trading.afterprime.io/tradingview/v1";(0,m.addBroker)(s,_(n,s))}],["ALLY",function(){const e="ALLY",{title:t}=h(e),o={id:e,title:t,description:"",configFlags:{authorizationType:"oauth",supportPlaceOrderPreview:!0,supportSymbolSearch:!0,supportStopLimitOrders:!0,supportDemoLiveSwitcher:!1,supportEditAmount:!1,supportPartialClosePosition:!0,supportPLUpdate:!0,supportReversePosition:!1},logoMiniUrl:P,logoMiniWebpUrl:w,durations:[{name:"DAY",value:"DAY",default:!0,supportedOrderTypes:[1,3,4,2]},{name:"GTC",value:"GTC",supportedOrderTypes:[1,3,4]}]};(0,m.addBroker)(o,function(e){return async(t,o)=>{const[{AllyInvestAuthorizationProvider:s,accountFactory:n,makeVerifyLiveAccountParams:a},{BrokerApiAdapter:l},{AbortControllerManager:c},{makeCommonAccountsManagerFactory:p}]=await Promise.all([Promise.all([i.e(6455),i.e(7466),i.e(3916)]).then(i.bind(i,430716)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240)),i.e(50072).then(i.bind(i,407150))]),u=new c,d=t.getLogger();return new l({host:t,abortControllerManager:u,logger:d,authorizationProvider:new s(t.credentialsStorage,d,u.getSignal),accountsManagerFactory:p(((...e)=>n("https://devapi.invest.ally.com/v1/",...e))),metainfo:e,pullingIntervals:C,makeVerifyLiveAccountParams:a,brokerTelemetry:o,useSyncMapper:(0,r.isFeatureEnabled)("modular_broker_use_sync_mapper")})}}(o))}],["ALOR",function(){const e="ALOR",{title:t}=h(e),o=(0,r.isFeatureEnabled)("broker_ALOR_dev"),s=`${T.t(null,void 0,i(865221))}: Pxxxxxx`,n={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportLevel2Data:!0,supportSymbolSearch:!0},description:"",logoMiniUrl:E,logoMiniWebpUrl:M,locales:["ru"],loginPlaceholder:s},a=o?"https://tvcomdev.alorbroker.ru/tradingview/v1/":"https://tvcom.alorbroker.ru/tradingview/v1/";(0,m.addBroker)(n,_(a,n))}],["ALPACA",function(){const e="ALPACA",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,useSessionStorage:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isDevEnvironment:i,logoMiniUrl:B,logoMiniWebpUrl:D},s=i?"https://staging-api.tradetalk.us/tradingview/":"https://api.alpaca.markets/tradingview/";(0,m.addBroker)(o,_(s,o))}],["AMP",function(){
const{title:e}=h("AMP");I({id:"AMP",title:e,configFlags:{...A,supportVerifyLiveAccount:!0},logoMiniUrl:F,logoMiniWebpUrl:x,cqgBrokerIdentifier:L.AMP,demoConnectionParams:{clientId:"AMPConnect",privateLabel:"AMPConnect"},connectIssueSolutionId:43000674990})}],["BINANCE",function(){const e="BINANCE",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",disableUserClosedOAuthWindowCheck:!0,supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},isBeta:i,description:"",symbolPrefix:"BINANCE",isDevEnvironment:o,logoMiniUrl:R,logoMiniBlackUrl:N,logoMiniWebpUrl:U,logoMiniBlackWebpUrl:V},n=o?"https://qacb.sdtaop.com/oauth-api/v1/tradingview/":"https://accounts.binance.com/oauth-api/v1/tradingview/";(0,m.addBroker)(s,_(n,s))}],["BINGBON",function(){const e="BINGBON",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportRiskControls:!1},description:"",isDevEnvironment:i,logoMiniUrl:q,logoMiniWebpUrl:G,symbolPrefix:"BINGX"},s=i?"https://pre-api-tv.bingx.com/api/tv":"https://api.bingbon.com/api/tv";(0,m.addBroker)(o,_(s,o))}],["BITGET",function(){const e="BITGET",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`${e}_beta`),s=(0,r.isFeatureEnabled)(`broker_${e}_dev`),n={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,checkBracketsAfterOrderModification:!1},isBeta:o,description:"",logoMiniUrl:W,logoMiniWebpUrl:z,symbolPrefix:"BITGET",loginPlaceholder:T.t(null,void 0,i(509110)),passwordPlaceholder:T.t(null,void 0,i(319241))},a=s?"https://capi.bitget.com/api/tradingview/v3/":"https://api.bitget.com/api/tv/v3/";(0,m.addBroker)(n,_(a,n))}],["BITSTAMP",H],["BLACKBULL",Q],["BLUELINE",function(){const e="BLUELINE",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0},isBeta:i,logoMiniUrl:Y,logoMiniWebpUrl:J,cqgBrokerIdentifier:L.BLUELINE})}],["CAPITALCOM",function(){const e="CAPITALCOM",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportUnhideSymbolSearchGroups:!0,supportMargin:!0},description:"",logoMiniUrl:Z,logoMiniWebpUrl:ee,isDevEnvironment:i,symbolPrefix:"CAPITALCOM"},s=i?"https://test-tradingview.backend-capital.com/":"https://cc-tradingview.backend-capital.com/";(0,m.addBroker)(o,_(s,o))}],["CITYINDEX",function(){const e="CITYINDEX",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`)?{baseUrl:"https://trading-test.cityindex.com/tradingapi"}:{}
;o.unhideSpreadBettingAccounts=(0,r.isFeatureEnabled)("cityindex_spreadbetting"),(0,m.addBroker)({id:e,title:t,telemetryId:"FOREXCOM",configFlags:{authorizationType:"password",supportClosePosition:!0,supportPLUpdate:!0,supportOrderBrackets:!0,supportPositionBrackets:!0,supportMarketBrackets:!1,supportSymbolSearch:!0,supportPositionNetting:!0,showQuantityInsteadOfAmount:!0,supportDemoLiveSwitcher:!1,supportMargin:!0,supportPartialCloseIndividualPosition:!0,supportPartialClosePosition:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportTrailingStop:!0,supportUnhideSymbolSearchGroups:!0},customNotificationFields:["duration.datetime","duration.type"],description:"",durations:[{name:T.t(null,void 0,i(652495)),value:"GTC"},{name:T.t(null,void 0,i(911563)),value:"GTD",hasDatePicker:!0,hasTimePicker:!0},{name:T.t(null,{context:"good-for-day"},i(1042)),value:"GFD"}],logoMiniUrl:re,logoMiniWebpUrl:oe},ie({id:e,title:t,symbolSearchId:"CITYINDEX",symbolSearchSpreadBettingPrefix:"CITYINDEXSB"},o))}],["COMPOSITEDGE",ae],["CQG",function(){const{title:e}=h("CQG");I({id:"CQG",title:e,configFlags:A,logoMiniUrl:le,logoMiniWebpUrl:ce,note:"Multiple FCMs",cqgBrokerIdentifier:{salesSeries:null}})}],["CURRENCYCOM",function(){const e="CURRENCYCOM",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:pe,logoMiniWebpUrl:ue,isDevEnvironment:i,symbolPrefix:"CURRENCYCOM"},s=i?"https://test-crx-tradingview.backend.currency.com/":"https://crx-tradingview.backend.currency.com/";(0,m.addBroker)(o,_(s,o))}],["DERAYAH",function(){const e="DERAYAH",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,passLocalesLangInOAuth:!0,supportVerifyLiveAccount:!0,supportUnhideSymbolSearchGroups:!0,supportRealtimeDataCheck:!0},isBeta:i,description:"",logoMiniUrl:de,logoMiniWebpUrl:he,isDevEnvironment:o},n=o?"https://api-sandbox.derayah.com/tradingview/":"https://api.derayah.com/tradingview/";(0,m.addBroker)(s,_(n,s))}],["DHAN",function(){const e="DHAN",{title:t}=h(e),i=(0,r.isFeatureEnabled)("DHAN_beta"),o=(0,r.isFeatureEnabled)("broker_DHAN_dev"),s={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isBeta:i,isDevEnvironment:o,logoMiniUrl:me,logoMiniWebpUrl:ge},n=o?"https://tvapi.dhanuat.co/":"https://tv-broker-api.dhan.co/";(0,m.addBroker)(s,_(n,s))}],["DORMAN",function(){const e="DORMAN",{title:t}=h(e);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0,supportDemoLiveSwitcher:!1},logoMiniUrl:be,logoMiniWebpUrl:ve,cqgBrokerIdentifier:L.DORMAN})}],["DUMMY",function(){const e={id:"DUMMY",title:h("DUMMY").title,description:"",
configFlags:{authorizationType:"none",supportDemoLiveSwitcher:!1},logoMiniUrl:"",logoMiniWebpUrl:""};(0,m.addBroker)(e,function(e){return async(t,r)=>{const[{accountFactory:o,DummyAuthorizationProvider:s},{BrokerApiAdapter:n},{AbortControllerManager:a},{makeCommonAccountsManagerFactory:l}]=await Promise.all([i.e(38326).then(i.bind(i,580627)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240)),i.e(50072).then(i.bind(i,407150))]),c=new a,p=t.getLogger();return new n({host:t,abortControllerManager:c,logger:p,authorizationProvider:new s(t.credentialsStorage,p,c.getSignal),accountsManagerFactory:l(o),metainfo:e})}}(e))}],["EASYMARKETS",function(){const e="EASYMARKETS",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportVerifyLiveAccount:!0,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:_e,logoMiniWebpUrl:fe,isDevEnvironment:i,symbolPrefix:"EASYMARKETS"},s=i?"https://prp.easymarkets.com/tradingview/api/":"https://www.easymarkets.com/tradingview/api/";(0,m.addBroker)(o,_(s,o))}],["EIGHTCAP",ke],["FINANZEN",function(){const e="FINANZEN",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",symbolPrefix:"GETTEX",logoMiniUrl:Pe,logoMiniWebpUrl:we,isBeta:i,isDevEnvironment:o},n=o?"https://tv.t5.zero-test.net/api/":"https://tv.partner.finanzen-zero.net/api/";(0,m.addBroker)(s,_(n,s))}],["FOREXCOM",function(){const e="FOREXCOM",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s=(0,r.isFeatureEnabled)("forexcom_session_v2"),n=o?{useSessionV2:s,...te}:{useSessionV2:s};(0,m.addBroker)({id:e,title:t,configFlags:{authorizationType:"password",supportClosePosition:!0,supportPLUpdate:!0,supportOrderBrackets:!0,supportPositionBrackets:!0,supportMarketBrackets:!1,supportSymbolSearch:!0,supportPositionNetting:!0,noAD:!0,showQuantityInsteadOfAmount:!0,supportDemoLiveSwitcher:!1,supportMargin:!0,supportTrailingStop:!0,supportPartialCloseIndividualPosition:!0,supportPartialClosePosition:!0,supportDisplayBrokerNameInSymbolSearch:!1},customNotificationFields:["duration.datetime","duration.type"],description:"",durations:[{name:T.t(null,void 0,i(652495)),value:"GTC"},{name:T.t(null,void 0,i(911563)),value:"GTD",hasDatePicker:!0,hasTimePicker:!0},{name:T.t(null,{context:"good-for-day"},i(1042)),value:"GFD"}],backendBrokerName:"forexcom-g2",logoMiniUrl:Ce,logoMiniWebpUrl:Te,importantLoginScreenMessage:"US"===window.countryCode?Ee:void 0},ie({id:e,title:t,symbolSearchId:"FOREXCOM-G2"},n))}],["FPMARKETS",function(){const e="FPMARKETS",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,
supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",isDevEnvironment:i,isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),logoMiniUrl:Me,logoMiniWebpUrl:Be,symbolPrefix:"FPMARKETS"},s=i?"https://tradingview-api-client-staging.fpmarkets.com":"https://tradingview-api-client.fpmarkets.com";(0,m.addBroker)(o,_(s,o))}],["FTX",function(){const{title:e}=h("FTX"),t={id:"FTX",title:e,description:"",configFlags:{authorizationType:"oauth2-code-flow",supportModifyOrder:!0,supportPLUpdate:!0,supportDemoLiveSwitcher:!1,supportVerifyLiveAccount:!0,supportSymbolSpecificCryptoOrderTicket:!0,supportExecutions:!0,supportBalances:!0,supportBrackets:!0,supportCryptoBrackets:!0,supportStopLimitOrders:!0,supportOrdersHistory:!0,supportStopOrdersInBothDirections:!0,supportStopLimitOrdersInBothDirections:!0,supportLevel2Data:!0,supportSymbolSearch:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportRiskControls:!1,usesWSConnection:!0},logoMiniUrl:De,logoMiniBlackUrl:Oe,logoMiniWebpUrl:Ae,logoMiniBlackWebpUrl:Ie};(0,m.addBroker)(t,function(e){return async(t,o)=>{const[{accountFactory:s,FTXAuthorizationProvider:n,FTXRequestsEnvironment:a,makeVerifyLiveAccountParams:l},{BrokerApiAdapter:c},{AbortControllerManager:p},{makeCommonAccountsManagerFactory:u},{makeFetchWithServerLogger:d}]=await Promise.all([Promise.all([i.e(27232),i.e(89159),i.e(46718),i.e(17159)]).then(i.bind(i,112420)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240)),i.e(50072).then(i.bind(i,407150)),i.e(56577).then(i.bind(i,750983))]),h=new p,m=t.getLogger(),g=new a("https://ftx.com/api/"),b=(0,r.isFeatureEnabled)("enable_trading_server_logger")&&(0,r.isFeatureEnabled)("trading_request_server_logger")&&(0,r.isFeatureEnabled)("ftx_request_server_logger")?t.serverLogger():null,v=null!==b?d(b):void 0,_=u(((...[e,t,i])=>s({requestsEnvironment:g,holder:e,abortSignal:t,mapperFactory:i,ftxReferralProgram:"TradingView",customFetch:v})));return new c({host:t,abortControllerManager:h,logger:m,authorizationProvider:new n({credentialsStorage:t.credentialsStorage,logger:m,abortSignalGetter:h.getSignal,wsApiUrl:"wss://ftx.com/ws/",isFastRenewTokenEnabled:(0,r.isFeatureEnabled)("trading-fast-renew-oauth-token")}),accountsManagerFactory:_,metainfo:e,pullingIntervals:Le,makeVerifyLiveAccountParams:l,brokerTelemetry:o,useSyncMapper:(0,r.isFeatureEnabled)("modular_broker_use_sync_mapper")})}}(t))}],["FXCM",function(){const e="FXCM",{title:t}=h(e),o={id:e,title:t,description:"",configFlags:{authorizationType:(0,r.isFeatureEnabled)("fxcm_password_authorization_type")?"password":"oauth2-code-flow",supportSymbolSearch:!0,supportOrderBrackets:!0,supportStopLimitOrders:!0,supportPositionNetting:!0,supportIndividualPositionBrackets:!0,supportCloseIndividualPosition:!0,supportPartialCloseIndividualPosition:!0,supportVerifyLiveAccount:!0,supportReversePosition:!1,supportClosePosition:!0,supportUnhideSymbolSearchGroups:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportTrailingStop:(0,
r.isFeatureEnabled)("fxcm_trailing_stop_bracket")},logoMiniUrl:Fe,logoMiniWebpUrl:xe,durations:[{name:"GTC",value:"GTC",supportedOrderTypes:[3,1,4,2]},{name:"GTD",value:"GTD",hasDatePicker:!0,hasTimePicker:!0},{name:"FOK",value:"FOK",supportedOrderTypes:[2]},{name:"IOK",value:"IOK",supportedOrderTypes:[2]}],orderRules:[{id:"limitPriceDistance",severity:"warning",options:{buyDirectionPips:4,sellDirectionPips:4}},{id:"stopPriceDistance",severity:"warning",options:{buyDirectionPips:4,sellDirectionPips:4}}]};(0,m.addBroker)(o,function(e){return async(t,o)=>{const[{fxcmAccountsManagerFactory:s,FXCMSimplePasswordAuthorizationProvider:n,FXCMAuthorizationProvider:a,makeVerifyLiveAccountParams:l},{BrokerApiAdapter:c},{AbortControllerManager:p}]=await Promise.all([Promise.all([i.e(67227),i.e(6035),i.e(23534),i.e(46718),i.e(56756)]).then(i.bind(i,655253)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240))]);t.activateFXCMCFD();const u=t.getLogger(),d=(0,r.isFeatureEnabled)("fxcm_server_logger")?t.serverLogger():null,h=new p,m=(0,r.isFeatureEnabled)("broker_FXCM_dev"),g=m?Ne:Re,b={environments:g,credentialsStore:t.credentialsStorage,logger:u,abortSignalGetter:h.getSignal,isDev:m,brokerTelemetryReportSender:null==o?void 0:o.sendReport};return new c({host:t,abortControllerManager:h,makeVerifyLiveAccountParams:l,logger:u,authorizationProvider:"password"===e.configFlags.authorizationType?new n(b):new a(b),accountsManagerFactory:(t,i,r,o)=>{var n;return s({holder:t,abortSignal:i,mapperFactory:r,errorHandler:o,serverLogger:d,fxcmEnvironments:g,supportTrailingStop:null!==(n=e.configFlags.supportTrailingStop)&&void 0!==n&&n})},metainfo:e,brokerTelemetry:o,useSyncMapper:(0,r.isFeatureEnabled)("modular_broker_use_sync_mapper"),useCustomizedSpreadFormatter:!0})}}(o))}],["FXOPEN",function(){const e="FXOPEN",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,passLocalesLangInOAuth:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",symbolPrefix:"FXOPEN",logoMiniUrl:Ue,logoMiniWebpUrl:Ve,isBeta:i,isDevEnvironment:o},n=o?"https://tradingtvapi.st.soft-fx.eu/":"https://tradingtvapi1.fxopen.net/";(0,m.addBroker)(s,_(n,s))}],["FYERS",function(){const e="FYERS",{title:t}=h(e),i=(0,r.isFeatureEnabled)("FYERS_beta"),o=(0,r.isFeatureEnabled)("broker_FYERS_dev"),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,passLocalesLangInOAuth:!0},description:"",logoMiniUrl:qe,logoMiniWebpUrl:Ge,isBeta:i,isDevEnvironment:o},n=o?"https://api-t1.fyers.in/tradingview/staging/":"https://api-t1.fyers.in/tradingview/v1/";(0,m.addBroker)(s,_(n,s))}],["GBEBROKERS",function(){const e="GBEBROKERS",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,
configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",isDevEnvironment:i,isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),logoMiniUrl:We,logoMiniWebpUrl:ze},s=i?"https://mtr-gbe.match-trade.com/trading-view-api":"https://prod-gbe.match-trade.com/trading-view-api";(0,m.addBroker)(o,_(s,o))}],["GEMINI",function(){const e="GEMINI",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportMarketOrders:!1,supportCryptoExchangeOrderTicket:!0,supportBalances:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:$e,logoMiniWebpUrl:Ke,isDevEnvironment:i,symbolPrefix:"GEMINI"},s=i?"https://api.sandbox.gemini.com/v1/tradingview/":"https://api.gemini.com/v1/tradingview/";(0,m.addBroker)(o,_(s,o))}],["GLOBALPRIME",function(){const e="GLOBALPRIME",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportUnhideSymbolSearchGroups:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:He,logoMiniBlackUrl:je,logoMiniWebpUrl:Xe,logoMiniBlackWebpUrl:Qe,symbolPrefix:"GLOBALPRIME"},s=i?"https://trading.traderevolution.com/tradingview/v1":"https://trading.globalprime.com/tradingview/v1";(0,m.addBroker)(o,_(s,o))}],["IBKR",function(){const e="IBKR",{title:t}=h(e),o={id:e,title:t,description:"",configFlags:{authorizationType:"oauth",supportDemoLiveSwitcher:!1,supportOrderBrackets:!0,supportStopLimitOrders:!0,supportStopLimitOrdersInBothDirections:!0,supportPartialClosePosition:!0,supportPlaceOrderPreview:!0,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportPLUpdate:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportConfirmations:!0,positionPLInInstrumentCurrency:!0,supportCancellingBothBracketsOnly:!0,supportStopOrdersInBothDirections:!0,supportModifyDuration:!0,supportExecutions:!0,supportTradeHistoryTabInAccountManager:!0,supportSymbolSpecificCryptoOrderTicket:!0,usesWSConnection:!0,supportLevel2Data:!0,closePositionCancelsOrders:!1},durations:[{name:"Day",value:"DAY",default:!0,supportedOrderTypes:Ze},{name:"Good Till Cancel",value:"GTC",supportedOrderTypes:Ze},{name:"At The Opening",value:"OPG",supportedOrderTypes:[1,2]},{name:"Minutes",value:"PAX",supportedOrderTypes:[1]},{name:"Immediate or Cancel",value:"IOC",supportedOrderTypes:[1,2]}],logoMiniUrl:Ye,logoMiniWebpUrl:Je,importantLoginScreenMessage:T.t(null,void 0,i(145099))};(0,m.addBroker)(o,function(e){return async(t,o)=>{
const[{ibkrAccountsManagerFactory:s,IBKRAuthorizationProvider:n,IBKRRequestsEnvironment:a,makeCheckRealtimeDataParams:l,makeVerifyLiveAccountParams:c,getIBKRMaintenanceStatus:p},{BrokerApiAdapter:u},{AbortControllerManager:d},{makeFetchWithServerLogger:h}]=await Promise.all([Promise.all([i.e(61509),i.e(46718),i.e(7466),i.e(72143)]).then(i.bind(i,762586)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240)),i.e(56577).then(i.bind(i,750983))]),m=new d,g=t.getLogger(),b=(0,r.isFeatureEnabled)("broker_IBKR_dev"),v=b?"https://api.ibkr.com/alpha/api/":"https://api.ibkr.com/v1/tv/",_=b?"wss://api.ibkr.com/alpha/api/ws":"wss://api.ibkr.com/v1/tv/ws",f=new a(v),y=(0,r.isFeatureEnabled)("ibkr-demo-maintenance-url")?"https://api.ibkr.com/v1/gstat/bulletins?p=tv-demo":"https://api.ibkr.com/v1/gstat/bulletins?p=tv",S=(0,r.isFeatureEnabled)("enable_trading_server_logger")&&(0,r.isFeatureEnabled)("trading_request_server_logger")&&(0,r.isFeatureEnabled)("ibkr_request_server_logger")?t.serverLogger():null,k=null!==S?h(S):void 0,P=(0,r.isFeatureEnabled)("ibkr_disable_ws_connect_timeout"),w=new n({credentialsStorage:t.credentialsStorage,logger:g,abortSignalGetter:m.getSignal,wsApiUrl:_,isStaging:b,isFastRenewTokenEnabled:(0,r.isFeatureEnabled)("trading-fast-renew-oauth-token"),requestsEnvironment:f,serverLoggerForWs:(0,r.isFeatureEnabled)("ibkr_ws_server_logger")?S:null,isWsConnectTimeoutDisabled:P,customFetch:k,brokerTelemetryReportSender:null==o?void 0:o.sendReport}),C=(0,r.isFeatureEnabled)("ibkr_subscribe_to_order_updates_first"),T=(0,r.isFeatureEnabled)("check_ibkr_side_maintenance")?()=>p(y,k):void 0;return new u({host:t,abortControllerManager:m,logger:g,authorizationProvider:w,accountsManagerFactory:(...[e,t,i])=>s({holder:e,abortSignal:t,mapperFactory:i,requestsEnvironment:f,customFetch:k,shouldUseWsForSummary:(0,r.isFeatureEnabled)("ibkr_ws_account_summary"),shouldUseWsForLedger:(0,r.isFeatureEnabled)("ibkr_ws_account_ledger"),shouldSubscribeToOrderUpdatesBeforeSnapshot:C,isWsConnectTimeoutDisabled:P}),metainfo:e,pullingIntervals:{realtime:1e3,orders:1e3,positions:1e3,pl:1e3,executions:1e3,summaryRow:1e4,summaryTable:1e4,customPageTables:1e4,equity:6e4},makeVerifyLiveAccountParams:(...e)=>c(v,...e),makeCheckRealtimeDataParams:(...e)=>l(v,...e),getMaintenanceStatus:T,brokerTelemetry:o,shouldParallelizeProviderInitialization:(0,r.isFeatureEnabled)("ibkr_parallel_provider_initialization"),useSyncMapper:(0,r.isFeatureEnabled)("modular_broker_use_sync_mapper")})}}(o))}],["IBROKER",function(){const e="IBROKER",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportLevel2Data:!0,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:et,logoMiniWebpUrl:tt,locales:["es","it"],symbolPrefix:"IBROKER"},s=i?"https://beta.ibroker.es/tradingview/api":"https://www.ibroker.es/tradingview/api";(0,m.addBroker)(o,_(s,o))}],["ICMARKETS",function(){
const e="ICMARKETS",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isBeta:i,isDevEnvironment:o,logoMiniUrl:it,logoMiniWebpUrl:rt,symbolPrefix:"ICMARKETS"},n=o?"https://icmarketsuat.tv.ctrader.com/":"https://icmarkets.tv.ctrader.com/";(0,m.addBroker)(s,_(n,s))}],["INFOYATIRIM",nt],["INNOVESTX",function(){const e="INNOVESTX",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,supportSymbolSearch:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportRiskControls:!1,showAvgFillPriceColumnAsLastFillPrice:!0},description:"",isDevEnvironment:i,isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),logoMiniUrl:at,logoMiniWebpUrl:lt},s=i?"https://trading-uat.innovestxonline.com/api":"https://trading.innovestxonline.com/api";(0,m.addBroker)(o,_(s,o))}],["IRONBEAM",function(){const e="IRONBEAM",{title:t}=h(e);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0,supportDemoLiveSwitcher:!1},logoMiniUrl:ct,logoMiniWebpUrl:pt,cqgBrokerIdentifier:L.IRONBEAM})}],["MOCKBROKER",function(){const e=(0,r.isFeatureEnabled)("MOCKBROKER_beta"),t={id:"MOCKBROKER",title:h("MOCKBROKER").title,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportVerifyLiveAccount:!1,supportPlaceOrderPreview:!1,supportModifyOrderPreview:!1,supportTrackLatency:!0,forceLogoutAfterTooManyRequestsResponse:!0,forceLogoutAfterUnauthorizedResponse:!0,supportOrdersStreaming:!0,showAvgFillPriceColumnAsLastFillPrice:!0},description:"The Mock Broker used for internal testing only. Use only if you know what you are doing.",connectWarningMessageInfo:{message:"This is an example of how a popup with a warning can be displayed after a connection.",skippable:!1},logoMiniUrl:ut,logoMiniWebpUrl:dt,isBeta:e};(0,m.addBroker)(t,_("https://localhost:5001",t))}],["OANDA",function(){const e=ht.getValue("trading.oanda_rest_launched_in_country",window.countryCode);if(t=e,(0,r.isFeatureEnabled)("oanda_rest_api")&&_t(t))return function(e){ht.setValue("trading.oanda_rest_launched_in_country",e,{forceFlush:!0})}(e),void function(){const e="OANDA",{title:t}=h(e),o=(0,r.isFeatureEnabled)("OANDA_beta")&&(0,r.isFeatureEnabled)("oanda_rest_api"),s=(0,r.isFeatureEnabled)("broker_OANDA_dev"),n={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0,supportMargin:!0,supportAccountStateStreaming:!0},description:"",symbolPrefix:"OANDA",altBrokerId:"OANDA-REST",isBeta:o,isDevEnvironment:s,logoMiniUrl:mt,
logoMiniWebpUrl:gt,importantLoginScreenMessage:T.t(null,void 0,i(775426))},a=s?"https://trading-view-proxy-api.staging.oanda.com/":"https://trading-view-proxy-api.oanda.com/";(0,m.addBroker)(n,_(a,n))}();var t;bt()}],["OKX",function(){const e="OKX",{title:t}=h(e),i=(0,r.isFeatureEnabled)("broker_OKX_dev"),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,passLocaleInOAuth:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportRiskControls:!1},description:"",logoMiniUrl:ft,logoMiniWebpUrl:yt,symbolPrefix:"OKX",isDevEnvironment:i,connectIssueSolutionId:43000674832},s=i?"https://tvpap.okx.com/api/v5/tp/":"https://www.okx.com/api/v5/tp/";(0,m.addBroker)(o,_(s,o))}],["OPTIMUS",function(){const e="OPTIMUS",{title:t}=h(e);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0},logoMiniUrl:St,logoMiniWebpUrl:kt,cqgBrokerIdentifier:L.OPTIMUS})}],["ORAMA",function(){const e="ORAMA",{title:t}=h(e),i=(0,r.isFeatureEnabled)("ORAMA_beta"),o=(0,r.isFeatureEnabled)("broker_ORAMA_dev"),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportUnhideSymbolSearchGroups:!1,supportDisplayBrokerNameInSymbolSearch:!1,supportRealtimeDataCheck:!0},description:"",logoMiniUrl:Pt,logoMiniWebpUrl:wt,isBeta:i,loginPlaceholder:"CPF",connectIssueSolutionId:43000680706},n=o?"https://zrh3u5m41k.execute-api.sa-east-1.amazonaws.com/sim":"https://zrh3u5m41k.execute-api.sa-east-1.amazonaws.com/v1";(0,m.addBroker)(s,_(n,s))}],["OSMANLI",function(){const e="OSMANLI",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`${e}_beta`),s=(0,r.isFeatureEnabled)(`broker_${e}_dev`),n={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,passLocalesLangInOAuth:!0},description:"",logoMiniUrl:Ct,logoMiniWebpUrl:Tt,isBeta:o,isDevEnvironment:s,realtimeDataPermissionsToggleConfig:{enableRealtimeDataPermissionsTitleText:T.t(null,void 0,i(635970)),disableRealtimeDataPermissionsTitleText:T.t(null,void 0,i(153016)),enableRealtimeDataPermissionsToggleText:T.t(null,void 0,i(628516)),disableRealtimeDataPermissionsToggleText:T.t(null,void 0,i(491717)),realtimeDataPermissionsToggleText:T.t(null,void 0,i(822439)),solutionId:43000687052}},a=s?"https://tbpilot.matriksdata.com/TradingView/TVRestApi/trade/":"https://tvapi3.osmanlimenkul.com.tr/TradingView/TVRestApi/trade/";(0,m.addBroker)(n,_(a,n))}],["PAYTM",function(){const e="PAYTM",{title:t}=h(e),i=(0,r.isFeatureEnabled)("PAYTM_beta"),o=(0,r.isFeatureEnabled)("broker_PAYTM_dev"),s={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:Ft,logoMiniWebpUrl:xt,isBeta:i,isDevEnvironment:o
},n=o?"https://developer-stg.paytmmoney.com/tradingview/api/v2/":"https://developer.paytmmoney.com/tradingview/api/v2/";(0,m.addBroker)(s,_(n,s))}],["PEPPERSTONE",Vt],["PHEMEX",function(){const e="PHEMEX",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),isDevEnvironment:i,logoMiniUrl:qt,logoMiniWebpUrl:Gt,symbolPrefix:"PHEMEX"},s=i?"https://testnet-api.phemex.com/mapi-tradingview/":"https://api.phemex.com/mapi-tradingview/";(0,m.addBroker)(o,_(s,o))}],["PHILLIPNOVA",function(){const e="PHILLIPNOVA",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:Wt,logoMiniWebpUrl:zt,isBeta:i,symbolPrefix:"PHILLIPNOVA"},n=o?"https://nova-api.tdt.asia/api/":"https://novatvapi.phillipmobile.com/api/";(0,m.addBroker)(s,_(n,s))}],["ROBOMARKETS",Ht],["SAXOBANK",function(){const e="SAXOBANK",{title:t}=h(e),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportDemoLiveSwitcher:!1,supportSymbolSearch:!0,supportModifyDuration:!0,requiresTermsOfServiceConfirmation:!0,passLocalesLangInOAuth:!0,supportVerifyLiveAccount:!0,supportReversePosition:!1,supportDisplayBrokerNameInSymbolSearch:!1,supportCurrencyInOrderPreview:!1},customTermsOfServiceText:T.t(null,void 0,i(897829)),customNotificationFields:["duration.datetime","duration.type"],description:"",logoMiniUrl:jt,logoMiniWebpUrl:Xt,customPositionColumnTitles:[{unrealizedPl:T.t(null,void 0,i(758705))}],isDevEnvironment:o,symbolPrefix:"SAXO"},n=o?"https://appsvc-nl2-simtest-tradingviewproxy.azurewebsites.net/api":"https://api.tradingview.saxo/api";(0,m.addBroker)(s,_(n,s))}],["SKILLING",function(){const e="SKILLING",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:Qt,logoMiniWebpUrl:Yt,isBeta:i,isDevEnvironment:o,symbolPrefix:"SKILLING"},n=o?"https://devtest.skilling.com/g/tv/":"https://skilling.com/g/tv/";(0,m.addBroker)(s,_(n,s))}],["SPREADEX",function(){const e="SPREADEX",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,
supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:Jt,logoMiniWebpUrl:Zt,isBeta:i,symbolPrefix:"SPREADEX"},n=o?"https://tradingview-api.test.spreadex.com":"https://tradingview-api.spreadex.com";(0,m.addBroker)(s,_(n,s))}],["STONEX",function(){const e="STONEX",{title:t}=h(e);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0,supportDemoLiveSwitcher:!1},logoMiniUrl:ei,logoMiniWebpUrl:ti,cqgBrokerIdentifier:L.STONEX})}],["TICKMILL",function(){const e="TICKMILL",{title:t}=h(e);I({id:e,title:t,configFlags:{...A,supportVerifyLiveAccount:!0,supportDemoLiveSwitcher:!1},logoMiniUrl:ii,logoMiniWebpUrl:ri,cqgBrokerIdentifier:L.TICKMILL})}],["TIGER",function(){const e="TIGER",{title:t}=h(e),i=(0,r.isFeatureEnabled)("broker_TIGER_dev"),o={id:e,title:t,configFlags:{authorizationType:"oauth2-implicit-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportVerifyLiveAccount:!0},description:"",logoMiniUrl:oi,logoMiniWebpUrl:si,isDevEnvironment:i},s=i?"https://openapi-sandbox.tigerfintech.com/api":"https://openapi.itiger.com/api";(0,m.addBroker)(o,_(s,o))}],["TIMEX",function(){const e="TIMEX",{title:t}=h(e),o=(0,r.isFeatureEnabled)("broker_TIMEX_dev"),s={id:e,title:t,configFlags:{authorizationType:"password",supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportSymbolSearch:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:ni,logoMiniWebpUrl:ai,loginPlaceholder:T.t(null,void 0,i(370575)),passwordPlaceholder:T.t(null,void 0,i(484426)),connectIssueSolutionId:43000629811,symbolPrefix:"TIMEX"},n=o?"https://plasma-relay-backend-dev.timex.io/tv":"https://plasma-relay-backend.timex.io/tv";(0,m.addBroker)(s,_(n,s))}],["TINKOFF",function(){const e="TINKOFF",{title:t}=h(e),r={id:e,title:t,description:"",configFlags:{authorizationType:"token",positionPLInInstrumentCurrency:!0,supportModifyOrder:!1,supportPLUpdate:!0,supportDemoLiveSwitcher:!0,supportStopOrders:!1,supportVerifyLiveAccount:!1},logoMiniUrl:li,logoMiniWebpUrl:ci};(0,m.addBroker)(r,function(e){return async(t,r)=>{const[{TokenAuthorizationProvider:o},{accountFactory:s},{BrokerApiAdapter:n},{AbortControllerManager:a},{makeCommonAccountsManagerFactory:l}]=await Promise.all([i.e(51723).then(i.bind(i,33471)),i.e(51723).then(i.bind(i,136949)),i.e(50072).then(i.bind(i,476882)),i.e(50072).then(i.bind(i,592240)),i.e(50072).then(i.bind(i,407150))]),c=new a,p=t.getLogger();return new n({host:t,logger:p,abortControllerManager:c,authorizationProvider:new o(t.credentialsStorage,p,c.getSignal),accountsManagerFactory:l(s),metainfo:e,pullingIntervals:{realtime:5e3,orders:5e3,positions:5e3,pl:5e3,executions:5e3,summaryRow:1e4,summaryTable:1e4,equity:6e4}})}}(r))}],["TRADESTATION",function(){const e="TRADESTATION",{title:t}=h(e),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportDemoLiveSwitcher:!0,supportLevel2Data:!0,supportSymbolSearch:!0,supportDOM:!0,supportRealtimeDataCheck:!0,showIPAddressRestrictionMessage:!1,supportPlaceOrderPreview:!0,
supportOrdersHistory:!0,supportStopOrders:!0,supportStopLimitOrders:!0,supportOrderBrackets:!0,supportPositionBrackets:!0,supportPLUpdate:!0,supportClosePosition:!0,supportNativeReversePosition:!0,closePositionCancelsOrders:!0,supportOnlyPairPositionBrackets:!0,supportCryptoBrackets:!0,supportExecutions:!0,supportStopLimitOrdersInBothDirections:!0,supportPlacingOrderCancelling:!0},description:"",durations:[{name:"DAY",value:"DAY",default:!0,supportedOrderTypes:di},{name:"DAY+",value:"DYP",supportedOrderTypes:di},{name:"GTC",value:"GTC",supportedOrderTypes:di},{name:"GTC+",value:"GCP",supportedOrderTypes:di},{name:"GTD",value:"GTD",hasDatePicker:!0,hasTimePicker:!1,supportedOrderTypes:di},{name:"GTD+",value:"GDP",hasDatePicker:!0,hasTimePicker:!1,supportedOrderTypes:di},{name:"IOC",value:"IOC",supportedOrderTypes:di},{name:"FOK",value:"FOK",supportedOrderTypes:di},{name:"OPG",value:"OPG",supportedOrderTypes:[2]},{name:"CLO",value:"CLO",supportedOrderTypes:[2]},{name:"1 MIN",value:"1",supportedOrderTypes:di},{name:"3 MIN",value:"3",supportedOrderTypes:di},{name:"5 MIN",value:"5",supportedOrderTypes:di}],logoMiniUrl:pi,logoMiniWebpUrl:ui};(0,m.addBroker)(o,function(e){return async(t,o)=>{const[{Broker:s},{makeFetchWithServerLogger:n}]=await Promise.all([Promise.all([i.e(83432),i.e(46718),i.e(74195),i.e(85193)]).then(i.bind(i,613209)),i.e(56577).then(i.bind(i,750983))]),a=(0,r.isFeatureEnabled)("enable_trading_server_logger")&&(0,r.isFeatureEnabled)("trading_request_server_logger")&&(0,r.isFeatureEnabled)("tradestation_request_server_logger")?t.serverLogger():null,l=null!==a?n(a):void 0;return new s({host:t,metainfo:e,isDev:(0,r.isFeatureEnabled)("broker_TRADESTATION_dev"),isFastRenewTokenEnabled:(0,r.isFeatureEnabled)("trading-fast-renew-oauth-token"),useSyncMapper:(0,r.isFeatureEnabled)("tradestation_use_sync_mapper"),isCountryBlockEnabled:!(0,r.isFeatureEnabled)("disable_tradestation_country_block"),isAccountDataStreamingEnabled:(0,r.isFeatureEnabled)("tradestation_account_data_streaming"),prohibitedCountryCodes:["RU"],customFetch:l,brokerTelemetryReportSender:null==o?void 0:o.sendReport})}}(o))}],["TRADIER",gi],["TRADOVATE",function(){const e=(0,r.isFeatureEnabled)("rest_logout_on_429"),t="TRADOVATE",{title:i}=h(t),o=(0,r.isFeatureEnabled)(`broker_${t}_dev`),s={id:t,title:i,configFlags:{authorizationType:"password",supportLevel2Data:!1,supportDemoLiveSwitcher:!0,supportSymbolSearch:!0,supportRealtimeDataCheck:!0,supportAddBracketsToExistingOrder:!1,forceLogoutAfterUnauthorizedResponse:!0,forceLogoutAfterTooManyRequestsResponse:e},concurrentSessionsAllowance:"disallowed",description:"",logoMiniUrl:bi,logoMiniWebpUrl:vi};let n="https://tv-live.tradovateapi.com",a="https://tv-demo.tradovateapi.com";o&&(n="https://tv-live-d.tradovateapi.com",a="https://tv-demo-d.tradovateapi.com"),(0,m.addBroker)(s,_(n,s,a))}],["VANTAGE",function(){const e="VANTAGE",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`${e}_beta`),o=(0,r.isFeatureEnabled)(`broker_${e}_dev`),s={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",
supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1,supportUnhideSymbolSearchGroups:!0},description:"",logoMiniUrl:_i,logoMiniWebpUrl:fi,isBeta:i,isDevEnvironment:o,symbolPrefix:"VANTAGE"},n=o?"https://staging-tradingview.risk-vantagefx.com/api/":"https://tradingview.risk-vantagefx.com/api/";(0,m.addBroker)(s,_(n,s))}],["VELOCITY",ki],["WEBULL",function(){const e="WEBULL",t=(0,r.isFeatureEnabled)(`broker_${e}_dev`),i=(0,r.isFeatureEnabled)(`${e}_beta`),o={id:e,title:h(e).title,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!0,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",logoMiniUrl:Pi,logoMiniWebpUrl:wi,isDevEnvironment:t,isBeta:i},s=t?"https://tradingview-gw.pre.webullbroker.com/":"https://usapi.webullfinance.com/";(0,m.addBroker)(o,_(s,o))}],["WHITEBIT",function(){const e="WHITEBIT",{title:t}=h(e),i=(0,r.isFeatureEnabled)(`broker_${e}_dev`),o={id:e,title:t,configFlags:{authorizationType:"oauth2-code-flow",supportSymbolSearch:!0,supportDemoLiveSwitcher:!1,supportRealtimeDataCheck:!1,supportVerifyLiveAccount:!0,supportDisplayBrokerNameInSymbolSearch:!1},description:"",isBeta:(0,r.isFeatureEnabled)(`${e}_beta`),isDevEnvironment:i,logoMiniUrl:Ci,logoMiniWebpUrl:Ti,symbolPrefix:"WHITEBIT"},s=i?"https://st.imoney24.technology/api/tv/":"https://whitebit.com/api/tv/";(0,m.addBroker)(o,_(s,o))}],["WHSELFINVEST",function(){const e="WHSELFINVEST",{title:t}=h(e),o=(0,r.isFeatureEnabled)("broker_WHSELFINVEST_dev")?te:void 0;(0,m.addBroker)({id:e,title:t,telemetryId:"FOREXCOM",configFlags:{authorizationType:"password",supportClosePosition:!0,supportPLUpdate:!0,supportOrderBrackets:!0,supportPositionBrackets:!0,supportMarketBrackets:!1,supportSymbolSearch:!0,supportPositionNetting:!0,showQuantityInsteadOfAmount:!0,supportDemoLiveSwitcher:!1,supportMargin:!0,supportPartialCloseIndividualPosition:!0,supportPartialClosePosition:!0},customNotificationFields:["duration.datetime","duration.type"],description:"",durations:[{name:T.t(null,void 0,i(652495)),value:"GTC"},{name:T.t(null,void 0,i(902643)),value:"GTD",hasDatePicker:!0,hasTimePicker:!0},{name:T.t(null,{context:"good-for-day"},i(487794)),value:"GFD"}],logoMiniUrl:Ei,logoMiniWebpUrl:Mi},ie({id:e,title:t,symbolSearchId:"WHSELFINVEST"},o))}]]));const Ai=[];function Ii(){if(0!==Ai.length)return Ai;Ai.push({id:"Paper",title:h("Paper").title});for(const e of Oi.keys())(0,r.isFeatureEnabled)(`broker_${e}`)&&!(0,a.isBrokerHidden)(e)&&Ai.push({id:e,title:h(e).title});return Ai}async function Li(e){if(function(e){return Oi.has(e)}(e)&&(0,r.isFeatureEnabled)(`broker_${e}`)&&!(0,a.isBrokerHidden)(e))try{Di&&await async function(e){const t=await(0,l.getBrokerPlan)(e).catch((()=>{}));void 0!==t&&t.logo_square&&(0,c.addBrokerLogos)(t.slug_name,{logoSquare:t.logo_square})}(e);const t=Oi.get(e);null==t||t()}catch(e){Bi.logError((0,n.getErrorMessage)(e))}}async function Fi(){try{
Di&&await async function(){const e=await(0,l.getBrokersPlans)().catch((()=>[]));for(const t of e)t.logo_square&&(0,c.addBrokerLogos)(t.slug_name,{logoSquare:t.logo_square})}(),Lt();for(const[e,t]of Oi)(0,r.isFeatureEnabled)(`broker_${e}`)&&!(0,a.isBrokerHidden)(e)&&t()}catch(e){Bi.logError((0,n.getErrorMessage)(e))}}},820878:(e,t,i)=>{"use strict";i.d(t,{applyDefaultsToConfigFlags:()=>o,defaultConfigFlags:()=>r});const r={isSuspended:!1,supportDemoLiveSwitcher:!0,supportModifyOrderPrice:!0,supportEditAmount:!0,supportModifyBrackets:!0,supportMarketBrackets:!0,supportMarketOrders:!0,supportStopOrders:!0,supportLimitOrders:!0,supportLeverageButton:!0,supportStopLimitOrders:!1,supportPositions:!0,supportDOM:!0,supportModifyTrailingStop:!0,supportAddBracketsToExistingOrder:!0,supportVerifyLiveAccount:!0,supportReversePosition:!0,showNotificationsLog:!0,supportPLUpdate:!0,supportTwoFactorAuthorization:!1,supportDisplayBrokerNameInSymbolSearch:!0,supportCurrencyInOrderPreview:!0,supportRiskControls:!0,supportCreateAccount:!1,supportDeleteAccount:!1,checkBracketsAfterOrderModification:!0,supportStrictCheckingLimitOrderPrice:!1};function o(e){return Object.assign({},r,e)}},863626:(e,t,i)=>{"use strict";i.d(t,{DialogVisibility:()=>s});var r=i(947488),o=i(218286);class s{constructor(){this._value$=new r.BehaviorSubject({isVisible:!1}),this.value$=this._value$.asObservable().pipe((0,o.distinctUntilChanged)(((e,t)=>e.isVisible===t.isVisible&&e.isFullScreen===t.isFullScreen)))}getValue(){return this._value$.getValue()}setValue(e){this._value$.next(e)}}},824851:(e,t,i)=>{"use strict";i.d(t,{brokerSideMaintenance:()=>s});var r=i(444372),o=i(779923);const s={show(e){const t=r.t(null,void 0,i(11167)).replace("{brokerName}",e);(0,o.showWarning)({title:r.t(null,void 0,i(551361)).replace("{brokerName}",e),text:t})}}},67003:(e,t,i)=>{"use strict";i.d(t,{DisabledConfirmations:()=>u});var r=i(62802),o=i.n(r),s=i(855385),n=i.n(s),a=i(866193);const l=/[0-9]+([\.,][0-9]+)*([\.,][0-9]+)?|\.[0-9]+/gm,c=/[A-Z]+/gm,p=a.settingsKeys.DISABLED_CONFIRMATIONS;class u{add(e){const t=this._getAll(),i=this._makeMessageHash(e);t.add(i),o().setJSON(p,Array.from(t))}has(e){const t=this._getAll(),i=this._makeMessageHash(e);return t.has(i)}clear(){o().remove(p)}_getAll(){return new Set(o().getJSON(p))}_makeMessageHash(e){const t=e.replace(l,"").replace(c,"");return i=n()(t),btoa(String.fromCharCode.apply(null,new Uint8Array(i)));var i}}},557798:(e,t,i)=>{"use strict";function r(e){return"string"==typeof e?e:Array.isArray(e)?e.join(""):void 0}i.d(t,{makeConfirmation:()=>r})},460670:(e,t,i)=>{"use strict";i.d(t,{showConfirmDialog:()=>a});var r=i(444372),o=i(557798),s=i(67003),n=i(266325);async function a(e){const{title:t,content:a,mainButtonText:l,cancelButtonText:c,showDisableConfirmationsCheckbox:p,onOpen:u,onClose:d,abortSignal:h}=e,m=new s.DisabledConfirmations,g=(0,o.makeConfirmation)(a);if(p&&void 0!==g&&m.has(g))return!0
;const{ConfirmDialogRenderer:b}=await Promise.all([i.e(22666),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(92108),i.e(66639),i.e(88194),i.e(93502),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(26855),i.e(43610),i.e(96899),i.e(24215),i.e(67118),i.e(82601),i.e(745),i.e(45553),i.e(3566)]).then(i.bind(i,59886)),v=new b(m),_={title:t,message:a,closeButton:null!=c?c:r.t(null,void 0,i(606255)),confirmButton:null!=l?l:r.t(null,void 0,i(879831)),showDisableConfirmationsCheckbox:p,onOpen:u,onClose:d,abortSignal:h};try{return(await v.open(_)).status}catch(e){if((0,n.isAbortError)(e))return!1;throw e}}},321873:(e,t,i)=>{"use strict";i.d(t,{showSimpleConfirmDialog:()=>s});var r=i(266325),o=i(67003);async function s(e){const{showDisableConfirmationsCheckbox:t,text:s,onConfirm:n,onClose:a,onCancel:l,abortSignal:c}=e,p=new o.DisabledConfirmations;if(t&&p.has(s))return Promise.resolve(!0);if(null==c?void 0:c.aborted)return Promise.resolve(!1);const[{showSimpleDialog:u},{SimpleConfirmDialog:d}]=await Promise.all([Promise.all([i.e(22666),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(92108),i.e(66639),i.e(88194),i.e(93502),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(26855),i.e(43610),i.e(96899),i.e(24215),i.e(67118),i.e(82601),i.e(745),i.e(45553),i.e(3566)]).then(i.bind(i,32386)),Promise.all([i.e(22666),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(92108),i.e(66639),i.e(88194),i.e(93502),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(26855),i.e(43610),i.e(96899),i.e(24215),i.e(67118),i.e(82601),i.e(745),i.e(45553),i.e(3566)]).then(i.bind(i,594821))]);return new Promise(((t,i)=>{if(null==c?void 0:c.aborted)return void i((0,r.createAbortError)());const o=u({...e,disabledConfirmations:p,onConfirm:e=>{t(!0),void 0!==n&&n(),e.dialogClose()},onClose:()=>{t(!1),void 0!==a&&a()},onCancel:e=>{t(!1),void 0!==l&&l(e),e.dialogClose()}},d);null==c||c.addEventListener("abort",(()=>{o(),i((0,r.createAbortError)())}),{once:!0})}))}},627181:(e,t,i)=>{"use strict";i.d(t,{ConfirmBracketsCancelDialog:()=>s});var r=i(444372),o=i(321873);const s={get(){return this},open:(e,t)=>(0,o.showSimpleConfirmDialog)({title:r.t(null,void 0,i(232668)),text:r.t(null,void 0,i(289302)).replace("{orderId}",""!==e?e+" ":""),mainButtonIntent:"primary",abortSignal:t}),multiple:(e,t)=>(0,o.showSimpleConfirmDialog)({title:r.t(null,void 0,i(232668)),text:r.t(null,void 0,i(915610)).replace("{orderId}",""!==e?e+" ":""),mainButtonIntent:"primary",abortSignal:t})}},158432:(e,t,i)=>{"use strict";i.d(t,{ConfirmOrderCancelDialog:()=>s});i(586463);var r=i(444372),o=i(321873);const s={get(){return this},open:(e,t)=>(0,o.showSimpleConfirmDialog)({title:r.t(null,void 0,i(709498)),text:r.t(null,void 0,i(438540)).replace("{orderId}",e),mainButtonIntent:"primary",abortSignal:t}),multiple(e,t,s,n){let a=e;if(void 0!==t){a=`${a} ${1===t?r.t(null,void 0,i(864351)):r.t(null,void 0,i(807889))}`}return(0,o.showSimpleConfirmDialog)({title:r.t(null,void 0,i(709498)),text:r.t(null,void 0,i(109886)).replace("{qty}",String(s)).replace("{side}",a),
mainButtonIntent:"primary",abortSignal:n})}}},5488:(e,t,i)=>{"use strict";i.d(t,{maintenance:()=>s});var r=i(444372),o=i(779923);const s={show(e){(0,o.showWarning)({title:r.t(null,void 0,i(933710)).replace("{name}",e),text:r.t(null,void 0,i(453857)).replace("{name}",e)})}}},941012:(e,t,i)=>{"use strict";i.d(t,{reversePositionDialog:()=>s});var r=i(444372),o=i(321873);async function s(e){const{positionId:t,showErrorNotification:s,handler:n,closePositionCancelsOrders:a,abortSignal:l}=e;if(!await(0,o.showSimpleConfirmDialog)({title:r.t(null,void 0,i(172361)).replace("{positionId}",t),text:r.t(null,void 0,i(492698)).replace("{positionId}",t)+(a?" "+r.t(null,void 0,i(893827)):""),mainButtonText:r.t(null,void 0,i(920848)),mainButtonIntent:"primary",cancelButtonText:r.t(null,void 0,i(620036)),showBackdrop:!0,abortSignal:l}))return!1;try{return await n()}catch(e){return s(r.t(null,void 0,i(945593)),function(e){let t="";null!==e&&"object"==typeof e&&e.message?t=e.message:"string"==typeof e&&(t=e);return t}(e)),!1}}},59221:(e,t,i)=>{"use strict";i.d(t,{EncryptedWebStorage:()=>a});var r=i(201089),o=i(261926),s=i(17980);const n=(0,r.getLogger)("Trading.EncryptedWebStorage");class a{constructor({prefix:e,storageName:t,storage:i,cryptographer:r}){this._transientStorage={},this._handleStorageStateChange=e=>{const{key:t,storageArea:i}=e;i===this._persistentStorage&&this._storageName===t&&this._decryptStorage()},this._storageName=t,this._prefix=null==e?void 0:e.toLowerCase(),this._persistentStorage=i,this._cryptographer=r,this._decryptStorage=(0,o.sequentialize)(this._decryptStorage),window.addEventListener("storage",this._handleStorageStateChange)}async setItem(e,t){const i=this._addPrefix(e);this._transientStorage[i]=JSON.stringify(t);try{await this._encryptStorageAndSave()}catch(e){n.logError(`Unable to save value using key ${i}: ${(0,s.getLoggerMessage)(e)}`)}}getItem(e,t=null){const i=this._transientStorage[this._addPrefix(e)];if(void 0===i)return t;if("string"!=typeof i)return i;try{return JSON.parse(i)}catch(e){return i}}async removeItem(e){delete this._transientStorage[this._addPrefix(e)],await this._encryptStorageAndSave()}destroy(){window.removeEventListener("storage",this._handleStorageStateChange)}static async create(e,t,i,r){const o=new a({prefix:e,storageName:t,storage:i,cryptographer:r});return await o._decryptStorage(),o}_addPrefix(e){return void 0!==this._prefix?`${this._prefix}.${e}`:e}async _decryptStorage(){const e=this._persistentStorage.getItem(this._storageName);if(null===e)return void(this._transientStorage={});const t=await this._cryptographer.decrypt(e);if(null===t)return this._persistentStorage.removeItem(this._storageName),void(this._transientStorage={});try{this._transientStorage=JSON.parse(t)}catch(e){this._transientStorage={}}}async _encryptStorageAndSave(){const e=await this._cryptographer.encrypt(JSON.stringify(this._transientStorage));this._persistentStorage.setItem(this._storageName,e)}}},485501:(e,t,i)=>{"use strict";var r,o;function s(e){return(null==e?void 0:e.type)===o.PlaceOrder}i.d(t,{
PlaceOrEditContextStatus:()=>r,PlaceOrEditContextType:()=>o,isContextPlaceOrderContext:()=>s}),function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Error=2]="Error"}(r||(r={})),function(e){e[e.PlaceOrder=0]="PlaceOrder",e[e.EditOrder=1]="EditOrder",e[e.EditPosition=2]="EditPosition",e[e.EditIndividualPosition=3]="EditIndividualPosition"}(o||(o={}))},892899:(e,t,i)=>{"use strict";i.d(t,{RememberCredentials:()=>s});var r=i(62802),o=i.n(r);class s{constructor(e,t){this._settingsKey=`trading.${e}.rememberCredentials`,this._trackEvent=t;const i=o().getBool(this._settingsKey);void 0!==i&&(localStorage.setItem(this._settingsKey,JSON.stringify(i)),o().remove(this._settingsKey))}value(){const e=localStorage.getItem(this._settingsKey);return null===e||Boolean(JSON.parse(e))}setValue(e){var t;null===(t=this._trackEvent)||void 0===t||t.call(this,"Don't remember me",String(!e)),localStorage.setItem(this._settingsKey,JSON.stringify(e))}}},779514:(e,t,i)=>{"use strict";i.d(t,{showTradingPanelPopup:()=>o});var r=i(439016);async function o(){(await(0,r.waitTradingService)()).tradingPanelPopup.show()}},996348:(e,t,i)=>{"use strict";i.d(t,{makeUserSpecificCryptographer:()=>o});var r=i(139195);function o(){return{encrypt:r.userSpecificEncrypt,decrypt:r.userSpecificDecrypt}}},895537:(e,t,i)=>{"use strict";i.d(t,{validateBalance:()=>s});var r=i(192685);function o(e,t){return null!==e&&null!==t&&e>t?{res:!0,msg:r.qtyErrors.balance}:{res:!1}}function s(e){const{side:t,baseValue:i,baseBalanceValue:r,quoteValue:s,quoteBalanceValue:n}=e;return-1===t?o(i,r):o(s,n)}},253165:(e,t,i)=>{"use strict";i.d(t,{checkBracketError:()=>d,makeBracketPercentPriceRuleChecker:()=>p});var r=i(444372),o=i(960521),s=i.n(o),n=i(199356),a=i(18808),l=i(17980);const c={orderStopLoss:{long:r.t(null,void 0,i(995717)),short:r.t(null,void 0,i(685017))},orderTakeProfit:{long:r.t(null,void 0,i(429871)),short:r.t(null,void 0,i(37475))},positionStopLoss:{long:e=>r.t(null,{replace:{value:e}},i(216502)),short:e=>r.t(null,{replace:{value:e}},i(874337))},positionTakeProfit:{long:e=>r.t(null,{replace:{value:e}},i(829997)),short:e=>r.t(null,{replace:{value:e}},i(751300))}};function p(e,t){let o,a,c;const p=(e,t,i,r)=>{const o=new(s())(t),n=o.mul(e).div(100);return o.minus(n.mul(i).mul(r)).toNumber()};return(s,u,d,h,m,g,b,v)=>{const _=-1===d?-1:1,f=h===n.BracketType.TakeProfit?-1:1,y=p(e,u,_,f),S=p(t,u,_,f),k=(0,l.roundToStepByPriceTypeAndSide)(y,g,m,d),P=(0,l.roundToStepByPriceTypeAndSide)(S,g,m,d);let w=Math.min(k,P),C=Math.max(k,P);b&&(void 0!==o&&void 0!==a&&c?(w=o,C=a):void 0===o&&void 0===a&&(w=Math.min(w,s),C=Math.max(C,s),o=w,a=C,c=v));if(!(s>=w&&s<=C))return{res:!0,msg:r.t(null,void 0,i(783100)).replace("{min}",w.toString()).replace("{max}",C.toString())};return(_*f==-1?k>=u&&P>=u:k<=u&&P<=u)?{res:!1}:{res:!0,msg:r.t(null,void 0,i(298353))}}}function u(e){const{side:t,price:i,priceType:r,priceStep:o,parentPrice:s,bracketType:n,isStatusEditing:a,isEnabled:l,bracketPercentPriceRuleCheckers:c}=e;for(const e of c){const c=e(i,s,t,n,r,o,a,l);if(c.res)return c}
return{res:!1}}function d(e){const{quotes:t,side:o,price:s,pips:l,priceType:p,priceStep:d,parentPrice:h,parentType:m,bracketType:g,isStatusEditing:b,isEnabled:v,bracketPercentPriceRuleCheckers:_,priceFormatter:f,isRoundToPriceStep:y}=e;if(null===s||null===l)return{res:!0,msg:r.t(null,void 0,i(900205))};let S={res:!1};return S=2===m?function(e){const{quotes:t,side:o,price:s,priceType:l,priceStep:p,parentPrice:d,bracketType:h,isStatusEditing:m,isEnabled:g,bracketPercentPriceRuleCheckers:b}=e;let v={res:!1};b.length>0&&(v=u({side:o,price:s,priceType:l,priceStep:p,parentPrice:d,bracketType:h,isStatusEditing:m,isEnabled:g,bracketPercentPriceRuleCheckers:b}));const _=(h===n.BracketType.TakeProfit?-1:1)*o,f=-1===o?(0,a.getAsk)(t):(0,a.getBid)(t);if(f&&Math.sign(s-f)===_){const e=h===n.BracketType.TakeProfit?c.positionTakeProfit:c.positionStopLoss,t=-1===o?r.t(null,void 0,i(26338)):r.t(null,void 0,i(5595));v={res:!0,msg:-1===o?e.short(t):e.long(t)}}return v}({quotes:t,side:o,price:s,priceType:p,priceStep:d,parentPrice:h,bracketType:g,isStatusEditing:b,isEnabled:v,bracketPercentPriceRuleCheckers:_}):function(e){const{side:t,pips:i,price:r,priceType:o,priceStep:s,parentPrice:a,bracketType:l,isStatusEditing:p,isEnabled:d,bracketPercentPriceRuleCheckers:h}=e;let m={res:!1};if(h.length>0&&(m=u({side:t,price:r,priceType:o,priceStep:s,parentPrice:a,bracketType:l,isStatusEditing:p,isEnabled:d,bracketPercentPriceRuleCheckers:h})),i<=0||r<=0){const e=l===n.BracketType.TakeProfit?c.orderTakeProfit:c.orderStopLoss;m={res:!0,msg:1===t?e.long:e.short}}return m}({side:o,pips:l,price:s,priceType:p,priceStep:d,parentPrice:h,bracketType:g,isStatusEditing:b,isEnabled:v,bracketPercentPriceRuleCheckers:_}),!S.res&&y&&(S=function(e,t,o){return(0,a.isMintickMultiple)(e,t)?{res:!1}:{res:!0,msg:r.t(null,void 0,i(753596)).format({minTick:o.format(t)})}}(s,d,f)),S}},884448:(e,t,i)=>{"use strict";i.d(t,{validatePrice:()=>c});var r=i(444372),o=i(960521),s=i.n(o),n=i(18808);const a=r.t(null,void 0,i(134986));function l(e,t){return s()(e).minus(t).abs().gt(s()(e).div(2))}function c(e){const{price:t,askOrBid:o,orderType:c,side:p,isStopPrice:u,isForex:d,formatter:h,supportStopOrdersInBothDirections:m,supportStopLimitOrdersInBothDirections:g,supportStrictCheckingLimitOrderPrice:b,step:v,roundedToStep:_}=e;if((!d||_)&&!1===(0,n.isMintickMultiple)(t,v))return{res:!0,severity:"error",msg:r.t(null,void 0,i(130927)).format({minTick:h.format(v)})};const f=t<0||s()(o).mul(100).lt(t)||function(e){const{price:t,askOrBid:i,orderType:r,side:o,isStopPrice:s,supportStopOrdersInBothDirections:n,supportStopLimitOrdersInBothDirections:a,supportStrictCheckingLimitOrderPrice:c}=e;return 1===r?1===o?t>i&&(l(i,t)||c):t<i&&(l(i,t)||c):!!(3===r&&!n||4===r&&s&&!a)&&(1===o?t<i:t>i)}({price:t,askOrBid:o,orderType:c,side:p,isStopPrice:u,supportStopOrdersInBothDirections:m,supportStopLimitOrdersInBothDirections:g,supportStrictCheckingLimitOrderPrice:b});return f?{res:!0,severity:"error",msg:a}:{res:!1}}},926884:(e,t,i)=>{"use strict";i.d(t,{extractLimitValidationRules:()=>m,
extractStopLossValidationRules:()=>d,extractStopValidationRules:()=>h,extractTakeProfitValidationRules:()=>u,isLimitPercentValidationRule:()=>l,isStopLimitPercentValidationRule:()=>a,isStopPercentValidationRule:()=>c});const r=["tpPercent"],o=["slPercent"],s=["stopPercent"],n=["limitPercent"];function a(e){return l(e)||c(e)}function l(e){return n.includes(e.id)}function c(e){return s.includes(e.id)}function p(e,t,i){var r;return null===(r=e.getValidationRules(t))||void 0===r?void 0:r.filter((e=>i.includes(e.id)))}function u(e,t){return p(e,t,r)}function d(e,t){return p(e,t,o)}function h(e,t){return p(e,t,s)}function m(e,t){return p(e,t,n)}},24490:(e,t,i)=>{"use strict";i.d(t,{QuantityFormatter:()=>o});var r=i(69737);class o extends class{constructor(e){this.format=e.format,this.formatStep=e.formatStep,this.parse=e.parse,this.parseStep=e.parseStep}}{constructor(e){super(void 0===e?r.defaultQuantityFormatter:(0,r.quantityFormatter)({decimalPlaces:e}))}}},214931:(e,t,i)=>{"use strict";i.d(t,{isSymbolSearchResult:()=>p,searchSymbols:()=>u,searchSymbolsPaginated:()=>d});var r=i(650151),o=i(66974),s=i(175203),n=i(973110),a=i(17980),l=i(128563),c=i(120780);function p(e){return e.hasOwnProperty("exchange")}async function u(e){var t,i,r,o;const l=b(),p=h(e),u=`${l}?${(0,n.createQueryParams)(p)}`,d=(new Date).getTime();try{const o=await(0,c.fetch)(u,{signal:e.signal});if(!o.ok)throw null===(t=e.serverLogger)||void 0===t||t.log({action:"symbol-search.error-response",level:"error",payload:{request:{url:u,method:"GET"},statusCode:o.status,message:(await o.text()).slice(0,250)}}),new Error(`${o.status}: ${o.statusText}`);const n=await o.json();return s.telemetry.sendChartReport("symbol_search_http_status",{value:o.status}),0===n.length?null===(i=e.serverLogger)||void 0===i||i.log({action:"symbol-search.empty-response",level:"error",payload:{request:{url:u,method:"GET"}}}):null===(r=e.serverLogger)||void 0===r||r.log({action:"symbol-search.success-response",level:"info",payload:{request:{url:u,method:"GET"},symbolsCount:n.length}}),n}catch(t){throw s.telemetry.sendChartReport("symbol_search_http_error"),null===(o=e.serverLogger)||void 0===o||o.log({action:"symbol-search.network-error",level:"error",payload:{request:{url:u,method:"GET"},message:(0,a.getLoggerMessage)(t)}}),t}finally{m(d)}}async function d(e){var t,i,r,o;const l=b(!0),p=h(e),u=`${l}?${(0,n.createQueryParams)(p)}`,d=(new Date).getTime();try{const o=await(0,c.fetch)(u,{signal:e.signal});if(!o.ok)throw null===(t=e.serverLogger)||void 0===t||t.log({action:"symbol-search.error-response",level:"error",payload:{request:{url:u,method:"GET"},statusCode:o.status,message:(await o.text()).slice(0,250)}}),new Error(`${o.status}: ${o.statusText}`);const n=await o.json();return s.telemetry.sendChartReport("symbol_search_http_status",{value:o.status}),0===n.symbols.length?null===(i=e.serverLogger)||void 0===i||i.log({action:"symbol-search.empty-response",level:"error",payload:{request:{url:u,method:"GET"}}}):null===(r=e.serverLogger)||void 0===r||r.log({
action:"symbol-search.success-response",level:"info",payload:{request:{url:u,method:"GET"},symbolsCount:n.symbols.length}}),n}catch(t){throw s.telemetry.sendChartReport("symbol_search_http_error"),null===(o=e.serverLogger)||void 0===o||o.log({action:"symbol-search.network-error",level:"error",payload:{request:{url:u,method:"GET"},message:(0,a.getLoggerMessage)(t)}}),t}finally{m(d)}}function h(e){const t={};void 0!==e.text&&(t.text=e.text),void 0!==e.brokerSymbols&&(t.broker_symbols=e.brokerSymbols.sort().join(",")),void 0!==e.serverHighlight&&(t.hl=e.serverHighlight?"1":"0"),void 0!==e.exchange&&(t.exchange=e.exchange),void 0!==e.country&&(t.country=e.country),e.strictMatch&&(t.strict="1"),e.noLimits&&(t.no_limits="1"),void 0!==e.lang&&(t.lang=e.lang);const{type:i}=e;var o;void 0!==i&&(t.search_type=(o=i,(0,r.ensureDefined)(v.get(o)))),void 0!==e.start&&(t.start=e.start);const{filterQueryParams:s}=e;return void 0!==s&&Object.keys(s).forEach((e=>{const i=s[e];i&&(t[e]=i)})),window.SS_DOMAIN_PARAMETER&&(t.domain=window.SS_DOMAIN_PARAMETER),e.brokerId&&(t.broker=e.brokerId.toLowerCase(),e.onlyTradable&&(t.tradable="1"),e.unhideSymbolSearchGroups&&(t.unhide=e.unhideSymbolSearchGroups)),e.sortByCountry&&(t.sort_by_country=e.sortByCountry),t}function m(e){const t=(new Date).getTime()-e;s.telemetry.sendChartReport("symbol_search_time_frame",{value:t})}const g={0:{0:"/symbol_search/v3/",1:"/symbol_search/"},1:{0:"/local_search/v3/",1:"/local_search/"}};function b(e){let t="https://"+window.SS_HOST;const i=(0,o.isProd)()?0:1;return t+=g[i][e?0:1],window.SS_URL&&(t=window.SS_URL),t}const v=new Map(l.map((({value:e,search_type:t})=>[e,t])))},790934:(e,t,i)=>{"use strict";i.d(t,{mediaQueryAddEventListener:()=>r,mediaQueryRemoveEventListener:()=>o});const r=(e,t)=>{(null==e?void 0:e.addEventListener)?e.addEventListener("change",t):e.addListener(t)},o=(e,t)=>{(null==e?void 0:e.removeEventListener)?e.removeEventListener("change",t):e.removeListener(t)}},589354:(e,t,i)=>{"use strict";function r(e,t=100,i){const r=new Map,o=new Map;return function(...s){var n;const a=String(i?i.apply(null,s):s),l=Date.now();if(r.has(a)&&(null!==(n=o.get(a))&&void 0!==n?n:-1/0)>l)return r.get(a);const c=e.apply(this,s);return r.set(a,c),o.set(a,l+t),c}}function o(e=100,t){return(i,o,s)=>{const n=s.value,a=Symbol();return{get(){return void 0===this[a]&&(this[a]=r(n,e,t)),this[a].bind(this)}}}}i.d(t,{memoizeWithTimeout:()=>r,memoizeWithTimeoutDecorator:()=>o})},261926:(e,t,i)=>{"use strict";function r(e){let t=Promise.resolve();return function(...i){const r=t.then((()=>e.apply(this,i)));return t=r.catch((()=>{})),r}}function o(...e){let t=Promise.resolve();return e.map((e=>function(...i){const r=t.then((()=>e.apply(this,i)));return t=r.catch((()=>{})),r}))}function s(...e){return(e,t,i)=>{const o=i.value,s=Symbol();return{get(){return void 0===this[s]&&(this[s]=r(o)),this[s].bind(this)}}}}i.d(t,{sequentialize:()=>r,sequentializeAll:()=>o,sequentializeDecorator:()=>s})},465890:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'}}]);
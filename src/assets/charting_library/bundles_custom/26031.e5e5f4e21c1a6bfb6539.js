(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[26031,9726,78775,54875,60521],{960521:function(e,t,i){var r;!function(n){"use strict";var s,o=1e6,a=1e6,l="[big.js] ",c=l+"Invalid ",d=c+"decimal places",u=l+"Division by zero",h={},_=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m(e,t,i,r){var n=e.c;if(i===_&&(i=e.constructor.RM),0!==i&&1!==i&&2!==i&&3!==i)throw Error("[big.js] Invalid rounding mode");if(t<1)r=3===i&&(r||!!n[0])||0===t&&(1===i&&n[0]>=5||2===i&&(n[0]>5||5===n[0]&&(r||n[1]!==_))),n.length=1,r?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(r=1===i&&n[t]>=5||2===i&&(n[t]>5||5===n[t]&&(r||n[t+1]!==_||1&n[t-1]))||3===i&&(r||!!n[0]),n.length=t--,r)for(;++n[t]>9;)n[t]=0,t--||(++e.e,n.unshift(1));for(t=n.length;!n[--t];)n.pop()}return e}function p(e,t,i){var r=e.e,n=e.c.join(""),s=n.length;if(t)n=n.charAt(0)+(s>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0)if(++r>s)for(r-=s;r--;)n+="0";else r<s&&(n=n.slice(0,r)+"."+n.slice(r));else s>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&i?"-"+n:n}h.abs=function(){var e=new this.constructor(this);return e.s=1,e},h.cmp=function(e){var t,i=this,r=i.c,n=(e=new i.constructor(e)).c,s=i.s,o=e.s,a=i.e,l=e.e;if(!r[0]||!n[0])return r[0]?s:n[0]?-o:0;if(s!=o)return s;if(t=s<0,a!=l)return a>l^t?1:-1;for(o=(a=r.length)<(l=n.length)?a:l,s=-1;++s<o;)if(r[s]!=n[s])return r[s]>n[s]^t?1:-1;return a==l?0:a>l^t?1:-1},h.div=function(e){var t=this,i=t.constructor,r=t.c,n=(e=new i(e)).c,s=t.s==e.s?1:-1,a=i.DP;if(a!==~~a||a<0||a>o)throw Error(d);if(!n[0])throw Error(u);if(!r[0])return e.s=s,e.c=[e.e=0],e;var l,c,h,g,p,f=n.slice(),v=l=n.length,b=r.length,y=r.slice(0,l),S=y.length,w=e,C=w.c=[],P=0,I=a+(w.e=t.e-e.e)+1;for(w.s=s,s=I<0?0:I,f.unshift(0);S++<l;)y.push(0);do{for(h=0;h<10;h++){if(l!=(S=y.length))g=l>S?1:-1;else for(p=-1,g=0;++p<l;)if(n[p]!=y[p]){g=n[p]>y[p]?1:-1;break}if(!(g<0))break;for(c=S==l?n:f;S;){if(y[--S]<c[S]){for(p=S;p&&!y[--p];)y[p]=9;--y[p],y[S]+=10}y[S]-=c[S]}for(;!y[0];)y.shift()}C[P++]=g?h:++h,y[0]&&g?y[S]=r[v]||0:y=[r[v]]}while((v++<b||y[0]!==_)&&s--);return C[0]||1==P||(C.shift(),w.e--,I--),P>I&&m(w,I,i.RM,y[0]!==_),w},h.eq=function(e){return 0===this.cmp(e)},h.gt=function(e){return this.cmp(e)>0},h.gte=function(e){return this.cmp(e)>-1},h.lt=function(e){return this.cmp(e)<0},h.lte=function(e){return this.cmp(e)<1},h.minus=h.sub=function(e){var t,i,r,n,s=this,o=s.constructor,a=s.s,l=(e=new o(e)).s;if(a!=l)return e.s=-l,s.plus(e);var c=s.c.slice(),d=s.e,u=e.c,h=e.e;if(!c[0]||!u[0])return u[0]?e.s=-l:c[0]?e=new o(s):e.s=1,e;if(a=d-h){for((n=a<0)?(a=-a,r=c):(h=d,r=u),r.reverse(),l=a;l--;)r.push(0);r.reverse()}else for(i=((n=c.length<u.length)?c:u).length,a=l=0;l<i;l++)if(c[l]!=u[l]){n=c[l]<u[l];break}if(n&&(r=c,c=u,u=r,e.s=-e.s),(l=(i=u.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;i>a;){if(c[--i]<u[i]){for(t=i;t&&!c[--t];)c[t]=9;--c[t],c[i]+=10}c[i]-=u[i]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--h;return c[0]||(e.s=1,c=[h=0]),e.c=c,e.e=h,e},h.mod=function(e){
var t,i=this,r=i.constructor,n=i.s,s=(e=new r(e)).s;if(!e.c[0])throw Error(u);return i.s=e.s=1,t=1==e.cmp(i),i.s=n,e.s=s,t?new r(i):(n=r.DP,s=r.RM,r.DP=r.RM=0,i=i.div(e),r.DP=n,r.RM=s,this.minus(i.times(e)))},h.plus=h.add=function(e){var t,i,r,n=this,s=n.constructor;if(e=new s(e),n.s!=e.s)return e.s=-e.s,n.minus(e);var o=n.e,a=n.c,l=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new s(n):e.s=n.s),e;if(a=a.slice(),t=o-l){for(t>0?(l=o,r=c):(t=-t,r=a),r.reverse();t--;)r.push(0);r.reverse()}for(a.length-c.length<0&&(r=c,c=a,a=r),t=c.length,i=0;t;a[t]%=10)i=(a[--t]=a[t]+c[t]+i)/10|0;for(i&&(a.unshift(i),++l),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=l,e},h.pow=function(e){var t=this,i=new t.constructor("1"),r=i,n=e<0;if(e!==~~e||e<-1e6||e>a)throw Error(c+"exponent");for(n&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return n?i.div(r):r},h.prec=function(e,t){if(e!==~~e||e<1||e>o)throw Error(c+"precision");return m(new this.constructor(this),e,t)},h.round=function(e,t){if(e===_)e=0;else if(e!==~~e||e<-o||e>o)throw Error(d);return m(new this.constructor(this),e+this.e+1,t)},h.sqrt=function(){var e,t,i,r=this,n=r.constructor,s=r.s,o=r.e,a=new n("0.5");if(!r.c[0])return new n(r);if(s<0)throw Error(l+"No square root");0===(s=Math.sqrt(r+""))||s===1/0?((t=r.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((s=Math.sqrt(t))==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):e=new n(s+""),o=e.e+(n.DP+=4);do{i=e,e=a.times(i.plus(r.div(i)))}while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return m(e,(n.DP-=4)+e.e+1,n.RM)},h.times=h.mul=function(e){var t,i=this,r=i.constructor,n=i.c,s=(e=new r(e)).c,o=n.length,a=s.length,l=i.e,c=e.e;if(e.s=i.s==e.s?1:-1,!n[0]||!s[0])return e.c=[e.e=0],e;for(e.e=l+c,o<a&&(t=n,n=s,s=t,c=o,o=a,a=c),t=new Array(c=o+a);c--;)t[c]=0;for(l=a;l--;){for(a=0,c=o+l;c>l;)a=t[c]+s[l]*n[c-l-1]+a,t[c--]=a%10,a=a/10|0;t[c]=a}for(a?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},h.toExponential=function(e,t){var i=this,r=i.c[0];if(e!==_){if(e!==~~e||e<0||e>o)throw Error(d);for(i=m(new i.constructor(i),++e,t);i.c.length<e;)i.c.push(0)}return p(i,!0,!!r)},h.toFixed=function(e,t){var i=this,r=i.c[0];if(e!==_){if(e!==~~e||e<0||e>o)throw Error(d);for(e=e+(i=m(new i.constructor(i),e+i.e+1,t)).e+1;i.c.length<e;)i.c.push(0)}return p(i,!1,!!r)},h.toJSON=h.toString=function(){var e=this,t=e.constructor;return p(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},h.toNumber=function(){var e=Number(p(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(l+"Imprecise conversion");return e},h.toPrecision=function(e,t){var i=this,r=i.constructor,n=i.c[0];if(e!==_){if(e!==~~e||e<1||e>o)throw Error(c+"precision");for(i=m(new r(i),e,t);i.c.length<e;)i.c.push(0)}return p(i,e<=i.e||i.e<=r.NE||i.e>=r.PE,!!n)},h.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(l+"valueOf disallowed");return p(e,e.e<=t.NE||e.e>=t.PE,!0)},s=function e(){function t(i){var r=this;if(!(r instanceof t))return i===_?e():new t(i);if(i instanceof t)r.s=i.s,r.e=i.e,
r.c=i.c.slice();else{if("string"!=typeof i){if(!0===t.strict)throw TypeError(c+"number");i=0===i&&1/i<0?"-0":String(i)}!function(e,t){var i,r,n;if(!g.test(t))throw Error(c+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(i=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(i<0&&(i=r),i+=+t.slice(r+1),t=t.substring(0,r)):i<0&&(i=t.length);for(n=t.length,r=0;r<n&&"0"==t.charAt(r);)++r;if(r==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=i-r-1,e.c=[],i=0;r<=n;)e.c[i++]=+t.charAt(r++)}}(r,i)}r.constructor=t}return t.prototype=h,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),s.default=s.Big=s,void 0===(r=function(){return s}.call(t,i,t,e))||(e.exports=r)}()},827147:(e,t,i)=>{"use strict";i.d(t,{default:()=>o});var r=i(128177),n=i(854814),s=i(383527);const o=function(e){return"string"==typeof e||!(0,n.default)(e)&&(0,s.default)(e)&&"[object String]"==(0,r.default)(e)}},685912:e=>{e.exports={}},683135:e=>{e.exports={"tv-spinner__container-rotate":"tv-spinner__container-rotate-aLqboHuu"}},165573:e=>{e.exports={rootContainer:"rootContainer-fxQkGV8J"}},624899:e=>{e.exports={container:"container-B8mkOfAH",inner:"inner-B8mkOfAH","border-left":"border-left-B8mkOfAH","border-right":"border-right-B8mkOfAH","border-top":"border-top-B8mkOfAH","border-bottom":"border-bottom-B8mkOfAH","top-right-radius":"top-right-radius-B8mkOfAH","top-left-radius":"top-left-radius-B8mkOfAH","bottom-right-radius":"bottom-right-radius-B8mkOfAH","bottom-left-radius":"bottom-left-radius-B8mkOfAH"}},685023:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>r,spinnerSizeMap:()=>n});const r="large",n={mini:"xsmall",xxsmall:"xxsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"}},782618:(e,t,i)=>{"use strict";i.d(t,{setupChartEventHint:()=>h});var r=i(650151),n=i(444372),s=i(62802),o=i(885482),a=i(616117),l=i(638456),c=i(470316),d=i(77122);const u=["LineToolTrendLine","LineToolRay","LineToolInfoLine","LineToolExtended","LineToolRegressionTrend","LineToolRotatedRectangle","LineToolParallelChannel","LineToolFlatBottom","LineToolDisjointAngle","LineToolPitchfork","LineToolSchiffPitchfork","LineToolSchiffPitchfork2","LineToolInsidePitchfork","LineToolVertLine","LineToolCrossLine","LineToolHorzLine","LineToolHorzRay","LineToolTrendAngle"];function h(e,t=!1,h=!1){if(!d.enabled("popup_hints"))return;const _=e.getContainer();let g=null,m=null,p=null;function f(e,t){if(m)m.show(e,b.bind(null,t));else{const r=o.tool.value();Promise.all([i.e(9817),i.e(93280),i.e(962),i.e(26166)]).then(i.bind(i,410837)).then((i=>{m=new i.ChartEventHintRenderer(_),r===o.tool.value()&&m.show(e,b.bind(null,t))}))}}function v(e){return!Boolean(s.getBool(e))}function b(e){s.setValue(e,!0,{forceFlush:!0}),(0,r.ensureNotNull)(m).destroy(),null!==p&&p(),m=null}o.tool.subscribe((function(){const t=o.tool.value(),r=l.CheckMobile.any();if(null==g||g.hide(),h&&r&&function(e){return u.includes(e)}(t))return void async function(t){{const r=()=>(0,o.resetToCursor)(!0);if(g)g.show(t,r);else{
const{DrawingHintsRenderer:n}=await Promise.all([i.e(88548),i.e(96567),i.e(962),i.e(35858)]).then(i.bind(i,953745));g=new n(e),t===o.tool.value()&&g.show(t,r)}}}(t);if(!v("hint.touchPainting"))return;const s=(0,a.isLineToolDrawWithoutPoints)(t);!(0,a.isStudyLineToolName)(t)||"LineToolRegressionTrend"===t||s||r?(0,a.isLineToolName)(t)&&!(0,a.isLineDrawnWithPressedButton)(t)&&!s&&r?f(n.t(null,void 0,i(967861)),"hint.touchPainting"):m&&m.hide():f(n.t(null,void 0,i(632234)),"hint.touchPainting")})),o.createdLineTool.subscribe(null,(function(){const e=o.tool.value();"LineToolPath"===e&&v("hint.finishBuildPathByDblClick")?f(n.t(null,void 0,i(605828)),"hint.finishBuildPathByDblClick"):"LineToolPolyline"===e&&v("hint.finishBuildPolylineByDblClick")&&f(n.t(null,void 0,i(763898)),"hint.finishBuildPolylineByDblClick")})),o.finishedLineTool.subscribe(null,(function(){if(m){const e=o.tool.value();"LineToolPath"===e?b("hint.finishBuildPathByDblClick"):"LineToolPolyline"===e&&b("hint.finishBuildPolylineByDblClick")}})),e.layoutSizesChanged().subscribe((function(){if(!v("hint.startResizingChartInLayout"))return;f(n.t(null,void 0,i(135273)),"hint.startResizingChartInLayout")})),t||l.CheckMobile.any()||!v("hint.startFocusedZoom")||(p=function(e,t){let i=!1;const r=n=>{n?(i&&t(n),e.onZoom().unsubscribe(null,r)):i||(t(n),i=!0)};return e.onZoom().subscribe(null,r),()=>e.onZoom().unsubscribe(null,r)}(e,(function(e){if(!v("hint.startFocusedZoom"))return;if(e)m&&(p=null,b("hint.startFocusedZoom"));else{const e=c.isMacKeyboard?"âŒ˜":"Ctrl";f(n.t(null,void 0,i(35963)).format({key:e}),"hint.startFocusedZoom")}})))}},229534:(e,t,i)=>{"use strict";async function r(e){return(await Promise.all([i.e(76592),i.e(54712),i.e(33371),i.e(63987),i.e(35213),i.e(63830),i.e(1888),i.e(96114),i.e(25977),i.e(23127),i.e(5091),i.e(11595),i.e(37757)]).then(i.bind(i,173403))).createDialog(e)}function n(e){r(e).then((e=>e.open()))}i.d(t,{createErrorDialog:()=>r,showErrorDialog:()=>n})},503246:(e,t,i)=>{"use strict";i.d(t,{QUOTE_INFO_PATHS:()=>a,categoryIdByPaths:()=>n,isStatementsCategoryPath:()=>s,pathsByCategoryId:()=>r});const r={"income statements":"/financials-income-statement/","balance sheet":"/financials-balance-sheet/","cash flow":"/financials-cash-flow/",statistics:"/financials-statistics-and-ratios/",dividends:"/financials-dividends/",earnings:"/financials-earnings/",revenue:"/financials-revenue/"},n={"/financials-income-statement/":"income statements","/financials-balance-sheet/":"balance sheet","/financials-cash-flow/":"cash flow"};function s(e){return"/financials-income-statement/"===e||"/financials-balance-sheet/"===e||"/financials-cash-flow/"===e}function o(e){return e.replace(/\//g,"")}const a=[`/:category(${o("/financials-income-statement/")})/:indicator`,`/:category(${o("/financials-balance-sheet/")})/:indicator`,`/:category(${o("/financials-cash-flow/")})/:indicator`,`/:category(${o("/financials-statistics-and-ratios/")})/:indicator`]},760641:(e,t,i)=>{"use strict";i.d(t,{ChartPage:()=>c});var r=i(129025),n=i(581996),s=i(484443),o=i(77122)
;const a=o.enabled("no_min_chart_width"),l=o.enabled("bypass_chart_height_check");class c{constructor(e){this._processVisibility=e=>{const t=e.container.value();return this.affectsLayout(e.name)?(t&&t.classList.toggle("js-hidden",!1),!0):(t&&t.classList.toggle("js-hidden",!0),!1)},this._setWidth=(e,t,i)=>{let r=i;this._fullscreenArea!==e.name&&(e.availWidth.setValue(i),e.canNegotiate.width&&(r=(0,s.determineSize)(i,e.negotiations.width))),t||(r=0);const n=e.container.value();return n&&t&&(n.style.width=r+"px"),e.width.setValue(r),r},this._setHeight=(e,t,i)=>{let r=i;this._fullscreenArea!==e.name&&(e.availHeight.setValue(i),e.canNegotiate.height&&(r=(0,s.determineSize)(i,e.negotiations.height))),t||(r=0);const n=e.container.value();return n&&t&&(n.style.height=r+"px"),e.height.setValue(r),r};const t=e.container.value();if(!t)throw new Error("bridge.container.value() must be an element");this._container=t,this._availableAreas=["left","tradingpanel","right","top","bottom","center","topleft","extratop"],this._areas={},this._bridge=e,this._width=e.width,this._height=e.height,this._width.subscribe((()=>this.recalculate())),this._height.subscribe((()=>this.recalculate())),this._bridge.visible.subscribe((()=>this._updateVisibility())),this._bridge.fullscreen.subscribe((()=>this._onParentFullscreenChange())),this.recalculate()}allocate(e){const t=e&&e.areaName;if(-1===this._availableAreas.indexOf(t))throw new Error("unknown options.areaName");this.free(t);const i=this._createDOM(t),o={name:t,canNegotiate:{width:"left"===t||"right"===t||"tradingpanel"===t||"topleft"===t,height:"top"===t||"bottom"===t||"topleft"===t||"extratop"===t},negotiations:{width:[],height:[]},remove:()=>{for(const e in this._areas)this._areas[e]===o&&this.free(e)},negotiateWidth:e=>{if(!o.canNegotiate.width)return;const t=(0,s.processNegotiation)(e);(0,s.negotiationsAreEqual)(o.negotiations.width,t)||(o.negotiations.width=t,this.recalculate())},negotiateHeight:e=>{if(!o.canNegotiate.height)return;const t=(0,s.processNegotiation)(e);(0,s.negotiationsAreEqual)(o.negotiations.height,t)||(o.negotiations.height=t,this.recalculate())},requestFullscreen:()=>{this._fullscreenArea||("right"!==t&&"center"!==t||(this._fullscreenArea=t),"center"===t&&this._bridge.requestFullscreen(),this._updateFullscreen())},exitFullscreen:()=>{t===this._fullscreenArea&&(this._fullscreenArea=void 0,"center"===t&&this._bridge.exitFullscreen(),this._updateFullscreen())},width:new r.WatchedValue,height:new r.WatchedValue,availWidth:new r.WatchedValue,availHeight:new r.WatchedValue,alive:new r.WatchedValue(!0),container:new r.WatchedValue(i),visible:new r.WatchedValue(!0),fullscreen:new r.WatchedValue(!1),fullscreenable:new r.WatchedValue("right"===t||"center"===t),rdState:new n.ResizerDetacherState};return o.rdState.pushOwner(o),this._areas[t]=o,o.rdState.owner.subscribe((e=>{const i=o.container.value();if(e!==o)i&&(i.innerHTML="",i.parentElement&&i.parentElement.removeChild(i));else{let e=null;for(let i=this._availableAreas.indexOf(t);i--;){const t=this._availableAreas[i]
;if(this.affectsLayout(t)){e=this._areas[t].container.value();break}}i&&(e&&i.parentElement?i.insertAdjacentElement("afterend",e):this._container.appendChild(i))}this.recalculate()}),{callWithLast:!0}),o.rdState.bridge()}free(e){const t=this._areas[e];if(!t)return;this._areas[e]=void 0;const i=t.container.value();i&&i.parentElement&&i.parentElement.removeChild(i),t.alive.setValue(!1)}recalculate(){const e={};this._recalcSingleRunToken=e;const t=this._areas.topleft,i=this._areas.left,r=this._areas.tradingpanel,n=this._areas.right,s=this._areas.top,o=this._areas.bottom,l=this._areas.center,c=this._areas.extratop,d=this._width.value(),u=this._height.value();let h=0,_=0,g=0,m=0,p=0,f=0,v=0,b=0;if(e===this._recalcSingleRunToken&&c){const e=this._processVisibility(c);b=this._setHeight(c,e,u),this._setWidth(c,e,d)}if(e===this._recalcSingleRunToken&&t){const e=this._processVisibility(t);v=this._setHeight(t,e,u),f=this._setWidth(t,e,d);const i=t.container.value();e&&i&&(i.style.top=b+"px")}let y=0;if(e===this._recalcSingleRunToken&&s){const e=this._processVisibility(s),t=s.container.value();e&&t&&(t.style.left=f+"px",t.style.top=b+"px");const i=d-f;this._setWidth(s,e,i),h=this._setHeight(s,e,u),h&&(y=1)}if(e===this._recalcSingleRunToken&&i){const e=this._processVisibility(i),t=Math.max(v,h);g=this._setWidth(i,e,d),g&&(g+=4),g&&1===y&&(y=4);const r=i.container.value();e&&r&&(r.style.top=t+b+y+"px"),this._setHeight(i,e,u-t-b)}if(e===this._recalcSingleRunToken&&r){const e=this._processVisibility(r);let t=d-g;a||(t-=300),p=this._setWidth(r,e,t),p&&1===y&&(y=4),this._setHeight(r,e,u-b-h-y)}if(e===this._recalcSingleRunToken&&n){const e=this._processVisibility(n);let t=d-g-p;a||(t-=300),m=this._setWidth(n,e,t),m&&1===y&&(y=4),this._setHeight(n,e,u-b-h-y);const i=n.container.value();e&&i&&(i.style.top=h+b+y+"px")}const S=p+m;let w=0,C=d-g-p-m-(S?4:0);const P=Boolean(p||!S);if(!m&&p&&(C+=4),e===this._recalcSingleRunToken&&o){const e=this._processVisibility(o),t=o.container.value();e&&t&&(t.style.left=g+"px",t.classList.toggle("no-border-top-left-radius",!g),t.classList.toggle("no-border-top-right-radius",P)),this._setWidth(o,e,C);const i=u-b;w=Math.min(300,i-0),_=this._setHeight(o,e,i)+4}const I=Boolean(h&&(g||S));if(this._container.classList.toggle("layout-with-border-radius",I),e===this._recalcSingleRunToken&&l){const e=this._processVisibility(l),t=l.container.value();e&&t&&(t.style.left=g+"px",t.style.top=h+b+y+"px",t.classList.toggle("no-border-bottom-left-radius",!_||!g),t.classList.toggle("no-border-bottom-right-radius",P||!_),t.classList.toggle("no-border-top-left-radius",Boolean(!g&&S)),t.classList.toggle("no-border-top-right-radius",P)),this._setWidth(l,e,C);const i=u-h-_-b-y;this._setHeight(l,e,Math.max(i,w))}if(e===this._recalcSingleRunToken&&r&&this.affectsLayout("tradingpanel")){const e=r.container.value();e&&(e.style.right=p&&m?`${m+4}px`:`${m}px`,e.style.top=b+h+y+"px",e.style.borderTopRightRadius=I&&m?"4px":"0px")}e===this._recalcSingleRunToken&&this._updateVisibility()}affectsLayout(e){const t=this._areas[e]
;if(!t)return!1;if(t.rdState.owner.value()!==t)return!1;if(this._fullscreenArea&&this._fullscreenArea!==e)return d(e);if(this._width.value()<=567||this._height.value()<=445&&!l){if(!["center","top","left","topleft","extratop"].includes(e))return!1}return!0}_updateVisibility(){const e=this._bridge.visible.value();for(let t=0;t<this._availableAreas.length;t++){const i=this._availableAreas[t],r=this._areas[i];r&&(e&&this.affectsLayout(i)?r.visible.setValue(!0):r.visible.setValue(!1))}}_onParentFullscreenChange(){this._bridge.fullscreen.value()||(this._fullscreenArea=void 0,this._updateFullscreen())}_updateFullscreen(){const e=void 0!==this._fullscreenArea;for(let t=0;t<this._availableAreas.length;t++){const i=this._availableAreas[t],r=this._areas[i];if(!r)continue;if(i===this._fullscreenArea){r.fullscreen.setValue(!0);continue}r.fullscreen.setValue(!1);const n=r.container.value();n&&n.classList.toggle("js-hidden",e&&!d(i))}this._updateVisibility(),this.recalculate()}_createDOM(e){const t=document.createElement("div");return t.classList.add("layout__area--"+e),t.style.position="absolute","tradingpanel"===e&&(t.style.overflow="hidden",t.style.borderTopRightRadius="4px"),"bottom"===e?t.style.bottom="0":t.style.top="0","right"===e||"tradingpanel"===e?t.style.right="0":t.style.left="0",t}}function d(e){const t=o.enabled("side_toolbar_in_fullscreen_mode"),i=o.enabled("header_in_fullscreen_mode");return"center"===e||"left"===e&&t||"top"===e&&i}},607436:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>r.DEFAULT_SIZE,spinnerSizeMap:()=>r.spinnerSizeMap});var r=i(685023)},941285:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Spinner:()=>a,renderSpinnerTemplate:()=>s});i(683135);var r=i(571690),n=i(607436);function s(e=""){return`<div class="tv-spinner ${e}" role="progressbar"></div>`}const o=(0,r.parseHtmlElement)(s());class a{constructor(e){this._shown=!1,this._el=o.cloneNode(!0),this.setSize(n.spinnerSizeMap[e||n.DEFAULT_SIZE])}spin(e){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=e,void 0!==e&&e.appendChild(this._el)),this._shown=!0,this}stop(e){return e&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this}setStyle(e){return Object.keys(e).forEach((t=>{const i=e[t];void 0!==i&&this._el.style.setProperty(t,i)})),this}style(){return this._el.style}setSize(e){const t=void 0!==e?`tv-spinner--size_${e}`:"";return this._el.className=`tv-spinner ${t} ${this._shown?"tv-spinner--shown":""}`,this}getEl(){return this._el}destroy(){this.stop(),delete this._el,delete this._container}}},372006:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SupportTicketData:()=>P});var r=i(120780),n=i(77122),s=i(849289),o=i.n(s),a=i(342395),l=i(439016),c=i(314802),d=i(638456),u=i(582950),h=i(201089),_=i(234271),g=i(440058),m=(i(659863),i(125226)),p=i(262078),f=i(62802),v=i.n(f);function b(e){const t={name:e.name,time:e.startTime};return"measure"===e.entryType&&(t.duration=e.duration),t}function y(){const e=navigator.connection;return{
effectiveType:e&&e.effectiveType||"unknown",rtt:e&&e.rtt||-1}}var S=i(822122),w=i(403009);const C=(0,h.getLogger)("Support.TicketData");class P{constructor(e={}){this._options=e,this.reset()}destroy(){delete this._data,delete this._browserInfo,delete this._dialogElement}reset(){this._data={event:"support_ticket"},this._browserInfo=new(o())}setOptions(e){this._options={...this._options,...e}}getData(){return this._data}addData(e){Object.assign(this._data,e)}setDialogElement(e){this._dialogElement=e}async getFinalData(e){void 0!==this._beforeCollectingFinalData&&await this._beforeCollectingFinalData();const t=this._options.disableAutoCollection?this.getData():await this._collectData(e);return(0,u.isTicketDataComplete)(t)?t:(C.logError("Not enough data collected. `event` and one of (`userId`, `email`) fields required."),null)}onBeforeCollectingFinalData(e){this._beforeCollectingFinalData=e}tradingDataPromise(){return this._tradingDataPromise}onTradingData(e){this._tradingDataPromise=e}static setChartWidgetCollection(e){P._chartWidgetCollection=e}static getChartWidgetCollection(){return P._chartWidgetCollection}static setScreener(e){P._screener=e}static getScreener(){return P._screener}static setNewScreenerStandalone(e){P._newScreenerStandalone=e}static getNewScreenerStandalone(){return P._newScreenerStandalone}_collectData(e={}){const t=Promise.all([this._getChartSnapshot(),this._getTradingLogs(),this._getScreenerParams(),this._getPageSnapshot(e),this._getLogHistory(),this._getPersistentLogHistory(),this._getDesktopReports(),this._getAlertHealthchecks(),this._getNewScreenerStandaloneParams()]).then((e=>{this.addData(this._filterEmptyFields({snapshotURL:e[0],trading:e[1],screener:e[2],pageSnapshotURL:e[3],log:e[4],persistentLogs:e[5],desktopReports:e[6],alertHealthchecks:e[7],newScreenerStandaloneState:e[8]}))})).then((()=>this._data));return this.addData(this._filterEmptyFields({browserInfo:this._getBrowserInfo(),ping:this._getPingInfo(),user:this._getUser(),userId:this._getUserId(),pro_plan:this._getProPlan(),websocketAddress:this._getWebSocketAddress(),sessionid:this._getSessionId(),ref:this._getReferrer(),js_errors:this._getJsErrors(),product:this._getProductId(),symbolSessionId:this._getSymbolSessionId(),dividendsAdjustment:this._getDividendsAdjustment(),backAdjustment:this._getBackAdjustment(),settlementAsClose:this._getSettlementAsClose(),chartSessionDisconnects:this._getChartSessionDisconnects(),marketStatuses:this._getChartMarketStatuses(),seriesStatuses:this._getChartSeriesStatuses(),is_pro:this._getUserIsPro(),subscription_state:this._getSubscriptionState(),proOffers:this._getProOffers(),timezone:this._getTimezone(),performanceMetrics:this._getPerformanceMetrics(),serverInfo:this._getServerInfo(),serverTimeOffset:this._getServerTimeOffset(),settings:this._getUserSettings(),domNodesCount:this._getDomNodesCount(),buildTime:this._getBuildTime(),plugins:this._getPlugins(),locale:this._getLocale(),featuretoggles:this._getFeaturetoggles()})),t}_getBrowserInfo(){return this._browserInfo.state()}_getChartSnapshot(){
return new Promise((async e=>{const t=P.getChartWidgetCollection();if(void 0===t)return C.logWarn("Abort generating snapshot. No chartWidgetCollection found."),void e(null);try{g.forceTradingObjVisibilityOnScreenshot.setValue(!0),await(0,a.takeChartSnapshot)(t,(t=>{const i=n.enabled("charting_library_base")?`https://www.tradingview.com/x/${t}`:`${location.protocol}//${location.host}/x/${t}`;e(i)}),(()=>{C.logError("Failed to take chart snapshot."),e(null)}),{showHeaderMainSymbol:!0})}catch(t){return C.logError(`Error while taking chart snapshot: ${t.message}`),void e(null)}finally{g.forceTradingObjVisibilityOnScreenshot.setValue(null)}}))}_getTradingLogs(){return new Promise((e=>{if(!this._data.tradingLogsAgree)return C.logWarn("Abort collecting trading logs. User did not agree to send trading logs."),void e(null);const t=(0,l.tradingService)();if(!t)return C.logWarn("Abort collecting trading logs. No trading object found."),void e(null);const i=t.activeBroker();if(null===i||!i.bugReportInfo||1!==i.connectionStatus())return C.logWarn("Abort collecting trading logs because of connection or abscence of info collection method."),void e(null);i.bugReportInfo().then((t=>e(JSON.stringify(t)))).catch((t=>(C.logError(`Error while collecting activeBroker info: ${t.message}`),e(null))))}))}_getScreenerParams(){return new Promise((e=>{const t=P.getScreener();if(void 0===t)return C.logWarn("Abort collecting screener params. No screener found."),void e(null);e(t.getCurrentState())}))}_getNewScreenerStandaloneParams(){const e=P.getNewScreenerStandalone();return e?Promise.resolve(e.getCurrentStateStringified()):(C.logWarn("Abort collecting new screener standalone params. No new screener standalone found."),Promise.resolve(null))}_performHealthCheck(e,t,i="GET"){return new Promise((async n=>{const s=Date.now();try{const o=await(0,r.fetch)(t,{method:i});n({title:e,status:o.status,responseTime:Date.now()-s,responseSize:o.headers.get("content-length")||"unknown"})}catch(t){n({title:e,status:0,responseTime:Date.now()-s})}}))}_getAlertHealthchecks(){return this._data.issueType!==u.TVOnlyActiveIssueType.Alert?Promise.resolve(null):Promise.all([this._performHealthCheck("alert_facade","https://pricealerts.tradingview.com/is_alive","POST"),this._performHealthCheck("old_alerts","https://alerts.tradingview.com/alerts/health/"),this._performHealthCheck("pine_facade","https://pine-facade.tradingview.com/pine-facade/is_auth_to_get/STD%3BSMA/last")])}_getProductId(){return(0,c.isOnMobileAppPage)("old")?"ios":(0,c.isOnMobileAppPage)("new")?"android":(0,d.isDesktopApp)()?"desktop":n.enabled("charting_library_base")?"charting_library":"tv"}_getSymbolSessionId(){const e=P.getChartWidgetCollection();if(!e)return C.logWarn("Abort getting sessionId property value. No chartWidgetCollection found."),null;let t;try{t=e.activeChartWidget.value().model().mainSeries().properties().childs().sessionId.value()}catch(e){return C.logError(`Error while getting sessionId property value: ${e.message}`),null}return"string"==typeof t?t:null}_getDividendsAdjustment(){
const e=P.getChartWidgetCollection();if(!e)return C.logWarn("Abort getting dividendsAdjustment property value. No chartWidgetCollection found."),null;let t;try{t=e.activeChartWidget.value().model().mainSeries().properties().childs().dividendsAdjustment.value()}catch(e){return C.logError(`Error while getting dividendsAdjustment property value: ${e.message}`),null}return"boolean"==typeof t?t:null}_getBackAdjustment(){const e=P.getChartWidgetCollection();if(!e)return C.logWarn("Abort getting backAdjustment property value. No chartWidgetCollection found."),null;let t;try{t=e.activeChartWidget.value().model().mainSeries().properties().childs().backAdjustment.value()}catch(e){return C.logError(`Error while getting backAdjustment property value: ${null==e?void 0:e.message}`),null}return"boolean"==typeof t?t:null}_getSettlementAsClose(){const e=P.getChartWidgetCollection();if(!e)return C.logWarn("Abort getting settlementAsClose property value. No chartWidgetCollection found."),null;let t;try{t=e.activeChartWidget.value().model().mainSeries().properties().childs().settlementAsClose.value()}catch(e){return C.logError(`Error while getting settlementAsClose property value: ${null==e?void 0:e.message}`),null}return"boolean"==typeof t?t:null}_getChartSessionDisconnects(){return window.ChartApiInstance?window.ChartApiInstance.disconnectCount():(C.logWarn("Abort getting chart session disconnects count. No ChartApiInstance found."),null)}_getChartMarketStatuses(){const e=P.getChartWidgetCollection();return e?e.chartMarketStatuses():(C.logWarn("Abort getting market statuses. No chartWidgetCollection found."),[])}_getChartSeriesStatuses(){const e=P.getChartWidgetCollection();return e?e.chartSeriesStatuses():(C.logWarn("Abort getting series statuses. No chartWidgetCollection found."),[])}_getUserIsPro(){return Boolean(window.user&&window.user.is_pro)}_getSubscriptionState(){return(0,w.isPaidPro)(window.user)?u.SubscriptionState.IsPro:window.user.had_pro?u.SubscriptionState.ExPro:void 0}_getProOffers(){return window.pro&&window.pro.offers&&window.pro.offers()||[]}_getTimezone(){const e=P.getChartWidgetCollection();if(!e)return C.logWarn("Abort getting timezone. No chartWidgetCollection found."),null;let t=null;try{t=e.activeChartWidget.value().model().model().properties().childs().timezone.value()}catch(e){C.logError(`Error while getting timezone: ${e.message}`)}return t}_getPerformanceMetrics(){return function(){if(!window.performance||!performance.getEntriesByType)return null;const e=performance.getEntriesByType("navigation");if(0===e.length)return null;const t=e[0];let i=performance.getEntriesByType("mark");i=i.slice(Math.max(i.length-1e3,0));let r=performance.getEntriesByType("paint");r=r.slice(Math.max(r.length-1e3,0));let n=performance.getEntriesByType("measure");return n=r.slice(Math.max(n.length-1e3,0)),{connection:y(),navigation:t.toJSON&&t.toJSON()||"unknown",paints:r.map(b),marks:i.map(b),measures:n.map(b),pushstream:{statusPublic:p.pushStreamMultiplexer.status(),statusPrivate:p.pushStreamMultiplexer.statusPrivate()}}}()}
_sortLogs(e,t){return e.timestamp-t.timestamp}async _getLogHistory(){let e;try{let t=(0,h.getRawLogHistory)();p.pushStreamMultiplexer.ownPushStream()||(t=t.concat(await p.pushStreamMultiplexer.getLogs())),e=t.sort(this._sortLogs).map(h.serializeLogHistoryEntry).join("\n").slice(-8e6)}catch(t){C.logWarn(`Error while collecting log history: ${t.message}`),e=JSON.stringify({error:"logger.getLogHistory(maxLen) failed: "+t.message,stack:t.stack})}return e}async _getPersistentLogHistory(){var e,t;const i=null!==(t=await(null===(e=(0,_.getPersistentLogger)())||void 0===e?void 0:e.getLastSessions(5)))&&void 0!==t?t:[];return i.forEach((e=>e.entries=e.entries.slice(-8e6))),i}async _getDesktopReports(){return window.TVD&&window.TVD.getReports?window.TVD.getReports():null}_getPingInfo(){if(!window.ChartApiInstance)return C.logWarn("Abort getting chart session disconnects count. No ChartApiInstance found."),[];const e=window.ChartApiInstance.getPingInfo();return null!==e?[e.min,e.max,e.avg]:[]}_getUserId(){return window.user&&window.user.id?window.user.id:null}_getUser(){return window.user&&window.user.username||"Guest"}_getProPlan(){return window.user&&window.user.pro_plan&&window.user.pro_plan!==S.ProPlans.Free?window.user.pro_plan:null}_getWebSocketAddress(){return window.WSBackendConnection?window.WSBackendConnection.getHost():(C.logWarn("Abort getting websocket address. No WSBackendConnection found."),null)}_getSessionId(){return window.ChartApiInstance?window.ChartApiInstance.sessionid:(C.logWarn("Abort getting websocket address. No ChartApiInstance found."),null)}_getReferrer(){return location.href}_getJsErrors(){return window.__tv_js_errors.slice(0,10)}_filterEmptyFields(e){const t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];null!=r&&(!Array.isArray(r)||r.length>0)&&(t[i]=r)}return t}_getServerInfo(){const e=document.querySelector('meta[name="tv:server-name"]');return null!==e?e.getAttribute("content"):null}_getServerTimeOffset(){return window.ChartApiInstance?String(Math.round(window.ChartApiInstance.serverTime()-Date.now()))+"s":(C.logWarn("Abort getting server time offset. No ChartApiInstance found."),null)}_getUserSettings(){{const e=v().keys().reduce(((e,t)=>{const i=v().getValue(t);if(i)try{e[t]=JSON.parse(i)}catch(r){e[t]=i}return e}),{});return JSON.stringify(e).slice(0,5e5)}}_getDomNodesCount(){return document.querySelectorAll("*").length}async _getPageSnapshot(e){if(!this._data.screenshotAgree)return C.logWarn("Abort creating page snapshot. User did not agree to send page snapshot."),null;const t=await Promise.all([i.e(59928),i.e(142)]).then(i.bind(i,311702));try{return await t.generatePageSnapshot({logging:!1,ignoreElements:e=>e===this._dialogElement},e.querySelectorForSnapshot)}catch(e){return C.logError(e),null}}_getBuildTime(){return window.BUILD_TIME}_getPlugins(){return void 0!==navigator.plugins?Array.from(navigator.plugins).map((e=>({name:e.name,filename:e.filename,description:e.description}))):[]}_getLocale(){var e;return null!==(e=window.language)&&void 0!==e?e:"en"}_getFeaturetoggles(){
var e;return Object.keys(null!==(e=window.featureToggleState)&&void 0!==e?e:{}).reduce(((e,t)=>(e[t]=(0,m.isFeatureEnabled)(t),e)),{})}}},582950:(e,t,i)=>{"use strict";var r,n,s,o,a,l,c,d,u,h,_,g;function m(e){return void 0!==e.event&&void 0!==e.userId||void 0!==e.email}i.d(t,{AdditionalIssueType:()=>a,CoreActiveIssueType:()=>r,CoreLegacyIssueType:()=>n,FieldName:()=>g,FreshdeskProduct:()=>h,FreshdeskTags:()=>_,SatisfactionStatus:()=>u,SubscriptionState:()=>l,TVOnlyActiveIssueType:()=>s,TVOnlyLegacyIssueType:()=>o,TicketNoteState:()=>c,TicketPublicStatus:()=>d,isTicketDataComplete:()=>m}),function(e){e.Chart="Chart",e.Trading="Trading issue",e.Indicators="Indicators",e.Drawings="Drawings"}(r||(r={})),function(e){e.Other="Other",e.DrawingIssue="Drawings issue",e.StudyNotLoading="Study not loading",e.SlowChart="Slow scrolling or chart loading"}(n||(n={})),function(e){e.Billing="Billing",e.Data="Data",e.PineScript="Pine Script issue",e.Alert="Alerts issue",e.Screener="Screener",e.SocialNetwork="Social network",e.Watchlist="Watchlist",e.MobileApps="Mobile apps",e.Desktop="Desktop",e.Financials="Financials",e.ProfileSettings="Profile settings",e.Heatmap="Heatmap",e.AccountRecovery="Account recovery",e.Blackfriday="Black Friday",e.Cybermonday="Cyber Monday",e.PaymentSearch="Payment search",e.Options="Options",e.PineSeeds="Pine Seeds"}(s||(s={})),function(e){e.Unsubscribe="Unsubscribe",e.ChartDoesNotLoad="Chart does not load",e.NoRealTimeData="No real-time data",e.GapInTheData="Gap in the data",e.PriceIncorrect="Price incorrect"}(o||(o={})),function(e){e.Refund="Refund"}(a||(a={})),function(e){e.IsPro="Is PRO",e.ExPro="Ex-PRO"}(l||(l={})),function(e){e.FromAgent="0",e.FromUser="2"}(c||(c={})),function(e){e.Received="Received",e.InProgress="In Progress",e.Closed="Closed"}(d||(d={})),function(e){e[e.Good=103]="Good",e[e.Average=100]="Average",e[e.Bad=-103]="Bad"}(u||(u={})),function(e){e[e.Production=43000002188]="Production",e[e.ProductionFree=43000002552]="ProductionFree",e[e.ProductionRefunds=43000007194]="ProductionRefunds",e[e.Staging=43000002187]="Staging",e[e.StagingFree=43000002553]="StagingFree",e[e.StagingRefunds=43000007193]="StagingRefunds"}(h||(h={})),function(e){e.NoSatisfactionSurveys="No satisfaction surveys",e.RefundRequested="Refund requested"}(_||(_={})),function(e){e.IssueType="issue-type",e.Alert="alert",e.Broker="broker",e.TicketOrderId="ticket-order-id",e.Description="description",e.PineScript="pine-script",e.Attachments="attachments",e.TradingLogsAgree="trading-agree",e.PageScreenshotAgree="page-screenshot-agree"}(g||(g={}))},487381:(e,t,i)=>{"use strict";i.d(t,{setupTrackingModePopupHint:()=>l});var r=i(62802),n=i(885482),s=i(638456),o=i(345848),a=i(77122);function l(e){if(!s.CheckMobile.any()||Boolean(r.getBool("hint.trackingMode"))||!a.enabled("popup_hints"))return;const t=s=>{const a=n.tool.value();((0,n.toolIsCursor)(a)||"eraser"===a)&&(s.preventDefault(),s.stopPropagation(),
Promise.all([i.e(22666),i.e(62253),i.e(92191),i.e(9817),i.e(92108),i.e(47086),i.e(962),i.e(745),i.e(35174)]).then(i.bind(i,416108)).then((e=>{e.render(document.createElement("div"),(()=>{r.setValue("hint.trackingMode",!0,{forceFlush:!0}),(0,o.trackEvent)("GUI","Tracking Mode")}))})),e.removeEventListener("touchstart",t,!0))};e.addEventListener("touchstart",t,!0)}},24958:(e,t,i)=>{"use strict";i.d(t,{TradingBootloader:()=>h});var r=i(564894),n=i(510013),s=i(62802),o=i.n(s),a=i(834075),l=i(77122),c=i(866193),d=i(803374),u=i(165573);class h extends n.ChunkLoader{constructor(e){super(),this._options=e,this._options.resizerBridge.container.value().classList.add(u.rootContainer);const t=o().getBool(c.settingsKeys.TRADING_PANEL_OPENED,l.enabled("show_order_panel_on_start"));window.is_authenticated&&!(0,a.isMobileTradingAvailable)()&&t&&(this._options.resizerBridge.negotiateWidth(o().getInt(c.settingsKeys.PANEL_WIDTH)||d.minPanelWidth),this._options.resizerBridge.negotiateHeight(d.panelHeight))}async _startLoading(){return this._loadTrading()}async _loadTrading(){const{resizerBridge:e,chartWidgetCollection:t}=this._options,[{TRADING_SERVICE:n},{Trading:s}]=await Promise.all([Promise.all([i.e(15403),i.e(89637),i.e(19911),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(32109),i.e(9817),i.e(53842),i.e(4015),i.e(92108),i.e(66639),i.e(93502),i.e(35649),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(58056),i.e(67080),i.e(15518),i.e(15697),i.e(52251),i.e(80925),i.e(6107),i.e(65254),i.e(95008),i.e(12309),i.e(962),i.e(1387),i.e(22816),i.e(51884),i.e(48305),i.e(57511),i.e(94021),i.e(30913),i.e(25142)]).then(i.bind(i,439016)),Promise.all([i.e(15403),i.e(89637),i.e(19911),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(32109),i.e(9817),i.e(53842),i.e(4015),i.e(92108),i.e(66639),i.e(93502),i.e(35649),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(58056),i.e(67080),i.e(15518),i.e(15697),i.e(52251),i.e(80925),i.e(6107),i.e(65254),i.e(95008),i.e(12309),i.e(962),i.e(1387),i.e(22816),i.e(51884),i.e(48305),i.e(57511),i.e(94021),i.e(30913),i.e(25142)]).then(i.bind(i,160405))]),o=new s(e,this._options.bottomWidgetBarSettled);return r.registerService(n,o),void 0!==t&&o.setChartWidgetCollection(t),o}}},477600:(e,t,i)=>{"use strict";i.d(t,{createStubElem:()=>n});var r=i(624899);function n(e=[],t=[]){const i=document.createElement("div"),n=document.createElement("div");return i.appendChild(n),i.classList.add(r.container),n.classList.add(r.inner),e.forEach((e=>{i.classList.add(r[e])})),t.forEach((e=>{i.classList.add(r[e])})),i}},503595:(e,t,i)=>{"use strict";i.d(t,{asyncWindowOpen:()=>s});var r=i(314802);const n=i(444372).t(null,void 0,i(390879));function s(e,t,i){return window.TVD||(0,r.isOnMobileAppPage)("any")?function(e,t,i){return e.then((e=>{void 0!==e&&open(e,t,i)}),(()=>{}))}(e,t,i):async function(e,t,i){
const r=URL.createObjectURL(new Blob([`<!doctype html><html style="background-color:${getComputedStyle(document.documentElement).backgroundColor}"><head><meta charset="utf-8"><title>${n}</title></head><body style="background-color:${getComputedStyle(document.body).backgroundColor}"></body></html>`],{type:"text/html"}));try{const n=open(r,t,i);if(!n)throw new Error("cound not open a new tab");const s=await e.catch((()=>{}));void 0!==s?n.location.replace(s):n.close()}finally{URL.revokeObjectURL(r)}}(e,t,i)}},510013:(e,t,i)=>{"use strict";i.d(t,{ChunkLoader:()=>n});var r=i(266325);class n{constructor(){this._retries=5,this._cache=null,this._tryLoad=(e,t)=>{this._retries=this._retries-1;this._startLoading(e).then(t,0!==this._retries?i=>{(0,r.isAbortError)(i)||setTimeout((()=>this._tryLoad(e,t)),3e3)}:void 0)}}load(e){return this._cache||(this._cache=new Promise(this._tryLoad.bind(this,null!=e?e:null))),this._cache}}},84004:(e,t,i)=>{"use strict";i.d(t,{addIDCCodes:()=>l});var r=i(120780),n=i(444372),s=(i(586463),i(345848)),o=i(8982),a=i(33900);function l(e){return(0,s.trackEvent)("IDC Add Delay Service","Agreed",e),(0,r.fetch)(`/idc-add-delay-service/${e}/`,{credentials:"include"}).then((e=>e.json())).then((e=>e.res===o.SymbolAvailabilityCodes.OK?0:1)).catch((()=>(function(e){(0,a.showNoticeDialog)({title:n.t(null,void 0,i(717211)),content:n.t(null,void 0,i(703010)).format({exchange:e.toUpperCase()})})}(e),Promise.resolve(1))))}},746849:(e,t,i)=>{"use strict";i.d(t,{checkIfExchangeAvailable:()=>s,isUserNeedSignAgreement:()=>n});i(586463);var r=i(406103);function n(e){if(!(0,r.isIDCExchange)(e))return!1;e=o(e);const t=window.pro,i=t.getProduct(e);return void 0!==i.idc_service_codes_delay&&((!Array.isArray(i.included_exchanges)||!i.included_exchanges.some((e=>t.hasPackage(o(e)))))&&!function(e){const t=window.pro;return t.hasPackage(e)||t.hasPackage(e+"_dly")}(e))}function s(e){const t=window.pro;return new Promise((i=>{window.is_authenticated?!t.getIDCExchanges(!0).length||t.isInvalidShopConf()?t.updateShopConf().then((()=>{i(!n(e))})).catch((()=>{i(!0)})):i(!n(e)):i(!0)}))}function o(e){return e.startsWith("exchange-")?e:"exchange-{0}".format(e.toLowerCase())}},572104:(e,t,i)=>{"use strict";i.d(t,{BIST_MIXED_KEY:()=>c,checkBrokerageBist:()=>u,vorAgreementDialog:()=>h});var r=i(749028),n=i(199472),s=i(341779);const o=(0,i(201089).getLogger)("VorAgreementDialog"),a=(0,n.subscriptionNotification)(),l=()=>{},c="bist_mixed",d=["INFOYATIRIM","OSMANLI"];function u(e){d.includes(e)&&h(c)}async function h(e){try{const t=await(0,r.isSignedExchangeAgreement)({exchange:e});if(t.response)return;!async function(){!async function(e){
const{ShowAgreementDialogImpl:t}=await Promise.all([i.e(18809),i.e(74972),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(53842),i.e(4015),i.e(92108),i.e(66639),i.e(88194),i.e(13423),i.e(87845),i.e(48986),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(542),i.e(26855),i.e(8740),i.e(87689),i.e(73028),i.e(37221),i.e(20563),i.e(962),i.e(16480),i.e(45071),i.e(82786),i.e(67410),i.e(8302)]).then(i.bind(i,254610));t(e)}({onConfirm:()=>{(0,s.showExchangeAgreementDialog)({onClose:()=>{a.emit({type:n.SubscriptionEventType.AgreementSigned})},isExpert:window.user.is_expert,hideCloseButton:!0})},onClose:l})}()}catch(e){o.logError(e.message)}}},406103:(e,t,i)=>{"use strict";i.d(t,{isIDCExchange:()=>n});var r=i(403009);function n(e,t=!1){var i,n,s;if(e&&e.startsWith("exchange-"))return function(e,t=!1){var i;const n=null===(i=window.pro)||void 0===i?void 0:i.getProduct(e);return!(void 0===n||!(0,r.isProductDefined)(n)||(t?!n.idc_service_codes_delay:!n.idc_service_codes))}(e,t);const o=(e||"").toLowerCase();return null!==(s=null===(n=null===(i=window.pro)||void 0===i?void 0:i.getIDCExchanges(t))||void 0===n?void 0:n.includes(o))&&void 0!==s&&s}},676062:(e,t,i)=>{"use strict";i.d(t,{isSymbolAvailable:()=>b,requestFallbackSymbol:()=>y});var r=i(599612),n=i(827189),s=i(345848);var o=i(84004);const a=window.pro;function l(e){return new Promise((t=>{if(!(e=e&&e.toLowerCase()))return void t(!1);const r=i.c[911595];if(r&&r.exports.isOpenedModals())return void t(!1);let l=!1;(0,n.createIdcDelayAddServiceDialog)().then((r=>{r.open(),r.on("afterOpen",(()=>{(0,s.trackEvent)("IDC Add Delay Service","Dialog Shown",e)})),r.on("afterClose",(()=>{l||t(!1)})),r.on("action:add-service",(r=>{l=!0,r.destroy(),(0,o.addIDCCodes)(e).then((e=>{0===e?(a.invalidateShopConf(),a.updateShopConf(),async function(){const{showSubscriptionHasBeenChangedDialog:e}=await Promise.all([i.e(62741),i.e(62253),i.e(92191),i.e(68992),i.e(81643),i.e(73151),i.e(33199),i.e(36953),i.e(967),i.e(27781),i.e(61298),i.e(61633),i.e(962),i.e(78845),i.e(42198),i.e(597),i.e(30870)]).then(i.bind(i,526715));e({pushReload:!0})}(),t(!0)):t(!1)}))}))}))}))}var c=i(406103),d=i(712787),u=i(178100),h=i(8982);var _=i(960337),g=i(583912),m=i(416234),p=i(125226);var f=i(59171),v=i(572104);function b(e,t){return(0,r.check)(e).then((()=>(function(e){var t;if((0,p.isFeatureEnabled)("force_to_complete_data")&&window.user.force_to_complete_data)return void(0,v.vorAgreementDialog)();if(!e)return;const i=window.pro.getUserExchangeByPerm(e);if((0,p.isFeatureEnabled)("required_agreement_for_rt")&&i){const{exchange_agreement:r,idc_service_codes:n,exchange_agreement_expert:s}=i;if(n)return;const o=null!==(t=s||r)&&void 0!==t?t:e;return void(0,v.vorAgreementDialog)(o)}if(v.BIST_MIXED_KEY.startsWith(e)){window.pro.getUserExchangeByPerm(v.BIST_MIXED_KEY)&&(0,v.vorAgreementDialog)(v.BIST_MIXED_KEY)}}(t),!0))).catch((e=>{if(e.errCode===h.SymbolAvailabilityCodes.DELAY_NOT_AVAILABLE)(0,_.createGoProDialog)({feature:"idcFreeUser",closeOnOutsideClick:!1,goOnMarkets:!0
});else if((0,c.isIDCExchange)(e.exchange)){if(e.errCode===h.SymbolAvailabilityCodes.NEED_SIGN_AGREEMENT)return t=e.exchange,new Promise((e=>{if(!(t=t&&t.toLowerCase()))return void e(!1);const r=i.c[911595];r&&r.exports.isOpenedModals()?e(!1):(0,n.createIdcDelayAgreementDialog)({exchange:t}).then((i=>{i.on("afterOpen",(()=>{(0,s.trackEvent)("IDC Delay","Dialog Shown",t)})),i.on("afterClose",(()=>{e(!1)})),i.on("action:sign-agreement",(()=>{window.saver.saveChartSilently(),(0,s.trackEvent)("IDC Delay","Go on Agreement",t)})),i.open()}))}));if(e.errCode===h.SymbolAvailabilityCodes.NEED_ADD_SERVICE)return l(e.exchange)}var t;return Promise.resolve(!1)}))}function y(e,t){return new Promise((r=>{if("group_not_permitted"!==t.type)return void r(e);if(!t.symbolGroup)return void r(window.DEFAULT_SYMBOL);const n=t.symbolGroup,s=(0,u.isSfFlag)(n),o=(0,d.isMcxFlag)(n);if(s||o){const t=i.c[911595];if(t&&t.exports.isOpenedModals())return void r(window.DEFAULT_SYMBOL);a={exchange:(0,f.getExchange)(g.linking.proSymbol.value()),onSigninSuccess:()=>{r(e)},isRealtime:o},Promise.all([i.e(62741),i.e(62253),i.e(92191),i.e(68992),i.e(81643),i.e(33199),i.e(36953),i.e(967),i.e(27781),i.e(61298),i.e(61633),i.e(89550),i.e(962),i.e(42198),i.e(597),i.e(27901)]).then(i.bind(i,558183)).then((e=>e.createGoRegisterDialog(a))),b(e).then((t=>{t&&r(e)}))}var a;const l=(0,m.getSymbolGroupData)(n);l?function(e){Promise.all([i.e(22666),i.e(62253),i.e(92191),i.e(9817),i.e(92108),i.e(33199),i.e(61298),i.e(45197),i.e(962),i.e(745),i.e(87279)]).then(i.bind(i,472199)).then((t=>t.createAvailableExchangeDialog(e)))}({width:600,title:l.title,content:l.description,destroy:()=>r(window.DEFAULT_SYMBOL)}):r(window.DEFAULT_SYMBOL)}))}},599612:(e,t,i)=>{"use strict";i.r(t),i.d(t,{check:()=>c});var r=i(59171),n=i(120780),s=i(740254),o=i(833813),a=i(746849),l=i(8982);function c(e,t=!0){return new Promise(((i,c)=>{const d=(0,r.getExchange)(e);d?(0,a.checkIfExchangeAvailable)(d).then((r=>r?i(e):(0,s.enabled)(o.ProductFeatures.IDC_AVAILABLE_DELAY)?t?void(0,n.fetch)(`/idc-sign-agreement-check/${d}/`,{credentials:"include"}).then((t=>t.json().then((t=>t.res===l.SymbolAvailabilityCodes.DELAY_NOT_AVAILABLE?c({exchange:d,errCode:t.res,reason:"delay not available",symbol:e}):t.res===l.SymbolAvailabilityCodes.NEED_SIGN_AGREEMENT?c({exchange:d,errCode:t.res,reason:"need sign agreement",symbol:e}):t.res===l.SymbolAvailabilityCodes.NEED_ADD_SERVICE?c({exchange:d,errCode:t.res,reason:"need add service",symbol:e}):i(e))))).catch((()=>{i(e)})):i(e):c({exchange:d,errCode:l.SymbolAvailabilityCodes.DELAY_NOT_AVAILABLE,reason:"delay not available",symbol:e}))):i(e)}))}},8982:(e,t,i)=>{"use strict";i.d(t,{SymbolAvailabilityCodes:()=>r});const r=JSON.parse('{"OK":"OK","ERR":"ERR","SYMBOL_NOT_AVAILABLE_FOR_ANON":"SYMBOL_NOT_AVAILABLE_FOR_ANON","DELAY_NOT_AVAILABLE":"DELAY_NOT_AVAILABLE","NEED_SIGN_AGREEMENT":"NEED_SIGN_AGREEMENT","NEED_ADD_SERVICE":"NEED_ADD_SERVICE"}')},207678:(e,t,i)=>{"use strict";i.d(t,{breakpoints:()=>r,mobileFirstBreakpoints:()=>n,mobileFirstLegacyBreakpoints:()=>s})
;const r={desktop:1/0,desktopHd:1919,phone:767,"phone-vertical":479,tablet:1019},n={base:0,"media-mf-phone-vertical":320,"media-mf-phone-landscape":568,"media-mf-tablet-vertical":768,"media-mf-tablet-landscape":1024,"media-mf-laptop":1280,"media-mf-desktop-medium":1440,"media-mf-desktop-large":1920,"media-mf-desktop-extra-large":2560},s={"media-mf-legacy-phone-vertical":330,"media-mf-legacy-phone":480,"media-mf-legacy-notebook":1020,"media-mf-legacy-desktop-medium":1480,"media-mf-legacy-desktop":1531}},76107:(e,t,i)=>{"use strict";i.d(t,{getCSSProperty:()=>a,getCSSPropertyNumericValue:()=>l,getContentWidth:()=>s,getScrollbarWidth:()=>r,matchMediaMinMax:()=>n,setStyle:()=>o});const r=(()=>{let e;return()=>{var t;if(void 0===e){const i=document.createElement("div"),r=i.style;r.visibility="hidden",r.width="100px",r.msOverflowStyle="scrollbar",document.body.appendChild(i);const n=i.offsetWidth;i.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",i.appendChild(s);const o=s.offsetWidth;null===(t=i.parentNode)||void 0===t||t.removeChild(i),e=n-o}return e}})();function n(e,t){return t===1/0?window.matchMedia(`(min-width: ${e}px)`):window.matchMedia(`(min-width: ${e}px) and (max-width: ${t}px)`)}function s(e){return l(e,"width")-l(e,"padding-left")-l(e,"padding-right")}function o(e,t,i){null!==e&&e.style.setProperty(t,i)}function a(e,t){return getComputedStyle(e,null).getPropertyValue(t)}function l(e,t){return parseInt(a(e,t))}},850775:(e,t,i)=>{"use strict";i.d(t,{mediaState:()=>c});var r=i(685459),n=i.n(r),s=i(49336),o=i(207678),a=i(76107);class l extends(n()){constructor(){super(),this.width=0,this.height=0,this.device=null,this.breakpoints=o.breakpoints,this._checkDevice(),window.addEventListener("resize",this._checkDevice),Object.entries(o.breakpoints).sort((([e,t],[i,r])=>t-r)).forEach((([e,t],i,r)=>{let n;if(0!==i){const[,e]=r[i-1];n=e+1}else n=0;const s=(0,a.matchMediaMinMax)(n,t);s.matches&&this._setNewDevice(e),s.addListener((t=>{t.matches&&(this._checkDevice(),this._setNewDevice(e))}))})),(0,s.whenDocumentReady)(this._checkDevice.bind(this)),this.isPhoneSizeDevice.bind(this)}isPhoneSizeDevice(){return"phone"===this.device||"phone-vertical"===this.device}_checkDevice(){this.width=window.innerWidth,this.height=window.innerHeight}_setNewDevice(e){const t=this.device;this.device=e,this.trigger("changeDevice",[e,t])}}const c=new l},887357:(e,t,i)=>{"use strict";var r,n;i.d(t,{NewsItemPermission:()=>r,NewsWidgetPlacement:()=>n}),function(e){e.Headline="headline",e.Preview="preview",e.Provider="provider"}(r||(r={})),function(e){e.WidgetBar="widgetbar",e.Main="main",e.Chart="chart"}(n||(n={}))},975774:(e,t,i)=>{"use strict";i.d(t,{loadThemeOnChartInitialization:()=>s});var r=i(308721),n=i(919346);function s(e){const t=(0,r.getCurrentTheme)().name,i=(0,n.getThemeNameIfStdTheme)((0,r.extractThemeFromModel)(e.activeChartWidget.value().model()));null!==i&&i!==t&&(0,r.loadTheme)(e,{themeName:t,standardTheme:!0,noUndo:!0})}},39654:(e,t,i)=>{"use strict";i.r(t),i.d(t,{
getIsoLanguageCodeFromLanguage:()=>n});const r={ar_AE:"ar",br:"pt",de_DE:"de",ca_ES:"ca",he_IL:"he",id_ID:"id",in:"en",kr:"ko",ms_MY:"ms",sv_SE:"sv",th_TH:"th",uk:"en",vi_VN:"vi",zh_CN:"zh-Hans",zh_TW:"zh-Hant",zh:"zh-Hans",hu_HU:"hu-HU"};function n(e){return r[e]||e}},600225:(e,t,i)=>{"use strict";i.d(t,{IndicatorsPreloader:()=>p});var r=i(516684),n=i(566119),s=i(604061),o=i(251687),a=i(444372),l=i(304328),c=i(650151);async function d(){const[e,t]=await Promise.all([(0,r.requestFundamentalScripts)(),(0,l.getFinancialsDataV2)()]);return i=>{if(!i)return{};const r=(0,l.filterHiddenItems)(t),n=function(e,t){const i={};e.forEach((e=>{const t=(0,l.getIdWithoutPeriod)(e.id);t&&!i[t]&&(i[t]={...e,nestingLevel:-1,idWithoutPeriod:t,parentIdWithoutPeriod:(0,l.getIdWithoutPeriod)(e.parent),periodData:[],shortTitle:""})})),t.forEach((e=>{if(!e.extra.fund_id)return;const t=(0,l.getIdWithoutPeriod)(e.extra.fund_id),r=i[(0,c.ensureDefined)(t)];if(!r)return;const n={period:e.extra.financialPeriod,scriptIdPart:e.scriptIdPart,scriptName:e.scriptName,version:e.version};r.shortTitle=e.extra.shortDescription,r.tags=e.extra.tags,r.periodData.push(n)}));const r=Object.values(i),n=(e,t)=>e.period&&t.period?e.period.localeCompare(t.period):0;return r.forEach((e=>{e.periodData.length>1&&e.periodData.sort(n)})),r}((0,l.filterByViewMode)(r,i),e),s=function(e){const t=[...e].map((e=>{var t;if(null===(t=e.children)||void 0===t?void 0:t.length){const t=(0,l.flattenTree)(e.children);return{...e,children:t}}return e}));return(0,l.splitByCategory)(t)}(function(e){const t=(0,l.toTree)(e);return(0,l.sortByOrdinal)(t)}(n));return function(e){const t={};return Object.keys(e).forEach((i=>{const r=[];e[i].forEach((e=>{const t=u([e])[0];if(t)if(t.children){const e=u(t.children).map((e=>h(e,!0)));r.push(h(t),...e)}else r.push(h(t))})),t[i]=r})),t}(s)}}function u(e){const t=e.filter((e=>void 0===e.indicatorVisible||e.indicatorVisible));return t.filter((e=>e.periodData.length>0))}function h(e,t=!1){const{id:r,name:n,shortTitle:s,idWithoutPeriod:o,periodData:l,tags:c}=e;return{id:r,shortTitle:s,periodData:l,tags:c,name:a.t(n,{context:"study"},i(168716)),solutionId:g(o),isNested:t}}const _=i(384898);function g(e){return _[e]}var m=i(867778);class p{getIndicatorPromises(){var e,t,i,a,l,c,u,h,_;const g=(null===(e=this._initIndicatorsPromises)||void 0===e?void 0:e.javaStudiesPromise)||(0,s.requestBuiltInJavaStudies)(),m=(null===(t=this._initIndicatorsPromises)||void 0===t?void 0:t.standardScriptsPromise)||(0,n.requestBuiltinScripts)(),p=(null===(i=this._initIndicatorsPromises)||void 0===i?void 0:i.candlestickScriptsPromise)||(0,r.requestCandlestickScripts)(),f=(null===(a=this._initIndicatorsPromises)||void 0===a?void 0:a.publicPineStudiesPromise)||(0,s.fetchPublicPineStudies)((0,s.createPublicStudiesRequestParams)("top")),v=(null===(l=this._initIndicatorsPromises)||void 0===l?void 0:l.trendingStudiesPromise)||(0,s.fetchPublicPineStudies)((0,
s.createPublicStudiesRequestParams)("trending")),b=(null===(c=this._initIndicatorsPromises)||void 0===c?void 0:c.editorsPicksStudiesPromise)||(0,s.fetchEditorsPicksStudies)(),y=null===(u=this._initIndicatorsPromises)||void 0===u?void 0:u.addonsPromise,S=(null===(h=this._initIndicatorsPromises)||void 0===h?void 0:h.pinePermissionsPromise)||o.PinePerm.listScripts(),w=(null===(_=this._initIndicatorsPromises)||void 0===_?void 0:_.financialsPromise)||d(),C=this._getInviteOnlyScriptsPromise(S),P=(0,n.requestUserScripts)();return this._initIndicatorsPromises={javaStudiesPromise:g,userScriptsPromise:P,standardScriptsPromise:m,candlestickScriptsPromise:p,publicPineStudiesPromise:f,trendingStudiesPromise:v,addonsPromise:y,pinePermissionsPromise:S,editorsPicksStudiesPromise:b,financialsPromise:w,inviteOnlyScriptsPromise:C},this._initIndicatorsPromises}async _getInviteOnlyScriptsPromise(e){try{const t=await e;return t?function(e){if(!e||!e.done)return e;const t=e;return new Promise(((e,i)=>{t.done((t=>{e(t)})).fail((e=>{i(e)}))}))}((0,m.info)(t)):Promise.resolve([])}catch(e){return Promise.resolve([])}}}},604061:(e,t,i)=>{"use strict";i.d(t,{createPublicStudiesRequestParams:()=>l,fetchEditorsPicksStudies:()=>o,fetchLoadMorePublicStudies:()=>a,fetchPublicPineStudies:()=>s,requestBuiltInJavaStudies:()=>c});var r=i(120780),n=i(347710);async function s(e){return(await(0,r.fetch)(`/pubscripts-library/?${e}`)).json()}async function o(){return(await(0,r.fetch)("/pubscripts-library/editors-picks/")).json()}async function a(e){return(await(0,r.fetch)(e)).json()}function l(e){const t={offset:0,count:20,type:0,sort:e};return new URLSearchParams(Object.entries(t)).toString()}function c(){return(0,n.studyMetaInfoRepository)().findAllJavaStudies()}},40541:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_CATEGORY_SETTINGS:()=>r,HISTORIC_VALUES_POSTFIX:()=>n,PERIOD_POSTFIXES:()=>s});const r={"income statements":{defaultItems:["total_revenue","gross_profit","oper_income","pretax_income","net_income"],additionalField:1,displayGroups:!1},"balance sheet":{defaultItems:["total_assets","total_liabilities"],additionalField:0,displayGroups:!1},"cash flow":{defaultItems:["cash_f_operating_activities","cash_f_investing_activities","cash_f_financing_activities"],additionalField:1,displayGroups:!1},statistics:{defaultItems:["price_earnings","price_cash_flow"],additionalField:2,displayGroups:!0},dividends:{defaultItems:["dps_common_stock_prim_issue","dividends_yield"],additionalField:0,displayGroups:!1},earnings:{defaultItems:[],additionalField:0,displayGroups:!1},revenue:{defaultItems:[],additionalField:0,displayGroups:!1}},n="_h",s=["_fy","_fq","_fh","_ttm"]},304328:(e,t,i)=>{"use strict";i.d(t,{addOrRemoveIdFromSet:()=>R,createSortedCategoryList:()=>C,filterByViewMode:()=>v,filterCategoryList:()=>P,filterConfig:()=>m,filterHiddenItems:()=>f,findParentsSet:()=>M,flattenTree:()=>S,getAdditionalFieldPostfix:()=>N,getAdditionalFieldValue:()=>F,getFieldsByPeriodData:()=>U,getFinancialsDataV2:()=>h,getIdWithoutPeriod:()=>O,getIndicatorPagePath:()=>B,
getItemValueFromQuotes:()=>j,getItemValuesFromQuotes:()=>I,getOtherAvailablePeriod:()=>V,getPercentChange:()=>x,isCategoryId:()=>g,isEarningsValuesKind:()=>H,isPeriodAvailable:()=>$,isStatementsCategoryId:()=>_,prepareEarningsData:()=>L,sortByOrdinal:()=>y,splitByCategory:()=>w,toTree:()=>b,translateConfig:()=>p,valueFormatter:()=>W});var r=i(650151),n=i(444372),s=i(120780),o=i(503246),a=i(436901),l=i(530254),c=i(610203),d=i(40541),u=i(199687);function h(){return(0,s.fetch)("/financial/fundamentals_config_v2/",{credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json()))}function _(e){return"balance sheet"===e||"income statements"===e||"cash flow"===e}function g(e){return"dividends"===e||"revenue"===e||"statistics"===e||"earnings"===e}function m(e,t){return e.filter((e=>{const i=!e.hidden&&e.financialVisible,r=e.fundViewMode===t;return i&&r}))}function p(e){return e.map((e=>{const{name:t,group:r,...s}=e;return{...s,name:n.t(t,{context:"study"},i(168716)),group:n.t(r,{context:"study"},i(168716))}}))}function f(e){return e.filter((e=>!e.hidden))}function v(e,t){return e.filter((e=>e.fundViewMode===t))}function b(e){var t,i;const n=Symbol(),s={},o={},a=[];for(const i of e){const e=(0,r.ensureDefined)(O(i.id)),l=e,c=O(i.parent),d=null!=c?c:n;d===n&&a.push(l);const u=s[l]={...i,nestingLevel:-1,idWithoutPeriod:e,parentIdWithoutPeriod:c,periodData:i.periodData||[],shortTitle:i.shortTitle||""};(o[d]=null!==(t=o[d])&&void 0!==t?t:[]).push(u)}for(const t of e){const e=(0,r.ensureDefined)(O(t.id));s[e].children=o[e],delete o[e]}(0,r.assert)(0===Object.keys(o).length);let l=0;for(;a.length>0&&l<e.length;){l++;const e=s[(0,r.ensureDefined)(a.shift())],t=e.parentIdWithoutPeriod;e.nestingLevel=t?s[t].nestingLevel+1:0,null===(i=e.children)||void 0===i||i.forEach((e=>{a.push(e.idWithoutPeriod)}))}return o[n]}function y(e){const t=[...e];return t.sort(((e,t)=>e.ordinal-t.ordinal)),t.forEach((e=>{e.children&&(e.children=y(e.children))})),t}function S(e,t,i){let r=[];return e.forEach((e=>{if(!e.children||!e.children.length)return void(r=[...r,e]);const n=i?e.children.filter(i):e.children;if(!n.length)return void(r=[...r,{...e,children:void 0}]);if(!!t&&t(e))return void(r=[...r,e]);const s=S(n,t,i);r=[...r,e,...s]})),r}function w(e){const t=[...e],i={dividends:[]};return t.forEach((e=>{const t=e.category.toLowerCase();i[t]?i[t].push(e):i[t]=[e]})),i}function C(e){if(!e.length)return{};const t=w(b(function(e){const t=new Map;for(const i of e){const e=(0,r.ensureDefined)(O(i.id)),n=e&&t.get(e);if(n)(0,r.ensureDefined)(n.periodData).push({period:i.period});else{const n={...i,idWithoutPeriod:(0,r.ensureDefined)(O(i.id)),nestingLevel:-1,periodData:[],shortTitle:""};n.periodData=[{period:i.period}],t.set(e,n)}}return Array.from(t.values())}(e))),i={};return Object.entries(t).forEach((([e,t])=>{i[e]=function(e){const t=y(e),i=new Map;return t.forEach((e=>{const{group:t,ordinal:r}=e,n=i.get(t);(void 0===n||n>r)&&i.set(t,r)})),t.sort(((e,t)=>(0,r.ensureDefined)(i.get(e.group))-(0,
r.ensureDefined)(i.get(t.group))||e.ordinal-t.ordinal)),t}(t)})),i}function P(e,t,i){function r(e,t){const{children:n,...s}=e;if(n){const e=n.map((e=>r(e,t))).filter(Boolean);if(e.length)return{...s,children:e}}return e.name.toLowerCase().includes(t.toLowerCase())&&e.periodData.find((e=>e.period===i))?{...s,children:void 0}:null}return e.map((e=>r(e,t))).filter(Boolean)}function I(e,t,i=0,r,n,s=a.DEFAULT_MAX_DATA_ARRAY_LENGTH){const o=`${O(e)}_${r.toLowerCase()}`;let l=new Array(s).fill(null),u=[];if(t){const e=t[o+d.HISTORIC_VALUES_POSTFIX];if(e){const t=function(e,t,i,r){const n=e.length>i,s=e.slice(0,i).reverse(),o=[];if(r){const i=e.slice(0,e.length).reverse();i.forEach(((e,r)=>{if(0===r&&n)return;if(0===r)return void o.push(NaN);let s;if(t!==c.PeriodId.Year){const n=r-(t===c.PeriodId.Quarter?4:2);s=i[n]?x(Number(i[n]),Number(e)):NaN}else s=x(Number(i[r-1]),Number(e));o.push(s)}))}return{values:s,changes:o.slice(-i)}}(e,r,s,n);l=t.values,t.changes&&(u=t.changes)}if(0!==i&&3!==i){const e=t[O(o)+N(i)]||null,r=o.endsWith("_fq"),s=1===i;return{values:l,changes:n?u:void 0,additional:e,additionalChange:!n||s&&r?void 0:x(Number(l[l.length-1]),Number(e))}}}return{values:l,changes:n?u:void 0,additional:0===i?void 0:null}}function E(e){return null===e.Estimate&&null===e.Actual}function A(e,t){const i=e.length-1;let r=t?i:0;const n=t?[...e].reverse().entries():e.entries();for(const[e,t]of n)if(!E(t)){r=e;break}return t?i-r:r}function T(e){if(!e||!e.length)return{estimateStartIndex:-1,items:[]};if(!function(e){return e.every((e=>null!==e.FiscalPeriod))}(e)||e.every(E))return{estimateStartIndex:-1,items:[]};const t=[...e].sort(((e,t)=>e.FiscalPeriod>t.FiscalPeriod?1:-1));let i=null;for(let e=t.length-1;e--;e>=0){if(t[e].IsReported){i=e;break}}const r=null!==i?i+1:A(t,!0)-4,n=Math.max(0,r-8),s=Math.min(t.length,r+4),o=t.slice(n,s),a=A(o,!1);return{estimateStartIndex:r<8?r-a:8-a,items:o.slice(a)}}function D(e,t){if(e.reported.push(t.Actual),e.estimate.push(t.Estimate),null!==t.Actual&&null!==t.Estimate){const i=(t.Actual-t.Estimate)/Math.abs(t.Estimate)*100;e.surprise.push(isFinite(i)?i:null)}else e.surprise.push(null);return e.periods.push(t.FiscalPeriod),e}const k={[c.PeriodId.Year]:"_fy",[c.PeriodId.HalfYear]:"_fh",[c.PeriodId.Quarter]:"_fq"};function L(e,t){if(!e)return null;const i=k[t],r="earnings"+i+d.HISTORIC_VALUES_POSTFIX,n="revenues"+i+d.HISTORIC_VALUES_POSTFIX,{items:s,estimateStartIndex:o}=T(e[r]),a=s.reduce(D,{reported:[],estimate:[],surprise:[],periods:[]}),{items:l}=T(e[n]),c=l.reduce(D,{reported:[],estimate:[],surprise:[],periods:[]}),u=e=>!e.reported.length&&!e.estimate.length;return{earnings:u(a)?null:a,revenues:u(c)?null:c,estimateStartIndex:o}}function x(e,t){if(0===e||e<0&&t>0)return NaN;return Number(((t-e)/Math.abs(e)*100).toFixed(2))}function N(e){switch(e){case 2:return"_current";case 1:return"_ttm"}return""}function O(e){if(e)for(let t=0;t<d.PERIOD_POSTFIXES.length;t++){const i=d.PERIOD_POSTFIXES[t];if(e.endsWith(i))return e.slice(0,-i.length)}return e}function R(e,t){const i=new Set(t)
;return i.has(e)?i.delete(e):i.add(e),i}function M(e,t){let i=new Set;const r=Symbol();for(let n=0;n<e.length;n++){const{idWithoutPeriod:s,parentIdWithoutPeriod:o=r,children:a}=e[n];if(null==a?void 0:a.length){const e=M(a,t);i=new Set([...Array.from(i),...Array.from(e)])}(t.has(s)||i.size>0)&&o!==r&&i.add(o)}return i}function F(e){switch(e){case 2:return n.t(null,void 0,i(349614));case 1:return n.t(null,void 0,i(794236));case 3:return"";case 0:return}}function W(e){return"string"==typeof e?e:null===e?"â€”":(0,l.format)(e,"numbers")}function B(e,t){const i=e.toLowerCase();if(!_(i)&&"statistics"!==i)throw new Error("Bad item category id");return`${o.pathsByCategoryId[i]}${t.replace(/_/g,"-")}/`}function V(e,t){const i=(0,u.PERIODS)(t);return e&&$(e,t)?(0,r.ensureDefined)(i.find((t=>t.id!==e))).id:(0,u.DEFAULT_PERIOD)(t)}function $(e,t){return(0,u.PERIODS)(t).some((t=>t.id===e))}function H(e){return["reported","estimate","surprise"].includes(e)}function U(e,t,i){const r={[c.PeriodId.Year]:[],[c.PeriodId.Quarter]:[],[c.PeriodId.HalfYear]:[]};return Object.keys(r).forEach((n=>{t.forEach((t=>{const s=j(t,e,n,i);r[n].push(s)}))})),r}function j(e,t,i,r){const n=`${O(e)}_${i.toLowerCase()}`;return r?t[n+d.HISTORIC_VALUES_POSTFIX]:t[n]}},862995:e=>{e.exports={"css-value-header-toolbar-height":"38px"}},275046:e=>{e.exports={"top-left-button-height":"38px","top-left-button-width":"52px"}},44132:e=>{e.exports={"top-left-button-height":"38px","top-left-button-width":"52px",topLeftButton:"topLeftButton-hCWTCWBf",stub:"stub-hCWTCWBf"}},986738:(e,t,i)=>{"use strict";i.d(t,{ChartSession:()=>o});var r=i(707957),n=i(558603),s=i(389137);class o extends n.Session{constructor(e,t=!1){super(e,"cs",!1),this._sessionDisabled=!1,this._handler=null,this._criticalError=new r.Delegate,this._symbolResolveMap=new Map,this._lastSymbolResolveInfoMap=new Map,this._disableStatistics=t}destroy(){this._criticalError.destroy(),this._handler=null,this._symbolResolveMap.clear(),super.destroy()}serverTime(){return this._getChartApi().serverTime()}switchTimezone(e){return this._getChartApi().switchTimezone(this.sessionId(),e)}defaultResolutions(){return this._getChartApi().defaultResolutions()}availableCurrencies(){return this._getChartApi().availableCurrencies()}availableUnits(){return this._getChartApi().availableUnits()}availablePriceSources(e){return this._getChartApi().availablePriceSources(e)}resolveSymbol(e,t,i){if(this._symbolResolveMap.has(t)){const[e,r]=this._symbolResolveMap.get(t);return Array.isArray(r)?r.push(i):r.then(i),e}{const r=[i];return this._getChartApi().resolveSymbol(this.sessionId(),e,t,(i=>{if("symbol_error"===i.method)this._symbolResolveMap.delete(t);else{this._symbolResolveMap.set(t,[e,Promise.resolve(i)]);const[,r]=i.params,n={pro_name:r.pro_name,ticker:r.ticker};this._lastSymbolResolveInfoMap.set(t,n),n.pro_name&&this._lastSymbolResolveInfoMap.set(n.pro_name,n),r.full_name&&this._lastSymbolResolveInfoMap.set(r.full_name,n),n.ticker&&this._lastSymbolResolveInfoMap.set(n.ticker,n)}r.forEach((e=>e(i)))})),
this._symbolResolveMap.set(t,[e,r]),e}}requestFirstBarTime(e,t,i){return this._getChartApi().requestFirstBarTime(this.sessionId(),e,t,i)}lastSymbolResolveInfo(e){var t;return null!==(t=this._lastSymbolResolveInfoMap.get(e))&&void 0!==t?t:null}createSeries(e,t,i,r,n,s,o){return this._getChartApi().createSeries(this.sessionId(),e,t,i,r,n,s,o)}modifySeries(e,t,i,r,n,s,o){return this._getChartApi().modifySeries(this.sessionId(),e,t,i,r,n,s,o)}removeSeries(e){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),e)}requestMoreData(e,t,i){return"number"==typeof e?this._getChartApi().requestMoreData(this.sessionId(),e):this._getChartApi().requestMoreData(this.sessionId(),e,t,i)}requestMoreTickmarks(e,t,i){return(0,s.isNumber)(e)?this._getChartApi().requestMoreTickmarks(this.sessionId(),e):this._getChartApi().requestMoreTickmarks(this.sessionId(),e,t,i)}canCreateStudy(e){return this._getChartApi().canCreateStudy(e)}getStudyCounter(){return this._getChartApi().getStudyCounter()}createStudy(e,t,i,r,n,s,o){return this._getChartApi().createStudy(this.sessionId(),e,t,i,r,n,s,o)}rebindStudy(e,t,i,r,n,s,o){return this._getChartApi().rebindStudy(this.sessionId(),e,t,i,r,n,s,o)}modifyStudy(e,t,i,r,n){return this._getChartApi().modifyStudy(this.sessionId(),e,t,i,r,n)}removeStudy(e,t){return this._getChartApi().removeStudy(this.sessionId(),e,t)}createPointset(e,t,i,r,n,s){return this._getChartApi().createPointset(this.sessionId(),e,t,i,r,n,s)}modifyPointset(e,t,i,r){return this._getChartApi().modifyPointset(this.sessionId(),e,t,i,r)}removePointset(e){return this._getChartApi().removePointset(this.sessionId(),e)}setVisibleTimeRange(e,t,i,r,n,s){0}criticalError(){return this._criticalError}connect(e=null){null!==e&&(this._handler=e),this._symbolResolveMap.clear(),super.connect()}setHandler(e){this._handler=e}connected(){return this.isConnected().value()&&!this._sessionDisabled}disable(){this._sessionDisabled=!0}chartApi(){return this._getChartApi()}_sendCreateSession(){Object.keys(this).forEach((e=>{/^(s|st|symbol_)\d+$/.test(e)&&delete this[e]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)}_sendRemoveSession(){this._getChartApi().chartDeleteSession(this.sessionId())}_onMessage(e){this._handler&&this._handler(e)}_onCriticalError(e,t){this._criticalError.fire(e,t),super._onCriticalError(e,t)}}},868637:(e,t,i)=>{"use strict";i.d(t,{TOOLBAR_WIDTH_EXPANDED:()=>r});const r=52},852694:(e,t,i)=>{"use strict";i.d(t,{DrawingToolbarBootloader:()=>a});var r=i(618820),n=i(868637),s=i(510013),o=i(477600);class a extends s.ChunkLoader{constructor(e){super(),this._opts=e,r.isDrawingToolbarVisible.value()&&(this._opts.resizerBridge.negotiateWidth(n.TOOLBAR_WIDTH_EXPANDED),this._opts.resizerBridge.container.value().appendChild((0,o.createStubElem)()))}_startLoading(){
return Promise.all([i.e(61637),i.e(22666),i.e(5993),i.e(92191),i.e(9817),i.e(53842),i.e(4015),i.e(66639),i.e(35649),i.e(54690),i.e(47341),i.e(91033),i.e(46036),i.e(36752),i.e(45166),i.e(18182),i.e(24534),i.e(10102),i.e(53979),i.e(71849),i.e(71109),i.e(25820),i.e(50351),i.e(962),i.e(30979),i.e(88586),i.e(91890),i.e(8775),i.e(25826),i.e(86520),i.e(12878)]).then(i.bind(i,540002)).then((e=>new e.DrawingToolbarRenderer(this._opts.resizerBridge.container.value(),{...this._opts})))}}},618820:(e,t,i)=>{"use strict";i.d(t,{isDrawingToolbarVisible:()=>l});var r=i(62802),n=i(77122),s=i(129025);const o=!n.enabled("hide_left_toolbar_by_default"),a=r.getBool("ChartDrawingToolbarWidget.visible",o),l=new s.WatchedValue(a)},707040:(e,t,i)=>{"use strict";i.d(t,{HeaderToolbarBootloader:()=>o});var r=i(205533),n=i(477600),s=i(510013);class o extends s.ChunkLoader{constructor(e,t){super(),this._toolsBootloader=e,this._headerProps=t,this._headerProps.resizerBridge.negotiateHeight(r.HEADER_TOOLBAR_HEIGHT_EXPANDED),this._headerProps.resizerBridge.container.value().appendChild((0,n.createStubElem)())}_startLoading(){return Promise.all([this._toolsBootloader.load(),this._loadHeaderToolbar()]).then((([e,t])=>new t(this._headerProps.resizerBridge.container.value(),{...this._headerProps,tools:e})))}_loadHeaderToolbar(){return Promise.all([i.e(7242),i.e(6237),i.e(962),i.e(86918),i.e(63005)]).then(i.bind(i,917692)).then((e=>e.HeaderToolbarRenderer))}}},205533:(e,t,i)=>{"use strict";i.d(t,{HEADER_TOOLBAR_HEIGHT_COLLAPSED:()=>s,HEADER_TOOLBAR_HEIGHT_EXPANDED:()=>n});var r=i(862995);const n=parseInt(r["css-value-header-toolbar-height"]),s=3},154175:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AutoSaveEnabledService:()=>n});var r=i(699466);class n extends r.CommonJsonStoreService{constructor(e,t){super(e,t,"AUTO_SAVE_ENABLED_CHANGED","Chart.autoSaveEnabled",!0)}}},515105:(e,t,i)=>{"use strict";i.d(t,{FavoriteStudyTemplateService:()=>n});var r=i(699466);class n extends r.CommonJsonStoreService{constructor(e,t){super(e,t,"FAVORITE_STUDY_TEMPLATES_CHANGED","StudyTemplates.quicks",[])}remove(e){this.set(this.get().filter((t=>t!==e)))}}},599950:(e,t,i)=>{"use strict";i.d(t,{TopLeftButtonBootloader:()=>l});var r=i(510013),n=i(275046);const s=parseInt(n["top-left-button-height"]),o=parseInt(n["top-left-button-width"]);var a=i(44132);class l extends r.ChunkLoader{constructor(e){super(),this._props=e,this._props.resizerBridge.negotiateHeight(s),this._props.resizerBridge.negotiateWidth(o),this._props.resizerBridge.container.value().appendChild(function(){const e=document.createElement("div");return e.classList.add(a.topLeftButton,a.stub),e}())}_startLoading(){return this._loadRenderer().then((e=>new e(this._props.resizerBridge.container.value(),this._props)))}_loadRenderer(){
return Promise.all([i.e(18809),i.e(98486),i.e(50044),i.e(78628),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(34465),i.e(32109),i.e(72639),i.e(9817),i.e(69121),i.e(53842),i.e(4015),i.e(92108),i.e(66639),i.e(88194),i.e(13423),i.e(87845),i.e(48986),i.e(68992),i.e(88548),i.e(93502),i.e(54712),i.e(35649),i.e(13152),i.e(36884),i.e(33371),i.e(84281),i.e(54690),i.e(33199),i.e(3436),i.e(542),i.e(58056),i.e(47325),i.e(46036),i.e(49205),i.e(6209),i.e(64534),i.e(8740),i.e(6744),i.e(13821),i.e(27620),i.e(87689),i.e(73628),i.e(15697),i.e(96962),i.e(12494),i.e(73028),i.e(11705),i.e(24139),i.e(78693),i.e(58936),i.e(92175),i.e(28108),i.e(68439),i.e(23718),i.e(72934),i.e(962),i.e(4945),i.e(9437),i.e(45071),i.e(25567),i.e(39059),i.e(8125),i.e(99574),i.e(64675),i.e(39863)]).then(i.bind(i,193395)).then((e=>e.TopLeftButtonRenderer))}}},347129:(e,t,i)=>{"use strict";function r(e){return e.getAll().some((e=>e.isInitialized()))}function n(e,t){const i=e.getAll(),r=()=>{t(),i.forEach((e=>{e.chartWidgetInitialized().unsubscribe(null,r)}))};i.forEach((e=>{e.chartWidgetInitialized().subscribe(null,r,!0)}))}i.d(t,{isAnyChartWidgetInitialized:()=>r,waitAnyChartWidgetInitialized:()=>n})},374682:(e,t,i)=>{"use strict";i.d(t,{createFavoriteDrawingToolbar:()=>a,getFavoriteDrawingToolbarPromise:()=>o});var r=i(205533);let n=null,s=null;function o(){return s}function a(){null===s&&(s=Promise.all([i.e(97362),i.e(22666),i.e(5993),i.e(92191),i.e(53842),i.e(4015),i.e(66639),i.e(93502),i.e(54712),i.e(35649),i.e(30006),i.e(58056),i.e(67080),i.e(99916),i.e(15518),i.e(36956),i.e(98149),i.e(36752),i.e(22333),i.e(15886),i.e(27208),i.e(3982),i.e(71109),i.e(7432),i.e(962),i.e(29594),i.e(91622),i.e(91890),i.e(8775),i.e(92637),i.e(5605),i.e(22306)]).then(i.bind(i,422110)).then((({FavoriteDrawingToolbar:e})=>(n=null!==n?n:new e({left:window.innerWidth/2,top:r.HEADER_TOOLBAR_HEIGHT_EXPANDED+61}),n))))}},986712:(e,t,i)=>{"use strict";i.d(t,{checkAuthBeforeSaveLoad:()=>s});var r=i(77122),n=i(430159);function s(e,t){r.enabled("saveload_requires_authentication")?(0,n.runOrSigninWithFeature)(e,{...t,feature:"savedCharts"}):e()}},448851:(e,t,i)=>{"use strict";i.d(t,{LoadChartService:()=>l});var r=i(77122),n=i(578988),s=i(986712),o=i(111393),a=i(120780);class l extends o.DialogRenderer{constructor(e=null){super(),this._chartWidgetCollection=null,this._promise=null,this._dialog=null,this._subscribe=e=>{this._setVisibility(e)},this._getChartEntry=e=>({id:e.id,url:e.url,title:e.name,symbol:e.short_symbol,interval:e.interval,toolsCount:0,modified:e.modified_iso,favorite:e.favorite,active:()=>this._isActiveChart(e.id),openAction:()=>n.backend.loadChart(e),deleteAction:()=>n.backend.removeChart(e.image_url).then((()=>this._deleteChart(e.id))),favoriteAction:t=>this._changeFavoriteState(t,e.id,e.image_url)}),this._updateFavorites=e=>{var t;null===(t=this._favoriteChartsService)||void 0===t||t.set(e)},this._isActiveChart=e=>null!==this._chartWidgetCollection&&e===this._chartWidgetCollection.metaInfo.id.value(),this._deleteChart=e=>{
this._isActiveChart(e)&&(r.enabled("saveload_storage_customization")?null!==this._chartWidgetCollection&&this._chartWidgetCollection.clearChartMetaInfo():location.href="/chart/"+location.search)},this._chartWidgetCollection=e}showLoadDialog(){(0,s.checkAuthBeforeSaveLoad)(this._showLoadDialog.bind(this),{source:"Load chart",sourceMeta:"Chart"})}show(){this.showLoadDialog()}hide(){var e,t;null===(e=this._dialog)||void 0===e||e.hide(),null===(t=this._dialog)||void 0===t||t.visible().unsubscribe(this._subscribe)}_showLoadDialog(){(r.enabled("saveload_requires_authentication")&&!window.is_authenticated?Promise.resolve([]):n.backend.getCharts()).then((e=>e.map(this._getChartEntry))).then((e=>{const t=this._promise=Promise.all([i.e(22666),i.e(5993),i.e(62253),i.e(32109),i.e(9817),i.e(53842),i.e(4015),i.e(92108),i.e(5145),i.e(38669),i.e(25190),i.e(36747),i.e(40866),i.e(90684),i.e(98149),i.e(36752),i.e(88158),i.e(34483),i.e(3981),i.e(34781),i.e(14807),i.e(89176),i.e(962),i.e(30979),i.e(32066),i.e(745),i.e(12622),i.e(75009)]).then(i.bind(i,67318)).then((i=>{if(this._promise===t){this._dialog&&(this._dialog.hide(),this._dialog.visible().unsubscribe(this._subscribe));const t={charts:e,favoriteChartsService:this._favoriteChartsService,chartWidgetCollection:this._chartWidgetCollection};this._dialog=new i.LoadChartDialogRenderer(t),this._dialog.visible().subscribe(this._subscribe),this._dialog.show()}}))}))}async _changeFavoriteState(e,t,i){const r=Boolean(e[t]);await(0,a.fetch)(`/my-charts/${i}/change-favorite-state/`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({favorite:r})})}}},811020:(e,t,i)=>{"use strict";i.d(t,{SaveChartService:()=>x});var r=i(77122),n=i(129025),s=i(154175),o=i(226722),a=i(62802),l=i(251954),c=i(708706),d=i(986712),u=i(125226);i(586463);const h=r.enabled("atsv2s");var _=i(444372),g=i(120780),m=i(552279),p=i(229534),f=i(503595),v=i(314802);const b=_.t(null,void 0,i(439467)),y=_.t(null,void 0,i(589117)),S=_.t(null,void 0,i(552988));function w(e,t={}){window.runOrSignIn((()=>{(0,f.asyncWindowOpen)(async function(e,t){let i,r;try{r=await(0,g.fetch)(`/charts/${e}/clone/`,{method:"POST",body:JSON.stringify(t),credentials:"include"});const n=r.headers.get("location");if(r.ok&&n)return(0,v.urlWithMobileAppParams)(n);i=(await r.json()).code}catch(e){}"count_limit"===i||"login_required"===i?(0,m.reloginOrGoPro)({feature:"savedChartsLimit"}):r||!1!==navigator.onLine?r&&r.status>=500||"feature_disabled"===i?(0,p.showErrorDialog)({content:y}):(0,p.showErrorDialog)({content:b}):(0,p.showErrorDialog)({content:S});return}(e,t))}),{source:"Clone_chart_layout"})}var C=i(578988),P=i(740254),I=i(833813);async function E(){var e;if(!window.is_authenticated)return!1;if(!r.enabled("saved_charts_count_restriction"))return!0;const t=null===(e=(0,P.getConfig)(I.ProductFeatures.CHART_STORAGE))||void 0===e?void 0:e.limit;if(void 0===t||t<=0)return!1;try{return t>await new Promise(C.backend.getChartsCount)}catch(e){if(403===e.status)return!1;throw e}}var A=i(779923);class T{constructor(e,t,i){
this._visibility=new n.WatchedValue(!1),this._chartWidgetCollection=e,this._doSave=t,this._doLoad=i}hide(){var e;null===(e=this._hide)||void 0===e||e.call(this),this._visibility.setValue(!1)}visible(){return this._visibility.readonly()}_showRenameDialog(e,t,i,r){return(0,A.showRename)({title:this._renameDialogTitle(),text:this._renameDialogText(),maxLength:64,initValue:e,onRename:async e=>{this._renameActionHandler(e,t,i,r)},onClose:()=>this._visibility.setValue(!1)})}_doSaveCurrentLayout(e,t,i,r){const n=this._chartWidgetCollection.metaInfo.name.value();this._chartWidgetCollection.metaInfo.name.setValue(e),this._doSave(t,i,(()=>{this._chartWidgetCollection.metaInfo.name.setValue(n),null==r||r()}))}_doOverwriteExistingLayout(e,t,i,r,n){const s=this._chartWidgetCollection.metaInfo.name.value();this._chartWidgetCollection.metaInfo.id.setValue(e),this._chartWidgetCollection.metaInfo.name.setValue(t),this._doSave(i,r,(()=>{this._chartWidgetCollection.metaInfo.name.setValue(s),null==n||n()}))}}class D extends T{cloneChart(){this._cloneChart().then((()=>this._visibility.setValue(!0)))}show(){(0,d.checkAuthBeforeSaveLoad)((()=>this.cloneChart()),{source:"Clone chart"})}_renameDialogTitle(){return _.t(null,void 0,i(287898))}_renameDialogText(){return _.t(null,void 0,i(724435))+":"}_renameActionHandler({newValue:e,dialogClose:t}){r.enabled("saveload_storage_customization")?this._doCloneCurrentLayout(e):w(this._chartWidgetCollection.metaInfo.uid.value(),{name:e}),t()}async _cloneChart(){let e;await new Promise((e=>{window.runOrSignIn(e,{source:"Clone_chart_layout"})}));try{e=await E()}catch(e){return void(0,p.showErrorDialog)({content:_.t(null,void 0,i(456670))})}e?e&&(this._hide=await this._showRenameDialog(this._getInitialRenameDialogInput())):(0,m.reloginOrGoPro)({feature:"savedChartsLimit"})}_doCloneCurrentLayout(e){const t=this._chartWidgetCollection.metaInfo.name.value();this._chartWidgetCollection.metaInfo.uid.deleteValue(),this._chartWidgetCollection.metaInfo.id.deleteValue(),this._chartWidgetCollection.metaInfo.name.setValue(e),this._doSave(void 0,void 0,(()=>{this._chartWidgetCollection.metaInfo.name.setValue(t)}))}_getInitialRenameDialogInput(){return _.t(null,{context:"ex: AAPL chart copy"},i(416493)).format({title:this._chartWidgetCollection.metaInfo.name.value()})}}class k extends T{show(e,t,i){const r="function"==typeof e?e:void 0;this._saveNewChart(r,t,i).then((()=>this._visibility.setValue(!0)))}_renameDialogTitle(){return _.t(null,void 0,i(110520))}_renameDialogText(){return _.t(null,void 0,i(724435))+":"}_renameActionHandler({newValue:e,dialogClose:t},i,r,n){this._doSaveCurrentLayout(e,i,r,n),t()}async _saveNewChart(e,t,r){let n;try{n=await E()}catch(e){return void(0,p.showErrorDialog)({content:_.t(null,void 0,i(456670))})}if(!n)return void(0,m.reloginOrGoPro)({feature:"savedChartsLimit"});const s=this._chartWidgetCollection.metaInfo.name.value();this._hide=await this._showRenameDialog(s,e,t,r)}}class L extends T{show(){(0,d.checkAuthBeforeSaveLoad)((()=>this._show()),{source:"Rename chart"})}
_renameDialogTitle(){return _.t(null,void 0,i(204142))}_renameDialogText(){return _.t(null,void 0,i(724435))+":"}_renameActionHandler({newValue:e,dialogClose:t}){this._doSaveCurrentLayout(e),t()}async _show(){await this._renameChart(),this._visibility.setValue(!0)}async _renameChart(){const e=this._chartWidgetCollection.metaInfo.name.value();this._hide=await this._showRenameDialog(e)}}class x{constructor(e,t){this._autosaveTimer=null,this._watchedAutoSaveEnabled=new n.WatchedValue,this._toggleAutoSaveEnabledHandler=this._toggleAutoSaveEnabled.bind(this),this._doSave=(e,t,i,r)=>{const n=this._chartWidgetCollection;void 0!==e&&e();const s=this._chartChangesWatcher.changes();this._chartSaver.saveChartSilently((e=>{var i;i=n.metaInfo.uid.value(),"/chart/"===location.pathname&&(location.href="/chart/"+i),void 0!==t&&t(e)}),(()=>{void 0!==i&&i()}),{autoSave:Boolean(r),changes:s})},this._doLoad=()=>C.backend.getCharts(),this._chartWidgetCollection=e,this._chartSaver=t,this._createController=new k(e,this._doSave,this._doLoad),this._renameController=new L(e,this._doSave,this._doLoad),this._saveAsController=new D(e,this._doSave,this._doLoad),this._autoSaveEnabledSetting=new s.AutoSaveEnabledService(o.TVXWindowEvents,a),this._chartSaver.chartSizeLimitExceeded().subscribe(null,(()=>{const e=this._chartWidgetCollection.activeChartWidget.value();Promise.all([i.e(54712),i.e(33371),i.e(63987),i.e(35213),i.e(63830),i.e(1888),i.e(25977),i.e(24863),i.e(11595),i.e(24631),i.e(26820)]).then(i.bind(i,757767)).then((({showSizeLimitExceededDialog:t})=>{t(e)}))})),this._chartChangesWatcher=new c.ChartChangesWatcher(e,t,l),e.saveKeysPressed().subscribe(this,this.saveChartOrShowTitleDialog);{const e=this._autoSaveEnabledSetting.get();e&&this._enableAutoSave(),this._watchedAutoSaveEnabled.setValue(e),this._watchedAutoSaveEnabled.subscribe(this._toggleAutoSaveEnabledHandler),this._autoSaveEnabledSetting.getOnChange().subscribe(this,this._autoSaveEnabledSettingHandler)}}autoSaveEnabled(){return this._watchedAutoSaveEnabled}destroy(){this._watchedAutoSaveEnabled.unsubscribe(),delete this._watchedAutoSaveEnabled,this._autoSaveEnabledSetting.destroy(),delete this._autoSaveEnabledSetting}getCreateController(){return this._createController}getRenameController(){return this._renameController}getSaveAsController(){return this._saveAsController}cloneChart(){this._saveAsController.cloneChart()}saveChartAs(){this._saveAsController.show()}renameChart(){this._renameController.show()}saveNewChart(e,t,i){this._createController.show(e,t,i)}saveExistentChart(e,t,i){this._doSave(e,t,i)}changes(){return this._chartChangesWatcher.changes()}hasChanges(){return 0!==this._chartChangesWatcher.changes()}saveChartOrShowTitleDialog(e,t,i){const r=window.saver.isSaveInProcess(),n=this._chartChangesWatcher.hasChanges(),s=!!this._chartWidgetCollection.metaInfo.id.value();window.is_authenticated&&(r||!n&&s)||(0,d.checkAuthBeforeSaveLoad)((()=>{null!=this._chartWidgetCollection.metaInfo.id.value()?this.saveExistentChart(e,t,i):this.saveNewChart(e,t,i)}),{source:"Save chart",
sourceMeta:"Chart"})}saveToJSON(){return this._chartSaver.saveToJSON()}saveChartSilently(e,t,i){this._chartSaver.saveChartSilently(e,t,i)}setAutoSaveEnabled(e){window.is_authenticated&&window.saver.isSaveInProcess()||(0,d.checkAuthBeforeSaveLoad)((()=>{this._watchedAutoSaveEnabled.setValue(e)}),{source:"AutoSave chart"})}saveChartLineTools(e,t,i,r){return this._chartSaver.saveChartLineTools(e,t,i,r)}_autoSaveEnabledSettingHandler(e){this._watchedAutoSaveEnabled.setValue(e)}_toggleAutoSaveEnabled(e){window.is_authenticated&&(e?this._enableAutoSave():this._disableAutoSave(),this._autoSaveEnabledSetting.set(e,{forceFlush:!0}))}_enableAutoSave(){this._chartChangesWatcher.getOnChange().subscribe(this,this._onStateChanged),this._chartChangesWatcher.hasChanges()&&this._doSave()}_disableAutoSave(){this._stopAutosave(),this._chartChangesWatcher.getOnChange().unsubscribeAll(this)}_onStateChanged(e){e?this._startAutosave():this._stopAutosave()}_startAutosave(){r.enabled("charts_auto_save")&&null===this._autosaveTimer&&(this._autosaveTimer=setTimeout((()=>{this._autosaveTimer=null,window.is_authenticated?this._chartWidgetCollection.metaInfo.id.value()&&this._doSave(void 0,void 0,void 0,!0):this._startAutosave()}),h?2e3:(0,u.isFeatureEnabled)("chart_autosave_2min")?12e4:(0,u.isFeatureEnabled)("chart_autosave_3min")?18e4:(0,u.isFeatureEnabled)("chart_autosave_5min")?3e5:(0,u.isFeatureEnabled)("chart_autosave_7min")?42e4:(0,u.isFeatureEnabled)("chart_autosave_10min")?6e5:(0,u.isFeatureEnabled)("chart_autosave_20min")?12e5:(0,u.isFeatureEnabled)("chart_autosave_30min")?18e5:(0,u.isFeatureEnabled)("chart_autosave_year")?31536e6:6e4))}_stopAutosave(){null!==this._autosaveTimer&&(clearInterval(this._autosaveTimer),this._autosaveTimer=null)}}},580279:(e,t,i)=>{"use strict";i.d(t,{SharingChartService:()=>s});var r=i(129025),n=i(226722);class s{constructor(e,t,i=0){this._requestInProgress=!1,this._watchedSharingEnabled=new r.WatchedValue,this._sharingValueChangedEvent="SharingValueChanged",this._uid=t,this._chartId=i,this._watchedSharingEnabled.setValue(e),n.TVXWindowEvents.on(this._sharingValueChangedEvent,(e=>{const t=JSON.parse(e);this._chartId===t.chartId&&this._watchedSharingEnabled.setValue(t.value)}))}destroy(){this._watchedSharingEnabled.unsubscribe()}sharingEnabled(){return this._watchedSharingEnabled.readonly()}setSharingEnabled(e){window.runOrSignIn((()=>this._setSharing(e)),{source:"Sharing chart"})}toggleSharing(){const e=!this._watchedSharingEnabled.value();return this.setSharingEnabled(e),e}async _setSharing(e){if(!1===this._requestInProgress&&this._watchedSharingEnabled.value()!==e){this._watchedSharingEnabled.setValue(e),this._sendSyncEvent({chartId:this._chartId,value:e});try{this._requestInProgress=!0,await this._saveSharingValue(e)}catch(t){this._watchedSharingEnabled.setValue(!e),this._sendSyncEvent({chartId:this._chartId,value:!e})}finally{this._requestInProgress=!1}}}_sendSyncEvent(e){n.TVXWindowEvents.emit(this._sharingValueChangedEvent,JSON.stringify(e))}_saveSharingValue(e){const t=JSON.stringify({is_private:!e})
;return fetch(`/api/v1/charts/${this._uid}/sharing/`,{headers:new Headers({"Content-Type":"application/json"}),method:"POST",credentials:"same-origin",body:t})}}},653323:(e,t,i)=>{"use strict";i.d(t,{StudyTemplates:()=>u});var r=i(444372),n=i(578988),s=i(345848),o=i(707957),a=i(129025),l=i(779923);const c=(0,i(201089).getLogger)("Platform.StudyTemplates"),d=r.t(null,void 0,i(897065));class u{constructor(e){this._chartWidgetCollection=e.chartWidgetCollection,this._favoriteStudyTemplatesService=e.favoriteStudyTemplatesService,window.loginStateChange.subscribe(null,n.backend.invalidateStudyTemplatesList),this._list=new a.WatchedValue([]),this._onChange=new o.Delegate,this._list.subscribe((()=>this._onChange.fire()))}findRecordByName(e){return this._list.value().find((t=>t.name===e))||null}showSaveAsDialog(){const e=this._chartWidgetCollection.activeChartWidget.value().model();Promise.all([i.e(22666),i.e(62253),i.e(92191),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(92108),i.e(66639),i.e(88194),i.e(93502),i.e(36884),i.e(5145),i.e(38669),i.e(30006),i.e(25190),i.e(43610),i.e(24215),i.e(37149),i.e(962),i.e(745),i.e(45553),i.e(36631)]).then(i.bind(i,200150)).then((t=>{new t.StudyTemplateSaver({controller:e,onSave:e=>{this._list.setValue(e)}}).show()}))}applyTemplate(e){const t=this.findRecordByName(e);null!==t?window.runOrSignIn((()=>{const e=this._chartWidgetCollection.activeChartWidget.value(),i=i=>{(0,s.trackEvent)("GUI","Load Study Template"),e.model().applyStudyTemplate(JSON.parse(i.content),t.name)};void 0!==t.id?t.is_default?n.backend.getStandardStudyTemplateContentById(t.id,i):n.backend.getStudyTemplateContentById(t.id,i):n.backend.getStudyTemplateContent(t.name).then(i)}),{source:"Study templates apply"}):c.logNormal(`Template ${e} not found in cache`)}deleteStudyTemplate(e,t){const i=this.findRecordByName(e);null!==i?this._removeTemplate(i,t):c.logNormal(`Template ${e} not found in cache`)}list(){return this._list.value()}getOnChange(){return this._onChange}refreshStudyTemplateList(e){n.backend.getStudyTemplatesList().then((t=>{this._list.setValue(t),void 0!==e&&e()}))}invalidate(){n.backend.invalidateStudyTemplatesList()}_removeTemplate(e,t){window.runOrSignIn((()=>{(0,l.showConfirm)({text:d.format({name:e.name}),onConfirm:({dialogClose:i})=>new Promise((r=>{const s=()=>{this.refreshStudyTemplateList((()=>{const n=this.list();this._list.setValue(n.filter((t=>t!==e))),this._favoriteStudyTemplatesService&&this._favoriteStudyTemplatesService.remove(e.name),r(),i(),null==t||t()}))};n.backend.invalidateStudyTemplatesList(),void 0!==e.id?n.backend.removeStudyTemplateById(e.id,s):n.backend.removeStudyTemplate(e.name).then(s)}))})}),{source:"Study templates delete"})}}},342395:(e,t,i)=>{"use strict";i.d(t,{makeSnapshotRequest:()=>c,takeChartSnapshot:()=>l,takeChartSnapshotPromise:()=>a});i(586463);var r=i(444372),n=i(77122),s=i(229534),o=i(120780);function a(e,t={}){return new Promise(((i,r)=>{l(e,i,r,t)}))}async function l(e,t,i,r={}){var n;const s=new FormData
;if(void 0!==r.previews)for(const e of r.previews)s.append("previews[]",e);void 0!==r.cme&&s.append("cme",String(r.cme)),void 0!==r.wl&&s.append("wl",String(r.wl)),void 0!==r.onWidget&&s.append("onWidget",String(r.onWidget)),r.isReport&&s.append("isReport",String(r.isReport)),r.asyncSave&&s.append("asyncSave",String(r.asyncSave));const o=window.urlParams;o&&o.locale&&s.append("language",o.locale);const a=e.activeChartWidget.value(),l=a.widgetCustomer();void 0!==l&&s.append("customer",l);let d=a.properties().childs().timezone.value();"exchange"===d&&(d=(null===(n=a.model().mainSeries().symbolInfo())||void 0===n?void 0:n.timezone)||d),s.append("timezone",d),s.append("symbol",a.model().mainSeries().symbol());const u=await e.clientSnapshot({showHeaderMainSymbol:r.showHeaderMainSymbol}),h=await new Promise((e=>u.toBlob(e)));null!==h&&s.append("preparedImage",h),c(s,t,i,r)}async function c(e,t,a,l={}){const c=n.enabled("charting_library_base")?l.snapshotUrl||"https://www.tradingview.com/snapshot/":"/snapshot/";try{const n=await(0,o.fetch)(c,{body:e,method:"POST",credentials:"same-origin"}),d=await n.text();if(n.ok)t(d);else{if("suspicious_chart_snapshots_error"===d){const e=r.t(null,void 0,i(347362)).format({start_link:'<a class="tv-dialog__link js-send-report-link" href="#" data-issue-type="other">',end_link:"</a>"});l.onInvalidSnapshotImage&&l.onInvalidSnapshotImage();return(0,s.createErrorDialog)({title:r.t(null,void 0,i(567137)),content:e,btnType:"danger"}).then((e=>{e.on("afterOpen",(()=>{i.e(1484).then(i.bind(i,601042)).then((({bugDialogCreationHandler:t})=>{t(),e.$el.find(".js-send-report-link").click((()=>{e.close()}))}))})),e.open()}))}a()}}catch(e){a()}}},803374:(e,t,i)=>{"use strict";var r;i.d(t,{TradingPage:()=>r,maxPanelWidth:()=>n,minPanelWidth:()=>s,panelHeight:()=>o}),function(e){e.DOMPanel="domPanel",e.OrderPanel="orderPanel"}(r||(r={}));const n=400,s=315,o=451},866193:(e,t,i)=>{"use strict";i.d(t,{settingsKeys:()=>r});const r={ACTIVE_BROKER:"trading.active_broker",PROPERTIES:"trading.chart.proterty",PROFIT_VIEW_TYPE:"trading.dom.profitViewType",ORDER_WIDGET_MODE:"trading.orderWidgetMode.",DOM_DURATION:"trading.domDuration.",TRADING_PANEL_OPENED:"trading.tradingPanelOpened",TRADING_PANEL_ACTIVE_PAGE:"trading.tradingPanelActivePage",PANEL_WIDTH:"trading.panelWidth",PANEL_HEIGHT:"trading.panelHeight",ORDER_PANEL_SETTINGS:"trading.orderPanelSettings",FAVORITE_BROKERS:"trading.panelFavorite",SHOW_TOOLTIP_FOR_SELECT_BROKER:"trading.showTooltipForSelectBroker",SHOW_TOOLTIP_FOR_TRADE_BUTTON:"trading.showTooltipForTradeButton",SHOW_TOOLTIP_FOR_ORDER_SIZE_CALCULATOR:"trading.showTooltipForOrderSizeCalculator",LOGIN_COUNTER:"trading.brokerLogInCounter",LOGOUT_COUNTER:"trading.brokerLogOutCounter",DISABLED_CONFIRMATIONS:"trading.disabledConfirmations",MOVE_TRADED_SOURCE_WITH_SHIFT:"trading.chart.moveWithShift",REALTIME_DATA_ACCEPTED:"trading.realTimeDataAccepted"}},551775:(e,t,i)=>{"use strict";i.d(t,{customFormatters:()=>r});const r={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,
priceFormatterFactory:null,studyFormatterFactory:null}},958067:(e,t,i)=>{"use strict";i.d(t,{availableDateFormats:()=>v,dateFormatFunctions:()=>p,defaultDateFormat:()=>b,getDateFormatWithWeekday:()=>f,monthFormatFunction:()=>m,months:()=>o});var r=i(444372),n=i(39654),s=i(702053);const o={1:()=>r.t(null,void 0,i(795425)),2:()=>r.t(null,void 0,i(835050)),3:()=>r.t(null,void 0,i(651369)),4:()=>r.t(null,void 0,i(442762)),5:()=>r.t(null,{context:"short"},i(227991)),6:()=>r.t(null,void 0,i(715224)),7:()=>r.t(null,void 0,i(6215)),8:()=>r.t(null,void 0,i(38465)),9:()=>r.t(null,void 0,i(757902)),10:()=>r.t(null,void 0,i(73546)),11:()=>r.t(null,void 0,i(671230)),12:()=>r.t(null,void 0,i(92203))},a=(e,t)=>(t?e.getMonth():e.getUTCMonth())+1,l=(e,t)=>t?e.getFullYear():e.getUTCFullYear(),c=e=>e.toLocaleDateString(window.language?(0,n.getIsoLanguageCodeFromLanguage)(window.language):void 0,{weekday:"short",timeZone:"UTC"}),d=(e,t)=>(0,s.numberToStringWithLeadingZero)(((e,t)=>t?e.getDate():e.getUTCDate())(e,t),2),u=(e,t)=>o[a(e,t)](),h=(e,t)=>(0,s.numberToStringWithLeadingZero)(a(e,t),2),_=(e,t)=>(0,s.numberToStringWithLeadingZero)(l(e,t)%100,2),g=(e,t)=>(0,s.numberToStringWithLeadingZero)(l(e,t),4),m=(e,t)=>u(e,t),p={"dd MMM 'yy":(e,t)=>`${d(e,t)} ${u(e,t)} '${_(e,t)}`,"MMM 'yy":(e,t)=>`${u(e,t)} '${_(e,t)}`,"MMM dd, yyyy":(e,t)=>`${u(e,t)} ${d(e,t)}, ${g(e,t)}`,"MMM yyyy":(e,t)=>`${u(e,t)} ${g(e,t)}`,"MMM dd":(e,t)=>`${u(e,t)} ${d(e,t)}`,"dd MMM":(e,t)=>`${d(e,t)} ${u(e,t)}`,"yyyy-MM-dd":(e,t)=>`${g(e,t)}-${h(e,t)}-${d(e,t)}`,"yy-MM-dd":(e,t)=>`${_(e,t)}-${h(e,t)}-${d(e,t)}`,"yy/MM/dd":(e,t)=>`${_(e,t)}/${h(e,t)}/${d(e,t)}`,"yyyy/MM/dd":(e,t)=>`${g(e,t)}/${h(e,t)}/${d(e,t)}`,"dd-MM-yyyy":(e,t)=>`${d(e,t)}-${h(e,t)}-${g(e,t)}`,"dd-MM-yy":(e,t)=>`${d(e,t)}-${h(e,t)}-${_(e,t)}`,"dd/MM/yy":(e,t)=>`${d(e,t)}/${h(e,t)}/${_(e,t)}`,"dd/MM/yyyy":(e,t)=>`${d(e,t)}/${h(e,t)}/${g(e,t)}`,"MM/dd/yy":(e,t)=>`${h(e,t)}/${d(e,t)}/${_(e,t)}`,"MM/dd/yyyy":(e,t)=>`${h(e,t)}/${d(e,t)}/${g(e,t)}`};function f(e){return"ja"===window.language?(t,i)=>`${p[e](t,i)} (${c(t)})`:(t,i)=>`${c(t)} ${p[e](t,i)}`}const v=Object.keys(p),b=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},157954:(e,t,i)=>{"use strict";i.d(t,{DateFormatter:()=>s});var r=i(551775),n=i(958067);class s{constructor(e="yyyy-MM-dd",t=!1){this._dateFormatFunc=t?(0,n.getDateFormatWithWeekday)(e):n.dateFormatFunctions[e]}format(e){return r.customFormatters&&r.customFormatters.dateFormatter?r.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!1)}formatLocal(e){return r.customFormatters.dateFormatter?r.customFormatters.dateFormatter.formatLocal?r.customFormatters.dateFormatter.formatLocal(e):r.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!0)}}},714688:(e,t,i)=>{"use strict";i.d(t,{DateTimeFormatter:()=>o});var r=i(716714),n=i(157954);const s={dateFormat:"yyyy-MM-dd",withWeekday:!1,timeFormat:r.hourMinuteSecondFormat,dateTimeSeparator:" "};class o{constructor(e={}){const t=Object.assign({},s,e)
;this._dateFormatter=new n.DateFormatter(t.dateFormat,t.withWeekday),this._timeFormatter=new r.TimeFormatter(t.timeFormat),this._separator=t.dateTimeSeparator}format(e){return`${this._dateFormatter.format(e)}${this._separator}${this._timeFormatter.format(e)}`}formatLocal(e){return`${this._dateFormatter.formatLocal(e)}${this._separator}${this._timeFormatter.formatLocal(e)}`}}},716714:(e,t,i)=>{"use strict";i.d(t,{TimeFormatter:()=>h,hourMinuteFormat:()=>l,hourMinuteNonZeroSecondFormat:()=>o,hourMinuteSecondFormat:()=>s,hourMinuteSecondMillisecFormat:()=>a,twelveHourMinuteFormat:()=>u,twelveHourMinuteNonZeroSecondFormat:()=>d,twelveHourMinuteSecondFormat:()=>c});var r=i(551775),n=i(702053);const s="%h:%m:%s",o="%h:%m:%s+",a="%h:%m:%s.%ss+",l="%h:%m",c="%h:%m:%s %ampm",d="%h:%m:%s+ %ampm",u="%h:%m %ampm";class h{constructor(e){this._isTwelveHoursFormat=!1,this._valuesAndDelimeters=[];const t=e||s,i=new RegExp("%h|%m|%s\\+|%ss\\+|%ss|%ampm|%s","g");let r=i.exec(t),n=0;for(;null!==r;){const e=r[0];"%ampm"===e&&(this._isTwelveHoursFormat=!0);const s=t.substring(n,r.index);""!==s&&this._valuesAndDelimeters.push(s),this._valuesAndDelimeters.push(e),n=r.index+e.length,r=i.exec(t)}}format(e){return r.customFormatters.timeFormatter?r.customFormatters.timeFormatter.format(e):this._formatTime(e,!1)}formatLocal(e){return r.customFormatters.timeFormatter?r.customFormatters.timeFormatter.formatLocal?r.customFormatters.timeFormatter.formatLocal(e):r.customFormatters.timeFormatter.format(e):this._formatTime(e,!0)}_formatTime(e,t){let i=t?e.getHours():e.getUTCHours();const r=t?e.getMinutes():e.getUTCMinutes(),s=t?e.getSeconds():e.getUTCSeconds(),o=t?e.getMilliseconds():e.getUTCMilliseconds();let a="";this._isTwelveHoursFormat&&(a=i>=12?"PM":"AM",i%=12,i=i||12);let l="",c=!1;for(let e=this._valuesAndDelimeters.length-1;e>=0;e--){const t=this._valuesAndDelimeters[e];let d;switch(t){case"%h":d=(0,n.numberToStringWithLeadingZero)(i,2);break;case"%m":d=(0,n.numberToStringWithLeadingZero)(r,2);break;case"%s+":0!==s?d=(0,n.numberToStringWithLeadingZero)(s,2):(d="",c=!0);break;case"%s":d=(0,n.numberToStringWithLeadingZero)(s,2);break;case"%ss":d=(0,n.numberToStringWithLeadingZero)(o,3);break;case"%ss+":0!==o?d=(0,n.numberToStringWithLeadingZero)(o,3):(d="",c=!0);break;case"%ampm":d=a;break;default:if(c){c=!1;continue}d=t}l=d+l}return l}}},48731:(e,t,i)=>{"use strict";i.d(t,{latestUpdatesAvailableOnDevice:()=>o});var r,n=i(314802),s=i(638456);const o={news:!((0,n.isOnMobileAppPage)("old")||s.CheckMobile.iOS()&&"14"===(null===(r=navigator.userAgent.match(/(Version\/|iPhone OS |iPad; CPU OS )(\d+)/))||void 0===r?void 0:r[2])),minds:!(0,n.isOnMobileAppPage)("any")&&!s.CheckMobile.any()}},251687:(e,t,i)=>{"use strict";i.d(t,{PinePerm:()=>l});i(823127);var r=i(120780),n=i(823127);const s="user__username";function o(e){const t=new FormData;return t.append("pine_id",e.pine_id),t.append("username_recip",e.username_recip),e.expiration&&t.append("expiration",e.expiration),t}class a extends Error{constructor(e,t,i){super(e),this.title=i,this.code=t}}var l
;!function(e){let t;!function(e){e.UserDoesNotHavePermission="user_does_not_have_permission",e.UserIsBanned="user_is_banned",e.Exists="exists"}(t=e.StatusCode||(e.StatusCode={})),e.add=function(e){return window.is_authenticated?(0,r.fetch)("/pine_perm/add/",{body:o(e),credentials:"include",method:"POST"}).then((e=>e.json().then((t=>{const i=t.status;if("exists"===i)throw new a(i,i);if(!e.ok)throw new a(t.detail,t.code,t.title)})))):Promise.reject()},e.remove=function(e,t){return window.is_authenticated?n.ajax({data:{pine_id:t,username_recip:e},dataType:"json",type:"POST",url:"/pine_perm/remove/"}):n.Deferred().reject()},e.listUsers=function(e){const{pineId:t,next:i,prev:r,username:o,orderBy:a=s,limit:l=10}=e;return!window.is_authenticated||r&&!i?n.Deferred().reject():n.ajax({data:{pine_id:t,username:o},dataType:"json",type:"POST",url:i||r?`${i}`:`/pine_perm/list_users/?limit=${l}&order_by=${a}`})},e.listScripts=function(){return window.is_authenticated?n.ajax({dataType:"json",type:"POST",url:"/pine_perm/list_scripts/"}):n.Deferred().reject()},e.modifyUserExpiration=function(e){return window.is_authenticated?(0,r.fetch)("/pine_perm/modify_user_expiration/",{body:o(e),credentials:"include",method:"POST"}).then((e=>{if(!e.ok)return e.json().then((e=>{throw Error(e.detail)}))})):Promise.reject()},e.numberOfUsersWithAccess=function(e){return window.is_authenticated?(0,r.fetch)(`/pine_perm/list_users/?pine_id=${e}`,{method:"GET"}).then((e=>e.ok?e.json():e.json().then((e=>{throw new a(e.detail)})))):Promise.reject()}}(l||(l={}))},555405:(e,t,i)=>{"use strict";i.d(t,{ScriptUpdater:()=>p});var r=i(650151),n=i(444372),s=i(809796),o=i(854798),a=i(62745);const l={asObject:!0,onlyAtomValues:!0,valuesAsIsFromProperties:!0,skipHiddenInputs:!0,doNotSkipHiddenWithMigrate:!0,skipBooleanInputs:!1,skipTextareaInputs:!1},c=new Map;function d(e,t,i,n){let s=function(e){const t=e.metaInfo();return{inputsInfoList:t.inputs,inputDefaults:t.defaults.inputs,inputValues:e.inputs(l)}}(e);const o=e.id();0===Object.keys(s.inputValues).length?c.has(o)&&(s=(0,r.ensureDefined)(c.get(o))):c.set(o,s);const d={zorder:e.zorder(),paneId:i.pane.id()};let u;if(i.priceScale&&i.priceScale===e.priceScale()){u=n.model().insertStudyStub("");const t=(0,r.ensureNotNull)(n.paneForSource(e));n.mergeToPane(u,t,!0),n.moveToScale(u,t,(0,r.ensureNotNull)(e.priceScale()),null)}n.removeSource(e,!1);const h=function(e,t,i,r,n){const s=i.inputValues,o=i.inputDefaults,l=t.defaults.inputs,c={};for(const e of t.inputs){if(e.isHidden&&!e.migrate)continue;const t=i.inputsInfoList.find((t=>t.id===e.id));if(void 0===t||t.isHidden&&!t.migrate)continue;const r=s[t.id];if(void 0===r)continue;if(t.type!==e.type)continue;if((o&&o[t.id])===(l&&l[e.id])){if((0,a.isStudyInputOptionsInfo)(e)){if(!(0,a.isStudyInputOptionsInfo)(t))continue;if(-1===e.options.indexOf(r))continue}if("integer"===e.type||"float"===e.type||"price"===e.type||"time"===e.type){if(void 0!==e.max&&r>e.max)continue;if(void 0!==e.min&&r<e.min)continue}c[e.id]=r}}return e.insertStudyWithoutCheck(t,c,r,n).study
}(n,t,s,d,e.id());h.setZorder(d.zorder),c.has(e.id())&&c.set(h.id(),(0,r.ensureDefined)(c.get(e.id()))),t.linkedToSeries||(n.mergeToPane(h,i.pane,!0),null!==i.priceScale?n.moveToScale(h,i.pane,i.priceScale,null):n.detachNoScale(h,i.pane)),u&&n.model().removeSource(u)}var u=i(373017),h=i(389137),_=i(347710);const g=new s.TranslatedString("update {title} script",n.t(null,void 0,i(450728)));function m(e,t,i,r){const n=[],s=t.dataSources();for(let t=s.length-1;t>=0;t--){const a=s[t];if(r&&a.id()!==r)continue;if(!(0,u.isStudy)(a))continue;const l=a.metaInfo();if(!l.pine)continue;if(l.scriptIdPart!==e)continue;const c=o.Version.parse(l.pine.version),d=!i||l.pine.version.toString()!==i.toString();c.minor()>0&&d||n.push(a)}return n}class p{constructor(e){this._chartWidgetCollection=e}onTVScriptLegacyPineProcessed(e){if(!e.scriptMetaInfo)return;if(!e.scriptMetaInfo.scriptIdPart)return;for(let t=this._chartModels().length-1;t>=0;t--){const t=e.scriptMetaInfo;(0,_.studyMetaInfoRepository)().addPineMetaInfo(t)}}onTVScriptModified(e){const{scriptMetaInfo:t,scriptVersionToUpdate:n,isSelfCall:s}=e;if(!t)return;const o=t.scriptIdPart;if(!o)return;const a=this._chartWidgets();for(let e=a.length-1;e>=0;e--){const i=a[e].model(),s=m(o,i,n),l=[];for(let e=0;e<s.length;++e){const t=s[e],n=(0,r.ensureNotNull)(i.paneForSource(t)),o=n.isOverlay(t)?null:t.priceScale();l.push({pane:n,priceScale:o})}const c=t;(0,r.assert)(!(0,h.isAbsent)(c),"Cannot update scripts, because script metaInfo is absent");const u=(0,_.studyMetaInfoRepository)().addPineMetaInfo(c);i.beginUndoMacro(g.format({title:u.shortDescription||u.description||""}));for(let e=l.length-1;e>=0;e--){d(s[e],u,l[e],i)}i.endUndoMacro()}const l=i.c[231383];l&&l.exports.PineEditorFull.onScriptModified(e,!!s)}async onTVScriptDeleted(e){const t=e.scriptIdPart;if(!t)return;let r=null;for(let e=this._chartModels().length;e--&&(r=await(0,_.studyMetaInfoRepository)().findById({type:"pine",pineId:t}),null===r););null!==r&&r.removeDefaults();const n=i.c[231383];n&&n.exports.PineEditorFull.onScriptDeleted(e,!!e.isSelfCall)}onTVScriptRenamed(e){if(!e.scriptIdPart)return;const t=i.c[231383];t&&t.exports.PineEditorFull.onScriptRenamed(e,!!e.isSelfCall)}onScriptOpen(){this._chartWidgets().forEach((e=>{const t=e.paneWidgets();for(let e=t.length;e--;){const i=t[e].statusWidget();null!==i&&i.updateLayout()}}))}_chartModels(){return this._chartWidgets().map((e=>e.model()))}_chartWidgets(){return null===this._chartWidgetCollection?[]:this._chartWidgetCollection.getAll()}}},787630:(e,t,i)=>{"use strict";i.d(t,{SeriesDataSource:()=>w,initialRequestOptionsToNumBars:()=>b,parseJapaneseProjectionBars:()=>C});var r=i(650151),n=i(389137),s=i(919892),o=i(223699),a=i(544421),l=i(459685),c=i(826989),d=i(707957);class u{constructor(){this._created=new d.Delegate,this._modified=new d.Delegate,this._loading=new d.Delegate,this._completed=new d.Delegate,this._error=new d.Delegate,this._symbolError=new d.Delegate,this._symbolResolved=new d.Delegate,this._seriesError=new d.Delegate,
this._symbolNotPermitted=new d.Delegate,this._symbolInvalid=new d.Delegate,this._symbolGroupNotPermitted=new d.Delegate,this._chartTypeNotPermitted=new d.Delegate,this._intradaySpreadNotPermitted=new d.Delegate,this._intradayExchangeNotPermitted=new d.Delegate,this._customIntervalNotPermitted=new d.Delegate,this._secondsIntervalNotPermitted=new d.Delegate,this._ticksIntervalNotPermitted=new d.Delegate,this._tickMarksRangeChanged=new d.Delegate,this._barReceived=new d.Delegate,this._seriesTimeFrame=new d.Delegate,this._dataUpdated=new d.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._ticksIntervalNotPermitted.destroy(),this._tickMarksRangeChanged.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}ticksIntervalNotPermitted(){return this._ticksIntervalNotPermitted}tickMarksRangeChanged(){return this._tickMarksRangeChanged}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),
this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTicksIntervalNotPermitted(){this._ticksIntervalNotPermitted.fire(),this.fireError()}fireTickMarksRangeChanged(e){this._tickMarksRangeChanged.fire(e)}fireBarReceived(e){this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,i,r,n){this._seriesTimeFrame.fire(e,t,i,r,n)}fireDataUpdated(e,t,i,r){this._dataUpdated.fire(e,t,i,r)}}var h=i(201089),_=i(444331),g=i(25e4);const m=(0,h.getLogger)("Chart.SeriesDataSource");var p;!function(e){e[e.Idle=0]="Idle",e[e.AwaitingConnection=1]="AwaitingConnection",e[e.AwaitingFirstDataUpdate=2]="AwaitingFirstDataUpdate",e[e.Active=3]="Active"}(p||(p={}));let f=1;let v=1;function b(e){return e.startDate?e.endDate||e.count?e.endDate?["from_to",e.startDate,e.endDate]:["bar_count",e.startDate,(0,r.ensure)(e.count)]:["from_to",e.startDate]:e.count||300}function y(e){return(0,n.isString)(e.symbol)?e.symbol:e.symbol.symbol}function S(e,t){(0,n.isString)(e.symbol)?e.symbol=t:e.symbol.symbol=t}class w{constructor(e,t,i,r){this._extSymbol=null,this._lastResolvedSymbol="",this._createSeriesOverriddenParams=0,this._instanceId=null,this._symbolInstanceId=null,this._resolution=null,this._timeFrame=null,this._data=new a.SeriesData,this._dataEvents=new u,this._status=p.Idle,this._turnaroundCounter=1,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),this._ongoingDataUpdate=Promise.resolve(),this._gateway=e,this._turnaroundPrefix=t,this._createSeriesParams=b(null!=i?i:{count:300}),this._timeFrame=r||null,this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}destroy(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged)}modifySeries(e,t,i=null,s=!1,a=null){s&&(m.logNormal("Due to force flag clearing symbol & resolution to force re-requesting data."),this._extSymbol=null,this._resolution=null);const l=y(e),c=!this.symbolSameAsResolved(l);if(c&&(this._lastResolvedSymbol=""),this._extSymbol&&!c){S(e,y(this._extSymbol))}const d=this._extSymbol,u=this._resolution;if(this._extSymbol=e,this._resolution=t,null===this._instanceId)return void(this._timeFrame=i);const h=!(0,n.deepEquals)(d,e)[0];h&&S(this._extSymbol,l);const _=null===u||!o.Interval.isEqual(u,t);(h||_||null!==i)&&(this._timeFrame=null,(h||_)&&this._turnaroundCounter++,h&&this._resolveSymbol(),this._gateway.modifySeries(this._instanceId,this.turnaround(),(0,r.ensureNotNull)(this._symbolInstanceId),this._resolution,a,i,this._onMessage.bind(this)),this._dataEvents.fireModified())}requestMoreData(e){null!==this._instanceId&&this._gateway.requestMoreData(this._instanceId,e,this._onMessage.bind(this))}requestMoreTickmarks(e){null!==this._instanceId&&this._gateway.requestMoreTickmarks(this._instanceId,e,this._onMessage.bind(this))}isStarted(){return this._status!==p.Idle}isActive(){return this._status===p.Active}resolution(){return this._resolution}start(){
this.isStarted()?m.logNormal("start: data source is already started, nothing to do"):((0,r.assert)(null!==this._extSymbol,"symbol must be set before start"),(0,r.assert)(null!==this._resolution,"resolution must be set before start"),this._gateway.isConnected().value()?this._createSeries():this._changeStatusTo(p.AwaitingConnection))}stop(){this.isStarted()?(null!==this._instanceId&&(this._gateway.removeSeries(this._instanceId),this._instanceId=null),this._changeStatusTo(p.Idle)):m.logNormal("stop: data source is already stopped, nothing to do")}instanceId(){return this._instanceId}data(){return this._data}clearData(){this.isStarted()?this._enqueueUpdate((()=>this._clearDataImpl())):this._clearDataImpl()}dataEvents(){return this._dataEvents}turnaround(){return`${this._turnaroundPrefix}${this._turnaroundCounter}`}symbolInstanceId(){return this._symbolInstanceId}symbol(){return this._extSymbol}moveData(e){this._enqueueUpdate((()=>this._data.moveData(e)))}setInitialRequestOptions(e){this._createSeriesOverriddenParams=b(e)}symbolSameAsResolved(e){return null!==this._extSymbol&&(0,g.symbolSameAsResolved)(e,y(this._extSymbol),this._lastResolvedSymbol)}resolvedSymbol(){return null===this._extSymbol?null:y(this._extSymbol)}_resolveSymbol(){null!==this._extSymbol&&(this._symbolInstanceId=this._gateway.resolveSymbol("sds_sym_"+f++,(0,s.encodeExtendedSymbolOrGetSimpleSymbolString)(this._extSymbol),this._onMessage.bind(this)))}_clearDataImpl(){this._data.clear()}_changeStatusTo(e){(0,r.assert)(this._status!==e,"Source and destination status should be distinct"),m.logNormal(`Status changed from ${p[this._status]} to ${p[e]}`),this._status=e}_createSeries(){(0,r.assert)(this._status!==p.Active,'Status should not be "Active" when creating a study'),this._instanceId="sds_"+v++,this._resolveSymbol();const e=this._createSeriesOverriddenParams||this._createSeriesParams;this._createSeriesOverriddenParams&&(this._createSeriesOverriddenParams=0),this._gateway.createSeries(this._instanceId,this.turnaround(),(0,r.ensureNotNull)(this._symbolInstanceId),(0,r.ensureNotNull)(this._resolution),e,this._timeFrame,this._onMessage.bind(this)),this._timeFrame=null,this._changeStatusTo(p.AwaitingFirstDataUpdate),this._dataEvents.fireCreated(this._instanceId)}_onGatewayIsConnectedChanged(e){e?this._onGatewayConnected():this._onGatewayDisconnected()}_onGatewayConnected(){this._status===p.AwaitingConnection&&this._createSeries()}_onGatewayDisconnected(){this._status!==p.Idle&&this._status!==p.AwaitingConnection&&(this._instanceId=null,this._changeStatusTo(p.AwaitingConnection)),this._turnaroundCounter=1}_onMessage(e){this._enqueueUpdate((()=>this._onMessageImpl(e)))}async _onMessageImpl(e){switch(e.method){case"symbol_resolved":{const[t,i]=e.params;if(t!==this._symbolInstanceId){m.logNormal(`Resolve for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolResolved(i);break}case"symbol_error":if(e.params[0]!==this._symbolInstanceId){
m.logNormal(`Symbol error for old symbol, expected: ${this._symbolInstanceId}, actual ${e.params[0]}`);break}this._onSymbolError(e);break;case"series_timeframe":{const[t,i,r,n,s,o,a]=e.params;if(!this._checkTurnaround(t,i)){m.logNormal(`Time frame for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${i})`);break}this._onSeriesTimeFrame(r,n,s,o,a);break}case"series_error":{const[t,i]=e.params;if(!this._checkTurnaround(t,i)){m.logNormal(`Series error for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${i})`);break}this._onSeriesError(e.params[2]);break}case"series_loading":{const[t,i]=e.params;if(!this._checkTurnaround(t,i))break;this._onSeriesLoading(e.time);break}case"series_completed":{const[t,i,r,n]=e.params;if(!this._checkTurnaround(t,r)){m.logNormal(`Series completed for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t} (${r})`);break}this._onSeriesCompleted(i,e.time,n);break}case"data_update":if(!this._checkTurnaround(e.params.customId,e.params.turnaround)){m.logNormal(`Data update for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e.params.customId} (${e.params.turnaround})`);break}await this._onDataUpdate(e.params.plots,e.params.nonseries,e.params.lastBar);break;case"clear_data":if(e.params.turnaround!==this.turnaround()){m.logNormal(`Clear data for old data, expected: ${this.turnaround()}, actual ${e.params.turnaround}`);break}this._clearDataImpl(),this._dataEvents.fireDataUpdated(void 0,!1,null,!1)}}_onSeriesError(e){let t,i;if("string"==typeof e)i={error:e},t=e;else if(i=e,e.ctx){const i={};Object.entries(e.ctx).forEach((([e,t])=>{i[e]=t.toString()})),t=e.error.format(i)}else t=e.error;if(t.startsWith("study_not_auth:")){const e=t.split(":",2)[1].split("@",2)[0];if(["BarSetRenko","BarSetPriceBreak","BarSetKagi","BarSetPnF"].includes(e))this._dataEvents.fireChartTypeNotPermitted(e);else if("BarSetSpread"===e)this._dataEvents.fireIntradaySpreadNotPermitted();else if("BarSetRange"===e){const e=`${(0,r.ensureNotNull)(this._extSymbol).inputs.range}R`;this._dataEvents.fireCustomIntervalNotPermitted(e)}}else"resolution_not_entitled"===t?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===t?this._dataEvents.fireCustomIntervalNotPermitted((0,r.ensureNotNull)(this._resolution)):"seconds_not_entitled"===t?this._dataEvents.fireSecondsIntervalNotPermitted():"ticks_not_entitled"===t&&this._dataEvents.fireTicksIntervalNotPermitted();this._dataEvents.fireSeriesError(i)}_onSeriesTimeFrame(e,t,i,r,n){this._dataEvents.fireSeriesTimeFrame(e,t,i,null==r||r,n)}_onSymbolError(e){if(e.params[1]===c.permissionDenied)switch(e.params[2]){case c.SymbolErrorPermissionDeniedReason.Symbol:this._dataEvents.fireSymbolNotPermitted(e.params[3]);break;case c.SymbolErrorPermissionDeniedReason.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(e.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(e.params[2])
}else e.params[1]===c.invalidSymbol&&this._dataEvents.fireSymbolInvalid();this._dataEvents.fireSymbolError(e.params[1])}_onSymbolResolved(e){this._lastResolvedSymbol=(0,r.ensureNotNull)((0,_.extractSymbolNameFromSymbolInfo)(e,"")),this._dataEvents.fireSymbolResolved(e)}async _onDataUpdate(e,t,i){this._onDataUnpacked(e,i,await C(t))}_enqueueUpdate(e){return this._ongoingDataUpdate=this._ongoingDataUpdate.then(e,e),this._ongoingDataUpdate}_onDataUnpacked(e,t,i){if(this._status===p.Idle)return;this._status===p.AwaitingFirstDataUpdate&&(this._changeStatusTo(p.Active),this._clearDataImpl());const r=this._data.bars().size(),n=this._data.bars().firstIndex(),s=this._data.mergeRegularBars(e);null!==i&&(this._data.nsBars().clear(),this._data.nsBars().merge(i.projectionPlots),this._data.lastProjectionPrice=i.lastPrice,null!==i.boxSize&&(this._data.boxSize=i.boxSize),this._data.reversalAmount=i.reversalAmount);const o=null===n,a=o||null!==s&&s.index<n;this._dataEvents.fireDataUpdated(t,a,s,o),r!==this._data.bars().size()&&null!==s&&this._dataEvents.fireBarReceived(s)}_onSeriesLoading(e){this._dataEvents.fireLoading(e)}_onSeriesCompleted(e,t,i){this._dataEvents.fireCompleted({updateMode:e,time:t,flags:i})}_checkTurnaround(e,t){return this._instanceId===e&&(void 0===t||t===this.turnaround())}}async function C(e){if(void 0===e)return{projectionPlots:[],boxSize:null};if(""===e.d||"nochange"===e.indexes)return null;const t=await(0,l.unpackNonSeriesData)(e.d);if(null===t||t.indexes_replace)return null;const i=e.indexes,{bars:r,price:n,boxSize:s,reversalAmount:o}=t.data;return{lastPrice:n,projectionPlots:(r||[]).map((e=>{let t;return"factor"in e?t=e.factor:"additionalPrice"in e&&(t=e.additionalPrice),{index:i[e.time],value:[0,e.open,e.high,e.low,e.close,e.volume,t]}})),reversalAmount:o,boxSize:s}}},558603:(e,t,i)=>{"use strict";i.d(t,{Session:()=>l});var r=i(650151),n=i(129025),s=i(707957),o=i(541558);const a=(0,i(201089).getLogger)("ChartApi.AbstractSession");class l{constructor(e,t,i){this._isConnected=new n.WatchedValue(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId="",this._sessionIdChanged=new s.Delegate,this._chartApi=e,this._sessionPrefix=t,this._shouldReconnectAfterCriticalError=i}destroy(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")}isConnected(){return this._isConnected}sessionId(){return this._sessionId}onSessionIdChanged(){return this._sessionIdChanged}connect(){0===this._state&&((0,r.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(`${this._sessionPrefix}_${(0,o.randomHash)()}`),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))}disconnect(){0!==this._state&&((0,r.assert)(""!==this._sessionId,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile((()=>{
this._chartApi.connected()&&this._sendRemoveSession(),this._processDestroyingOnServer()})))}onMessage(e){switch(e.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":const t=String(e.params[0]),i=String(e.params[1]);return void this._onCriticalError(t,i)}this._onMessage(e)}_getChartApi(){return this._chartApi}_generateLogMessage(e){return`[${this._sessionId}] ${e}`}_onCriticalError(e,t){this._logError(`Critical error. Reason=${e}, info=${t}.`),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")}_onChartApiConnected(){(0,r.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)}_onChartApiDisconnected(){this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile((()=>{this._processDestroyingOnServer()})),this.connect()}_setSessionId(e){const t=this._sessionId;this._logNormal(`Changing sessionId: old=${t}, new=${e}`),this._sessionId=e,this._sessionIdChanged.fire(e,t)}_logNormal(e){a.logNormal(this._generateLogMessage(e))}_logError(e){a.logError(this._generateLogMessage(e))}_processDestroyingOnServer(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId("")}_forbidConnectWhile(e){this._isConnectForbidden=!0,e(),this._isConnectForbidden=!1}}},25e4:(e,t,i)=>{"use strict";function r(e,t,i){return e===t||e===i}i.d(t,{symbolSameAsResolved:()=>r})},464539:(e,t,i)=>{"use strict";i.d(t,{getHourMinuteFormat:()=>n,getHourMinuteSecondFormat:()=>s,getTimeFormatForInterval:()=>o});var r=i(716714);function n(e){return"12-hours"===e?r.twelveHourMinuteFormat:r.hourMinuteFormat}function s(e){return"12-hours"===e?r.twelveHourMinuteSecondFormat:r.hourMinuteSecondFormat}function o(e,t){if(e.isRange())return function(e){return"12-hours"===e?r.twelveHourMinuteNonZeroSecondFormat:r.hourMinuteNonZeroSecondFormat}(t);if(e.isTicks())return r.hourMinuteSecondMillisecFormat;return e.isSeconds()||e.isTicks()?s(t):n(t)}},30285:()=>{"use strict";var e,t,i,r,n,s;window.parent!==window&&window.CanvasRenderingContext2D&&window.TextMetrics&&(t=window.CanvasRenderingContext2D.prototype)&&t.hasOwnProperty("font")&&t.hasOwnProperty("mozTextStyle")&&"function"==typeof t.__lookupSetter__&&(i=t.__lookupSetter__("font"))&&(t.__defineSetter__("font",(function(e){try{return i.call(this,e)}catch(e){if("NS_ERROR_FAILURE"!==e.name)throw e}})),r=t.measureText,e=function(){this.width=0,this.isFake=!0,this.__proto__=window.TextMetrics.prototype},t.measureText=function(t){try{return r.apply(this,arguments)}catch(t){if("NS_ERROR_FAILURE"!==t.name)throw t;return new e}},n=t.fillText,t.fillText=function(e,t,i,r){try{n.apply(this,arguments)}catch(e){
if("NS_ERROR_FAILURE"!==e.name)throw e}},s=t.strokeText,t.strokeText=function(e,t,i,r){try{s.apply(this,arguments)}catch(e){if("NS_ERROR_FAILURE"!==e.name)throw e}})},814083:(e,t,i)=>{"use strict";i.d(t,{defaultCompareSymbols:()=>r});const r=[{symbol:"SPX",title:"S&P 500"},{symbol:"NDX",title:"US 100"},{symbol:"DJI",title:"Dow 30"},{symbol:"NI225",title:"Nikkei 225"},{symbol:"DAX",title:"DAX"},{symbol:"UKX",title:"FTSE 100"}]},344829:(e,t,i)=>{"use strict";function r(){return Promise.all([i.e(987),i.e(45702)]).then(i.bind(i,577602))}function n(e){r().then((t=>t.showDisconnectedMessage(e)))}function s(e){r().then((t=>t.showCriticalErrorMessage(e)))}i.d(t,{showCriticalErrorMessage:()=>s,showDisconnectedMessage:()=>n})},827189:(e,t,i)=>{"use strict";function r(){return Promise.all([i.e(18809),i.e(74972),i.e(9926),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(53842),i.e(4015),i.e(92108),i.e(66639),i.e(88194),i.e(13423),i.e(87845),i.e(48986),i.e(93502),i.e(76592),i.e(54712),i.e(13152),i.e(36884),i.e(33371),i.e(84281),i.e(63987),i.e(542),i.e(26855),i.e(35213),i.e(63830),i.e(8740),i.e(1888),i.e(87689),i.e(73028),i.e(37221),i.e(20563),i.e(962),i.e(25977),i.e(16480),i.e(45512),i.e(45071),i.e(82786),i.e(67410),i.e(21015)]).then(i.bind(i,817016))}function n(){r().then((e=>e.createIdcAgreementDialog().open()))}function s(e){return r().then((t=>t.createIdcAgreementDelayDialog(e)))}function o(){return r().then((e=>e.createIdcDelayAddServiceDialog()))}i.r(t),i.d(t,{createIdcDelayAddServiceDialog:()=>o,createIdcDelayAgreementDialog:()=>s,showIdcAgreementDialog:()=>n})},341779:(e,t,i)=>{"use strict";i.d(t,{showExchangeAgreementDialog:()=>n});var r=i(807655);async function n(e){void 0===e.isExpert&&(e={...e,isExpert:window.user.declared_status===r.UserStatus.Pro});(await Promise.all([i.e(18809),i.e(74972),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(34465),i.e(32109),i.e(9817),i.e(69121),i.e(53842),i.e(4015),i.e(92108),i.e(88194),i.e(13423),i.e(87845),i.e(48986),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(542),i.e(8740),i.e(87689),i.e(73028),i.e(37221),i.e(20563),i.e(962),i.e(31165),i.e(16480),i.e(45071),i.e(82786),i.e(67410),i.e(61932)]).then(i.bind(i,269255))).openExchangeAgreementDialog(e)}},526698:(e,t,i)=>{"use strict";i.d(t,{AggregateError:()=>b,ApiError:()=>v,accumulateErrors:()=>s,changePassword:()=>f,changePasswordUrl:()=>p,checkPhoneCode:()=>c,fetchPost:()=>o,firstLoginData:()=>a,firstLoginDataUrl:()=>n,recoverPassword:()=>S,recoverPasswordUrl:()=>y,recoveryPassword:()=>d,resendLink:()=>l,resetPassword:()=>w,signin:()=>_,signinUrl:()=>u,signup:()=>m,signupUrl:()=>g});var r=i(120780);const n="/accounts/first_login_data/";function s(e,t){return Object.entries(e).map((e=>new v(e[1].join("\n"),t,e[0])))}function o(e,t){return(0,r.fetch)(e,{method:"POST",credentials:"include",mode:"same-origin",body:t})}function a(e){return o(n,e).then((e=>e.ok?e.json():e.json().then((t=>{throw new b(s(t.errors,e.status))}))))}function l(){
return o("/api/v1/users/anon/change-email/resend/").then((e=>e.ok?e.json():e.json().then((e=>{throw Error(e.error)}))))}function c(e){return o("/api/v1/recover_password/check_phone_code/",e).then((e=>e.ok?e.json():e.json().then((e=>{throw Error(e.error)}))))}function d(e){return o("/api/v1/recover_password/",e).then((e=>e))}const u="/accounts/signin/";function h(e){return e.json().then((t=>{if("error"in t&&""!==t.error||"code"in t||!e.ok)throw new v(t.error||t.detail,e.status,t.code,t.two_factor_types);return t}))}function _(e){return o(u,e).then(h)}const g="/accounts/signup/";function m(e){return o(g,e).then((e=>e.json().then((t=>{if("errors"in t&&""!==t.errors)throw new b(s(t.errors,e.status))}))))}const p="/api/v1/user/profile/settings/change_password/";function f(e){return o(p,e).then((e=>e))}class v extends Error{constructor(e,t,i,r){super(e),this.type=i,this.status=t,this.secondFactorTypes=r}}class b extends Error{constructor(e){super(e.map((e=>e.message)).join("\n")),this.errors=[],this.errors=e}}const y="/api/v1/recover_password/search/";function S(e){return o(y,e).then(h)}function w(e){return o("/accounts/reset_password/",e).then((e=>400===e.status?e.json().then((t=>{if("errors"in t)throw new b(s(t.errors,e.status));throw new v(t.detail,e.status,t.code)})):h(e)))}},124696:(e,t,i)=>{"use strict";i.d(t,{StudyMarket:()=>n});var r=i(129025);class n{constructor(e,t){this._visibility=new r.WatchedValue(!1),this._dialogPromise=null,this._dialog=null,this._chartWidgetCollection=e,this._options=t}visible(){return this._visibility.readonly()}show(e,t,i){var r,n,s;const o=Array.isArray(e)?e:[],a=Array.isArray(e)?void 0:e;null===this._dialog&&this._requestDialog(null!=o?o:[],t,i,a),null===(r=this._dialog)||void 0===r||r.open(null!=o?o:[],null===(s=null===(n=this._options)||void 0===n?void 0:n.indicatorsPreloader)||void 0===s?void 0:s.getIndicatorPromises(),t,i,a)}hide(){var e;null===(e=this._dialog)||void 0===e||e.hide()}getDialog(){return this._dialog}resetAllPages(){var e;null===(e=this._dialog)||void 0===e||e.resetAllStudies()}_requestDialog(e,t,r,n){var s;if(null===this._dialogPromise){let o
;o=(null===(s=this._options)||void 0===s?void 0:s.onWidget)?Promise.all([i.e(1451),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(32109),i.e(9817),i.e(53842),i.e(4015),i.e(92108),i.e(88548),i.e(35649),i.e(5145),i.e(38669),i.e(25190),i.e(91033),i.e(40866),i.e(6744),i.e(90684),i.e(36842),i.e(35542),i.e(34186),i.e(36752),i.e(24510),i.e(92175),i.e(3097),i.e(77350),i.e(94643),i.e(73353),i.e(84130),i.e(9340),i.e(56509),i.e(962),i.e(30979),i.e(73026),i.e(12651),i.e(87903),i.e(6456)]).then(i.bind(i,118539)).then((e=>new e.IndicatorsLibraryContainer(this._chartWidgetCollection,this._options))):Promise.all([i.e(1451),i.e(22666),i.e(5993),i.e(62253),i.e(92191),i.e(32109),i.e(9817),i.e(53842),i.e(4015),i.e(92108),i.e(88548),i.e(35649),i.e(5145),i.e(38669),i.e(25190),i.e(91033),i.e(40866),i.e(6744),i.e(90684),i.e(36842),i.e(35542),i.e(34186),i.e(36752),i.e(24510),i.e(92175),i.e(3097),i.e(77350),i.e(94643),i.e(73353),i.e(84130),i.e(9340),i.e(56509),i.e(962),i.e(30979),i.e(73026),i.e(12651),i.e(87903),i.e(6456)]).then(i.bind(i,407774)).then((e=>new e.IndicatorsContainer(this._chartWidgetCollection))),this._dialogPromise=o.then((i=>{var s,o;this._dialog=i,this._dialog.visible().subscribe((e=>{this._visibility.setValue(e)})),this._dialog.open(e,null===(o=null===(s=this._options)||void 0===s?void 0:s.indicatorsPreloader)||void 0===o?void 0:o.getIndicatorPromises(),t,r,n)}))}return this._dialogPromise}}},555656:(e,t,i)=>{"use strict";i.d(t,{ChartSaverBase:()=>h});var r=i(316230),n=i(708706),s=i(388482),o=i(389137),a=i(175203),l=i(707957);const c=new WeakMap;function d(e){let t=c.get(e);if(void 0===t){const i=JSON.parse(e.content);t=void 0!==i.charts?i.charts.map(JSON.stringify):[e.content],c.set(e,t)}return t}const u=new TextEncoder;class h{constructor(e){this._prevChartState=null,this._chartSavedDelegate=new l.Delegate,this._chartWidgetCollection=e,window.initData&&window.initData.content&&(this._prevChartState={content:JSON.stringify(window.initData.content)})}saveChartLineTools(e,t,i,r){{const n=(0,s.getChartStorage)(),o=this._chartWidgetCollection.metaInfo.uid.value();return n.saveLineToolsAndGroups(o,e,t,i,r)}}_getCommonSavingInfo(e){const t=this._chartWidgetCollection,i=this._chartWidgetCollection.chartsSymbols(),r=i[t.activeChartWidget.value().id()],n={...(s=r,{...s,legs:JSON.stringify(null!==(o=s.legs)&&void 0!==o?o:[])})};var s,o;const a=t.metaInfo;return a.id.value()&&(n.id=a.id.value()),n.name=a.name.value()||"",n.description=a.description.value()||"",n.charts_symbols=function(e){const t={};for(const i of Object.keys(e))t[i]={symbol:e[i].symbol};return JSON.stringify(t)}(i),n.is_realtime=n.is_realtime=e?"0":"1",n}async _saveLineToolsToStorage(){{if(!this._chartWidgetCollection.metaInfo.uid.value())return Promise.reject("Cannot save for new layout");const e=this._chartWidgetCollection.getAll().map((e=>{var t,i;return null!==(i=null===(t=e.lineToolsSynchronizer())||void 0===t?void 0:t.flushPendingSavings())&&void 0!==i?i:null})).filter(o.notNull);e.length&&await Promise.all(e)}}async _saveChart(e,t,i,s){var o
;const l=this._chartWidgetCollection.metaInfo;let c=null!==(o=s.changes)&&void 0!==o?o:n.changedAll,h=!0;if(2&c)try{await this._saveLineToolsToStorage()}catch(e){c|=1,h=!1}if(1&c){const n=e(h);if((0,r.default)(this._prevChartState,n)&&null!==l.id.value())return this._chartSavedDelegate.fire(!0),void t(l,n);(function(e,t){const i=null===e?[]:d(e),r=d(t);let n=0,s=0;for(let e=0;e<r.length;++e){const t=u.encode(r[e]).length;n+=t,r[e]!==i[e]&&(s+=t)}a.telemetry.sendChartReport("save_layout_changed_to_total_bytes_ratio",{value:s/n})})(this._prevChartState,n);const o=(e,i)=>(h||this._chartWidgetCollection.getAll().forEach((e=>{var t;return null===(t=e.lineToolsSynchronizer())||void 0===t?void 0:t.markAsValidatedBecauseOfSavingToContent(!0)})),t(e,i));return this._saveChartImpl(n,l,o,i,s,e)}this._chartSavedDelegate.fire(!0),t(l,null)}}},813773:(e,t,i)=>{"use strict";var r=i(823127),n=i(650151).assert,s=i(516684),o=i(345848).trackEvent,a=i(960337).createGoProDialog,l=i(552279).reloginOrGoPro,c=i(867778),d=i(251954),u=i(503595).asyncWindowOpen,h=i(922814),_=i(779923).showWarning,g=i(440058).forceTradingObjVisibilityOnScreenshot,m=i(578988).backend,p=i(555656).ChartSaverBase,f=i(707957).Delegate;const v={saverOnPublishError:i.tf(null,void 0,i(308162)),saveLibraryError:i.tf(null,void 0,i(717994)),saveScriptError:i.tf(null,void 0,i(487375))};function b(e,t){e.content=JSON.stringify(t)}function y(e){return e.returnValue=i.tf(null,void 0,i(901535)),e.returnValue}t.ChartSaver=class extends p{constructor(e){super(e),this._chartAboutToBeSavedDelegate=new f,this._chartSavedDelegate=new f,this._chartSizeLimitExceededDelegate=new f,this._savingToken=null}chartSizeLimitExceeded(){return this._chartSizeLimitExceededDelegate}chartAboutToBeSaved(){return this._chartAboutToBeSavedDelegate}chartSaved(){return this._chartSavedDelegate}saveToJSON(){var e=this._getCommonSavingInfo(!1);return b(e,this._getChartWidgetCollectionState(!1,!0)),e}_getChartWidgetCollectionState(e,t,i,r,n){return e||(t=!0,r=!1),t?this._chartWidgetCollection.state(!!e,i,r,n):this._chartWidgetCollection.activeChartWidget.value().state(!!e,i,r,n)}publishChart(e){var t=this;return new Promise((function(r){o("GUI","Publish Chart");var n=t,s={accessType:(e=e||{}).isPrivate||TVSettings.getBool("publishchart.private",!1)?0:1,publishSource:e.publishSource,videoFilename:e.videoFilename,videoDuration:e.videoDuration,videoCam:e.videoCam},a={savePrivacySetting:!e.doNotSavePrivacySetting,onWidget:e.onWidget},l=e.onPublishUrl,c=e.onPublishError
;n._ideaPublisher?r(n._ideaPublisher.openPublication(s,a)):Promise.all([Promise.all([i.e(74594),i.e(2963),i.e(52608),i.e(22666),i.e(5993),i.e(92191),i.e(34465),i.e(69121),i.e(53842),i.e(4015),i.e(66639),i.e(88194),i.e(87845),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(63987),i.e(542),i.e(73954),i.e(34545),i.e(35213),i.e(63830),i.e(1888),i.e(90592),i.e(74188),i.e(94502),i.e(69646),i.e(52293),i.e(68795),i.e(30794),i.e(13180),i.e(23706),i.e(93829),i.e(962),i.e(25977),i.e(95308),i.e(67707),i.e(66457),i.e(78496),i.e(68785),i.e(44125)]).then(i.bind(i,777483)),Promise.all([i.e(74594),i.e(2963),i.e(52608),i.e(22666),i.e(5993),i.e(92191),i.e(34465),i.e(69121),i.e(53842),i.e(4015),i.e(66639),i.e(88194),i.e(87845),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(63987),i.e(542),i.e(73954),i.e(34545),i.e(35213),i.e(63830),i.e(1888),i.e(90592),i.e(74188),i.e(94502),i.e(69646),i.e(52293),i.e(68795),i.e(30794),i.e(13180),i.e(23706),i.e(93829),i.e(962),i.e(25977),i.e(95308),i.e(67707),i.e(66457),i.e(78496),i.e(68785),i.e(44125)]).then(i.bind(i,792011)),Promise.all([i.e(74594),i.e(2963),i.e(52608),i.e(22666),i.e(5993),i.e(92191),i.e(34465),i.e(69121),i.e(53842),i.e(4015),i.e(66639),i.e(88194),i.e(87845),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(63987),i.e(542),i.e(73954),i.e(34545),i.e(35213),i.e(63830),i.e(1888),i.e(90592),i.e(74188),i.e(94502),i.e(69646),i.e(52293),i.e(68795),i.e(30794),i.e(13180),i.e(23706),i.e(93829),i.e(962),i.e(25977),i.e(95308),i.e(67707),i.e(66457),i.e(78496),i.e(68785),i.e(44125)]).then(i.bind(i,773792)),Promise.all([i.e(74594),i.e(2963),i.e(52608),i.e(22666),i.e(5993),i.e(92191),i.e(34465),i.e(69121),i.e(53842),i.e(4015),i.e(66639),i.e(88194),i.e(87845),i.e(93502),i.e(13152),i.e(36884),i.e(84281),i.e(63987),i.e(542),i.e(73954),i.e(34545),i.e(35213),i.e(63830),i.e(1888),i.e(90592),i.e(74188),i.e(94502),i.e(69646),i.e(52293),i.e(68795),i.e(30794),i.e(13180),i.e(23706),i.e(93829),i.e(962),i.e(25977),i.e(95308),i.e(67707),i.e(66457),i.e(78496),i.e(68785),i.e(44125)]).then(i.bind(i,318596))]).then((([{CategoriesProvider:e},{ChartInfoProvider:t},{IdeasProvider:i},{IdeaPublisher:o}])=>{var d=new t({chartWidgetCollection:n._chartWidgetCollection}),u=new i({publish:function(e,t){return new Promise((function(i,r){var s={closeForm:function(){i()},showError:function(e){r(e)},onPublishUrl:l,onPublishError:c};try{n.onPublish(e,Object.assign({},t,s))}catch(e){r(v.saverOnPublishError)}}))}}),h=new e;n._ideaPublisher=new o({chartInfoProvider:d,ideasProvider:u,categoriesProvider:h,onOpenEditor:function(){},onMinimizeEditor:function(){},onCloseEditor:function(){}}),r(n._ideaPublisher.openPublication(s,a))}))}))}publishScript(e,t,i){var r=this;if(e.accessType=TVSettings.getBool("publishscript.private",!1)?0:1,r._scriptPublisher)r._scriptPublisher.openPublication(e,t);else{var n=i.scriptPublisher,s=i.scriptsProvider,o=i.categoriesProvider,a=new(0,i.chartInfoProvider)({chartWidgetCollection:r._chartWidgetCollection}),l=new s({publish:function(e){return new Promise((function(t,i){var n={closeForm:function(){
if(e&&e.scriptPublication&&e.scriptPublication.updateScriptIdPart){var i=e.scriptPublication.updateScriptIdPart;c.invalidateCache([i]),window.studyMarket&&window.studyMarket.resetAllPages()}t()},showError:function(e){i(e)},savePrivacySetting:!0};try{r.onPublish(e,n)}catch(e){i(v.saverOnPublishError)}}))}});r._scriptPublisher=new n({scriptsProvider:l,categoriesProvider:new o,chartInfoProvider:a,scriptType:e.scriptType,scriptTitle:e.title,existingLibraryInfo:e.existingLibraryInfo}),r._scriptPublisher.openPublication(e,t)}}onPublish(e,t){{var n=this;if(n.publishInProgress)return;var a=t&&t.publishAllLayout,l=n._getCommonSavingInfo(!0),c=!1;e.scriptPublication&&(e.scriptPublication.scriptProtection===h.Access.ACCESS_CLOSED_NEEDS_AUTH&&(c=!0),l.scriptProtection=parseInt(h.Access.MAP_NAME_TO_ID[e.scriptPublication.scriptProtection])),b(l,this._getChartWidgetCollectionState(!0,a,!0,c)),g.setValue(!1),l.image=JSON.stringify(this._chartWidgetCollection.images({onlyActiveChart:!a})),g.setValue(null);const S=r=>{window.removeEventListener("beforeunload",y),n.publishInProgress=!1;var s=r.responseText||"";if("ok:"===s.substring(0,3)){var o=!1;if(t.savePrivacySetting){o=!e.is_public;TVSettings.setValue(e.scriptPublication?"publishscript.private":"publishchart.private",o)}var a=s.substring(3),l=JSON.parse(a);n._chartWidgetCollection.metaInfo.id.value()||n._chartWidgetCollection.metaInfo.id.setValue(l.id),t.closeForm&&t.closeForm(),t.onPublishUrl&&t.onPublishUrl(l.publishUrl,l.uuid),d.emit("onPublishUrl",l.uuid),n._lastPublishUrl=l.publishUrl,n.setPopupUrl&&n.setPopupUrl(`${l.publishUrl}${o||e.scriptPublication?"":"?social_toast=true"}`)}else{(413===r.status||/^[\d\s]*request.+large/i.test(s.trim()))&&(s=i.tf(null,void 0,i(701581)));var c=s||i.tf(null,void 0,i(669246));t.showError&&t.showError(c,{html:!0}),t.onPublishError&&t.onPublishError(c),n.setPopupUrl&&n.setPopupUrl(void 0)}};var m=e.scriptPublication,p=!(!m||!m.updateScriptIdPart),f=new Promise((function(e,t){var i;m?(p?(window.addEventListener("beforeunload",y),i=s.publishNext(m.scriptSource,m.updateScriptIdPart)):i=s.publishNew(m.scriptSource,m.scriptProtection),i.done((function(t){e(t.publishedstudyscript_id)})).fail((function(e){let i="";i=-1!==e.indexOf("already published library")?v.saveLibraryError:v.saveScriptError,_({title:i,text:e}),t()}))):e()}));p?f.then((function(t){var i={publishedstudyscript_id:t,script_terms:e.script_terms,description:e.description,tags:e.tags,preserve_old_chart:e.preserveOldChart};r.ajax({url:"/script-update/",type:"post",dataType:"text",data:r.extend({},l,i),complete:S})}),S):f.then((function(t){t&&(e.publishedstudyscript_id=t);for(var i=e.tags.split(","),n=e.scriptPublication?"Script":"Idea",s=0;s<i.length;s++)o(n+" Publication",n+" Tag",i[s]);if(e.scriptPublication){var a=e.scriptPublication.scriptProtection;o("Script Publication","Script Visibility",{open_no_auth:"Open",closed_no_auth:"Protected",closed_needs_auth:"Invite Only"}[a])}else{var c=e.is_education?"Education":"Analysis",d=e.is_public?"Public":"Private"
;o("Idea Publication","Idea Type",c),o("Idea Publication","Idea Strategy",["Neutral","Long","Short"][e.direction]),o("Idea Publication","Idea Privacy",d)}r.ajax({url:"/publishchart/",type:"post",dataType:"text",data:r.extend({},l,e),complete:S})}),S),n.publishInProgress=!0,t.onWidget||""!==e.name&&""!==e.description&&e.description.length<=7e4&&e.name.length<=64&&u(new Promise((function(e){n.setPopupUrl=e})))}}_saveChartImpl(e,t,i,n,s,o){var c=i,d=n;if(this._savingToken=String(Math.random()),e.savingToken=this._savingToken,c=function(o){if(this._savingToken=null,"ok:"===o.substring(0,3)){var l=o.substring(3),c=JSON.parse(l);t.id.value()||(t.id.setValue(c.id),t.uid.setValue(c.uid)),t.lastModified.setValue(c.lastModified),"function"==typeof i&&i(t,e)}else if("saved_chart_limit_reached"===o||""===o){if("function"==typeof n&&n(),s.noDefaultOnFail)return;a({feature:"savedChartsLimit"})}else"function"==typeof n&&n(),r("#error").html(o);r(window).off("beforeunload.savechart")},d=async function(e){if(this._savingToken=null,e&&413===e.status)return this._chartSizeLimitExceededDelegate.fire(),void("function"==typeof n&&n.apply(null,arguments));if(e&&403===e.status){try{"login_required"===(await e.json()).code&&l({feature:"savedChartsLimit"})}catch(e){}"function"==typeof n&&n.apply(null,arguments)}else s.retry?"function"==typeof n&&n.apply(null,arguments):(s.retry=!0,this._saveChart(o,i,n,s))},!e.name)return console.warn("Saving chart with empty name is not allowed"),void n();m.saveChart(e.name,e.short_name,e.resolution,e,t).then(c.bind(this)).catch(d.bind(this))}saveChartSilently(e,t,s){s=s||{};var o=function(e){var t=e&&!0,i=this._getChartWidgetCollectionState(!1,void 0,void 0,void 0,t),r=this._getCommonSavingInfo(!1,t);return b(r,i),s.chartName&&(r.name=s.chartName),r.name&&0!==r.name.length||!s.defaultChartName||(r.name=s.defaultChartName),s.autoSave&&(r.autoSave=!0),r}.bind(this);r(window).on("beforeunload.savechart",(function(){return i.tf(null,void 0,i(274085))})),this._isSaveInProcess=!0,this._chartAboutToBeSavedDelegate.fire(),this._saveChart(o,function(t,i){n(!this._chartWidgetCollection.readOnly(),"Trying to save layout in read-only mode"),i&&this._chartWidgetCollection.metaInfo.name.setValue(i.name),this._prevChartState=i,this._chartSavedDelegate.fire(!0),this._isSaveInProcess=!1,e&&e({uid:t.uid.value(),data:i}),this._prevChartState&&delete this._prevChartState.savingToken}.bind(this),function(){this._chartSavedDelegate.fire(!1),this._isSaveInProcess=!1,t&&t.apply(null,arguments)}.bind(this),s),r(window).off("beforeunload.savechart")}isSaveInProcess(){return this._isSaveInProcess}}},603706:(e,t,i)=>{"use strict";i.d(t,{getTimeFrames:()=>s});var r=i(444372),n=i(146585);function s(){return{"1d":{text:r.t(null,void 0,i(932120)),value:{value:"1D",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1"),description:(0,n.daysStringLiteral)(1)},"5d":{text:r.t(null,void 0,i(905486)),value:{value:"5D",type:"period-back"},targetResolution:(0,n.stringAsResolution)("5"),description:(0,n.daysStringLiteral)(5)},"1w":{
text:r.t(null,void 0,i(234880)),value:{value:"7D",type:"period-back"},targetResolution:(0,n.stringAsResolution)("15"),description:(0,n.weeksStringLiteral)(1)},"1m":{text:r.t(null,void 0,i(460356)),value:{value:"1M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("30"),description:(0,n.monthsStringLiteral)(1)},"3m":{text:r.t(null,void 0,i(440675)),value:{value:"3M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("60"),description:(0,n.monthsStringLiteral)(3)},"6m":{text:r.t(null,void 0,i(281788)),value:{value:"6M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("120"),description:(0,n.monthsStringLiteral)(6)},"12m":{text:r.t(null,void 0,i(254790)),value:{value:"12M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1D"),description:(0,n.yearsStringLiteral)(1)},"24m":{text:r.t(null,void 0,i(440956)),value:{value:"24M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1W"),description:(0,n.yearsStringLiteral)(2)},"36m":{text:r.t(null,void 0,i(996053)),value:{value:"36M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1W"),description:(0,n.yearsStringLiteral)(3)},"60m":{text:r.t(null,void 0,i(320013)),value:{value:"60M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1W"),description:(0,n.yearsStringLiteral)(5)},"120m":{text:r.t(null,void 0,i(377628)),value:{value:"120M",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1M"),description:(0,n.yearsStringLiteral)(10)},ytd:{text:r.t(null,void 0,i(989013)),value:{value:"YTD",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1D"),description:r.t(null,void 0,i(388996))},all:{text:r.t(null,void 0,i(695271)),value:{value:"ALL",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1M")},lastsession:{text:r.t(null,void 0,i(932120)),value:{value:"LASTSESSION",type:"period-back"},targetResolution:(0,n.stringAsResolution)("1"),description:(0,n.daysStringLiteral)(1)}}}},146585:(e,t,i)=>{"use strict";i.d(t,{daysStringLiteral:()=>o,hoursStringLiteral:()=>s,minutesStringLiteral:()=>n,monthsStringLiteral:()=>l,stringAsResolution:()=>d,weeksStringLiteral:()=>a,yearsStringLiteral:()=>c});var r=i(444372);const n=e=>r.t(null,{plural:"{str} minutes",count:e,replace:{str:`${e}`}},i(860144)),s=e=>r.t(null,{plural:"{str} hours",count:e,replace:{str:`${e}`}},i(217174)),o=e=>r.t(null,{plural:"{str} days",count:e,replace:{str:`${e}`}},i(774262)),a=e=>r.t(null,{plural:"{str} weeks",count:e,replace:{str:`${e}`}},i(14074)),l=e=>r.t(null,{plural:"{str} months",count:e,replace:{str:`${e}`}},i(128039)),c=e=>r.t(null,{plural:"{str} years",count:e,replace:{str:`${e}`}},i(408222)),d=e=>e},606311:(e,t,i)=>{"use strict";i.d(t,{timeFrames:()=>r});const r=(0,i(603706).getTimeFrames)()},242907:(e,t,i)=>{"use strict";function r(e,t){const i=Object.create(Object.getPrototypeOf(e));for(const r of t)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i}i.d(t,{pickFields:()=>r})},919476:(e,t,i)=>{"use strict";i.r(t),i.d(t,{capitalizeFirstLetterInWord:()=>g,
decodeHTMLEntities:()=>c,encodeHTMLEntities:()=>d,htmlEscape:()=>u,removeSpaces:()=>_,removeTags:()=>h});const r=/[<"'&>]/g,n=e=>`&#${e.charCodeAt(0)};`,s={"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&","&#60;":"<","&#62;":">","&#34;":'"',"&#39;":"'","&#039;":"'","&#38;":"&"},o=Object.assign({},...Object.entries(s).map((([e,t])=>({[t]:e})))),a=new RegExp(Object.keys(s).join("|"),"g"),l=new RegExp(Object.keys(o).join("|"),"g");function c(e){return e.replace(a,(e=>s[e]||e))}function d(e){return e.replace(l,(e=>o[e]||e))}function u(e){return e.replace(r,n)}function h(e=""){return e.replace(/(<([^>]+)>)/gi,"")}function _(e=""){return e.replace(/\s+/g,"")}function g(e=""){return e.replace(/\b\w/g,(e=>e.toUpperCase()))}},384898:e=>{"use strict"
;e.exports=JSON.parse('{"ebitda":43000553610,"gross_profit":43000553611,"total_revenue":43000553619,"cost_of_goods":43000553618,"dep_amort_exp_income_s":43000563477,"cost_of_goods_excl_dep_amort":43000563478,"operating_expenses":43000563463,"sell_gen_admin_exp_total":43000553613,"sell_gen_admin_exp_other":43000553614,"research_and_dev":43000553612,"other_oper_expense_total":43000563483,"total_oper_expense":43000553615,"earnings_per_share_diluted":43000553616,"net_income":43000553617,"oper_income":43000563464,"total_non_oper_income":43000563465,"non_oper_interest_exp":43000563466,"interest_expense_on_debt":43000563467,"interest_capitalized":43000563468,"non_oper_income":43000563471,"non_oper_interest_income":43000563473,"pretax_equity_in_earnings":43000563474,"other_income":43000563479,"unusual_expense_inc":43000563476,"pretax_income":43000563462,"equity_in_earnings":43000563487,"income_tax":43000563492,"minority_interest_exp":43000563495,"after_tax_other_income":43000563497,"net_income_bef_disc_oper":43000563500,"discontinued_operations":43000563502,"dilution_adjustment":43000563504,"preferred_dividends":43000563506,"diluted_net_income":43000563516,"earnings_per_share_basic":43000563520,"total_liabilities_shrhldrs_equity":43000553626,"total_debt":43000553622,"total_assets":43000553623,"total_current_assets":43000557441,"cash_n_short_term_invest":43000563702,"cash_n_equivalents":43000563709,"short_term_invest":43000563716,"total_receivables_net":43000563738,"accounts_receivables_net":43000563740,"other_receivables":43000563741,"inventory_work_in_progress":43000563746,"inventory_progress_payments":43000563748,"inventory_finished_goods":43000563749,"inventory_raw_materials":43000563753,"prepaid_expenses":43000563757,"other_current_assets_total":43000563761,"total_non_current_assets":43000557440,"long_term_investments":43000563639,"long_term_note_receivable":43000563641,"investments_in_unconcsolidate":43000563645,"other_investments":43000563649,"ppe_total_net":43000563657,"ppe_total_gross":43000563667,"accum_deprec_total":43000563673,"deferred_tax_assests":43000563683,"intangibles_net":43000563686,"goodwill":43000563688,"other_intangibles_net":43000563689,"long_term_other_assets_total":43000563693,"total_liabilities":43000553624,"total_current_liabilities":43000557437,"short_term_debt":43000563554,"current_port_debt_capital_leases":43000563557,"short_term_debt_excl_current_port":43000563563,"notes_payable_short_term_debt":43000563600,"other_short_term_debt":43000563614,"accounts_payable":43000563619,"income_tax_payable":43000563621,"dividends_payable":43000563624,"accrued_payroll":43000563628,"deferred_income_current":43000563631,"other_current_liabilities":43000563635,"total_non_current_liabilities":43000557436,"long_term_debt":43000553621,"long_term_debt_excl_capital_lease":43000563521,"capital_operating_lease_obligations":43000563522,"capital_lease_obligations":43000563527,"operating_lease_liabilities":43000563532,"provision_f_risks":43000563535,"deferred_tax_liabilities":43000563536,"deferred_income_non_current":43000563540,"other_liabilities_total":43000563545,"total_equity":43000553625,"shrhldrs_equity":43000557442,"common_equity_total":43000563866,"retained_earnings":43000563867,"paid_in_capital":43000563871,"common_stock_par":43000563873,"additional_paid_in_capital":43000563874,"treasury_stock_common":43000563875,"other_common_equity":43000563877,"preferred_stock_carrying_value":43000563879,"minority_interest":43000563884,"free_cash_flow":43000553630,"cash_f_operating_activities":43000553627,"funds_f_operations":43000563886,"net_income_starting_line":43000563888,"cash_flow_deprecation_n_amortization":43000563892,"depreciation_depletion":43000564142,"amortization":43000564143,"cash_flow_deferred_taxes":43000564144,"non_cash_items":43000564146,"total_extra_items":43000564145,"changes_in_working_capital":43000564147,"change_in_accounts_receivable":43000564148,"change_in_taxes_payable":43000564149,"change_in_accounts_payable":43000564150,"change_in_accrued_expenses":43000564151,"change_in_inventories":43000564153,"change_in_other_assets":43000564154,"cash_f_investing_activities":43000553628,"purchase_sale_business":43000564156,"sales_of_business":43000564158,"purchase_of_business":43000564159,"purchase_sale_investments":43000564160,"sales_of_investments":43000564161,"purchase_of_investments":43000564162,"other_investing_cash_flow_items_total":43000564163,"other_investing_cash_flow_sources":43000564164,"other_investing_cash_flow_uses":43000564165,"capital_expenditures":43000564166,"capital_expenditures_fixed_assets":43000564167,"capital_expenditures_other_assets":43000564168,"cash_f_financing_activities":43000553629,"issuance_of_stock_net":43000564169,"sale_of_stock":43000564170,"purchase_of_stock":43000564171,"issuance_of_debt_net":43000564172,"issuance_of_short_term_debt":43000564173,"issuance_of_long_term_debt":43000564175,"supplying_of_long_term_debt":43000564176,"reduction_of_long_term_debt":43000564177,"issuance_of_other_debt":43000564178,"other_financing_cash_flow_items_total":43000564179,"other_financing_cash_flow_sources":43000564181,"other_financing_cash_flow_uses":43000564182,"total_cash_dividends_paid":43000564183,"common_dividends_cash_flow":43000564185,"preferred_dividends_cash_flow":43000564186,"market_cap_basic":43000597015,"number_of_employees":43000597080,"dividends_yield":43000597817,"dividend_payout_ratio":43000597738,"price_earnings":43000597017,"price_sales":43000597019,"price_cash_flow":43000597816,"price_book":43000597016,"enterprise_value":43000597077,"enterprise_value_ebitda":43000597064,"ev_ebit":43000597063,"ev_revenue":43000597065,"price_to_free_cash_flow":43000597814,"price_to_tangible_book":43000597815,"price_earnings_forward":43000597831,"price_sales_forward":43000597832,"return_on_assets":43000597054,"return_on_equity":43000597021,"return_on_invested_capital":43000597056,"gross_margin":43000597811,"operating_margin":43000597076,"ebitda_margin":43000597075,"net_margin":43000597074,"return_on_equity_adjust_to_book":43000597055,"return_on_tang_assets":43000597052,"return_on_tang_equity":43000597053,"free_cash_flow_margin":43000597813,"quick_ratio":43000597050,"current_ratio":43000597051,"invent_turnover":43000597046,"asset_turnover":43000597022,"debt_to_asset":43000597031,"debt_to_equity":43000597078,"long_term_debt_to_assets":43000597048,"debt_to_ebitda":43000597032,"debt_to_revenue":43000597033,"effective_interest_rate_on_debt":43000597034,"equity_to_asset":43000597035,"goodwill_to_asset":43000597036,"interst_cover":43000597037,"invent_to_revenue":43000597047,"share_buyback_ratio":43000597057,"sloan_ratio":43000597058,"earnings_estimate":43000597066,"sales_estimates":43000597067,"revenue_one_year_growth":43000597068,"earnings_per_share_basic_one_year_growth":43000597069,"earnings_per_share_diluted_one_year_growth":43000597071,"accruals_ratio":43000597073,"tangible_common_equity_ratio":43000597079,"revenue_per_employee":43000597081,"net_income_per_employee":43000597082,"graham_numbers":43000597084,"ncavps_ratio":43000597085,"quality_ratio":43000597086,"gross_profit_to_asset":43000597087,"buyback_yield":43000597088,"cash_conversion_cycle":43000597089,"peg_ratio":43000597090,"altman_z_score":43000597092,"piotroski_f_score":43000597734,"sustainable_growth_rate":43000597736,"research_and_develop_to_revenue":43000597739,"earnings_yield":43000597010,"tobin_q_ratio":43000597834,"beneish_m_score":43000597835,"kz_index":43000597844,"fulmer_h_factor":43000597847,"springate_score":43000597848,"zmijewski_score":43000597850,"cash_to_debt":43000597023,"cogs_to_revenue":43000597026,"days_invent":43000597028,"days_pay":43000597029,"day_sales_out":43000597030,"price_free_cash_flow":43000597814,"price_tangible_book":43000597815,"book_value_per_share":43000670330,"book_tangible_per_share":43000597072,"return_on_common_equity":43000656797,"ebit":43000670329,"total_shares_outstanding":43000670331,"float_shares_outstanding":43000670341,"dps_common_stock_prim_issue":43000670334,"basic_shares_outstanding":43000670320,"diluted_shares_outstanding":43000670322,"total_inventory":43000563745,"net_debt":43000665310}')
}}]);
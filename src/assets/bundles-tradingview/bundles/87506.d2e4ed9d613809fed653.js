(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[87506],{955021:e=>{e.exports={label:"label-nb7ji1l2"}},935219:(e,t,s)=>{"use strict";s.d(t,{ColorContext:()=>o,ColorManager:()=>l});var o,n=s(296890),i=s(328758),r=s(546079);!function(e){e[e.SymbolMarker=0]="SymbolMarker",e[e.ScreenerFilter=1]="ScreenerFilter"}(o||(o={}));class l{constructor(e){this._context=e.context}getColor(){switch(this._context){case o.SymbolMarker:return this._getAvailableColor(i.SymbolMarkerSettings.getDefaultColor());case o.ScreenerFilter:return this._getAvailableColor(i.SymbolsFilterSettings.getDefaultColor())}}setColor(e){switch(this._context){case o.SymbolMarker:i.SymbolMarkerSettings.setDefaultColor(this._getAvailableColor(e));break;case o.ScreenerFilter:i.SymbolsFilterSettings.setDefaultColor(this._getAvailableColor(e))}}_getAvailableColor(e){return(0,r.checkColorPermissions)(e)?e:(this.setColor(n.ListColor.Red),n.ListColor.Red)}}},546079:(e,t,s)=>{"use strict";s.d(t,{MarkedSymbolsListModel:()=>$,checkColorPermissions:()=>z,getMarkedListsState:()=>P,getSymbolsLimit:()=>T});var o=s(650151),n=s(296890),i=s(50991),r=s(173777);class l{constructor(e){this._executing=null,this._destroyed=!1,this._handleChange=()=>{if(this._destroyed)return;const e=this._getCommands();if(e.length>0){if(null!==this._executing)return;const[t,...s]=e;switch(t.type){case"append":this._executing=this._api.appendSymbols(t.color,t.symbols);break;case"remove":this._executing=this._api.removeSymbols(t.color,t.symbols);break;case"replace":this._executing=this._api.replaceSymbols(t.color,t.symbols);break;case"reset":this._executing=this._api.resetSymbols(t.symbols);break;case"rename":this._executing=this._api.renameList(t.color,t.name);break;case"change-description":this._executing=this._api.changeDescription(t.color,t.description);break;case"reset-all":this._executing=this._api.resetAll();break;case"share":this._executing=this._api.shareList(t.color,t.shared);break;case"rename-separator":this._executing=this._api.renameSeparator(t.color,t.separator,t.name)}this._executing.then((()=>{if(this._executing=null,this._destroyed)return;const[e]=this._getCommands();e===t?this._store.dispatch((0,n.shiftCommand)({count:1})):(this._onWarn(`Command: ${JSON.stringify(t)} was sent to the server but is not found in the state`),s.length>0&&this._onWarn(`Commands: ${JSON.stringify(s)} was dropped from state without syncing with server`)),this._handleChange()}),(e=>{if(this._destroyed)return;this._executing=null;const{colors:s,byColor:i}=t.prevLists,r=s.map((e=>(0,o.ensureDefined)(i[e])));this._store.dispatch((0,n.setup)({lists:r,timestamp:(0,o.ensureNotNull)((0,n.getTimestamp)(this._selector(this._store.getState())))})),this._onError(t,e)}))}};const{root:t,selector:s,onError:i,onWarn:r,api:l}=e;this._store=t,this._selector=s,this._subscription=this._store.subscribe(this._handleChange),this._onError=i,this._onWarn=r,this._api=l,this._handleChange()}destroy(){this._subscription(),this._destroyed=!0}_getCommands(){const e=this._selector(this._store.getState());return(0,
n.getCommands)(e)}}var a=s(444372),c=s(201089),h=s(120780),u=s(125226),m=s(77117),d=s(341286),_=s(421907),g=s(658583);async function y(e,t){const s=(0,u.isFeatureEnabled)("watchlist_collapsible_sections")?(0,m.remoteSymbolsFormLocalState)(e,t):t;return d.pendingOpenSeparators.delete(e),(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/replace/?unsafe=true`,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}var S=s(591152);const p=(0,c.getLogger)("MarkedSymbols.Api");class b{getLists(){return(0,h.fetch)("/api/v1/symbols_list/colored/").then(g.handleJSON)}removeSymbols(e,t){return 0===t.length?Promise.resolve():(p.logNormal(`Sending request to remove symbols from ${e}-list: ${t}`),async function(e,t){return(0,u.isFeatureEnabled)("watchlist_collapsible_sections")&&d.pendingOpenSeparators.has(e)?y(e,(0,m.getLocalListSymbols)(e)):(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/remove/`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}(e,t))}appendSymbols(e,t){return 0===t.length?Promise.resolve():(p.logNormal(`Sending request to append symbols to ${e}-list: ${t}`),async function(e,t){return(0,u.isFeatureEnabled)("watchlist_collapsible_sections")&&d.pendingOpenSeparators.has(e)?y(e,(0,m.getLocalListSymbols)(e)):(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/append/`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}(e,t))}replaceSymbols(e,t){return 0===t.length?Promise.resolve():(p.logNormal(`Sending request to replace symbols in ${e}-list: ${t}`),y(e,t))}resetSymbols(e){return 0===e.length?Promise.resolve():(p.logNormal(`Sending request to reset symbols: ${e}`),function(e){return(0,h.fetch)("/api/v1/symbols_list/colored/bulk_remove/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}(e))}resetAll(){return p.logNormal("Sending request to reset ALL symbols"),(0,h.fetch)("/api/v1/symbols_list/colored/",{method:"DELETE"}).then(g.handleJSON)}renameList(e,t){return p.logNormal(`Sending request to rename ${e}-list: ${t}`),function(e,t){return(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/rename/`,{method:"POST",body:JSON.stringify({name:t}),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}(e,t)}shareList(e,t){return p.logNormal(`Sending request to share ${e}-list: ${t}`),(0,S.shareMarkedList)(e,t).then((()=>{}))}changeDescription(e,t){return p.logNormal(`Sending request to change description ${e}-list: ${t}`),function(e,t){return(0,h.fetch)(`/api/v1/symbols_list/colored/${e}/update_meta/`,{method:"POST",body:JSON.stringify({description:t}),headers:{"Content-Type":"application/json"}}).then(g.handleJSON)}(e,t).then((()=>{}))}renameSeparator(e,t,s){return p.logNormal(`Sending request to rename separator ${e}-list: ${t} to ${s}`),async function(e,t,s){return(0,_.commonRenameSeparator)(e,"colored",t,s)}(e,t,s).then((()=>{}))}}var C=s(944454),f=s(526225),v=(s(659863),
s(306388)),L=s(494966),w=s(876332),N=s(740254),O=s(833813),x=s(960337),k=s(781666),E=s(32386),M=s(231780);function T(){return(0,u.isFeatureEnabled)("set_limit_to_1000_for_colored_lists")?1e3:500}const D=(0,c.getLogger)("MarkedSymbols.Model");function P(e){return e.markedLists}class ${constructor(e){var t,l;this._promise=(0,v.initSymbolListService)(),this._service=null,this._executor=null,this._subscription=null,this._connectionStatus=null,this._recover=!1,this._synchronize=async e=>{let t,s;null!==this._executor&&(this._executor.destroy(),this._executor=null,D.logNormal("Executor was destroyed."));try{this._recover&&await(0,f.syncUserData)("marked-symbols");const[o]=await Promise.all([this._api.getLists(),this._promise]);t=await this._resolve(o),s=Date.now(),e.assert()}catch(e){if(e instanceof Error){if(D.logError(`Sync symbols error: ${e.message}`),e.message===M.ROUTINE_CANCELLED_MESSAGE)return;if("ApiError:not_authenticated"===e.name)return this._recover||await(0,f.syncUserData)("marked-symbols"),void(0,k.showSignModal)({feature:"flaggedSymbols"})}throw e}this._recover=!1;const{store:i}=(0,o.ensureNotNull)(this._service);this._createExecutor();const r=this._synchronizationService.getState(),l=null!==r?I(r):null;if(null!==l&&l>=s)return;const a=(0,n.setup)({lists:t.map((e=>{var t,s;return{name:null!==(t=e.name)&&void 0!==t?t:null,description:null!==(s=e.description)&&void 0!==s?s:null,color:e.color,symbols:e.symbols,shared:e.shared,collapsedSeparators:e.collapsedSeparators}})),timestamp:s});i.dispatch(a)},this._handleChange=()=>{var e,t;if(this._synchronizationService.isDestroyed())return;const{store:s}=(0,o.ensureNotNull)(this._service),n=(0,o.ensureNotNull)(P(s.getState()));if(this._synchronizationService.getState()!==n)try{null===(t=(e=this._opts).onChange)||void 0===t||t.call(e,n,(0,o.ensureNotNull)(this._synchronizationService.getState()))}finally{this._synchronizationService.setState(n)}},this._handleExecutorError=(e,t)=>{"ApiError:plan_symbols_limit_reached"!==t.name?this._connectionStatus===C.ConnectionStatus.Open?this._synchronizationService.isDestroyed()||(D.logError(`Failed to execute ${e.type}`),this._recover=!0,this._synchronizationService.syncSymbols()):(0,E.showSimpleDialog)({title:a.t(null,void 0,s(33115)),text:t.message},E.warningModule):(0,x.createGoProDialog)({feature:"watchlistSymbols"})},this._opts=e,this._api=e.api||new b,this._session=e.quoteSession||(0,w.getQuoteSessionInstance)("simple"),this._synchronizationService=new M.SymbolListSynchronizationService({synchronize:this._synchronize,event:e.event,state:null,getTimestamp:I,loggerName:"MarkedSymbolsListModel"}),this._restrictedMarkSymbols=function(e){const{limit:t,colors:s,onLimit:o,onRestrictedColor:l,selector:a}=e;return e=>(c,h)=>{var u,m;const d=h(),_=a(d),{color:g,symbols:y,separators:S}=e;if(null!==g){const e=null!==(m=null===(u=_.lists.byColor[g])||void 0===u?void 0:u.symbols)&&void 0!==m?m:[],n=new Set(e),a=i.qualified.castMany([]);for(const e of new Set(y))!S&&(0,r.isSeparatorItem)(e)||n.has(e)||a.push(e)
;if(!s().includes(g))return void l();if(a.length&&a.length+n.size>t())return void o()}c((0,n.markMany)(e))}}({selector:e=>(0,o.ensureNotNull)(P(e)),limit:null!==(t=e.limit)&&void 0!==t?t:()=>T(),onLimit:()=>{var e,t;D.logNormal("LimitReached"),null===(t=(e=this._opts).onLimit)||void 0===t||t.call(e)},colors:null!==(l=e.colors)&&void 0!==l?l:()=>n.LIST_COLORS.filter(A),onRestrictedColor:()=>{var e,t;null===(t=(e=this._opts).onRestrictedColor)||void 0===t||t.call(e)}}),this._promise.then((e=>{if(this._synchronizationService.isDestroyed())return;this._service=e;const{store:t}=e;this._synchronizationService.setState((0,o.ensureNotNull)(P(t.getState()))),this._subscription=t.subscribe(this._handleChange)})),this._synchronizationService.connect()}destroy(){this._synchronizationService.destroy(),this._subscription&&this._subscription(),this._executor&&this._executor.destroy()}getSymbolsByColor(e){var t;if(null===this._service)return[];const{store:s}=this._service,o=P(s.getState());return null===o?[]:null!==(t=(0,n.getSymbolsByColor)(o,e))&&void 0!==t?t:[]}getLists(){return n.LIST_COLORS.reduce(((e,t)=>(e.set(t,new Set(this.getSymbolsByColor(t))),e)),new Map)}setSymbolsColor(e,t){if(D.logNormal(`Set symbols color ${t}`),null===this._service)return;const s=this._restrictedMarkSymbols({symbols:e,color:t,separators:!1});this._service.store.dispatch(s)}markMany(e){if(D.logNormal(`Mark many symbols: ${e.color}`),null===this._service)return;const t=this._restrictedMarkSymbols(e);this._service.store.dispatch(t)}getSymbolColor(e){if(null===this._service)return null;const{store:t}=this._service,s=P(t.getState());return null===s?null:(0,n.getSymbolColor)(s,e)}clearAllSymbolsColor(){D.logNormal("Clear all symbols color"),null!==this._service&&this._service.store.dispatch((0,n.reset)({}))}syncSymbols(){return this._synchronizationService.syncSymbols()}anonymize(){null!==this._service&&this._service.store.dispatch((0,n.setup)({timestamp:Date.now(),lists:[]}))}connect(){return this._synchronizationService.connect()}closeConnection(){return this._synchronizationService.closeConnection()}_resolve(e){const t=new Set;for(const s of e)if(void 0!==s.symbols)for(const e of s.symbols){(0,L.safeShortName)(e)===e&&t.add(e)}const s=Array.from(t).map((e=>this._session.snapshot(e).then((t=>t.pro_name||e),(()=>e)).then((t=>[e,t]))));return Promise.all(s).then((t=>{const s=new Map(t);return e.map((e=>{var t;const{symbols:o,collapsedSeparators:n}=(0,m.localCollapseStateFromRemoteSymbols)(null!==(t=e.symbols)&&void 0!==t?t:[]);return{id:e.id,name:e.name,description:e.description,color:e.color,shared:e.shared,symbols:o.map((e=>{var t;return null!==(t=s.get(e))&&void 0!==t?t:e})),collapsedSeparators:n}}))}))}_createExecutor(){const{store:e}=(0,o.ensureNotNull)(this._service);this._executor=new l({root:e,selector:e=>(0,o.ensureNotNull)(P(e)),api:this._api,onError:this._handleExecutorError,onWarn:e=>{D.logWarn(e)}}),D.logNormal("Executor was created")}}function A(e){return n.ListColor.Red===e||(0,N.enabled)(O.ProductFeatures.MULTIFLAGGED_SYMBOLS_LISTS)}
function z(e){return!!A(e)||((0,x.createGoProDialog)({feature:"flaggedSymbols"}),!1)}function I(e){return e.timestamp}},387506:(e,t,s)=>{"use strict";s.d(t,{getMarkedSymbolsListServiceInstance:()=>d});var o=s(895171),n=s(444372),i=s(296890),r=s(546079),l=s(779923),a=s(935219),c=s(960337),h=s(740254),u=s(833813);class m{constructor(e){var t;this._symbolChangeHandlers=new Map,this._listChangeHandlers=[],this._initHandlers=[],this._sync=null,this._inited=!1,this._handleChange=(e,t)=>{if(e.lists!==t.lists){this._listChangeHandlers.forEach((s=>{try{s(e,t)}catch(e){}}));for(const[s,o]of Array.from(this._symbolChangeHandlers.entries())){const n=(0,i.getSymbolColor)(e,s),r=(0,i.getSymbolColor)(t,s);n!==r&&o.forEach((e=>{try{e(n,r)}catch(e){}}))}}},this._onLoginStateChange=()=>{let e;this._model.closeConnection(),window.is_authenticated?(this._model.connect(),e=this._syncSymbols()):(this._model.anonymize(),this._inited=!1,e=Promise.resolve()),e.then(this._fireInit)},this._fireInit=()=>{this._initHandlers.forEach((e=>e()))},this._runWithSync=e=>{this._sync?this._sync.then(e):e()},this._handleRestrictedColor=()=>{(0,c.createGoProDialog)({feature:"flaggedSymbols"})},this._limit=()=>{var e;const t=null===(e=(0,h.getConfig)(u.ProductFeatures.WATCHLIST_SYMBOLS))||void 0===e?void 0:e.limit;return void 0!==t&&t<(0,r.getSymbolsLimit)()?t:(0,r.getSymbolsLimit)()},this._handleLimit=()=>{var e;const t=null===(e=(0,h.getConfig)(u.ProductFeatures.WATCHLIST_SYMBOLS))||void 0===e?void 0:e.limit;void 0!==t&&t<(0,r.getSymbolsLimit)()?(0,c.createGoProDialog)({feature:"watchlistSymbols"}):(0,l.showWarning)({title:n.t(null,void 0,s(57467)),text:n.t(null,{replace:{limit:String((0,r.getSymbolsLimit)())}},s(372896))},null)},this._model=new r.MarkedSymbolsListModel({api:e?e.api:void 0,quoteSession:e?e.quoteSession:void 0,onChange:this._handleChange,limit:null!==(t=null==e?void 0:e.limit)&&void 0!==t?t:this._limit,onLimit:this._handleLimit,onRestrictedColor:this._handleRestrictedColor,colors:null==e?void 0:e.colors,event:"marked-symbols"}),this._subscribeLoginStateChange(),this._syncSymbols().then(this._fireInit)}getSymbolsByColor(e){return this._model.getSymbolsByColor(e)}setSymbolsColor(e,t){0!==e.length&&this._runWithSync((()=>{this._model.setSymbolsColor(e,t)}))}getSymbolColor(e){return this._model.getSymbolColor(e)}markMany(e){this._runWithSync((()=>{this._model.markMany(e)}))}clearAllSymbolsColor(){this._runWithSync((()=>{this._model.clearAllSymbolsColor()}))}adjustSymbolsColors(e){const t=new a.ColorManager({context:a.ColorContext.SymbolMarker}),s=!e.map((e=>this.getSymbolColor(e))).includes(null);this.setSymbolsColor(e,s?null:t.getColor())}onSymbolChange(e,t){const s=this._symbolChangeHandlers.get(e);s?s.push(t):this._symbolChangeHandlers.set(e,[t])}offSymbolChange(e,t){const s=this._symbolChangeHandlers.get(e);if(s){const o=s.filter((e=>e!==t));o.length>0?this._symbolChangeHandlers.set(e,o):this._symbolChangeHandlers.delete(e)}}onListChange(e){this._listChangeHandlers.push(e)}offListChange(e){
this._listChangeHandlers=this._listChangeHandlers.filter((t=>t!==e))}onInit(e){this._initHandlers.push(e)}offInit(e){this._initHandlers=this._initHandlers.filter((t=>t!==e))}destroy(){this._model.destroy(),this._unsubscribeLoginStateChange()}isInited(){return this._inited}_subscribeLoginStateChange(){window.loginStateChange&&window.loginStateChange.subscribe(this,this._onLoginStateChange)}_unsubscribeLoginStateChange(){window.loginStateChange&&window.loginStateChange.unsubscribe(this,this._onLoginStateChange)}_syncSymbols(){if(window.is_authenticated){this._sync=this._model.syncSymbols();const e=()=>{this._sync=null,this._inited=!0};return this._sync.then(e).catch(e)}return Promise.resolve()}}const d=(0,o.default)((()=>new m))},328758:(e,t,s)=>{"use strict";s.d(t,{SymbolMarkerSettings:()=>o,SymbolsFilterSettings:()=>n});var o,n,i=s(296890),r=s(62802);!function(e){const t="default_symbol_marker_color";e.getDefaultColor=function(){return r.getValue(t,i.ListColor.Red)},e.setDefaultColor=function(e){r.setValue(t,e,{forceFlush:!0})}}(o||(o={})),function(e){const t="default_symbols_filter_color",s="marked_symbols_filter";e.getDefaultColor=function(){return r.getValue(t,i.ListColor.Red)},e.setDefaultColor=function(e){r.setValue(t,e,{forceFlush:!0})},e.setIsActive=function(e){r.setValue(s,e,{forceFlush:!0})},e.getIsActive=function(){return r.getBool(s,!1)}}(n||(n={}))},591152:(e,t,s)=>{"use strict";s.d(t,{getOwnSharedList:()=>c,shareCustomList:()=>a,shareMarkedList:()=>l});var o=s(296890),n=s(120780),i=s(658583),r=s(822714);function l(e,t){return(0,n.fetch)(`/api/v1/symbols_list/colored/${e}/share/`,{method:"POST",body:JSON.stringify({shared:t}),headers:{"Content-Type":"application/json"}}).then(i.handleJSON).then(r.convertToMarkedSymbolList)}function a(e,t){return(0,n.fetch)(`/api/v1/symbols_list/custom/${e}/share/`,{method:"POST",body:JSON.stringify({shared:t}),headers:{"Content-Type":"application/json"}}).then(i.handleJSON).then(r.convertToCustomSymbolList)}function c(e){return(0,o.isListColor)(e)?(0,n.fetch)(`/api/v1/symbols_list/colored/${e}`,{method:"GET"}).then(i.handleJSON):(0,n.fetch)(`/api/v1/symbols_list/custom/${e}`,{method:"GET"}).then(i.handleJSON)}},623895:(e,t,s)=>{"use strict";function o(e){return"html"in e?{html:e.html}:"text"in e?{content:e.text}:{content:e.content}}s.d(t,{getContent:()=>o})},246093:(e,t,s)=>{"use strict";s.d(t,{Warning:()=>l});var o=s(50959),n=s(444372),i=s(927582),r=s(623895);function l(e){const{title:t,closeOnOutsideClick:l,onClose:c=(()=>{})}=e,h=(0,r.getContent)(e);return o.createElement(i.SimpleDialog,{...h,title:t||n.t(null,void 0,s(533603)),onClose:c,actions:a(e),dataName:"warning-dialog",closeOnOutsideClick:l})}function a(e){const{buttonText:t,intentButton:o,actions:i}=e,r=[{name:"ok",title:t||n.t(null,void 0,s(468988)),intent:o,handler:({dialogClose:e})=>{e()}}];return i&&i.forEach((e=>r.push(e))),r}},32386:(e,t,s)=>{"use strict";s.r(t),s.d(t,{confirmModule:()=>S,renameModule:()=>p,showSimpleDialog:()=>C,warningModule:()=>b});var o=s(50959),n=s(444372),i=s(927582),r=s(623895)
;var l=s(303616),a=s(45553),c=s(955021);function h(e){const{maxLength:t,value:s,placeholder:n,onValueChange:i,nameInputRef:r,source:h=[],autocompleteFilter:u}=e,{isSmallTablet:m}=(0,o.useContext)(l.SimpleDialogContext),d=o.useRef(null);return(0,o.useLayoutEffect)((()=>{d.current&&d.current.select()}),[]),o.createElement(o.Fragment,null,function(){if("content"in e)return o.createElement("div",{className:c.label},e.content);if("html"in e)return o.createElement("div",{className:c.label,dangerouslySetInnerHTML:{__html:e.html}});return null}(),o.createElement(a.Autocomplete,{maxLength:t,value:s,onChange:function(e){i(e)},allowUserDefinedValues:!0,preventOnFocusOpen:!0,noEmptyText:!0,source:h,preventSearchOnEmptyQuery:!0,filter:u,setupHTMLInput:function(e){d.current=e,r&&(r.current=e)},size:m?"large":void 0,placeholder:n,suggestionsInPortal:!0}))}function u(e){return Boolean(e.trim())}var m=s(246093),d=s(500962),_=s(650151),g=s(670797);const y=new(s(322654).DialogsOpenerManager);const S=function(e){const{title:t,onClose:l=(()=>{}),mainButtonText:a,mainButtonIntent:c,cancelButtonText:h,closeOnOutsideClick:u,onConfirm:m,onCancel:d}=e,_=(0,r.getContent)(e);return o.createElement(i.SimpleDialog,{..._,title:t||n.t(null,void 0,s(994443)),onClose:l,actions:[{name:"yes",title:a||n.t(null,void 0,s(879831)),intent:c||"success",handler:m},{name:"no",type:"button",title:h||n.t(null,void 0,s(606255)),appearance:"stroke",intent:"default",handler:e=>{d?d(e):e.dialogClose()}}],dataName:"confirm-dialog",closeOnOutsideClick:u})},p=function(e){const{title:t,maxLength:l,initValue:a,placeholder:c,onClose:m=(()=>{}),mainButtonText:d,mainButtonIntent:_,cancelButtonText:g,validator:y=u,onRename:S,source:p,autocompleteFilter:b,onCancel:C}=e,f=(0,o.useRef)(null),[v,L]=(0,o.useState)(a||""),[w,N]=(0,o.useState)((()=>y(v))),O=(0,r.getContent)(e);return o.createElement(i.SimpleDialog,{title:t||n.t(null,void 0,s(435038)),content:o.createElement(h,{...O,nameInputRef:f,maxLength:l,placeholder:c,value:v,onValueChange:function(e){L(e),N(y(e))},source:p,autocompleteFilter:b}),onClose:m,actions:[{disabled:!w,name:"save",title:d||n.t(null,void 0,s(185520)),intent:_||"primary",handler:({dialogClose:e,innerManager:t})=>S({newValue:v,focusInput:x,dialogClose:e,innerManager:t})},{name:"cancel",type:"button",title:g||n.t(null,void 0,s(620036)),appearance:"stroke",intent:"default",handler:e=>{C?C(e):e.dialogClose()}}],dataName:"rename-dialog"});function x(){f.current&&f.current.focus()}},b=m.Warning,C=function(e,t,s){const{title:n}=e;let i=`${n}_`;if(i+="text"in e?e.text:"html"in e?e.html:e.id,y.isOpened(i))return(0,_.ensureDefined)(y.getDialogPayload(i)).closeHandler;const r=document.createElement("div"),l=()=>{var t;null===(t=e.onClose)||void 0===t||t.call(e),d.unmountComponentAtNode(r),y.setAsClosed(i)};return d.render(o.createElement(g.SlotContext.Provider,{value:s||null},o.createElement(t,{...e,onClose:l})),r),y.setAsOpened(i,{closeHandler:l}),l}},231780:(e,t,s)=>{"use strict";s.d(t,{ROUTINE_CANCELLED_MESSAGE:()=>c,SymbolListSynchronizationService:()=>h})
;var o=s(262078),n=s(944454),i=s(201089);s(659863);const r=6e5,l=3e4,a=3e4,c="ROUTINE_CANCELLED";class h{constructor(e){this._destroyed=!1,this._state=null,this._sync=null,this._disconnectTimestamp=null,this._prevConnectionStatus=null,this._onPushStreamChange=e=>{window.user&&window.user.session_hash!==e.session_hash?o.pushStreamMultiplexer.ownPushStream()?(this._logger.logNormal("Cross browser sync"),this.syncSymbols(e)):this._logger.logDebug("Sync skipped: on secondary tab"):this._logger.logDebug("Sync skipped: session hash")},this._onPushStreamStatus=e=>{const t=Date.now();if(e===n.ConnectionStatus.Open&&this._prevConnectionStatus===n.ConnectionStatus.Closed){this._prevConnectionStatus=e;const s=null===this._disconnectTimestamp?0:t-this._disconnectTimestamp;if(this._disconnectTimestamp=null,!window.is_authenticated)return void this._logger.logDebug("Sync skipped: is not authenticated");if(!o.pushStreamMultiplexer.ownPushStream())return void this._logger.logDebug("Sync skipped: on secondary tab");if(s<r)return void this._logger.logDebug("Sync skipped: short disconnection");this._reconnectTimeout=setTimeout((()=>{const e=null!==this._state?this._getTimestamp(this._state):null;null===e||e<t?(this._logger.logNormal("Reconnect sync"),this.syncSymbols()):this._logger.logNormal("Reconnect sync handled by another tab")}),Math.random()*a+l)}else e===n.ConnectionStatus.Closed&&(this._disconnectTimestamp=Date.now(),this._prevConnectionStatus=e,clearTimeout(this._reconnectTimeout))};const{event:t,state:s,synchronize:c,getTimestamp:h,loggerName:u}=e;this._event=t,this._synchronize=c,this._state=s,this._getTimestamp=h,this._logger=(0,i.getLogger)(`${u}.SymbolListSynchronizationService`),this.connect()}destroy(){this._destroyed=!0,this._sync=null,this.closeConnection()}syncSymbols(e){if(null===this._sync){const t=this._sync=this._synchronize({assert:()=>{if(this._sync!==t)throw new Error(c)},cancel:()=>{this._sync=null}},e).then((()=>{this._sync=null}),(e=>{throw this._sync=null,e}))}return this._sync}connect(){this._subscribeOnPushStream()}closeConnection(){this._unsubscribeOnPushStream()}isDestroyed(){return this._destroyed}getState(){return this._state}setState(e){this._state=e}_subscribeOnPushStream(){o.pushStreamMultiplexer.on(this._event,this._onPushStreamChange),o.pushStreamMultiplexer.onPrivateStatus(this._onPushStreamStatus)}_unsubscribeOnPushStream(){o.pushStreamMultiplexer.off(this._event,this._onPushStreamChange),o.pushStreamMultiplexer.offStatus(this._onPushStreamStatus),clearTimeout(this._reconnectTimeout),this._prevConnectionStatus=null}}},494966:(e,t,s)=>{"use strict";s.d(t,{safeShortName:()=>n});var o=s(59171);function n(e){try{return(0,o.shortName)(e)}catch(t){return e}}}}]);
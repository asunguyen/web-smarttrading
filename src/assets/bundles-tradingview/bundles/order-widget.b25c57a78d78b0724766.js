(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[87502,58431],{350191:e=>{e.exports={wrap:"wrap-Un5MtNUE",list:"list-Un5MtNUE",item:"item-Un5MtNUE",selected:"selected-Un5MtNUE",bluishItem:"bluishItem-Un5MtNUE",noPadding:"noPadding-Un5MtNUE"}},284316:e=>{e.exports={badge:"badge-PlSmolIm",content:"content-PlSmolIm","size-xsmall":"size-xsmall-PlSmolIm","size-small":"size-small-PlSmolIm","size-medium":"size-medium-PlSmolIm","size-large":"size-large-PlSmolIm","size-xlarge":"size-xlarge-PlSmolIm"}},782211:e=>{e.exports={group:"group-NGVKpq85"}},281026:e=>{e.exports={container:"container-WDZ0PRNh","container-xxsmall":"container-xxsmall-WDZ0PRNh","container-xsmall":"container-xsmall-WDZ0PRNh","container-small":"container-small-WDZ0PRNh","container-medium":"container-medium-WDZ0PRNh","container-large":"container-large-WDZ0PRNh","intent-default":"intent-default-WDZ0PRNh",focused:"focused-WDZ0PRNh",readonly:"readonly-WDZ0PRNh",disabled:"disabled-WDZ0PRNh","with-highlight":"with-highlight-WDZ0PRNh",grouped:"grouped-WDZ0PRNh","adjust-position":"adjust-position-WDZ0PRNh","first-row":"first-row-WDZ0PRNh","first-col":"first-col-WDZ0PRNh",stretch:"stretch-WDZ0PRNh","font-size-medium":"font-size-medium-WDZ0PRNh","font-size-large":"font-size-large-WDZ0PRNh","no-corner-top-left":"no-corner-top-left-WDZ0PRNh","no-corner-top-right":"no-corner-top-right-WDZ0PRNh","no-corner-bottom-right":"no-corner-bottom-right-WDZ0PRNh","no-corner-bottom-left":"no-corner-bottom-left-WDZ0PRNh","size-xxsmall":"size-xxsmall-WDZ0PRNh","size-xsmall":"size-xsmall-WDZ0PRNh","size-small":"size-small-WDZ0PRNh","size-medium":"size-medium-WDZ0PRNh","size-large":"size-large-WDZ0PRNh","intent-success":"intent-success-WDZ0PRNh","intent-warning":"intent-warning-WDZ0PRNh","intent-danger":"intent-danger-WDZ0PRNh","intent-primary":"intent-primary-WDZ0PRNh","border-none":"border-none-WDZ0PRNh","border-thin":"border-thin-WDZ0PRNh","border-thick":"border-thick-WDZ0PRNh",highlight:"highlight-WDZ0PRNh",shown:"shown-WDZ0PRNh"}},7236:e=>{e.exports={"inner-slot":"inner-slot-W53jtLjw",interactive:"interactive-W53jtLjw",icon:"icon-W53jtLjw","inner-middle-slot":"inner-middle-slot-W53jtLjw","before-slot":"before-slot-W53jtLjw","after-slot":"after-slot-W53jtLjw"}},330930:e=>{e.exports={input:"input-RUSovanF","size-xxsmall":"size-xxsmall-RUSovanF","size-xsmall":"size-xsmall-RUSovanF","size-small":"size-small-RUSovanF","size-medium":"size-medium-RUSovanF","size-large":"size-large-RUSovanF","with-start-slot":"with-start-slot-RUSovanF","with-end-slot":"with-end-slot-RUSovanF"}},422191:e=>{e.exports={label:"label-oHMFhnC8"}},678370:e=>{e.exports={"intent-default":"intent-default-EZuD3gZZ","intent-danger":"intent-danger-EZuD3gZZ","intent-warning":"intent-warning-EZuD3gZZ","intent-success":"intent-success-EZuD3gZZ","icon-wrapper-size-small":"icon-wrapper-size-small-EZuD3gZZ","icon-wrapper-size-medium":"icon-wrapper-size-medium-EZuD3gZZ","icon-wrapper-size-large":"icon-wrapper-size-large-EZuD3gZZ","icon-wrapper":"icon-wrapper-EZuD3gZZ",icon:"icon-EZuD3gZZ"}},493266:e=>{
e.exports={priceLabel:"priceLabel-mpa2WWtU",list:"list-mpa2WWtU",item:"item-mpa2WWtU",selected:"selected-mpa2WWtU",input:"input-mpa2WWtU",wait:"wait-mpa2WWtU"}},556644:e=>{e.exports={absolutePriceDropdownItem:"absolutePriceDropdownItem-QDwbzjCO",price:"price-QDwbzjCO",labelsGroup:"labelsGroup-QDwbzjCO"}},651109:e=>{e.exports={labels:"labels-Llv4yjs6",rewardRisk:"rewardRisk-Llv4yjs6",rewardRiskText:"rewardRiskText-Llv4yjs6",bracketControl:"bracketControl-Llv4yjs6",control:"control-Llv4yjs6",wait:"wait-Llv4yjs6",checkboxLabel:"checkboxLabel-Llv4yjs6",clickableTextColor:"clickableTextColor-Llv4yjs6",checkboxWrapper:"checkboxWrapper-Llv4yjs6",slCheckboxWrapper:"slCheckboxWrapper-Llv4yjs6",checkboxLabelWrapper:"checkboxLabelWrapper-Llv4yjs6",checkbox:"checkbox-Llv4yjs6",inputGroup:"inputGroup-Llv4yjs6",rightBlock:"rightBlock-Llv4yjs6",label:"label-Llv4yjs6",bracketInCurrency:"bracketInCurrency-Llv4yjs6",bracketInPercent:"bracketInPercent-Llv4yjs6",bracketInPips:"bracketInPips-Llv4yjs6",bracketInPrice:"bracketInPrice-Llv4yjs6"}},114891:e=>{e.exports={title:"title-DPlbqdw3",input:"input-DPlbqdw3",wait:"wait-DPlbqdw3",checkboxWrapper:"checkboxWrapper-DPlbqdw3",checkboxLabel:"checkboxLabel-DPlbqdw3"}},223302:e=>{e.exports={customField:"customField-64DiJaqR"}},191547:e=>{e.exports={wrapper:"wrapper-kb0OuE9E",row:"row-kb0OuE9E",header:"header-kb0OuE9E",cell:"cell-kb0OuE9E",cellTitle:"cellTitle-kb0OuE9E",cellValue:"cellValue-kb0OuE9E",cellRightAligned:"cellRightAligned-kb0OuE9E",cellSideBuy:"cellSideBuy-kb0OuE9E",cellSideSell:"cellSideSell-kb0OuE9E",marker:"marker-kb0OuE9E",disabled:"disabled-kb0OuE9E"}},312863:e=>{e.exports={innerLabel:"innerLabel-DjbvBF5Y"}},647253:e=>{e.exports={container:"container-JQC67cD9",leverageButton:"leverageButton-JQC67cD9",disabledLeverageButton:"disabledLeverageButton-JQC67cD9"}},408178:e=>{e.exports={dialog:"dialog-mAVKt9Z3",dialogBody:"dialogBody-mAVKt9Z3"}},849071:e=>{e.exports={orderInfo:"orderInfo-ZCVq_FIR",title:"title-ZCVq_FIR",contentWrapper:"contentWrapper-ZCVq_FIR",right:"right-ZCVq_FIR"}},601235:e=>{e.exports={panelContainer:"panelContainer-qPQHH_hi",orderPanel:"orderPanel-qPQHH_hi"}},15425:e=>{e.exports={scrollWrapper:"scrollWrapper-XYi0nst9",content:"content-XYi0nst9",separator:"separator-XYi0nst9",controls:"controls-XYi0nst9",button:"button-XYi0nst9",warning:"warning-XYi0nst9",warning__icon:"warning__icon-XYi0nst9",error:"error-XYi0nst9"}},472804:e=>{e.exports={controlGroup:"controlGroup-HcMnXcBP",absolutePriceControl:"absolutePriceControl-HcMnXcBP",withRelative:"withRelative-HcMnXcBP",relativePriceControl:"relativePriceControl-HcMnXcBP"}},338043:e=>{e.exports={orderWidget:"orderWidget-F15FKlrH",header:"header-F15FKlrH",side:"side-F15FKlrH",doneButton:"doneButton-F15FKlrH",customField:"customField-F15FKlrH",duration:"duration-F15FKlrH",customFieldsWrapper:"customFieldsWrapper-F15FKlrH",separator:"separator-F15FKlrH",resizeHandler:"resizeHandler-F15FKlrH",orderTicket:"orderTicket-F15FKlrH",orderInfoAndSeparator:"orderInfoAndSeparator-F15FKlrH",topWrapper:"topWrapper-F15FKlrH",
centerBlock:"centerBlock-F15FKlrH","brackets-wrapper":"brackets-wrapper-F15FKlrH",brackets:"brackets-F15FKlrH",quantityWrapper:"quantityWrapper-F15FKlrH",leverage:"leverage-F15FKlrH",screenWithKeyholeIcon:"screenWithKeyholeIcon-F15FKlrH",sadScreenIcon:"sadScreenIcon-F15FKlrH",emptyStateBlockWrapper:"emptyStateBlockWrapper-F15FKlrH",scrollWrapper:"scrollWrapper-F15FKlrH"}},74704:e=>{e.exports={button:"button-pP_E6i3F"}},48486:e=>{e.exports={priceLabel:"priceLabel-s5LgTmXf",ask:"ask-s5LgTmXf",bid:"bid-s5LgTmXf",last:"last-s5LgTmXf"}},954568:e=>{e.exports={progressBarContainer:"progressBarContainer-Zcxs1Uvi",marginsContainer:"marginsContainer-Zcxs1Uvi",margin:"margin-Zcxs1Uvi",title:"title-Zcxs1Uvi",price:"price-Zcxs1Uvi",usedMargin:"usedMargin-Zcxs1Uvi",progressBar:"progressBar-Zcxs1Uvi",track:"track-Zcxs1Uvi",progress:"progress-Zcxs1Uvi",fullFilled:"fullFilled-Zcxs1Uvi",marginOverflow:"marginOverflow-Zcxs1Uvi",wait:"wait-Zcxs1Uvi"}},812239:e=>{e.exports={control:"control-jhgU4iCE",title:"title-jhgU4iCE",label:"label-jhgU4iCE",informer:"informer-jhgU4iCE",wait:"wait-jhgU4iCE",units:"units-jhgU4iCE",calculatorIcon:"calculatorIcon-jhgU4iCE",isOpened:"isOpened-jhgU4iCE"}},115356:e=>{e.exports={calculator:"calculator-vLRZh3q9",calculatorWithInput:"calculatorWithInput-vLRZh3q9",input:"input-vLRZh3q9",buttonsWrapper:"buttonsWrapper-vLRZh3q9",buttonWithOperation:"buttonWithOperation-vLRZh3q9",buttonIcon:"buttonIcon-vLRZh3q9"}},368173:e=>{e.exports={menuBox:"menuBox-rm7KgfIT"}},460337:e=>{e.exports={wrapper:"wrapper-IWgXIGoE",label:"label-IWgXIGoE",wait:"wait-IWgXIGoE",title:"title-IWgXIGoE",popupMenuItem:"popupMenuItem-IWgXIGoE",value:"value-IWgXIGoE"}},433199:e=>{e.exports={wrapper:"wrapper-Gt0vOpyz",control:"control-Gt0vOpyz",label:"label-Gt0vOpyz",units:"units-Gt0vOpyz",single:"single-Gt0vOpyz",calculatorIcon:"calculatorIcon-Gt0vOpyz",isOpened:"isOpened-Gt0vOpyz",risk:"risk-Gt0vOpyz",wait:"wait-Gt0vOpyz"}},315336:e=>{e.exports={dropdown:"dropdown-Ep8u3tCS",hidden:"hidden-Ep8u3tCS",popupMenuItem:"popupMenuItem-Ep8u3tCS",labelWrapper:"labelWrapper-Ep8u3tCS",toolbox:"toolbox-Ep8u3tCS",hintPlaceholder:"hintPlaceholder-Ep8u3tCS"}},78007:e=>{e.exports={pipsLabel:"pipsLabel-oAJwOoJe",openButton:"openButton-oAJwOoJe",iconWrapper:"iconWrapper-oAJwOoJe",openIcon:"openIcon-oAJwOoJe",wait:"wait-oAJwOoJe",opened:"opened-oAJwOoJe",list:"list-oAJwOoJe",item:"item-oAJwOoJe",selected:"selected-oAJwOoJe",input:"input-oAJwOoJe"}},968625:e=>{e.exports={relativePriceDropdownItem:"relativePriceDropdownItem-L1mdgTgI",price:"price-L1mdgTgI"}},984040:e=>{e.exports={restrictions:"restrictions-kbYnGQgu",restriction:"restriction-kbYnGQgu",hardToBorrow:"hardToBorrow-kbYnGQgu",halted:"halted-kbYnGQgu"}},120693:e=>{e.exports={restrictions:"restrictions-B5GOsH7j",smallPaddings:"smallPaddings-B5GOsH7j",sideControl:"sideControl-B5GOsH7j",section:"section-B5GOsH7j",active:"active-B5GOsH7j",sell:"sell-B5GOsH7j",buy:"buy-B5GOsH7j",title:"title-B5GOsH7j",typeSide:"typeSide-B5GOsH7j",value:"value-B5GOsH7j",valueNoData:"valueNoData-B5GOsH7j",
spread:"spread-B5GOsH7j",isLongValue:"isLongValue-B5GOsH7j",disable:"disable-B5GOsH7j"}},672273:e=>{e.exports={tabsContainer:"tabsContainer-zC5M0yfs"}},860015:e=>{e.exports={wrap:"wrap-ne5qGlZh",icon:"icon-ne5qGlZh",text:"text-ne5qGlZh",disabled:"disabled-ne5qGlZh"}},982434:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},252693:e=>{e.exports={container:"container-Tv7LSjUz",overlayScrollWrap:"overlayScrollWrap-Tv7LSjUz",wrapper:"wrapper-Tv7LSjUz"}},977253:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},885004:e=>{e.exports={clickableText:"clickableText-RTuybJqa",clickableTextColor:"clickableTextColor-RTuybJqa"}},963208:e=>{e.exports={body:"body-X70j90Zy"}},17817:e=>{e.exports={footer:"footer-fSCU20uC"}},278895:e=>{e.exports={header:"header-BitPgYCK",close:"close-BitPgYCK"}},639379:e=>{e.exports={message:"message-tNeiOkjz",error:"error-tNeiOkjz"}},109315:e=>{e.exports={container:"container-HTBJo9ba",top:"top-HTBJo9ba"}},844022:e=>{e.exports={errors:"errors-bghR31WL",show:"show-bghR31WL",error:"error-bghR31WL","visually-hidden":"visually-hidden-bghR31WL"}},956541:e=>{e.exports={placeHolder:"placeHolder-ylwae_Gt",hidden:"hidden-ylwae_Gt"}},372002:e=>{e.exports={wrapper:"wrapper-K4u4Ng3Z",title:"title-K4u4Ng3Z",text:"text-K4u4Ng3Z",button:"button-K4u4Ng3Z"}},342335:e=>{e.exports={"icon-wrapper":"icon-wrapper-dikdewwx","with-tooltip":"with-tooltip-dikdewwx","no-active-state":"no-active-state-dikdewwx"}},240461:e=>{e.exports={"error-icon":"error-icon-UhKAouIg","intent-danger":"intent-danger-UhKAouIg","intent-warning":"intent-warning-UhKAouIg"}},927345:e=>{e.exports={"static-messages":"static-messages-cF4vS9J8",errors:"errors-cF4vS9J8",warnings:"warnings-cF4vS9J8","success-mesages":"success-mesages-cF4vS9J8","input-description":"input-description-cF4vS9J8",message:"message-cF4vS9J8"}},902390:e=>{e.exports={list:"list-HGwPo2aR",item:"item-HGwPo2aR"}},445015:e=>{e.exports={"link-item":"link-item-eIA09f0e"}},685200:e=>{e.exports={"arrow-icon":"arrow-icon-NIrWNOPk",dropped:"dropped-NIrWNOPk","size-xsmall":"size-xsmall-NIrWNOPk","size-small":"size-small-NIrWNOPk","size-medium":"size-medium-NIrWNOPk","size-large":"size-large-NIrWNOPk","size-xlarge":"size-xlarge-NIrWNOPk"}},125164:e=>{e.exports={"underline-tab":"underline-tab-cfYYXvwA","disable-focus-outline":"disable-focus-outline-cfYYXvwA","enable-cursor-pointer":"enable-cursor-pointer-cfYYXvwA",selected:"selected-cfYYXvwA","disable-active-state-styles":"disable-active-state-styles-cfYYXvwA","size-xsmall":"size-xsmall-cfYYXvwA","size-small":"size-small-cfYYXvwA","size-medium":"size-medium-cfYYXvwA","size-large":"size-large-cfYYXvwA","size-xlarge":"size-xlarge-cfYYXvwA",fake:"fake-cfYYXvwA","margin-xsmall":"margin-xsmall-cfYYXvwA","margin-small":"margin-small-cfYYXvwA","margin-medium":"margin-medium-cfYYXvwA","margin-large":"margin-large-cfYYXvwA","margin-xlarge":"margin-xlarge-cfYYXvwA",
"ellipsis-children":"ellipsis-children-cfYYXvwA"}},679877:e=>{e.exports={"scroll-wrap":"scroll-wrap-SmxgjhBJ","size-xlarge":"size-xlarge-SmxgjhBJ","enable-scroll":"enable-scroll-SmxgjhBJ","underline-tabs":"underline-tabs-SmxgjhBJ","size-large":"size-large-SmxgjhBJ","size-medium":"size-medium-SmxgjhBJ","size-small":"size-small-SmxgjhBJ","size-xsmall":"size-xsmall-SmxgjhBJ","make-grid-column":"make-grid-column-SmxgjhBJ","stretch-tabs":"stretch-tabs-SmxgjhBJ","equal-tab-size":"equal-tab-size-SmxgjhBJ"}},810047:e=>{e.exports={underline:"underline-Pun8HxCz",center:"center-Pun8HxCz",corner:"corner-Pun8HxCz",disabled:"disabled-Pun8HxCz"}},774465:(e,t,r)=>{"use strict";r.d(t,{AnchorBadge:()=>m,Badge:()=>p,BadgeSize:()=>n.BadgeSize,ButtonBadge:()=>h});var s=r(50959),n=r(105573),o=r(497754),a=r.n(o),i=r(284316),l=r.n(i);function c(e){const{size:t=n.BadgeSize.Medium,className:r,isPaidBadge:s}=e;return a()(!s&&l().badge,t&&l()[`size-${t}`],r)}function u(e){return a()(c(e),l().anchor)}function d(e){const{children:t,contentClassName:r}=e;return s.createElement("span",{className:a()(l().content,r)},t)}function p(e){const{size:t=n.BadgeSize.Medium,children:r,className:o,contentClassName:a,...i}=e;return s.createElement("span",{...i,className:c({size:t,className:o})},s.createElement(d,{contentClassName:a},r))}function h(e){const{size:t,children:r,type:n="button",className:o,contentClassName:a,...i}=e;return s.createElement("button",{...i,type:n,className:u({size:t,className:o})},s.createElement(d,{contentClassName:a},r))}function m(e){const{size:t=n.BadgeSize.Medium,children:r,className:o,contentClassName:a,...i}=e;return s.createElement("a",{...i,className:u({size:t,className:o})},s.createElement(d,{contentClassName:a},r))}},105573:(e,t,r)=>{"use strict";var s;r.d(t,{BadgeSize:()=>s}),function(e){e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge"}(s||(s={}))},540975:(e,t,r)=>{"use strict";r.d(t,{AnchorButton:()=>d,Button:()=>c});var s=r(50959),n=r(915812);function o(e="default"){switch(e){case"default":return"primary";case"stroke":return"secondary"}}function a(e="primary"){switch(e){case"primary":return"brand";case"success":return"green";case"default":return"gray";case"danger":return"red"}}function i(e="m"){switch(e){case"s":return"xsmall";case"m":return"small";case"l":return"large"}}function l(e){const{intent:t,size:r,appearance:s,useFullWidth:n,icon:l,...c}=e;return{...c,color:a(t),size:i(r),variant:o(s),stretch:n,startIcon:l}}function c(e){return s.createElement(n.SquareButton,{...l(e)})}function u(e){const{intent:t,size:r,appearance:s,useFullWidth:n,icon:l,...c}=e;return{...c,color:a(t),size:i(r),variant:o(s),stretch:n,startIcon:l}}function d(e){return s.createElement(n.SquareAnchorButton,{...u(e)})}},495593:(e,t,r)=>{"use strict";r.d(t,{ControlGroup:()=>c});var s=r(50959),n=r(497754),o=r(301792),a=r(782211),i=r.n(a);function l(e,t,r){return{isTop:e<t,isRight:e%t==t-1,isBottom:e>=t*(r-1),isLeft:e%t==0}}function c(e){
const{children:t,rows:r,cols:a,disablePositionAdjustment:c,className:u,...d}=e,p=s.Children.count(t),h=null!=a?a:p,m=null!=r?r:function(e,t){return Math.ceil(e/t)}(p,h),v=(0,s.useMemo)((()=>{const e=[];for(let t=0;t<p;t++)e.push({isGrouped:!0,cellState:l(t,h,m),disablePositionAdjustment:c});return e}),[p,h,m,c]),f=s.Children.map(t,((e,t)=>s.createElement(o.ControlGroupContext.Provider,{value:v[t]},e))),g={"--ui-lib-control-group-cols":h.toString(10),"--ui-lib-control-group-rows":m.toString(10)};return s.createElement("span",{className:n(i().group,u),style:g,...d},f)}},452395:(e,t,r)=>{"use strict";r.d(t,{ControlSkeleton:()=>b,InputClasses:()=>v});var s=r(50959),n=r(497754),o=r(650151),a=r(662929),i=r(8626),l=r(301792),c=r(307754);var u=r(281026),d=r.n(u);function p(e){let t="";return 0!==e&&(1&e&&(t=n(t,d()["no-corner-top-left"])),2&e&&(t=n(t,d()["no-corner-top-right"])),4&e&&(t=n(t,d()["no-corner-bottom-right"])),8&e&&(t=n(t,d()["no-corner-bottom-left"]))),t}function h(e,t,r,s){const{removeRoundBorder:o,className:a,intent:i="default",borderStyle:l="thin",size:u,highlight:h,disabled:m,readonly:v,stretch:f,noReadonlyStyles:g,isFocused:b}=e,C=p(null!=o?o:(0,c.getGroupCellRemoveRoundBorders)(r));return n(d().container,d()[`container-${u}`],d()[`intent-${i}`],d()[`border-${l}`],u&&d()[`size-${u}`],C,h&&d()["with-highlight"],m&&d().disabled,v&&!g&&d().readonly,b&&d().focused,f&&d().stretch,t&&d().grouped,!s&&d()["adjust-position"],r.isTop&&d()["first-row"],r.isLeft&&d()["first-col"],a)}function m(e,t,r){const{highlight:s,highlightRemoveRoundBorder:o}=e;if(!s)return d().highlight;const a=p(null!=o?o:(0,c.getGroupCellRemoveRoundBorders)(t));return n(d().highlight,d().shown,d()[`size-${r}`],a)}const v={FontSizeMedium:(0,o.ensureDefined)(d()["font-size-medium"]),FontSizeLarge:(0,o.ensureDefined)(d()["font-size-large"])},f={passive:!1};function g(e,t){const{style:r,id:n,role:o,onFocus:c,onBlur:u,onMouseOver:d,onMouseOut:p,onMouseDown:v,onMouseUp:g,onKeyDown:b,onClick:C,tabIndex:y,startSlot:E,middleSlot:S,endSlot:w,onWheel:k,onWheelNoPassive:N=null,size:_}=e,{isGrouped:x,cellState:P,disablePositionAdjustment:M=!1}=(0,s.useContext)(l.ControlGroupContext),T=function(e,t=null,r){const n=(0,s.useRef)(null),o=(0,s.useRef)(null),a=(0,s.useCallback)((()=>{if(null===n.current||null===o.current)return;const[e,t,r]=o.current;null!==t&&n.current.addEventListener(e,t,r)}),[]),i=(0,s.useCallback)((()=>{if(null===n.current||null===o.current)return;const[e,t,r]=o.current;null!==t&&n.current.removeEventListener(e,t,r)}),[]),l=(0,s.useCallback)((e=>{i(),n.current=e,a()}),[]);return(0,s.useEffect)((()=>(o.current=[e,t,r],a(),i)),[e,t,r]),l}("wheel",N,f);return s.createElement("span",{style:r,id:n,role:o,className:h(e,x,P,M),tabIndex:y,ref:(0,a.useMergedRefs)([t,T]),onFocus:c,onBlur:u,onMouseOver:d,onMouseOut:p,onMouseDown:v,onMouseUp:g,onKeyDown:b,onClick:C,onWheel:k,...(0,i.filterDataProps)(e),...(0,i.filterAriaProps)(e)},E,S,w,s.createElement("span",{className:m(e,P,_)}))}g.displayName="ControlSkeleton";const b=s.forwardRef(g)},
514420:(e,t,r)=>{"use strict";r.d(t,{AfterSlot:()=>d,BeforeSlot:()=>i,EndSlot:()=>u,MiddleSlot:()=>c,StartSlot:()=>l});var s=r(50959),n=r(497754),o=r(7236),a=r.n(o);function i(e){const{className:t,children:r}=e;return s.createElement("span",{className:n(a()["before-slot"],t)},r)}function l(e){const{className:t,interactive:r=!0,icon:o=!1,children:i}=e;return s.createElement("span",{className:n(a()["inner-slot"],r&&a().interactive,o&&a().icon,t)},i)}function c(e){const{className:t,children:r}=e;return s.createElement("span",{className:n(a()["inner-slot"],a()["inner-middle-slot"],t)},r)}function u(e){const{className:t,interactive:r=!0,icon:o=!1,children:i}=e;return s.createElement("span",{className:n(a()["inner-slot"],r&&a().interactive,o&&a().icon,t)},i)}function d(e){const{className:t,children:r}=e;return s.createElement("span",{className:n(a()["after-slot"],t)},r)}},142135:(e,t,r)=>{"use strict";r.d(t,{Input:()=>s.Input,InputControl:()=>s.InputControl});var s=r(314551)},314551:(e,t,r)=>{"use strict";r.d(t,{Input:()=>g,InputControl:()=>b});var s=r(50959),n=r(497754),o=r(8626),a=r(763341),i=r(151057),l=r(662929),c=r(207357),u=r(405964),d=r(633750),p=r(452395),h=r(514420),m=r(330930),v=r.n(m);function f(e){return!(0,o.isAriaAttribute)(e)&&!(0,o.isDataAttribute)(e)}function g(e){const{id:t,title:r,role:a,tabIndex:i,placeholder:l,name:c,type:u,value:d,defaultValue:m,draggable:g,autoComplete:b,autoFocus:C,maxLength:y,min:E,max:S,step:w,pattern:k,inputMode:N,onSelect:_,onFocus:x,onBlur:P,onKeyDown:M,onKeyUp:T,onKeyPress:I,onChange:B,onDragStart:O,size:D="small",className:R,inputClassName:F,disabled:W,readonly:L,containerTabIndex:z,startSlot:H,endSlot:A,reference:V,containerReference:Z,onContainerFocus:U,...K}=e,j=(0,o.filterProps)(K,f),q={...(0,o.filterAriaProps)(K),...(0,o.filterDataProps)(K),id:t,title:r,role:a,tabIndex:i,placeholder:l,name:c,type:u,value:d,defaultValue:m,draggable:g,autoComplete:b,autoFocus:C,maxLength:y,min:E,max:S,step:w,pattern:k,inputMode:N,onSelect:_,onFocus:x,onBlur:P,onKeyDown:M,onKeyUp:T,onKeyPress:I,onChange:B,onDragStart:O};return s.createElement(p.ControlSkeleton,{...j,disabled:W,readonly:L,tabIndex:z,className:n(v().container,R),size:D,ref:Z,onFocus:U,startSlot:H,middleSlot:s.createElement(h.MiddleSlot,null,s.createElement("input",{...q,className:n(v().input,v()[`size-${D}`],F,H&&v()["with-start-slot"],A&&v()["with-end-slot"]),disabled:W,readOnly:L,ref:V})),endSlot:A})}function b(e){e=(0,c.useControl)(e);const{disabled:t,autoSelectOnFocus:r,tabIndex:n=0,onFocus:o,onBlur:p,reference:h,containerReference:m=null}=e,v=(0,s.useRef)(null),f=(0,s.useRef)(null),[b,C]=(0,u.useFocus)(),y=t?void 0:b?-1:n,E=t?void 0:b?n:-1,{isMouseDown:S,handleMouseDown:w,handleMouseUp:k}=(0,d.useIsMouseDown)(),N=(0,a.createSafeMulticastEventHandler)(C.onFocus,(function(e){r&&!S.current&&(0,i.selectAllContent)(e.currentTarget)}),o),_=(0,a.createSafeMulticastEventHandler)(C.onBlur,p),x=(0,s.useCallback)((e=>{v.current=e,h&&("function"==typeof h&&h(e),"object"==typeof h&&(h.current=e))}),[v,h]);return s.createElement(g,{
...e,isFocused:b,containerTabIndex:y,tabIndex:E,onContainerFocus:function(e){f.current===e.target&&null!==v.current&&v.current.focus()},onFocus:N,onBlur:_,reference:x,containerReference:(0,l.useMergedRefs)([f,m]),onMouseDown:w,onMouseUp:k})}},583660:(e,t,r)=>{"use strict";r.d(t,{Label:()=>l});var s=r(50959),n=r(497754),o=r.n(n),a=r(514420),i=r(422191);function l(e){const{htmlFor:t,children:r,className:n,id:l,...c}=e;return s.createElement(a.BeforeSlot,{...c,className:o()(i.label,n)},s.createElement("label",{id:l,htmlFor:t},r))}},207357:(e,t,r)=>{"use strict";r.d(t,{useControl:()=>o});var s=r(763341),n=r(405964);function o(e){const{onFocus:t,onBlur:r,intent:o,highlight:a,disabled:i}=e,[l,c]=(0,n.useFocus)(void 0,i),u=(0,s.createSafeMulticastEventHandler)(i?void 0:c.onFocus,t),d=(0,s.createSafeMulticastEventHandler)(i?void 0:c.onBlur,r);return{...e,intent:o||(l?"primary":"default"),highlight:null!=a?a:l,onFocus:u,onBlur:d}}},633750:(e,t,r)=>{"use strict";r.d(t,{useIsMouseDown:()=>n});var s=r(50959);function n(){const e=(0,s.useRef)(!1),t=(0,s.useCallback)((()=>{e.current=!0}),[e]),r=(0,s.useCallback)((()=>{e.current=!1}),[e]);return{isMouseDown:e,handleMouseDown:t,handleMouseUp:r}}},358894:(e,t,r)=>{"use strict";r.d(t,{useMessageId:()=>n});var s=r(50959);function n(e,t){(0,s.useEffect)((()=>(t&&t(e),()=>{t&&t(e)})),[])}},248770:(e,t,r)=>{"use strict";r.d(t,{useSafeMobileTouch:()=>o});var s=r(50959),n=r(167175);function o(){const[e,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t(n.mobiletouch)}),[]),e}},328963:(e,t,r)=>{"use strict";r.d(t,{IconQuestionInformation:()=>g});var s=r(50959),n=r(497754),o=r(8626),a=r(83436),i=r(482353),l=r(527941),c=r(499084),u=r(530162),d=r(678370),p=r.n(d);const h="small",m={info:l,question:i,check:c,exclamation:u};function v(e,t){return t?m[t]:"success"===e?m.check:m.exclamation}const f=s.forwardRef(((e,t)=>s.createElement("span",{...e,ref:t,className:n(e.className,p()["no-active-state"])}))),g=s.forwardRef(((e,t)=>{const{icon:r,intent:i="default",ariaLabel:l,tooltip:c,className:u,renderComponent:d=f,tabIndex:m=0,size:g=h,onFocus:b,onBlur:C,onClick:y,...E}=e;return s.createElement(d,{className:n(u,p()["icon-wrapper"],p()[`intent-${i}`],p()[`icon-wrapper-size-${g}`]),title:c,"aria-label":l,ref:t,tabIndex:m,onFocus:b,onBlur:C,onClick:y,...(0,o.filterDataProps)(E)},s.createElement(a.Icon,{"aria-hidden":!0,icon:v(i,r),className:p().icon}))}))},151057:(e,t,r)=>{"use strict";function s(e){null!==e&&e.setSelectionRange(0,e.value.length)}r.d(t,{selectAllContent:()=>s})},519520:(e,t,r)=>{"use strict";r.d(t,{BracketControlGroup:()=>w});var s=r(50959),n=r(497754),o=r(444372),a=r(546606),i=r(778785),l=r(199356),c=r(495593),u=r(182120),d=r(628532),p=r(481078);function h(e){const{inputMode:t,control:r,className:n,error:o,errorMessage:i,errorHandler:l,onFocus:c,inputReference:u,intent:d,highlight:h,highlightRemoveRoundBorder:m,disabled:v,fontSizeStyle:f}=e,g=(0,a.useObservable)(r.value$,r.getValue());return s.createElement(p.NumberInput,{inputMode:t,intent:d,highlight:h,highlightRemoveRoundBorder:m,
value:g,onValueChange:e=>{var t;null==c||c(),r.setValue(e),null===(t=r.onModifiedCallback)||void 0===t||t.call(r)},formatter:r.formatter,className:n,step:r.step,error:o,errorMessage:i,errorHandler:l,onFocus:c,inputReference:u,disabled:v,fontSizeStyle:f})}var m=r(443937),v=r(103113),f=r(400236),g=r(58407),b=r(651109);const C={[l.BracketType.StopLoss]:o.t(null,void 0,r(241648)),[l.BracketType.TakeProfit]:o.t(null,void 0,r(129266)),[l.BracketType.TrailingStop]:o.t(null,void 0,r(86430))},y=o.t(null,void 0,r(782806));class E extends s.PureComponent{constructor(e){super(e),this._slTypeElement=null,this._slTypeDropdown=null,this._setSLTypeElement=e=>{this._slTypeElement=e},this._setSlTypeDropdownRef=e=>{this._slTypeDropdown=e},this._typeToggle=()=>{this.setState((e=>({isSLTypeOpened:!e.isSLTypeOpened}))),this.props.enabled||this.props.onToggleEnabled()},this._onSLTypeSelect=e=>{this.props.setBracketType(this.props.stopLossTypes[e]),this.setState({isSLTypeOpened:!1})},this._onClickOutside=e=>{this._slTypeDropdown&&this._slTypeDropdown.contains(e.target)||this.setState({isSLTypeOpened:!1})},this._focusHandler=e=>()=>this.props.onFocus(e),this.state={isSLTypeOpened:!1}}render(){const{inputDisabled:e,labelDisabled:t,checkboxDisabled:r}=this.props.controlState,o=this.props.type!==l.BracketType.TakeProfit,a=C[this.props.type],i=o&&this.context.supportTrailingStop&&!t;let d;d=i?s.createElement(g.OutsideEvent,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},(e=>s.createElement("span",{className:b.checkboxLabelWrapper,ref:e},s.createElement(v.ClickableText,{className:b.checkboxLabel,text:a,tabIndex:-1,onClick:this._typeToggle,reference:this._setSLTypeElement,theme:b.clickableTextColor}),s.createElement(f.DropdownList,{root:"document",isOpened:this.state.isSLTypeOpened,items:this._mapSLTypesNames(),target:this._slTypeElement||void 0,inheritWidthFromTarget:!1,onSelect:this._onSLTypeSelect,reference:this._setSlTypeDropdownRef})))):s.createElement("span",{className:b.checkboxLabel},a);const p=s.createElement("div",{className:n(i?b.slCheckboxWrapper:b.checkboxWrapper,"apply-common-tooltip"),title:i?y:a},s.createElement(u.Checkbox,{className:b.checkbox,checked:this.props.enabled,label:i?void 0:d,tabIndex:-1,onChange:this.props.onToggleEnabled,disabled:r}),i&&d),E=Boolean(this.props.error&&this.props.error.res),S=this.props.error&&this.props.error.msg,w=this.props.isCryptoBracket?"showCryptoBracketsInCurrency":"showBracketsInCurrency",k=this.props.isCryptoBracket?"showCryptoBracketsInPercent":"showBracketsInPercent";return s.createElement(m.SettingsContext.Consumer,null,(t=>{const r=[];return this.props.showRiskControls&&t[w]&&r.push(s.createElement(h,{...this._generateControlProps(2),control:this.props.riskInCurrency,className:this._generateClassName(2),onFocus:this._focusHandler(2),errorHandler:this.props.errorHandler,error:E&&this._isSelectedControl(2),errorMessage:S,disabled:e,fontSizeStyle:this.props.fontSizeStyle,key:"riskInCurrency"})),this.props.showRiskControls&&t[k]&&r.push(s.createElement(h,{
...this._generateControlProps(3),control:this.props.riskInPercent,className:this._generateClassName(3),onFocus:this._focusHandler(3),errorHandler:this.props.errorHandler,error:E&&this._isSelectedControl(3),errorMessage:S,disabled:e,fontSizeStyle:this.props.fontSizeStyle,key:"riskInPercent"})),s.createElement("div",{className:n(b.bracketControl,o&&b.rightBlock)},p,s.createElement(c.ControlGroup,{cols:1,className:b.inputGroup},!this.props.isPipsControlHidden&&s.createElement(h,{...this._generateControlProps(0),control:this.props.pips,className:this._generateClassName(0),onFocus:this._focusHandler(0),errorHandler:this.props.errorHandler,error:E&&this._isSelectedControl(0),errorMessage:S,inputReference:this.props.handlePipsInputRef,disabled:e,fontSizeStyle:this.props.fontSizeStyle}),s.createElement(h,{...this._generateControlProps(1),control:this.props.price,className:this._generateClassName(1),onFocus:this._focusHandler(1),errorHandler:this.props.errorHandler,error:E&&this._isSelectedControl(1),errorMessage:S,inputReference:this.props.handlePriceInputRef,disabled:e,fontSizeStyle:this.props.fontSizeStyle,inputMode:"text"}),r))}))}_mapSLTypesNames(){return this.props.stopLossTypes.map((e=>({index:e,elem:s.createElement("span",null,C[e])})))}_isSelectedControl(e){return this.props.enabled&&this.props.focusedControl===e}_generateClassName(e){return n(b.control,!this.props.enabled&&b.wait,0===e&&b.bracketInPips,1===e&&b.bracketInPrice,2===e&&b.bracketInCurrency,3===e&&b.bracketInPercent)}_generateControlProps(e){const t={highlightRemoveRoundBorder:0};return this._isSelectedControl(e)&&(t.highlight=!0),Boolean(this.props.error&&this.props.error.res)&&this._isSelectedControl(e)&&(t.intent="danger"),t}}function S(e){const{model:t,isCryptoBracket:r,showRiskControls:n,orderTicketFocus:o}=e,{enabled$:c,error$:u,focusedControl$:d,bracketType$:p,stopLossTypes:h,pips:m,price:v,riskInCurrency:f,riskInPercent:g,roundToStopLimitPriceStepRequired:b,isValuesInitialized:C,controlState:y,onControlFocused:S,getFocusedControl:w,getEnabled:k,getBracketType:N,getError:_,setFocusedControl:x,setEnabled:P,setBracketType:M,setControlError:T}=t,I=(0,a.useObservable)(d,w()),B=(0,a.useObservable)(p,N()),O=(0,a.useObservable)(c,k()),D=(0,a.useObservable)(u,_()),R=(0,s.useRef)(null),F=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(i.mobiletouch||!O)return;const e=e=>{null!==e&&C&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))};(B===l.BracketType.TakeProfit&&3===o||B===l.BracketType.StopLoss&&4===o)&&e(F.current),B===l.BracketType.TrailingStop&&4===o&&e(R.current)}),[C]),s.createElement(E,{type:B,enabled:O,error:D,stopLossTypes:h,pips:m,price:v,riskInCurrency:f,riskInPercent:g,focusedControl:I,onFocus:function(e){O||P(!0);I!==e&&x(e);S.fire()},onToggleEnabled:function(){P(!O),S.fire()},errorHandler:function(e){T(e)},handlePipsInputRef:e=>R.current=e,handlePriceInputRef:e=>F.current=e,setBracketType:M,isPipsControlHidden:b,controlState:y,isCryptoBracket:r,showRiskControls:n,fontSizeStyle:"medium"})}E.contextType=d.Context
;class w extends s.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){const e=this.props.model,t=e.takeProfitModel&&e.takeProfitModel.roundToStopLimitPriceStepRequired||e.stopLossModel&&e.stopLossModel.roundToStopLimitPriceStepRequired,a="supportCryptoBrackets"in e&&!0===e.supportCryptoBrackets,i=a?"showCryptoBracketsInCurrency":"showBracketsInCurrency",l=a?"showCryptoBracketsInPercent":"showBracketsInPercent",c=e.showRiskControls,u=e.rewardRisk.value();return s.createElement(m.SettingsContext.Consumer,null,(d=>s.createElement(s.Fragment,null,e.takeProfitModel&&s.createElement(S,{model:e.takeProfitModel,orderTicketFocus:this.props.focus,isCryptoBracket:a,showRiskControls:c}),e.takeProfitModel&&e.stopLossModel&&s.createElement("div",{className:b.labels},s.createElement("div",{className:n(b.rewardRisk,u&&"apply-common-tooltip"),title:u?o.t(null,void 0,r(214078)):void 0},s.createElement("span",{className:b.rewardRiskText},u)),!t&&s.createElement("span",null,"forex"===e.symbolType?o.t(null,void 0,r(778621)):o.t(null,void 0,r(130973))),s.createElement("span",null,o.t(null,void 0,r(25684))),c&&d[i]&&s.createElement("span",null,e.takeProfitModel?e.takeProfitModel.currency:""),c&&d[l]&&s.createElement("span",{className:n("apply-common-tooltip"),title:o.t(null,void 0,r(852997))},"%")),e.stopLossModel&&s.createElement(S,{model:e.stopLossModel,orderTicketFocus:this.props.focus,isCryptoBracket:a,showRiskControls:c}))))}_subscribeToModel(e){e.rewardRisk.subscribe(this._callback)}_unsubscribeFromModel(e){e.rewardRisk.unsubscribe(this._callback)}}},274112:(e,t,r)=>{"use strict";r.d(t,{CustomFields:()=>v});var s=r(50959),n=r(628532),o=r(958431),a=r(182120),i=r(114891);function l(e){const t=s.createElement("span",{className:i.checkboxLabel},e.checkboxTitle);return s.createElement("div",null,e.title&&e.title.length>0&&s.createElement("div",{className:i.title},e.title),s.createElement(o.InputWithError,{className:e.className,inputClassName:i.input,type:e.inputType,value:e.text,placeholder:e.placeholder,onChange:e.onInputChange,onClick:e.onClick,error:void 0!==e.errorMessage,errorMessage:e.errorMessage}),s.createElement("div",{className:i.checkboxWrapper},s.createElement(a.Checkbox,{checked:e.checked,label:t,onChange:e.onCheckboxToggle})))}var c=r(546606),u=r(631078);function d(e){const{inputType:t,text$:r,getText:o,setText:a,checked$:d,getChecked:p,setChecked:h,title:m,checkboxTitle:v,placeholder:f,orderPanelStatus:g,onControlFocused:b,errorMessage:C}=e,y=(0,c.useObservable)(r,o()),E=(0,c.useObservable)(d,p()),S=(0,u.useWatchedValueReadonly)({watchedValue:C});return s.createElement("div",{className:i.customFieldWithCheckboxContainer},s.createElement(l,{className:g===n.OrderPanelStatus.Wait&&i.wait,inputType:t,text:y,checked:E,title:m,checkboxTitle:v,placeholder:f,status:g,onInputChange:e=>a(e.currentTarget.value),onCheckboxToggle:()=>{h(!E),b.fire()},onClick:()=>b.fire(),
errorMessage:S}))}var p=r(269921),h=r(906335),m=r(223302);function v(e){const{customFieldModels:t,orderPanelStatus:r,onClose:o}=e;return s.createElement(s.Fragment,null,t.map((e=>s.createElement("div",{key:e.id,className:m.customField},"TextWithCheckBox"===e.type&&s.createElement(d,{inputType:e.inputType,text$:e.text$,getText:e.getText,setText:e.setText,placeholder:e.placeholder,checked$:e.checked$,getChecked:e.getChecked,setChecked:e.setChecked,title:e.title,checkboxTitle:e.checkboxTitle,orderPanelStatus:r,onControlFocused:e.onControlFocused,errorMessage:e.errorMessage}),"Checkbox"===e.type&&s.createElement(h.CheckboxCustomField,{title:e.title,help:e.help,checked$:e.checked$,getChecked:e.getChecked,setChecked:e.setChecked,disabled:e.disabled,onControlFocused:e.onControlFocused}),"ComboBox"===e.type&&s.createElement(p.CustomComboboxContainer,{title:e.title,items:e.items,selectedItem$:e.selectedItem$,getSelectedItem:e.getSelectedItem,setSelectedItem:e.setSelectedItem,onControlFocused:e.onControlFocused,onClose:o,disabled:e.items.length<=1,forceUserToSelectValue:r===n.OrderPanelStatus.Active,alwaysShowAttachedErrors$:e.alwaysShowAttachedErrors$})))))}},820663:(e,t,r)=>{"use strict";r.d(t,{useCommonDialogHandlers:()=>l});var s=r(50959),n=r(790934),o=r(251954),a=r(332450),i=r(642709);function l(e){const{isOpened:t,onOpen:r,onClose:l}=e;(0,s.useEffect)((()=>{const e=()=>{null==l||l()};o.subscribe(a.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null);const s=window.matchMedia(i.DialogBreakpoints.TabletSmall),c=window.matchMedia("(orientation: portrait)"),u=()=>{t?null==r||r(s.matches):null==l||l()};return u(),(0,n.mediaQueryAddEventListener)(c,u),()=>{o.unsubscribe(a.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null),(0,n.mediaQueryRemoveEventListener)(c,u)}}),[t,l,r])}},423048:(e,t,r)=>{"use strict";r.d(t,{InfoTable:()=>a});var s=r(50959),n=r(497754),o=r(191547);function a(e){const t=e.rows.map(((t,r)=>s.createElement("div",{key:r,className:n(o.row,e.disabled&&o.disabled),"data-name":"info-table-row"},s.createElement("div",{className:n(o.cell,o.cellTitle,t.listMarker&&o.marker),"data-name":"info-table-cell-title"},t.title),void 0!==t.value&&s.createElement("div",{className:n(o.cell,o.cellValue,e.rightAlignedValues&&o.cellRightAligned,void 0!==t.type&&i(t.type)),"data-name":"info-table-cell-value"},t.value))));return s.createElement("div",{className:o.wrapper},e.header&&s.createElement("div",{className:o.header},e.header),t)}function i(e){switch(e){case 0:return o.cellSideBuy;case 1:return o.cellSideSell;default:return}}},958431:(e,t,r)=>{"use strict";r.d(t,{InputWithError:()=>h});var s=r(50959),n=r(497754),o=r(452395),a=r(514420),i=r(342353),l=r(653549),c=r(735270),u=r(312863);const d={large:o.InputClasses.FontSizeLarge,medium:o.InputClasses.FontSizeMedium},p={attachment:c.anchors.top.attachment,targetAttachment:c.anchors.top.targetAttachment,attachmentOffsetY:-4};function h(e){
const{className:t,inputClassName:r,stretch:o=!0,errorMessage:c,fontSizeStyle:h="large",endSlot:m,button:v,error:f,warning:g,innerLabel:b,inputReference:C,children:y,...E}=e,S=f&&void 0!==c?[c]:void 0,w=g&&void 0!==c?[c]:void 0,k=n(u.inputContainer,d[h],t),N=b?s.createElement(a.StartSlot,{className:u.innerLabel,interactive:!1},b):void 0,_=m||v||y?s.createElement(a.EndSlot,null,m,v,y):void 0;return s.createElement(i.FormInput,{...E,className:k,inputClassName:r,errors:S,warnings:w,hasErrors:f,hasWarnings:g,messagesPosition:l.MessagesPosition.Attached,customErrorsAttachment:p,messagesRoot:"document",inheritMessagesWidthFromTarget:!0,disableMessagesRtlStyles:!0,iconHidden:!0,stretch:o,reference:C,startSlot:N,endSlot:_})}},682866:(e,t,r)=>{"use strict";r.d(t,{PlaceAndModifyButton:()=>u});var s=r(50959),n=r(423869),o=r(265005),a=r(915812),i=r(633102);var l=r(546606),c=r(74704);function u(e){const{model:t,reference:r,buttonModel:u}=e,d=t.hasOwnProperty("sideModel")&&"sideModel"in t?t.sideModel.value$:n.EMPTY,[p]=(e=>{const[t,r]=(0,s.useState)(e.value());return(0,s.useLayoutEffect)((()=>{const t=e=>r(e);return e.subscribe(t),()=>e.unsubscribe(t)}),[e]),[t,t=>e.setValue(t)]})(t.disabled),[h]=(0,i.useWatchedValue)(t.loading),m=(0,l.useObservable)(u.value$,u.getValue()),v=1===(0,l.useObservable)(d,t.side())?"brand":"red";return h?s.createElement(a.SquareButton,{reference:r,className:c.button,size:"xlarge",disabled:!0,"data-name":"place-and-modify-button"},s.createElement(o.Loader,null)):s.createElement(a.SquareButton,{...m,reference:r,className:c.button,size:"xlarge",color:v,disabled:p,onClick:()=>t.doneButtonClick(),"data-name":"place-and-modify-button"},void 0===m.secondaryText?m.primaryText:null)}},770223:(e,t,r)=>{"use strict";r.d(t,{QuantityCalculator:()=>P});var s=r(50959),n=r(960521),o=r(45968),a=r(175071),i=r(995683),l=r(272127),c=r(497754),u=r.n(c),d=r(444372),p=r(470316),h=r(83436),m=r(583660),v=r(301792),f=r(192685),g=r(481078),b=r(98470),C=r(218666),y=r(96634),E=r(115589),S=r(672197),w=r(115356);const k={isGrouped:!1,cellState:{isTop:!1,isRight:!1,isBottom:!1,isLeft:!1}};function N(e){const{min:t,max:n,step:o,uiStep:a,reference:i,withInput:l,valueInput:c,onChangeValueInput:N,onClick:_,onClose:x,onInputClick:P}=e,[M,T]=(0,s.useState)(!1),[I,B]=(0,s.useState)(void 0),[O,D]=(0,s.useState)(!1),R=(0,s.useRef)(null),F=(0,s.useCallback)((e=>{const r={min:t,max:n,step:o},s=(0,f.checkQtyError)(r,e,!0),a=O||s.res,i=O?undefined:s.msg;T(a),B(i)}),[O,t,n,o]);function W(e,t){var r;null===(r=R.current)||void 0===r||r.blur(),_(e,t)}return(0,s.useEffect)((()=>{F(c)}),[F,c]),s.createElement("div",{className:u()(w.calculator,l&&w.calculatorWithInput),tabIndex:-1,ref:i,onKeyDown:e=>{c&&!M&&13===(0,p.hashFromEvent)(e)&&x()}},l&&s.createElement(s.Fragment,null,s.createElement(m.Label,{htmlFor:"calculator-input"},d.t(null,void 0,r(766596))),s.createElement(g.NumberInput,{id:"calculator-input",inputReference:e=>R.current=e,className:w.input,value:c,max:n,min:t,step:o,uiStep:a,mode:"float",error:M,errorMessage:I,errorHandler:function(e){D(e)
},onValueChange:N,onClick:P,alwaysUpdateValueFromProps:!0})),s.createElement(v.ControlGroupContext.Provider,{value:k},s.createElement("div",{className:w.buttonsWrapper},s.createElement(b.Button,{value:-o,buttonType:b.ButtonType.IncDec,icon:s.createElement(h.Icon,{className:w.buttonIcon,icon:y}),onClick:W,className:w.buttonWithOperation}),s.createElement(b.Button,{value:o,buttonType:b.ButtonType.IncDec,icon:s.createElement(h.Icon,{className:w.buttonIcon,icon:C}),onClick:W,className:w.buttonWithOperation}),s.createElement(b.Button,{value:1,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:5,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:25,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:100,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:500,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:1e3,buttonType:b.ButtonType.PlusValue,onClick:W}),s.createElement(b.Button,{value:0,buttonType:b.ButtonType.Clear,icon:s.createElement(h.Icon,{className:w.buttonIcon,icon:E}),onClick:W}),s.createElement(b.Button,{value:t||o,buttonType:b.ButtonType.Default,icon:s.createElement(h.Icon,{className:w.buttonIcon,icon:S}),onClick:W}))))}var _=r(368173);const x=(0,i.mergeThemes)(a.DEFAULT_MENU_THEME,{menuBox:_.menuBox});class P extends s.PureComponent{constructor(e){super(e),this._setCalcRef=e=>{this.props.calcReference&&this.props.calcReference(e)},this._calculatorStepHandler=(e,t)=>{const{min:r,max:s,uiStep:o,trackEventTarget:a,trackEvent:i}=this.props;if(void 0!==i&&void 0!==a&&i(a,"Calculator Button",(0,l.prepareCalculatorEventText)(e,t)),t===b.ButtonType.Clear||t===b.ButtonType.Default)return this._updateValueByCalc(e);const c=this.props.valueGetter();if(null===c)return;let u=Number((0,n.Big)(c).plus(e));if((u<r||s<u)&&t!==b.ButtonType.IncDec)return this._updateValueByCalc(c);if(t===b.ButtonType.IncDec){if(u=this._calcByStep(c,e,r,o),s<u)return this._updateValueByCalc(s);if(u<r)return this._updateValueByCalc(r)}return this._updateValueByCalc(u)},this._updateValueByCalc=e=>{var t,r;this._handlerValueInput(e),this.props.onValueChange(e,!0),void 0!==this.props.errorHandler&&this.props.errorHandler(!1),this.props.calculatorUsedStat&&this.props.calculatorUsedStat(),null===(r=(t=this.props).onFocus)||void 0===r||r.call(t)},this._onInputClick=()=>{const{trackEventTarget:e,trackEvent:t}=this.props;void 0!==t&&void 0!==e&&t(e,"Calculator Input","Quantity input field")},this.state={valueInput:e.valueGetter()},this._handlerValueInput=this._handlerValueInput.bind(this)}render(){const{min:e,max:t,step:r,uiStep:n,withInput:a,targetEl:i,position:l,onClose:c,onClickOutside:u,onKeyboardClose:d}=this.props;return s.createElement(o.PopupMenu,{isOpened:!0,onClose:c,onClickOutside:u,onKeyboardClose:d,position:l,doNotCloseOn:i,theme:x},s.createElement(N,{min:e,max:t,step:r,uiStep:n,withInput:a,reference:this._setCalcRef,valueInput:this.state.valueInput,onChangeValueInput:this._updateValueByCalc,
onClick:this._calculatorStepHandler,onClose:c,onInputClick:this._onInputClick}))}_calcByStep(e,t,r,s){const o=Math.sign(t),a=Math.abs(null!=s?s:t),i=new n.Big(e),l=i.minus(r).mod(t);let c=i.plus(o*a);return l.eq(0)||(c=c.plus((o>0?0:1)*a).minus(l)),c.toNumber()}_handlerValueInput(e){this.setState({valueInput:e})}}},318383:(e,t,r)=>{"use strict";r.d(t,{EditButton:()=>l});var s=r(50959),n=r(497754),o=r(83436),a=r(610600),i=r(860015);function l(e){const{value:t,onClick:r,className:l,startSlot:c,disabled:u=!1}=e;return s.createElement("div",{className:n(i.wrap,u&&i.disabled,l),onClick:r,"data-name":"edit-button"},s.createElement("div",{className:n(i.text,"apply-overflow-tooltip")},void 0!==c&&c,s.createElement("span",null,t)),s.createElement(o.Icon,{icon:a,className:i.icon}))}},389401:(e,t,r)=>{"use strict";r.d(t,{Measure:()=>n});var s=r(444530);function n(e){const{children:t,onResize:r}=e;return t((0,s.useResizeObserver)(r||(()=>{}),[null===r]))}},451860:(e,t,r)=>{"use strict";r.d(t,{OverlayScrollContainer:()=>v});var s=r(50959),n=r(497754),o=r.n(n),a=r(31341),i=r(650151),l=r(678515);const c=r(977253),u={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},d=40;function p(e){const{size:t,scrollSize:r,clientSize:n,scrollProgress:a,onScrollProgressChange:p,scrollMode:h,theme:m=c,onDragStart:v,onDragEnd:f,minBarSize:g=d}=e,b=(0,s.useRef)(null),C=(0,s.useRef)(null),[y,E]=(0,s.useState)(!1),S=(0,s.useRef)(0),{isHorizontal:w,isNegative:k,sizePropName:N,minSizePropName:_,startPointPropName:x,currentMousePointPropName:P,progressBarTransform:M}=u[h];(0,s.useEffect)((()=>{const e=(0,i.ensureNotNull)(b.current).ownerDocument;return y?(v&&v(),e&&(e.addEventListener("mousemove",L),e.addEventListener("mouseup",z))):f&&f(),()=>{e&&(e.removeEventListener("mousemove",L),e.removeEventListener("mouseup",z))}}),[y]);const T=t/r||0,I=n*T||0,B=Math.max(I,g),O=(t-B)/(t-I),D=r-t,R=k?-D:0,F=k?0:D,W=A((0,l.clamp)(a,R,F))||0;return s.createElement("div",{ref:b,className:o()(m.wrap,w&&m["wrap--horizontal"]),style:{[N]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=H(e.nativeEvent,(0,i.ensureNotNull)(b.current)),r=Math.sign(t),s=(0,i.ensureNotNull)(C.current).getBoundingClientRect();S.current=r*s[N]/2;let n=Math.abs(t)-Math.abs(S.current);const o=A(D);n<0?(n=0,S.current=t):n>o&&(n=o,S.current=t-r*o);p(V(r*n)),E(!0)}},s.createElement("div",{ref:C,className:o()(m.bar,w&&m["bar--horizontal"]),style:{[_]:g,[N]:B,transform:`${M}(${W}px)`},onMouseDown:function(e){e.preventDefault(),S.current=H(e.nativeEvent,(0,i.ensureNotNull)(C.current)),
E(!0)}},s.createElement("div",{className:o()(m.barInner,w&&m["barInner--horizontal"])})));function L(e){const t=H(e,(0,i.ensureNotNull)(b.current))-S.current;p(V(t))}function z(){E(!1)}function H(e,t){const r=t.getBoundingClientRect()[x];return e[P]-r}function A(e){return e*T*O}function V(e){return e/T/O}}var h=r(962624),m=r(982434);function v(e){const{reference:t,className:r,containerHeight:o=0,containerWidth:i=0,contentHeight:l=0,contentWidth:c=0,scrollPosTop:u=0,scrollPosLeft:d=0,onVerticalChange:v,onHorizontalChange:f,visible:g}=e,[b,C]=(0,h.useHover)(),[y,E]=(0,s.useState)(!1),S=o<l,w=i<c,k=S&&w?8:0;return s.createElement("div",{...C,ref:t,className:n(r,m.scrollWrap),style:{visibility:g||b||y?"visible":"hidden"}},S&&s.createElement(p,{size:o-k,scrollSize:l-k,clientSize:o-k,scrollProgress:u,onScrollProgressChange:function(e){v&&v(e)},onDragStart:N,onDragEnd:_,scrollMode:0}),w&&s.createElement(p,{size:i-k,scrollSize:c-k,clientSize:i-k,scrollProgress:d,onScrollProgressChange:function(e){f&&f(e)},onDragStart:N,onDragEnd:_,scrollMode:(0,a.isRtl)()?2:1}));function N(){E(!0)}function _(){E(!1)}}},403179:(e,t,r)=>{"use strict";r.d(t,{OverlayScrollWrapper:()=>h});var s=r(50959),n=r(497754),o=r.n(n),a=r(451860),i=r(445343),l=r(650151),c=r(104415);function u(e){const{scrollContainerRef:t,direction:r}=e,n=(0,s.useRef)(null),o=(0,s.useRef)(null),a=(0,s.useRef)(d()),i=(0,s.useRef)(!1),c=(0,s.useRef)({x:0,y:0});function u(e){return 0===r?e.touches[0].clientY:e.touches[0].clientX}function p(e){return 0===r?e.scrollTop:e.scrollLeft}function h(e,t){0===r?e.scrollTop=t:e.scrollLeft=t}function m(e){return 0===r?e.scrollHeight-e.clientHeight:e.scrollWidth-e.clientWidth}function v(e){const r=(0,l.ensureNotNull)((0,l.ensureDefined)(t).current);i.current=0===m(r),i.current||(n.current=u(e),c.current={x:e.touches[0].clientX,y:e.touches[0].clientY},a.current=d())}function f(e){if(i.current)return;if(function(e){const t=Math.atan2(e.touches[0].clientY-c.current.y,e.touches[0].clientX-c.current.x),r=Math.abs(t);return r>Math.PI/4&&r<3*Math.PI/4?0:1}(e)!==r)return void(i.current=!0);e.preventDefault();const s=(0,l.ensureNotNull)((0,l.ensureDefined)(t).current),o=u(e),d=o-(0,l.ensureNotNull)(n.current);h(s,p(s)-d),n.current=o;const m=performance.now();(0,l.ensureNotNull)(a.current).addPosition(p(s),m)}function g(){if(i.current)return;const e=performance.now(),r=(0,l.ensureNotNull)((0,l.ensureDefined)(t).current);a.current.start(p(r),e),a.current.finished(e)||(o.current=requestAnimationFrame(b)),n.current=null}function b(e){if(a.current.finished(e))return void C();const r=(0,l.ensureNotNull)((0,l.ensureDefined)(t).current),s=a.current.getPosition(e);h(r,s),s<=0||m(r)<=s?C():o.current=requestAnimationFrame(b)}function C(){o.current&&cancelAnimationFrame(o.current)}(0,s.useEffect)((()=>{const e=null==t?void 0:t.current;return null==e||e.addEventListener("touchstart",v),null==e||e.addEventListener("touchmove",f),null==e||e.addEventListener("touchend",g),null==e||e.addEventListener("touchcancel",g),()=>{
null==e||e.removeEventListener("touchstart",v),null==e||e.removeEventListener("touchmove",f),null==e||e.removeEventListener("touchend",g),null==e||e.removeEventListener("touchcancel",g)}}),[t,r]),(0,s.useEffect)((()=>()=>C()),[])}function d(){return new c.KineticAnimation(.2,7,.997,15)}var p=r(252693);function h(e){const{children:t,className:r,reference:n,hasCustomTouchScrollAnimation:l,scrollContainerRef:c,isForceVisible:d,...h}=e,[m,v,f,g]=(0,i.useOverlayScroll)(c,l);return function(e){const{scrollContainerRef:t}=e;u({scrollContainerRef:t,direction:0}),u({scrollContainerRef:t,direction:1})}({scrollContainerRef:l?f:void 0}),(0,s.useImperativeHandle)(n,(()=>({updateScrollState:g}))),s.createElement("div",{...h,...v,className:o()(p.container,r)},s.createElement(a.OverlayScrollContainer,{...m,visible:null!=d?d:m.visible,className:p.overlayScrollWrap}),s.createElement("div",{className:p.wrapper,ref:f,onScroll:g},t))}},558470:(e,t,r)=>{"use strict";r.d(t,{AnchorBadge:()=>s.AnchorBadge,Badge:()=>s.Badge,BadgeSize:()=>s.BadgeSize});var s=r(774465)},103113:(e,t,r)=>{"use strict";r.d(t,{ClickableText:()=>a});var s=r(50959),n=r(497754),o=r(885004);function a(e){const{theme:t=o}=e;return s.createElement("span",{className:n(o.clickableText,t.clickableTextColor,e.className),ref:e.reference,tabIndex:e.tabIndex,onClick:e.onClick,onKeyDown:e.onKeyDown},e.text)}},826881:(e,t,r)=>{"use strict";r.d(t,{Body:()=>p,Footer:()=>u,Header:()=>l,Message:()=>v});var s=r(50959),n=r(497754),o=r(278895),a=r(608636),i=r(83436);function l(e){const t=e.hideIcon?null:s.createElement(i.Icon,{className:o.close,icon:a,onClick:e.onClose});return s.createElement("div",{className:n(o.header,e.className),"data-dragg-area":!0,ref:e.reference},e.children,t)}var c=r(17817);function u(e){return s.createElement("div",{className:n(c.footer,e.className),ref:e.reference},e.children)}var d=r(963208);function p(e){return s.createElement("div",{className:n(d.body,e.className),ref:e.reference},e.children)}var h=r(385806),m=r(639379);function v(e){let t;e.text?t=s.createElement("span",null,e.text):e.html&&(t=s.createElement("span",{dangerouslySetInnerHTML:{__html:e.html}}));const r=(0,h.useOutsideEvent)({mouseDown:!0,touchStart:!0,handler:e.onClickOutside});if(!t)return null;const o=n(m.message,e.className,{[m.error]:e.isError});return s.createElement("div",{className:o,key:"0"},s.createElement("span",{ref:r},t))}},458692:(e,t,r)=>{"use strict";r.d(t,{useDisclosure:()=>s.useDisclosure});var s=r(718083)},623107:(e,t,r)=>{"use strict";r.d(t,{DropdownContainer:()=>i});var s=r(50959),n=r(109315),o=r(497754),a=r(650151);class i extends s.PureComponent{constructor(){super(...arguments),this._container=null,this._setContainerRef=e=>{"function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e),this._container=e}}componentDidMount(){this.props.onDropdownWheelNoPassive&&this._addPassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}componentDidUpdate(e){
this.props.onDropdownWheelNoPassive!==e.onDropdownWheelNoPassive&&this._updatePassiveListenerOnWheel(e.onDropdownWheelNoPassive)}componentWillUnmount(){this.props.onDropdownWheelNoPassive&&this._removePassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}render(){const{shadow:e="bottom",children:t,className:r}=this.props,a=o(n.container,n[e],r),i={maxHeight:this.props.maxHeight};return s.createElement("div",{ref:this._setContainerRef,style:i,className:a,onTouchStart:this.props.onDropdownTouchStart,onTouchMove:this.props.onDropdownTouchMove,onTouchEnd:this.props.onDropdownTouchEnd,onWheel:this.props.onDropdownWheel},t)}_updatePassiveListenerOnWheel(e){e&&this._removePassiveListenerOnWheel(e),this.props.onDropdownWheelNoPassive&&this._addPassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}_addPassiveListenerOnWheel(e){(0,a.ensureNotNull)(this._container).addEventListener("wheel",e,{passive:!1})}_removePassiveListenerOnWheel(e){(0,a.ensureNotNull)(this._container).removeEventListener("wheel",e)}}},400236:(e,t,r)=>{"use strict";r.d(t,{DropdownList:()=>m});var s=r(50959),n=r(350191),o=r(497754),a=r(783263),i=r(100180),l=r(940014),c=r(623107),u=r(735270);const d=(0,i.makeNavigateable)(a.List),p=(0,u.makeAnchorable)(l.Dropdown),h={top:"top",bottom:"bottom",topRight:"top"};class m extends s.PureComponent{render(){const{anchor:e="bottom",fontSize:t=14,root:r="parent"}=this.props,a=o(n.list,n[e]),{dropdownClassName:i,height:l,...u}=this.props;return s.createElement(p,{...u,className:i,root:r},s.createElement(c.DropdownContainer,{className:this.props.dropdownContainerClassName,shadow:h[e],maxHeight:this.props.maxHeight,onDropdownTouchStart:this.props.onDropdownTouchStart?this.props.onDropdownTouchStart:void 0,onDropdownTouchMove:this.props.onDropdownTouchMove?this.props.onDropdownTouchMove:void 0,onDropdownTouchEnd:this.props.onDropdownTouchEnd?this.props.onDropdownTouchEnd:void 0,onDropdownWheelNoPassive:this.props.onDropdownWheelNoPassive?this.props.onDropdownWheelNoPassive:void 0},s.createElement(d,{...u,width:this.props.width,height:l,className:this.props.className||a,itemsClassName:this.props.itemsClassName||n.item,selectedClassName:this.props.selectedClassName||n.selected,fontSize:t,reference:this.props.reference})))}}},940014:(e,t,r)=>{"use strict";r.d(t,{Dropdown:()=>i});var s=r(50959),n=r(149368),o=r(368337);class a extends s.PureComponent{render(){const e={position:"absolute",top:this.props.top,width:this.props.width,height:this.props.height,bottom:this.props.bottom,right:this.props.right,left:this.props.left,zIndex:this.props.zIndex};return s.createElement("div",{className:this.props.className,style:e,ref:this.props.reference},this.props.children)}}a.displayName="Dropdown Container";const i=(0,o.makeOverlapable)((0,n.makeAttachable)(a))},990598:(e,t,r)=>{"use strict";r.d(t,{AttachableErrorMsg:()=>d,HiddenErrorMessage:()=>h});var s=r(50959),n=r(497754),o=r(368337),a=r(149368),i=r(358894),l=r(844022),c=r(31341);class u extends s.PureComponent{render(){
const{children:e=[],show:t=!1,customErrorClass:r,disableRtlStyles:o,messageIdCallback:a}=this.props,i=n(l.errors,{[l.show]:t},r),u=e.map(((e,t)=>s.createElement(p,{key:t,messageIdCallback:a},e)));let d={position:"absolute",top:this.props.top,width:this.props.width,height:this.props.height,bottom:void 0!==this.props.bottom?this.props.bottom:"100%",right:void 0!==this.props.right?this.props.right:0,left:this.props.left,zIndex:this.props.zIndex,maxWidth:this.props.maxWidth};if((0,c.isRtl)()&&!o){const{left:e,right:t}=d;d={...d,left:t,right:e}}return s.createElement("div",{style:d,className:i},u)}}const d=(0,o.makeOverlapable)((0,a.makeAttachable)(u));function p(e){const{children:t,messageIdCallback:r,...n}=e;return s.createElement("div",{...n,className:l.error},t)}function h(e){const{children:t,messageIdCallback:r,...n}=e,o=s.useId();return(0,i.useMessageId)(o,r),s.createElement("span",{...n,className:l["visually-hidden"],id:o},t)}},24154:(e,t,r)=>{"use strict";r.d(t,{HintReferenceable:()=>l,defaultHintStateHandler:()=>u});var s=r(50959),n=r(497754),o=r(62802),a=r(399749),i=r(956541);const l=s.forwardRef(((e,t)=>{const{theme:o,placeHolderClassName:a,smallPlaceHolderClassName:l,settingsHintKey:d,placement:p,onClick:h,reference:m,buttonText:v,hideButton:f,text:g,title:b,escapeWithReference:C,overflowPadding:y,boundariesElement:E,hintStateHandler:S=u,containerClassName:w,hideWithReference:k=!1,enableFlip:N=!0,forceShowOnInit:_,placeHolderStyle:x}=e,P=(0,s.useRef)(null),[M,T]=(0,s.useState)(null),[I,B]=(0,s.useState)((()=>S.getHintState(d,_))),[O,D]=(0,s.useState)(!1),[R,F]=(0,s.useState)(!1),W=(0,s.useRef)(null),L=(0,s.useMemo)((()=>({close(e=!1){B(!1),e&&S.setHintState(d)}})),[S]);if((0,s.useImperativeHandle)(t,(()=>L),[L]),(0,s.useEffect)((()=>(I&&(P.current=Promise.all([r.e(1387),r.e(87553)]).then(r.bind(r,49656)),P.current.then((e=>{P.current&&T(e)}))),()=>{P.current=null})),[]),(0,s.useEffect)((()=>{null!==W.current&&(W.current.style.pointerEvents=R?"none":"")}),[R]),I&&M){const{Manager:e,Reference:t,Popper:r}=M;return s.createElement(e,null,s.createElement(t,null,(e=>s.createElement("div",{style:x,ref:e.ref,className:n(i.placeHolder,a,O&&l)}))),s.createElement(r,{innerRef:W,placement:p,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,5]}},{name:"preventOverflow",options:{rootBoundary:E||"viewport",altBoundary:C||!1,padding:y}},{name:"flip",enabled:N,options:{fallbackPlacements:["left","bottom"]}},{name:"hideWithReference",enabled:k,phase:"main",fn:e=>{var t;const{state:r}=e,s=Boolean(null===(t=r.modifiersData.hide)||void 0===t?void 0:t.isReferenceHidden);R!==s&&F(s)}}]},(e=>s.createElement(c,{setSmallSize:D,text:g,buttonText:v,reference:m,popperChildrenProps:e,onClick:z,title:b,theme:o,arrowClassName:n(R&&i.hidden),containerClassName:n(w,R&&i.hidden),hideButton:f}))))}return null;function z(){L.close(!0),h&&h()}}));function c(e){const{setSmallSize:t,popperChildrenProps:r,hideButton:n,...o}=e;return(0,s.useLayoutEffect)((()=>{t(r.placement&&r.placement.startsWith("bottom"))}),[t,r]),
s.createElement(a.HintWizard,{...o,popperChildrenProps:r,hideButton:n})}const u={getHintState:(e,t)=>{if(!e||t)return!0;const r=o.getBool(e);return window.is_authenticated&&(r||void 0===r)},setHintState:e=>{e&&o.setValue(e,!1,{forceFlush:!0})}}},399749:(e,t,r)=>{"use strict";r.d(t,{DEFAULT_HINT_THEME:()=>l,HintWizard:()=>c});var s=r(50959),n=r(444372),o=r(12173),a=r(915812),i=r(372002);const l=i;function c(e){const{popperChildrenProps:t,onClick:l,reference:c,text:u,buttonText:d,title:p,theme:h=i,containerClassName:m,arrowClassName:v,hideButton:f}=e;return s.createElement(o.TooltipWizard,{reference:c,popperChildrenProps:t,containerClassName:m,arrowClassName:v,onClose:f?l:void 0},s.createElement("div",{className:h.wrapper},p&&s.createElement("div",{className:h.title},p),s.createElement("div",{className:h.text},u),!f&&l&&s.createElement(a.SquareButton,{className:h.button,size:"xsmall",onClick:l},d||n.t(null,void 0,r(758901)))))}},435697:(e,t,r)=>{"use strict";r.d(t,{useMatchMedia:()=>s.useMatchMedia,useSafeMatchMedia:()=>s.useSafeMatchMedia});var s=r(222463)},445343:(e,t,r)=>{"use strict";r.d(t,{useOverlayScroll:()=>l});var s=r(50959),n=r(650151),o=r(962624),a=r(638456);const i={onMouseOver:()=>{},onMouseOut:()=>{}};function l(e,t=a.CheckMobile.any()){const r=(0,s.useRef)(null),l=e||(0,s.useRef)(null),[c,u]=(0,o.useHover)(),[d,p]=(0,s.useState)({reference:r,containerHeight:0,containerWidth:0,contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){p((t=>({...t,scrollPosTop:e}))),(0,n.ensureNotNull)(l.current).scrollTop=e},onHorizontalChange:function(e){p((t=>({...t,scrollPosLeft:e}))),(0,n.ensureNotNull)(l.current).scrollLeft=e},visible:c}),h=(0,s.useCallback)((()=>{if(!l.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:s,clientWidth:n,scrollWidth:o,scrollLeft:a}=l.current,i=r.current?r.current.offsetTop:0;p((r=>({...r,containerHeight:e-i,contentHeight:t-i,scrollPosTop:s,containerWidth:n,contentWidth:o,scrollPosLeft:a})))}),[]);function m(){p((e=>({...e,scrollPosTop:(0,n.ensureNotNull)(l.current).scrollTop,scrollPosLeft:(0,n.ensureNotNull)(l.current).scrollLeft})))}return(0,s.useEffect)((()=>{c&&h(),p((e=>({...e,visible:c})))}),[c]),(0,s.useEffect)((()=>{const e=l.current;return e&&e.addEventListener("scroll",m),()=>{e&&e.removeEventListener("scroll",m)}}),[l]),[d,t?i:u,l,h]}},137982:(e,t,r)=>{"use strict";r.d(t,{IconQuestionInformation:()=>d,IconQuestionInformationButton:()=>h,IconQuestionInformationLink:()=>p});var s=r(50959),n=r(497754),o=r(328963),a=r(248770),i=r(267521);var l=r(309103),c=r(342335),u=r.n(c);const d=(0,s.forwardRef)(((e,t)=>{const{className:r,onClick:c=l.tooltipClickHandler,doNotShowTooltipOnTouch:d,...p}=e,{tooltip:h,className:m,...v}=function(e,t=null){const{showTooltip:r,hideTooltip:n,onClick:o,doNotShowTooltipOnTouch:l=!1}=e,c=(0,i.useFunctionalRefObject)(t),u=(0,a.useSafeMobileTouch)(),d=u&&l?void 0:e.tooltip;return(0,s.useEffect)((()=>{const e=()=>{var e;null===(e=null==c?void 0:c.current)||void 0===e||e.blur()}
;return document.addEventListener("scroll",e,!0),()=>document.removeEventListener("scroll",e,!0)}),[c]),{onBlur:(0,s.useCallback)((e=>{n&&n()}),[n]),onFocus:(0,s.useCallback)((e=>{!e.target.matches(":hover")&&r&&e.target.matches(":focus-visible")&&r(e.currentTarget,{tooltipDelay:200})}),[r]),onClick:(0,s.useCallback)((e=>{var t;u&&(null===(t=null==c?void 0:c.current)||void 0===t||t.focus()),o&&o(e)}),[o,c,u]),tooltip:d,className:void 0!==d?"apply-common-tooltip":void 0,ref:c}}({tooltip:e.tooltip,doNotShowTooltipOnTouch:d,showTooltip:l.showOnElement,hideTooltip:l.hide,onClick:c},t);return s.createElement(o.IconQuestionInformation,{className:n(r,u()["icon-wrapper"],h&&u()["with-tooltip"],m),tooltip:h,...p,...v})})),p=(0,s.forwardRef)(((e,t)=>{const{href:r,rel:n,target:o,...a}=e,i=(0,s.useMemo)((()=>(0,s.forwardRef)(((e,t)=>s.createElement("a",{href:r,rel:n,target:o,ref:t,...e})))),[r,n,o]);return s.createElement(d,{...a,renderComponent:i,ref:t,doNotShowTooltipOnTouch:!0})})),h=(0,s.forwardRef)(((e,t)=>{const{className:r,withActiveState:o,...a}=e,i=(0,s.useMemo)((()=>(0,s.forwardRef)(((e,t)=>s.createElement("button",{...e,ref:t,type:"button"})))),[]);return s.createElement(d,{...a,className:n(r,!o&&u()["no-active-state"]),renderComponent:i,ref:t})}))},519197:(e,t,r)=>{"use strict";r.d(t,{ErrorIcon:()=>l});var s=r(50959),n=r(497754),o=r(83436),a=r(616658),i=r(240461);function l(e){const{intent:t="danger"}=e;return s.createElement(o.Icon,{icon:a,className:n(i["error-icon"],i[`intent-${t}`])})}},342353:(e,t,r)=>{"use strict";r.d(t,{FormInput:()=>c});var s=r(50959),n=r(142135),o=r(653549),a=r(514420),i=r(763341),l=r(662929);function c(e){var t;const{intent:r,onFocus:c,onBlur:u,onMouseOver:d,onMouseOut:p,containerReference:h=null,endSlot:m,hasErrors:v,hasWarnings:f,hasSuccessMessages:g,errors:b,warnings:C,successMessages:y,alwaysShowAttachedErrors:E,iconHidden:S,messagesPosition:w,messagesAttachment:k,customErrorsAttachment:N,messagesRoot:_,inheritMessagesWidthFromTarget:x,disableMessagesRtlStyles:P,"aria-required":M,"aria-invalid":T,"aria-label":I,inputDescription:B,...O}=e,D=(0,o.useControlValidationLayout)({hasErrors:v,hasWarnings:f,hasSuccessMessages:g,errors:b,warnings:C,successMessages:y,alwaysShowAttachedErrors:E,iconHidden:S,messagesPosition:w,messagesAttachment:k,customErrorsAttachment:N,messagesRoot:_,inheritMessagesWidthFromTarget:x,disableMessagesRtlStyles:P,inputDescription:B}),R=(0,i.createSafeMulticastEventHandler)(c,D.onFocus),F=(0,i.createSafeMulticastEventHandler)(u,D.onBlur),W=(0,i.createSafeMulticastEventHandler)(d,D.onMouseOver),L=(0,i.createSafeMulticastEventHandler)(p,D.onMouseOut);return s.createElement(s.Fragment,null,s.createElement(n.InputControl,{...O,intent:null!==(t=D.intent)&&void 0!==t?t:r,onFocus:R,onBlur:F,onMouseOver:W,onMouseOut:L,containerReference:(0,l.useMergedRefs)([h,D.containerReference]),endSlot:s.createElement(s.Fragment,null,D.icon&&s.createElement(a.EndSlot,{icon:!0},D.icon),m),"aria-required":M,"aria-invalid":T,"aria-describedby":D.ariaIds,"aria-label":I}),D.renderedErrors)}},
653549:(e,t,r)=>{"use strict";r.d(t,{ControlMessagesAttachment:()=>n,MessagesPosition:()=>s,useControlValidationLayout:()=>E});var s,n,o=r(50959),a=r(497754),i=r(358894),l=r(405964),c=r(962624),u=r(514420),d=r(735270),p=r(990598),h=r(519197),m=r(927345);!function(e){e[e.Attached=0]="Attached",e[e.Static=1]="Static",e[e.Hidden=2]="Hidden"}(s||(s={})),function(e){e.Top="top",e.Bottom="bottom"}(n||(n={}));const v={top:{attachment:d.anchors.topRight.attachment,targetAttachment:d.anchors.topRight.targetAttachment,attachmentOffsetY:-4},bottom:{attachment:d.anchors.bottomRight.attachment,targetAttachment:d.anchors.bottomRight.targetAttachment,attachmentOffsetY:4}};function f(e){const{isOpened:t,target:r,errorAttachment:s=n.Top,customErrorsAttachment:a,root:i="parent",inheritWidthFromTarget:l=!1,disableRtlStyles:c,children:u,messageIdCallback:d}=e,{attachment:h,targetAttachment:m,attachmentOffsetY:f}=null!=a?a:v[s];return o.createElement(o.Fragment,null,o.createElement(p.AttachableErrorMsg,{isOpened:t,target:r,root:i,inheritWidthFromTarget:l,attachment:h,targetAttachment:m,attachmentOffsetY:f,disableRtlStyles:c,messageIdCallback:d,inheritMaxWidthFromTarget:!0,show:!0},u),o.createElement(p.HiddenErrorMessage,{messageIdCallback:d},u))}function g(e,t){return Boolean(e)&&void 0!==t&&t.length>0}function b(e,t,r){return e===s.Attached&&g(t,r)}function C(e,t,r){return e===s.Static&&g(t,r)}function y(e,t,r){const{hasErrors:n,hasWarnings:o,hasSuccessMessages:a,alwaysShowAttachedErrors:i,iconHidden:l,errors:c,warnings:u,successMessages:d,messagesPosition:p=s.Static}=e,h=b(p,n,c),m=b(p,o,u),v=h&&(t||r||Boolean(i)),f=!v&&m&&(t||r),g=C(p,n,c),y=!g&&C(p,o,u),E=!g&&!y&&C(p,a,d),S=!l&&Boolean(n),w=!l&&!S&&Boolean(o),k=function(e,t,r){return Boolean(r)?"success":Boolean(e)?"danger":Boolean(t)?"warning":void 0}(n,o,a);return{hasAttachedErrorMessages:h,hasAttachedWarningMessages:m,showAttachedErrorMessages:v,showAttachedWarningMessages:f,showStaticErrorMessages:g,showStaticWarningMessages:y,showStaticSuccessMessages:E,showErrorIcon:S,showWarningIcon:w,intent:k}}function E(e){var t,r,s,n;const{errors:i,warnings:d,successMessages:p,messagesAttachment:v,customErrorsAttachment:g,messagesRoot:b,inheritMessagesWidthFromTarget:C,disableMessagesRtlStyles:E,inputDescription:w}=e,[k,N]=(0,l.useFocus)(),[_,x]=(0,c.useHover)(),P=(0,o.useRef)(null),[M,T]=o.useState(void 0),I=(0,o.useRef)(new Map),B=o.useCallback((e=>{if(!e)return;const t=I.current;t.has(e)?t.delete(e):t.set(e,e),0!==t.size?T(Array.from(t.keys()).join(" ")):T(void 0)}),[T,I.current]),{hasAttachedErrorMessages:O,hasAttachedWarningMessages:D,showAttachedErrorMessages:R,showAttachedWarningMessages:F,showStaticErrorMessages:W,showStaticWarningMessages:L,showStaticSuccessMessages:z,showErrorIcon:H,showWarningIcon:A,intent:V}=y(e,k,_),Z=H||A?o.createElement(h.ErrorIcon,{intent:H?"danger":"warning"}):void 0,U=O?o.createElement(f,{errorAttachment:v,customErrorsAttachment:g,isOpened:R,target:P.current,root:b,inheritWidthFromTarget:C,disableRtlStyles:E,children:i,messageIdCallback:B
}):void 0,K=D?o.createElement(f,{errorAttachment:v,isOpened:F,target:P.current,root:b,inheritWidthFromTarget:C,disableRtlStyles:E,children:d,messageIdCallback:B}):void 0,j=W?o.createElement(u.AfterSlot,{className:a(m["static-messages"],m.errors)},null==i?void 0:i.map(((e,t)=>o.createElement(S,{key:t,messageIdCallback:B},e)))):void 0,q=L?o.createElement(u.AfterSlot,{className:a(m["static-messages"],m.warnings)},null==d?void 0:d.map(((e,t)=>o.createElement(S,{key:t,messageIdCallback:B},e)))):void 0,$=z?o.createElement(u.AfterSlot,{className:a(m["static-messages"],m["success-mesages"])},null==p?void 0:p.map(((e,t)=>o.createElement(S,{key:t,messageIdCallback:B},e)))):void 0,G=!W&&!L&&!z&&w?o.createElement(u.AfterSlot,{className:a(m["static-messages"],m["input-description"])},o.createElement(S,{messageIdCallback:B},w)):void 0;return{ariaIds:M,icon:Z,renderedErrors:null!==(n=null!==(s=null!==(r=null!==(t=null!=U?U:K)&&void 0!==t?t:j)&&void 0!==r?r:q)&&void 0!==s?s:$)&&void 0!==n?n:G,containerReference:P,intent:V,...N,...x}}function S(e){const{children:t,messageIdCallback:r,...s}=e,n=o.useId();return(0,i.useMessageId)(n,r),o.createElement("span",{...s,className:m.message,id:n},t)}},733410:(e,t,r)=>{"use strict";r.d(t,{KeyCode:()=>s,KeyboardListener:()=>o,makeKeyboardListener:()=>a});var s,n=r(50959);!function(e){e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(s||(s={}));class o{constructor(){this._handlers=new Map}registerHandlers(e){Object.keys(e).forEach((t=>{const r=parseInt(t);let s=e[r];if(Array.isArray(s)||(s=[s]),this._handlers.has(r)){const e=this._handlers.get(r);e&&s.forEach((t=>e.add(t)))}else this._handlers.set(r,new Set(s))}))}unregisterHandlers(e){Object.keys(e).forEach((t=>{const r=parseInt(t);let s=e[r];if(Array.isArray(s)||(s=[s]),this._handlers.has(r)){const e=this._handlers.get(r);e&&s.forEach((t=>e.delete(t)))}}))}deleteAllHandlers(){this._handlers=new Map}registerHandler(e,t){if(this._handlers.has(e)){const r=this._handlers.get(e);r&&r.add(t)}else this._handlers.set(e,new Set([t]))}unregisterHandler(e,t){if(this._handlers.has(e)){const r=this._handlers.get(e);r&&r.delete(t)}}listen(e){if(this._handlers.has(e.keyCode)){const t=this._handlers.get(e.keyCode);t&&t.forEach((t=>t(e)))}}}function a(e){var t,r,s;return(s=class extends n.PureComponent{constructor(e){super(e),this._keyboardListener=new o,this._listener=this._keyboardListener.listen.bind(this._keyboardListener)}componentDidMount(){this._registerHandlers(this.props.keyboardEventHandlers)}componentDidUpdate(e){e.keyboardEventHandlers!==this.props.keyboardEventHandlers&&this._registerHandlers(this.props.keyboardEventHandlers)}render(){const{keyboardEventHandlers:t,...r}=this.props;return n.createElement(e,{...r,onKeyDown:this._listener})}_registerHandlers(e){e&&(this._keyboardListener.deleteAllHandlers(),this._keyboardListener.registerHandlers(e))}
}).displayName=`KeyboardListener(${null!==(r=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==r?r:"Component"})`,s}},783263:(e,t,r)=>{"use strict";r.d(t,{List:()=>u});var s=r(50959),n=r(500962),o=r(551080),a=r(902390),i=r(497754);class l extends s.PureComponent{constructor(e){super(e)}render(){return s.createElement("div",{className:this.props.className,onClick:this.props.onClick,ref:this.props.reference},this.props.children)}}var c=r(389401);class u extends s.PureComponent{constructor(e){super(e),this._handleResize=([e])=>{var t,r;null===(r=(t=this.props).onMeasure)||void 0===r||r.call(t,e.target.getBoundingClientRect())}}render(){const{theme:e=a}=this.props,t=i(e.list,{[this.props.className]:Boolean(this.props.className)}),{fontSize:r=13}=this.props,n={bottom:this.props.bottom,fontSize:r,left:this.props.left,height:this.props.height||"auto",right:this.props.right,top:this.props.top,width:this.props.width,zIndex:this.props.zIndex};return s.createElement(c.Measure,{onResize:Boolean(this.props.onMeasure)?this._handleResize:null},(e=>s.createElement("div",{className:t,style:n,ref:(0,o.mergeRefs)([this.props.reference,e])},this._wrapItems(this.props.items,this.props.selected))))}componentDidMount(){if(this._el=n.findDOMNode(this),void 0!==this.props.selected&&this.props.shouldScrollIfNotVisible){const e=this._items[this.props.selected];e&&this._scrollIfNotVisible(e)}}componentDidUpdate(){if(void 0!==this.props.selected&&this.props.shouldScrollIfNotVisible){const e=this._items[this.props.selected];e&&this._scrollIfNotVisible(e)}}_wrapItems(e=[],t){this._items=[];const{itemWrap:r=l,theme:n=a}=this.props,o=r;return e.map(((e,r)=>{const a=i(n.item,{[this.props.itemsClassName]:Boolean(this.props.itemsClassName),[this.props.selectedClassName]:t===r});return s.createElement(o,{reference:t=>{t&&this._items.push({elem:t,index:r,value:e})},key:r,onClick:()=>this._onSelect(r),className:a},e.elem)}))}_onSelect(e){this.props.onSelect&&this.props.onSelect(e,this._items[e].value)}_scrollIfNotVisible(e){const t=this._el.scrollTop,r=this._el.scrollTop+this._el.clientHeight,s=e.elem.offsetTop,n=s+e.elem.clientHeight;s<=t?e.elem.scrollIntoView(!0):n>=r&&e.elem.scrollIntoView(!1)}}u.defaultProps={shouldScrollIfNotVisible:!0}},100180:(e,t,r)=>{"use strict";r.d(t,{makeNavigateable:()=>n});var s=r(50959);function n(e){var t;return(t=class extends s.PureComponent{constructor(e){super(e),this._items=this.props.items}componentDidUpdate(e){if(e.command!==this.props.command&&this.props.command)switch(this.props.command.name){case"next":this._next();break;case"prev":this._prev()}e.items!==this.props.items&&(this._items=this.props.items)}render(){return s.createElement(e,{...this.props},this.props.children)}_next(){const{selected:e=-1}=this.props,t=e+1;this._items.length-1>=t?this._navigateTo(t):this._navigateTo(0)}_prev(){const{selected:e=-1}=this.props,t=e-1,r=this._items.length-1;0<=t?this._navigateTo(t):this._navigateTo(r)}_navigateTo(e){this.props.onNavigate&&this.props.onNavigate(e,this._items[e])}
}).displayName="Navigateable Component",t}},375509:(e,t,r)=>{"use strict";r.d(t,{CollapsedUnderlineTabsDisclosure:()=>C});var s=r(50959),n=r(650151),o=r(662929),a=r(634993),i=r(217802),l=r(94107),c=r(497754),u=r(83436),d=r(347531),p=r(602948),h=r(863509),m=r(168874),v=r(685200);function f(e){switch(e){case"xsmall":return d;case"small":return p;case"medium":case"large":return h;case"xlarge":return m}}function g(e){const{size:t,isDropped:r=!1}=e;return s.createElement(u.Icon,{icon:f(t),className:c(v["arrow-icon"],v[`size-${t}`],r&&v.dropped)})}var b=r(445015);function C(e){const{size:t,disabled:r,isOpened:c,enableActiveStateStyles:u,hideFocusOutline:d,fake:p,items:h,buttonContent:m,buttonRef:v,isAnchorTabs:f,isHighlighted:C,onButtonClick:S,onItemClick:w,onClose:k}=e,N=(0,s.useRef)(null),_=(0,o.useMergedRefs)([v,N]),x=function(e,t){const r=(0,s.useRef)(E);return(0,s.useEffect)((()=>{const e=getComputedStyle((0,n.ensureNotNull)(t.current));r.current={xsmall:y(e,"xsmall"),small:y(e,"small"),medium:y(e,"medium"),large:y(e,"large"),xlarge:y(e,"xlarge")}}),[t]),(0,s.useCallback)((()=>{const s=(0,n.ensureNotNull)(t.current).getBoundingClientRect(),o=r.current[e];return{x:s.left,y:s.top+s.height+o+4,indentFromWindow:{top:4,bottom:4,left:4,right:4}}}),[t,e])}(t,N);return s.createElement(i.PopupMenuDisclosureView,{buttonRef:N,listboxTabIndex:-1,isOpened:c,onClose:k,listboxAria:{"aria-hidden":!0},popupPosition:x,button:s.createElement(l.UnderlineTabsBaseButton,{"aria-hidden":!0,disabled:r,active:c,onClick:S,ref:_,tabIndex:-1,enableActiveStateStyles:u,hideFocusOutline:d,fake:p},m,s.createElement(g,{size:t,isDropped:c})),popupChildren:h.map((e=>s.createElement(a.PopupMenuItem,{key:e.id,className:f?b["link-item"]:void 0,onClick:w,onClickArg:e,isActive:C(e),label:e.label,isDisabled:e.disabled,link:"href"in e?e.href:void 0,rel:"rel"in e?e.rel:void 0,target:"target"in e?e.target:void 0,renderComponent:"renderComponent"in e?e.renderComponent:void 0,dontClosePopup:!0})))})}function y(e,t){return parseInt(e.getPropertyValue(`--ui-lib-underline-tabs-tab-margin-bottom-${t}`),10)}const E={xsmall:0,small:0,medium:0,large:0,xlarge:0}},322160:(e,t,r)=>{"use strict";r.d(t,{UnderlineButtonTabs:()=>s.UnderlineButtonTabs});var s=r(782674),n=r(50959),o=(r(497754),r(444372),r(269269),r(662929),r(458692),r(325520),r(574823),r(240185)),a=r(834995),i=r(728804),l=r(810272);function c(e){return n.createElement("a",{...(0,a.renameRef)(e)})}(0,n.forwardRef)(((e,t)=>{var r;const s=(0,n.useContext)(o.UnderlineTabsSizeContext),a=(0,n.useContext)(i.CustomBehaviourContext),{item:u,highlighted:d,handleItemRef:p,onClick:h,active:m,fake:v,className:f,enableActiveStateStyles:g=a.enableActiveStateStyles,hideFocusOutline:b=!1,disabled:C,"aria-disabled":y,...E}=e,S=(0,n.useCallback)((e=>{y?e.preventDefault():h&&h(u)}),[h,y,u]),w=(0,n.useCallback)((e=>{p&&p(u,e),t&&"object"==typeof t?t.current=e:"function"==typeof t&&t(e)}),[u,p,t]),k=null!==(r=u.renderComponent)&&void 0!==r?r:c;return n.createElement(k,{...E,id:u.id,"aria-disabled":y,onClick:S,reference:w,href:u.href,
rel:u.rel,target:u.target,className:(0,l.useUnderlineTabClassNames)({size:s,active:m,fake:v,enableActiveStateStyles:g,anchor:!0,hideFocusOutline:b,className:f})},u.label)})).displayName="UnderlineAnchorTab";r(375509),r(381658),r(258605),r(31341),r(679877)},240185:(e,t,r)=>{"use strict";r.d(t,{UnderlineTabsSizeContext:()=>s});const s=(0,r(50959).createContext)("small")},782674:(e,t,r)=>{"use strict";r.d(t,{UnderlineButtonTabs:()=>E});var s=r(50959),n=r(497754),o=r.n(n),a=r(444372),i=r(269269),l=r(662929),c=r(763341),u=r(458692),d=r(325520),p=r(574823),h=r(240185),m=r(94107);const v=(0,s.forwardRef)(((e,t)=>{const{item:r,highlighted:n,handleItemRef:o,onClick:a,"aria-disabled":i,...l}=e,c=(0,s.useCallback)((()=>{a&&a(r)}),[a,r]),u=(0,s.useCallback)((e=>{o&&o(r,e),t&&"object"==typeof t?t.current=e:"function"==typeof t&&t(e)}),[r,o,t]);return s.createElement(m.UnderlineTabsBaseButton,{...l,id:r.id,onClick:c,ref:u},r.label)}));v.displayName="UnderlineButtonTab";var f=r(375509),g=r(381658),b=r(258605),C=r(31341),y=r(679877);function E(e){const{id:t,items:n,activationType:m,orientation:E,disabled:S,moreButtonContent:w=a.t(null,void 0,r(141610)),size:k="small",onActivate:N,isActive:_,className:x,style:P,overflowBehaviour:M,enableActiveStateStyles:T,tablistLabelId:I,tablistLabel:B,"data-name":O="underline-tabs-buttons",stretchTabs:D,equalTabSize:R}=e,F=(0,g.useMobileTouchState)(),W=(0,g.useOverflowBehaviour)(M),L=(0,s.useRef)(!1),z=(0,s.useCallback)((e=>e.id),[]),H="none"===W&&D,A="none"===W&&R,V=null!=T?T:!F,{visibleItems:Z,hiddenItems:U,containerRefCallback:K,innerContainerRefCallback:j,moreButtonRef:q,setItemRef:$}=(0,i.useCollapsible)(n,z,_),G="collapse"===W?Z:n,Y="collapse"===W?U:[],X=(0,s.useCallback)((e=>Y.includes(e)),[Y]),Q=(0,s.useRef)(new Map),{isOpened:J,open:ee,close:te,onButtonClick:re}=(0,u.useDisclosure)({id:t,disabled:S}),{tabsBindings:se,tablistBinding:ne,scrollWrapBinding:oe,onActivate:ae,onHighlight:ie,isHighlighted:le}=(0,d.useTabs)({id:t,items:[...G,...Y],activationType:m,orientation:E,disabled:S,tablistLabelId:I,tablistLabel:B,onActivate:N,isActive:_,isCollapsed:X,isRtl:C.isRtl,itemsRefs:Q,isDisclosureOpened:J}),ce=n.find(_),ue=Y.find(le),de=(0,s.useCallback)((()=>{ce&&ie(ce)}),[ie,ce]),pe=(0,s.useCallback)((e=>{var t;return null!==(t=se.find((t=>t.id===e.id)))&&void 0!==t?t:{}}),[se]),he=(0,s.useCallback)((()=>{te(),de(),L.current=!0}),[te,de]),me=(0,s.useCallback)((()=>{ue&&(ae(ue),ie(ue,200))}),[ae,ie,ue]);oe.ref=(0,l.useMergedRefs)([oe.ref,K]),ne.ref=(0,l.useMergedRefs)([ne.ref,j]),ne.onKeyDown=(0,c.createSafeMulticastEventHandler)((0,p.useKeyboardEventHandler)([(0,p.useKeyboardClose)(J,he),(0,p.useKeyboardActionHandler)([13,32],me,(0,s.useCallback)((()=>Boolean(ue)),[ue]))]),ne.onKeyDown);const ve=(0,s.useCallback)((e=>{L.current=!0,re(e)}),[L,re]),fe=(0,s.useCallback)((e=>{e&&ae(e)}),[ae]);(0,s.useEffect)((()=>{L.current?L.current=!1:(ue&&!J&&ee(),!ue&&J&&te())}),[ue,J,ee,te]);const ge=(0,b.useUnderline)(Q.current,null!=ce?ce:ue,[null!=ce?ce:ue,G,k,H,W])
;return s.createElement(h.UnderlineTabsSizeContext.Provider,{value:k},s.createElement("div",{...oe,className:(0,g.getUnderlineTabsScrollWrapClassNames)({size:k,overflowBehaviour:W,className:x}),style:P,"data-name":O},s.createElement("div",{...ne,className:o()(y["underline-tabs"],{[y["make-grid-column"]]:H||A,[y["stretch-tabs"]]:H,[y["equal-tab-size"]]:A})},G.map((e=>s.createElement(v,{...pe(e),key:e.id,item:e,onClick:ae,enableActiveStateStyles:V,hideFocusOutline:F,ref:$(z(e)),...e.dataId&&{"data-id":e.dataId},equalTabSize:A}))),Y.map((e=>s.createElement(v,{...pe(e),key:e.id,item:e,fake:!0}))),s.createElement(f.CollapsedUnderlineTabsDisclosure,{size:k,disabled:S,isOpened:J,items:Y,buttonContent:w,buttonRef:q,isHighlighted:le,onButtonClick:ve,onItemClick:fe,onClose:te,enableActiveStateStyles:V,hideFocusOutline:F,fake:0===Y.length}),ge&&s.createElement(b.Underline,{...ge,disabled:S}))))}},810272:(e,t,r)=>{"use strict";r.d(t,{useUnderlineTabClassNames:()=>o});var s=r(497754),n=r(125164);function o(e){const{size:t="xsmall",active:r,fake:o,enableActiveStateStyles:a,anchor:i=!1,hideFocusOutline:l=!1,equalTabSize:c,className:u}=e;return s(n["underline-tab"],n[`size-${t}`],r&&n.selected,!a&&n["disable-active-state-styles"],l&&n["disable-focus-outline"],o&&n.fake,i&&n["enable-cursor-pointer"],c&&n[`margin-${t}`],u)}},94107:(e,t,r)=>{"use strict";r.d(t,{UnderlineTabsBaseButton:()=>u});var s=r(50959),n=r(497754),o=r.n(n),a=r(728804),i=r(240185),l=r(810272),c=r(125164);const u=(0,s.forwardRef)(((e,t)=>{const r=(0,s.useContext)(i.UnderlineTabsSizeContext),n=(0,s.useContext)(a.CustomBehaviourContext),{active:u,fake:d,className:p,enableActiveStateStyles:h=n.enableActiveStateStyles,hideFocusOutline:m=!1,equalTabSize:v,children:f,...g}=e;return s.createElement("button",{...g,ref:t,className:(0,l.useUnderlineTabClassNames)({size:r,active:u,fake:d,enableActiveStateStyles:h,hideFocusOutline:m,equalTabSize:v,className:p})},v&&"string"==typeof f?s.createElement("span",{className:o()(c["ellipsis-children"],"apply-overflow-tooltip")},f):f)}));u.displayName="UnderlineTabsBaseButton"},381658:(e,t,r)=>{"use strict";r.d(t,{getUnderlineTabsScrollWrapClassNames:()=>c,useMobileTouchState:()=>u,useOverflowBehaviour:()=>d});var s=r(50959),n=r(497754),o=r(167175),a=r(435697),i=r(586240),l=r(679877);function c(e){const{size:t,overflowBehaviour:r,className:s}=e;return n(l["scroll-wrap"],l[`size-${t}`],"scroll"===r&&l["enable-scroll"],s)}function u(){const[e,t]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t(o.mobiletouch)}),[]),e}function d(e){const t=(0,a.useSafeMatchMedia)(i["media-mf-phone-landscape"],!0),r=u();return null!=e?e:r||!t?"scroll":"collapse"}},258605:(e,t,r)=>{"use strict";r.d(t,{Underline:()=>u,useUnderline:()=>c});var s=r(50959),n=r(12481),o=r(31341),a=r(497754),i=r(810047),l=r.n(i);function c(e,t,r){const[a,i]=(0,s.useState)(),l=(0,s.useRef)(),c=e=>{var t;const r=null!==(t=e.parentElement)&&void 0!==t?t:void 0;if(void 0===r)return;const{left:s,right:n,width:a}=e.getBoundingClientRect(),{left:l,right:c}=r.getBoundingClientRect(),u=(0,
o.isRtl)()?n-c:s-l;i({translateX:u,scale:a})};return(0,s.useEffect)((()=>{const e=(0,n.default)((e=>{const t=e[0].target;void 0!==t&&c(t)}),50);l.current=new ResizeObserver(e)}),[]),(0,s.useEffect)((()=>{var r;if(void 0===t)return;const s=e.get(t);return void 0!==s?(c(s),null===(r=l.current)||void 0===r||r.observe(s),()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.disconnect()}):void 0}),r),a}function u(e){const{disabled:t,translateX:r}=e,n=e.scale/100;return s.createElement("div",{className:a(l().underline,t&&l().disabled),style:{transform:`translateX(${r}px) scaleX(${n})`}},s.createElement("div",{className:l().corner,style:{transform:`scaleX(${1/n})`}}),s.createElement("div",{className:l().center,style:{transform:`scaleX(${1-30/e.scale})`}}),s.createElement("div",{className:l().corner,style:{transform:`scaleX(${1/n})`}}))}},456562:(e,t,r)=>{"use strict";r.r(t),r.d(t,{closeOrderDialog:()=>mr,mountOrderPanel:()=>vr,showOrderDialog:()=>hr,unmountOrderPanel:()=>fr});var s=r(50959),n=r(500962),o=r(497754),a=r.n(o),i=r(62802),l=r(586639),c=r(638456),u=r(915812),d=r(551080),p=r(650151),h=r(898960),m=r(546606),v=r(633102),f=r(470316),g=r(444372),b=r(77122),C=r(201089),y=r(866193),E=r(628532),S=r(558470),w=r(199356),k=r(984040);function N(e){return e===w.RestrictionType.HardToBorrow?k.hardToBorrow:e===w.RestrictionType.Halted?k.halted:null}function _(e){return s.createElement("div",{className:k.restrictions},e.restrictionTypes.map(((e,t)=>s.createElement(S.Badge,{key:t,size:S.BadgeSize.XSmall,className:a()(k.restriction,N(e))},e))))}var x=r(120693);const P=g.t(null,void 0,r(392553)),M=g.t(null,void 0,r(618156)),T=g.t(null,void 0,r(93875));class I extends s.PureComponent{constructor(e){super(e),this._isLongValue=!1,this._maxDigitsNumber=7,this._createClickHandler=e=>()=>this.props.onSideChanged(e),this._isLongValue=Boolean(this.props.quotes.spread&&this.props.quotes.spread.toString().length>this._maxDigitsNumber||this.props.quotes.ask&&this.props.quotes.ask.toString().length>this._maxDigitsNumber)}render(){const e=o(x.sideControl,[E.OrderPanelStatus.Editing,E.OrderPanelStatus.Preview].includes(this.props.status)&&x.disable),t=o(x.section,x.sell,this.props.status!==E.OrderPanelStatus.Wait&&-1===this.props.side&&x.active),r=o(x.section,x.buy,this.props.status!==E.OrderPanelStatus.Wait&&1===this.props.side&&x.active),n=this.props.quotes.bid?s.createElement("div",null,this.props.quotes.bid):s.createElement("div",{className:x.valueNoData},T),a=this.props.quotes.ask?s.createElement("div",null,this.props.quotes.ask):s.createElement("div",{className:x.valueNoData},T);return s.createElement(s.Fragment,null,0!==this.props.restrictionTypes.length&&s.createElement("div",{className:o(x.restrictions,x.smallPaddings)},s.createElement(_,{restrictionTypes:this.props.restrictionTypes})),s.createElement("div",{className:e},s.createElement("div",{className:t,onClick:this._createClickHandler(-1),tabIndex:-1,"data-name":"side-control-sell"},s.createElement("div",{className:x.title},s.createElement("span",{
className:this.props.currencyForCrypto&&x.typeSide},P),this.props.currencyForCrypto&&s.createElement("span",null,this.props.currencyForCrypto)),s.createElement("div",{className:x.value},n)),s.createElement("div",{className:r,onClick:this._createClickHandler(1),tabIndex:-1,"data-name":"side-control-buy"},s.createElement("div",{className:x.title},s.createElement("span",{className:this.props.currencyForCrypto&&x.typeSide},M),this.props.currencyForCrypto&&s.createElement("span",{className:x.typeSide},this.props.currencyForCrypto)),s.createElement("div",{className:x.value},a)),this.props.quotes.spread&&s.createElement("div",{className:o(x.spread,this._isLongValue&&x.isLongValue),"data-name":"side-control-spread"},this.props.quotes.spread)))}}function B(e){const{model:t,disabled:r}=e,n=(0,m.useObservable)(t.value$,t.getValue()),o=(0,m.useObservable)(t.formattedQuotes$,t.getFormattedQuotes()),a=(0,m.useObservable)(t.restrictionTypes$,t.getRestrictionTypes()),[i]=(0,v.useWatchedValue)(t.status);return s.createElement(I,{quotes:o,side:n,status:i,restrictionTypes:a,currencyForCrypto:t.baseCurrency,onSideChanged:e=>{r||(t.setValue(e),t.onControlFocused.fire())}})}var O=r(83436),D=r(540975),R=r(423048),F=r(403179),W=r(631078),L=r(15425),z=r(364366);const H={cancel:g.t(null,void 0,r(620036)),sendOrder:g.t(null,void 0,r(493472))};function A(e){const t=(0,s.useRef)(null),r=(0,W.useWatchedValueReadonly)({watchedValue:e.loading}),n=(0,W.useWatchedValueReadonly)({watchedValue:e.model.infoTableQuotesData()});(0,s.useEffect)((()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.focus()}),[r]);const o=s.createElement(R.InfoTable,{rows:n.rows,header:n.header}),a=s.createElement(R.InfoTable,{rows:e.model.infoTableOrderData().rows,header:e.model.infoTableOrderData().header}),i=e.model.infoTableCustomData().map(((e,t)=>s.createElement(R.InfoTable,{key:`custom-${t}`,rows:e.rows,header:e.header}))),l=0!==e.model.warnings.length&&s.createElement("div",{className:L.warning},s.createElement(O.Icon,{className:L.warning__icon,icon:z}),s.createElement("div",null,e.model.warnings.map((e=>s.createElement("div",{key:e},e))))),c=0!==e.model.errors.length,u=c&&s.createElement("div",{className:L.error},e.model.errors.map((e=>s.createElement("div",{key:e},e))));return s.createElement(s.Fragment,null,s.createElement(F.OverlayScrollWrapper,{className:L.scrollWrapper},s.createElement("div",{className:L.content},o,s.createElement("div",{className:L.separator}),a,0!==i.length&&s.createElement("div",{className:L.separator}),i,u,l)),s.createElement("div",{className:L.controls},s.createElement("div",{className:L.button},s.createElement(D.Button,{useFullWidth:!0,size:"l",intent:-1===e.side?"danger":"primary",onClick:e.model.onPlaceClick,reference:t,disabled:c||r},H.sendOrder)),s.createElement("div",{className:L.button},s.createElement(D.Button,{useFullWidth:!0,size:"l",intent:"default",appearance:"stroke",onClick:e.model.onCancelClick},H.cancel))))}var V=r(322160),Z=r(672273)
;const U=g.t(null,void 0,r(359758)),K=g.t(null,void 0,r(398157)),j=g.t(null,void 0,r(905023)),q=g.t(null,void 0,r(802654)),$={Market:2,Limit:1,Stop:3,StopLimit:4};function G(e){const{orderType:t,setOrderType:r,disabled:n,supportMarketOrders:o,supportLimitOrders:a,supportStopOrders:i,supportStopLimitOrders:l}=e,c=(0,s.useMemo)((()=>function(e){const{supportMarketOrders:t,supportLimitOrders:r,supportStopOrders:s,supportStopLimitOrders:n}=e,o=[];return t&&o.push({id:"Market",label:U}),r&&o.push({id:"Limit",label:K}),s&&o.push({id:"Stop",label:j}),n&&o.push({id:"StopLimit",label:q}),o}({supportMarketOrders:o,supportLimitOrders:a,supportStopOrders:i,supportStopLimitOrders:l})),[o,a,i,l]),u=(0,s.useCallback)((e=>$[e.id]===t),[t]);return s.createElement("div",{className:Z.tabsContainer,tabIndex:-1},s.createElement(V.UnderlineButtonTabs,{id:"order-type-tabs",items:c,isActive:u,onActivate:e=>r($[e.id]),size:"xsmall",disabled:n,overflowBehaviour:"none",stretchTabs:!0,equalTabSize:!0}))}var Y=r(519520),X=r(301792),Q=r(481078),J=r(312420),ee=r(58407),te=r(770223),re=r(778785),se=r(914987),ne=r(433199);class oe extends s.PureComponent{constructor(e){super(e),this._control=null,this._input=null,this._calc=null,this._getCurrentValue=()=>this.props.value||0,this._getDropdownPosition=()=>(0,J.getPopupPositioner)(this._control,{horizontalAttachEdge:J.HorizontalAttachEdge.Right,horizontalDropDirection:J.HorizontalDropDirection.FromRightToLeft}),this._handleCalculatorFocus=()=>{re.mobiletouch||null===this._input||this._input.focus()},this._setRef=e=>{this._control=e},this._setCalcRef=e=>{this._calc=e},this._setInputRef=e=>{this._input=e},this._onKeyDown=e=>{!this.state.isOpened||13!==e.keyCode&&27!==e.keyCode||(e.stopPropagation(),this.setState({isOpened:!1})),Object.values(E.CalculatorDecKeyCodes).includes(e.keyCode)||Object.values(E.CalculatorIncKeyCodes).includes(e.keyCode)||this.setState({isOpened:!1}),this.props.onKeyDown&&this.props.onKeyDown(e)},this._onClickOutside=e=>{this._calc&&!this._calc.contains(e.target)&&this.setState({isOpened:!1})},this._updateValue=e=>{this.props.onValueChange(e)},this._toggle=()=>{this.setState((e=>({isOpened:!e.isOpened})))},this._setInputFocus=e=>{null!==e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))},this.state={isOpened:!1}}componentDidMount(){5===this.props.focus&&this._setInputFocus(this._input)}render(){const{min:e,max:t,step:r,uiStep:n,error:a,errorMessage:i,className:l,errorHandler:c,highlight:u,highlightRemoveRoundBorder:d,intent:p,fontSizeStyle:h,...m}=this.props,v=s.createElement(O.Icon,{icon:se,className:o(ne.calculatorIcon,this.state.isOpened&&ne.isOpened),onClick:this._toggle});return s.createElement(ee.OutsideEvent,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},(o=>s.createElement("span",{ref:o},s.createElement(Q.NumberInput,{value:this.props.value||0,alwaysUpdateValueFromProps:!0,shouldApplyValueOnBlur:!1,formatter:this.props.formatter,className:l,containerReference:this._setRef,inputReference:this._setInputRef,button:v,
onValueChange:this._updateValue,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this._onKeyDown,error:a,errorMessage:i,errorHandler:c,min:e,max:t,step:r,uiStep:n,controlDecKeyCodes:this.state.isOpened?[E.CalculatorDecKeyCodes.Minus,E.CalculatorDecKeyCodes.NumMinus,E.CalculatorDecKeyCodes.FirefoxMinus]:void 0,controlIncKeyCodes:this.state.isOpened?[E.CalculatorIncKeyCodes.Plus,E.CalculatorIncKeyCodes.NumPlus,E.CalculatorIncKeyCodes.FirefoxPlus]:void 0,highlight:u,highlightRemoveRoundBorder:d,intent:p,fontSizeStyle:h}),this.state.isOpened&&s.createElement(te.QuantityCalculator,{...m,min:e,max:t,step:r,uiStep:n,valueGetter:this._getCurrentValue,position:this._getDropdownPosition(),targetEl:this._control,calcReference:this._setCalcRef,onClose:this._toggle,onFocus:this._handleCalculatorFocus,errorHandler:c,trackEventTarget:"Order Ticket"}))))}}function ae(e){const{control:t,focus:r,min:n,max:a,step:i,uiStep:l,type:c,error:u,errorMessage:d,errorHandler:p,label:h,formatter:v,className:f,status:g,trackEvent:b,highlight:C,highlightRemoveRoundBorder:y,intent:S,fontSizeStyle:w}=e,k=(0,m.useObservable)(t.value$,t.getValue()),N=()=>{e.onFocus&&e.onFocus(c)},_={value:k||0,step:i,uiStep:l,className:o(ne.input,g===E.OrderPanelStatus.Wait&&ne.wait),error:u,errorMessage:d,errorHandler:p,onFocus:N,formatter:v,onValueChange:e=>{N(),t.setValue(e),t.onModifiedCallback()},calculatorUsedStat:()=>t.calculatorUsedStat(),highlight:C,highlightRemoveRoundBorder:y,intent:S,fontSizeStyle:w},x=a||9e15,P=0===c?s.createElement(oe,{..._,focus:r,min:n||i,max:x,trackEvent:b}):s.createElement(Q.NumberInput,{..._,step:.01,min:n,max:x});return s.createElement("div",{className:o(f,ne.control)},s.createElement("div",{className:ne.label}," ",h," "),P)}var ie=r(443937);const le=g.t(null,void 0,r(563833)),ce=g.t(null,void 0,r(125933)),ue=g.t(null,void 0,r(357653));class de extends s.PureComponent{constructor(e){super(e),this._subscriptions=[],this._onFocus=e=>{e!==this.props.model.getFocusedControl()&&this.props.model.setFocusedControl(e),this.props.model.onControlFocused.fire()},this._errorHandler=e=>{this.props.model.setControlError(e)},this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel()}render(){var e;const t=this.context,{model:r,symbolHasLotSize:n,status:a,trackEvent:i,focus:l}=this.props,c=r.getError(),u={errorHandler:this._errorHandler,error:c,status:a,onFocus:this._onFocus,trackEvent:i,fontSizeStyle:"medium"},d=Boolean(c&&c.res),p=c&&c.msg,h=r.showRiskControls&&r.isRiskAvailable()&&(t.showPercentRiskInQty||t.showCurrencyRiskInQty);return s.createElement(s.Fragment,null,s.createElement(X.ControlGroupContext.Provider,{value:this._getGroupContextValue(!0,!h)},s.createElement(ae,{...u,...this._generateHighlightProps(0),control:r.quantity,min:r.qty.min,max:r.qty.max,step:r.qty.step,uiStep:r.qty.uiStep,type:0,formatter:r.formatter,label:null!==(e=r.units)&&void 0!==e?e:n?ue:ce,className:o(!h&&ne.single,ne.units),focus:l,
error:d&&this._isSelectedControl(0),errorMessage:p})),h&&s.createElement("div",{className:ne.risk},r.riskInCurrency&&t.showCurrencyRiskInQty&&s.createElement(X.ControlGroupContext.Provider,{value:this._getGroupContextValue(!1,!t.showPercentRiskInQty)},s.createElement(ae,{...u,...this._generateHighlightProps(1),control:r.riskInCurrency,step:r.riskStep,type:1,formatter:r.riskInCurrencyFormatter,label:r.currency+" "+le,error:d&&this._isSelectedControl(1),errorMessage:p})),r.riskInPercent&&t.showPercentRiskInQty&&s.createElement(X.ControlGroupContext.Provider,{value:this._getGroupContextValue(!1,!0)},s.createElement(ae,{...u,...this._generateHighlightProps(2),control:r.riskInPercent,step:r.riskStep,type:2,formatter:r.riskInPercentFormatter,label:"% "+le,error:d&&this._isSelectedControl(2),errorMessage:p}))))}_generateHighlightProps(e){const t=this.props.model.getError(),r=this.props.model.isRiskAvailable()?this._isSelectedControl(e):void 0;return{highlight:(this.context.showCurrencyRiskInQty||this.context.showPercentRiskInQty)&&(0===e?r:this._isSelectedControl(e)),highlightRemoveRoundBorder:0,intent:Boolean(t&&t.res)&&this._isSelectedControl(e)?"danger":void 0}}_isSelectedControl(e){return this.props.status!==E.OrderPanelStatus.Wait&&this.props.model.getFocusedControl()===e}_subscribeToModel(e){this._subscriptions=[e.focusedControl$.subscribe(this._callback),e.isRiskAvailable$.subscribe(this._callback),e.error$.subscribe(this._callback)]}_unsubscribeFromModel(){this._subscriptions.forEach((e=>e.unsubscribe()))}_getGroupContextValue(e,t){return{isGrouped:!0,disablePositionAdjustment:!0,cellState:{isTop:!0,isRight:t,isBottom:!0,isLeft:e}}}}de.contextType=ie.SettingsContext;var pe=r(495593),he=r(960521),me=r(45968),ve=r(634993),fe=r(609540),ge=r(460337);const be=[1,5,10,25,50,75,100];function Ce(e){const{control:t,controlType:r,error:n,side:a,focusedControl:i,setFocusedControl:l}=e,c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,m.useObservable)(t.value$,t.getValue()),h=(0,m.useObservable)(e.balanceValue$,null),[v,g]=(0,s.useState)(!1),[b,C]=(0,s.useState)(0),y=Boolean(n&&n.res),S=n&&n.msg;return(0,s.useEffect)((()=>{var t;5===e.initialFocus&&null!==(t=u.current)&&(t.focus(),t.setSelectionRange(t.value.length,t.value.length))}),[]),s.createElement(s.Fragment,null,s.createElement(Q.NumberInput,{...function(e){const t={highlightRemoveRoundBorder:0};N(e)&&(t.highlight=!0);Boolean(n&&n.res)&&N(e)&&(t.intent="danger");return t}(r),value:d,onBlur:e.forceRoundByStep?function(){if(null!==d&&void 0!==e.step){const t=new he.Big(d),r=t.mod(e.step);if(!r.eq(0)){w(t.minus(r).toNumber())}}}:void 0,onValueChange:w,min:e.min,step:e.step,formatter:e.formatter,errorMessage:S,errorHandler:e.setControlError,error:y&&N(r),inputReference:function(e){u.current=e},innerLabel:v?void 0:s.createElement("span",{className:ge.label},e.label),onFocus:()=>(l(r),void e.onControlFocused.fire()),className:o(ge.input,e.status===E.OrderPanelStatus.Wait&&ge.wait),button:k()?s.createElement(fe.CaretButton,{isDropped:v,onClick:function(){g(!v)}
}):s.createElement(s.Fragment,null),containerReference:function(e){c.current=e},alwaysUpdateValueFromProps:e.forceRoundByStep,fontSizeStyle:e.fontSizeStyle}),k()&&null!==h&&s.createElement(me.PopupMenu,{position:function(){const e=(0,p.ensureNotNull)(c.current).getBoundingClientRect();return C(e.width),{x:e.left,y:e.top+e.height+1}},onClose:_,isOpened:v,doNotCloseOn:c.current,onKeyDown:function(e){if(27===(0,f.hashFromEvent)(e))v&&(e.preventDefault(),_())},minWidth:b},be.map((r=>{const n=function(e){return(0,he.Big)((0,p.ensureNotNull)(h)).mul(.01).mul(e).toNumber()}(r),o=s.createElement(s.Fragment,null,r+"%  ",s.createElement("span",{className:ge.value},"("+e.formatter.format(n)+" "+e.label+")"));return s.createElement(ve.PopupMenuItem,{key:r.toString(),className:ge.popupMenuItem,label:o,onClick:()=>t.setValue(n)})}))));function w(r){t.setValue(r),e.onModifiedCallback()}function k(){return null!==h&&h>0&&(-1===a?3===r:4===r)}function N(t){return e.status!==E.OrderPanelStatus.Wait&&i===t}function _(){g(!1),(0,p.ensureNotNull)(c.current).focus()}}function ye(e){const{model:t,className:n,status:a}=e,i=(0,m.useObservable)(t.quoteCurrencyUiParams$),l=(0,m.useObservable)(t.error$,t.getError()),c=(0,m.useObservable)(t.focusedControl$,t.getFocusedControl()),u={side:(0,m.useObservable)(t.side$,t.getSide()),status:a,formatter:t.formatter,error:l,focusedControl:c,setFocusedControl:t.setFocusedControl,onControlFocused:t.onControlFocused,setControlError:t.setControlError,fontSizeStyle:"medium"};return s.createElement(s.Fragment,null,s.createElement("div",{className:ge.title},g.t(null,void 0,r(125933))),s.createElement(pe.ControlGroup,{cols:1,rows:2,className:o(n,ge.wrapper)},s.createElement(Ce,{...u,control:t.quantity,onModifiedCallback:t.quantity.onModifiedCallback,label:t.info.baseCurrency,controlType:3,balanceValue$:t.baseCurrencyCryptoBalanceValue$,initialFocus:e.focus,forceRoundByStep:!0,step:t.info.qty.step,min:t.info.qty.min}),s.createElement(Ce,{...u,control:t.quoteCurrencyQuantity,onModifiedCallback:t.quoteCurrencyQuantity.onModifiedCallback,label:t.info.quoteCurrency,controlType:4,balanceValue$:t.quoteCurrencyCryptoBalanceValue$,step:null==i?void 0:i.step,min:null==i?void 0:i.min})))}var Ee=r(18808),Se=r(733410),we=r(400236),ke=r(48486);function Ne(e){const t=o(ke.priceLabel,ke[e.modifier.toLowerCase()]);return s.createElement("span",{className:o(t)},e.modifier)}var _e=r(556644);function xe(e){const t=e.price===e.ask,r=e.price===e.bid,n=e.price===e.last,o=(t||r)&&e.ask===e.bid;let a,i;return e.displayPriceLabel&&(o&&1===e.side?a=s.createElement(Ne,{modifier:"Ask"}):o&&-1===e.side?a=s.createElement(Ne,{modifier:"Bid"}):t?a=s.createElement(Ne,{modifier:"Ask"}):r&&(a=s.createElement(Ne,{modifier:"Bid"})),i=s.createElement("div",{className:_e.labelsGroup},a,n&&s.createElement(Ne,{modifier:"Last"}))),s.createElement("div",{className:_e.absolutePriceDropdownItem},s.createElement("div",{className:_e.price},e.price),i)}var Pe=r(958431),Me=r(850775);function Te(e,t){return e.findIndex((e=>e.priceIndex===t))}function Ie(e,t,r){
const s=function(){0;return"phone"!==Me.mediaState.device&&"phone-vertical"!==Me.mediaState.device?6:4}(),n=[Be(e,t,r)];for(let o=1;o<=s;o++)n.push(Be(e-o,t,r)),n.unshift(Be(e+o,t,r));return n}function Be(e,t,r){return{priceIndex:e,displayPrice:t.format(r(e))}}var Oe=r(493266);const De=(0,Se.makeKeyboardListener)(Pe.InputWithError);class Re extends s.PureComponent{constructor(e){super(e),this._priceControl=null,this._priceInput=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._setInitialFocus=()=>{!re.mobiletouch&&this._priceInput&&(1===this.props.priceType&&1===this.props.focus||2===this.props.priceType&&2===this.props.focus)&&(this._priceInput.setSelectionRange(this.props.displayPrice.length,this.props.displayPrice.length),this._priceInput.focus())},this._onCaretButtonFocus=()=>{var e;null===(e=this._priceInput)||void 0===e||e.focus()},this._onFocus=e=>{this.props.onControlFocused&&this.props.onControlFocused(0)},this._onOutsideClick=e=>{if(document.activeElement===this._priceInput&&this.props.status!==E.OrderPanelStatus.Wait&&!this.props.error){const e=this.props.priceFormatter.parse(this.props.displayPrice);if(e.res){const t=this.props.priceFormatter.format(e.value>=0?e.value:Math.abs(e.value));this._onPriceSelected(t)}}this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&this._closeDropdown()},this._onInputChange=e=>{const t=e.target.value;this._onModifiedCallback(),this._onPriceSelected(t)},this._onTouchStart=e=>{this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{var t;if(e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const r=e.changedTouches[0].clientY-this._swipeState.y,s=null!==(t=this._swipeState.prevDiff)&&void 0!==t?t:0;if(Math.abs(r-s)<10)return;this._swipeState.direction=r>s?"up":"down",this._swipeState.prevDiff=r,"up"===this._swipeState.direction?this._prependPriceOnDropdown():"down"===this._swipeState.direction&&this._appendPriceOnDropdown()}},this._onTouchEnd=e=>{this._resetSwipeState()},this._onDropdownWheelNoPassive=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnDropdown():this._appendPriceOnDropdown()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this.props.isSelected&&(this._onModifiedCallback(),e.deltaY<0?this._changeValueByStep(1):this._changeValueByStep(-1))},this._onSelect=(e,t)=>{this.setState({selected:e},(()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceSelected(t.displayPrice)}))},this._onNavigate=()=>{const e=this.state.command&&"prev"===this.state.command.name,t=this.state.command&&"next"===this.state.command.name;e?this._changeValueByStep(1):t&&this._changeValueByStep(-1)},this._onMouseOver=()=>{this.setState({mouseOver:!0})},this._onMouseOut=()=>{this.setState({mouseOver:!1})},this._onCaretButtonClick=e=>{var t;e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),re.mobiletouch||null===(t=this._priceInput)||void 0===t||t.setSelectionRange(this.props.displayPrice.length,this.props.displayPrice.length))},
this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceByArrow=e=>{e.preventDefault(),this._onModifiedCallback();const t=e.keyCode===Se.KeyCode.UpArrow?1:-1;this._changeValueByStep(t)},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({isOpened:!0,keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownWithStopPropagation=e=>{e&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),this._closeDropdown()},this._closeDropdown=()=>{const e=Ie(this.props.priceIndex,this.props.priceFormatter,this.props.indexToPrice);this.setState({isOpened:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close"),priceList:e,selected:Te(e,this.props.priceIndex)})};const t=Ie(e.priceIndex,e.priceFormatter,e.indexToPrice);this.state={priceList:t,selected:Te(t,e.priceIndex),isOpened:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")},this._resetSwipeState()}componentDidMount(){this._setInitialFocus()}render(){const e=o(Oe.absolutePriceControl,this.props.className),t=s.createElement("span",{className:Oe.priceLabel},this.props.priceLabel),r=s.createElement(fe.CaretButton,{isDropped:this.state.isOpened,onFocus:this._onCaretButtonFocus,onClick:this._onCaretButtonClick});return s.createElement(ee.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},(n=>s.createElement("span",{className:e,ref:n},t,s.createElement(De,{className:o(Oe.input,this.props.status===E.OrderPanelStatus.Wait&&Oe.wait),containerReference:this._setPriceControl,inputReference:this._setPriceInput,keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.props.displayPrice,warning:this.props.warning,error:this.props.error,errorMessage:this.props.errorMessage,onChange:this._onInputChange,onFocus:this._onFocus,onBlur:this.props.onBlur,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,onWheelNoPassive:this._onInputMouseWheel,highlight:this.props.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle,button:r,intent:this.props.intent}),s.createElement(we.DropdownList,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:Oe.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:Oe.item,width:this._getDropdownWidth(),selected:this.state.selected,selectedClassName:Oe.selected,target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!1,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassive}))))}componentDidUpdate(e,t){if(this.props.priceIndex===e.priceIndex)return
;const r=Ie(this.props.priceIndex,this.props.priceFormatter,this.props.indexToPrice);this.setState({priceList:r,selected:Te(r,this.props.priceIndex)})}_onPriceSelected(e){const t=this.props.priceFormatter.parse(e);t.res?this.props.errorHandler(!1):this.props.errorHandler(!0,t.error),this.props.onPriceSelected(e)}_resetSwipeState(){this._swipeState={direction:null,y:null,prevDiff:null}}_getKeyboardEventHandlers(e){return"close"===e?{[Se.KeyCode.UpArrow]:this._scrollPriceByArrow,[Se.KeyCode.DownArrow]:this._scrollPriceByArrow}:{[Se.KeyCode.Enter]:this._closeDropdownWithStopPropagation,[Se.KeyCode.Escape]:this._closeDropdownWithStopPropagation,[Se.KeyCode.UpArrow]:this._selectPrev,[Se.KeyCode.DownArrow]:this._selectNext}}_makeListItems(){return this.state.priceList.map((e=>({...e,elem:s.createElement(xe,{price:e.displayPrice,ask:this.props.priceFormatter.format(this.props.ask),bid:this.props.priceFormatter.format(this.props.bid),last:this.props.priceFormatter.format(this.props.last),side:this.props.side,displayPriceLabel:!0})})))}_prependPriceOnDropdown(){const e=[Be(this.state.priceList[0].priceIndex+1,this.props.priceFormatter,this.props.indexToPrice)].concat(this.state.priceList.slice(0,-1));this.setState({priceList:e,selected:Te(e,this.props.priceIndex)})}_appendPriceOnDropdown(){const e=this.state.priceList.length-1,t=Be(this.state.priceList[e].priceIndex-1,this.props.priceFormatter,this.props.indexToPrice),r=this.state.priceList.slice(1).concat(t);this.setState({priceList:r,selected:Te(r,this.props.priceIndex)})}_changeValueByStep(e){const t=this.props.priceIndex+e,r=this.props.indexToPrice(t);var s,n;this._onPriceSelected((s=r,n=this.props.priceFormatter,null!==s?n.format(s):""))}_getDropdownWidth(){if(this.state.isOpened&&null!==this._priceControl&&(this.context.mode===E.OrderEditorDisplayMode.Popup||this.state.priceList[0].displayPrice.length<=7)){return parseFloat(window.getComputedStyle(this._priceControl,null).getPropertyValue("width"))+2}}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}}Re.contextType=E.Context,Re.defaultProps={className:"",inputClassName:""};var Fe=r(904310);function We(e,t){return e.findIndex((e=>e.displayValue===t))}const Le=/^[-+]?[0-9]*\.?[0-9]+$/;function ze(e,t){const r=(0,Fe.capitalizeFirstLetter)(e);return t>0?`${r} + ${Math.abs(t)}`:t<0?`${r} - ${Math.abs(t)}`:`${r}`}function He(e){return String(e)}function Ae(e,t){const r=e.offset;return s=e.base,n=function(e,t){return(Math.abs(e)>=1?e:0)+(1===t?1:-1)}(r,t),{displayValue:ze(s,n),base:s,offset:n};var s,n}function Ve(e,t,r){const s=[],n=[],o={displayValue:ze(t,e),base:t,offset:e};for(let e=0;e<r;e++)s.unshift(Ae(0===e?o:s[0],1)),n.push(Ae(0===e?o:n[e-1],-1));return[...s,o,...n]}function Ze(){return"phone"!==Me.mediaState.device&&"phone-vertical"!==Me.mediaState.device?6:4}var Ue=r(968625);function Ke(e){return s.createElement("div",{className:Ue.relativePriceDropdownItem},s.createElement("div",{className:Ue.price},e.price))}var je=r(78007);const qe=(0,
Se.makeKeyboardListener)(Pe.InputWithError),$e=g.t(null,{context:"price"},r(172639)),Ge=g.t(null,void 0,r(332061));class Ye extends s.PureComponent{constructor(e){super(e),this._priceInput=null,this._priceControl=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._onMouseOver=e=>{this.setState({mouseOver:!0})},this._onMouseOut=()=>{this.setState({mouseOver:!1})},this._onOutsideClick=e=>{var t;this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&(this._closeDropdown(),null===(t=this._priceInput)||void 0===t||t.blur())},this._onCaretButtonFocus=()=>{var e;null===(e=this._priceInput)||void 0===e||e.focus()},this._onFocus=()=>{this.setState({isEditing:!0,displayValue:this.state.displayValue===ze(this.props.base,this.props.offset)?He(this.props.offset):this.state.displayValue},(()=>{var e,t;re.mobiletouch||null===this._priceInput||(e=this._priceInput,t=this.state.displayValue.length,e.setSelectionRange&&(e.focus(),e.setSelectionRange(0,t),e.select()))})),this.props.onControlFocused&&this.props.onControlFocused(1)},this._onBlur=()=>{this.props.error||this.setState({isEditing:!1,displayValue:ze(this.props.base,this.props.offset)},(()=>{this._trackExitEditingModeEvent(this.props.offset)}))},this._onInputChange=e=>{this._onModifiedCallback();const t=e.currentTarget.value;var r;r=t,Le.test(r)?this.setState({displayValue:t},(()=>{this._onPriceOffsetSelected(Number(t))})):(this.setState({displayValue:t}),this.props.errorHandler(!0,Ge))},this._onTouchStart=e=>{this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{var t;if(e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const r=e.changedTouches[0].clientY-this._swipeState.y,s=null!==(t=this._swipeState.prevDiff)&&void 0!==t?t:0;if(Math.abs(r-s)<10)return;this._swipeState.direction=r>s?"up":"down",this._swipeState.prevDiff=r,"up"===this._swipeState.direction?this._prependPriceOnTouchMove():"down"===this._swipeState.direction&&this._appendPriceOnTouchMove()}},this._onTouchEnd=e=>{this._resetSwipeState()},this._onDropdownWheelNoPassive=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnWheel():this._appendPriceOnWheel()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this.props.isSelected&&(this._onModifiedCallback(),e.deltaY<0?this._changeValueByStep(1):this._changeValueByStep(-1))},this._onSelect=(e,t)=>{this.setState({displayValue:t.text,selected:e},(()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceOffsetSelected()}))},this._onNavigate=(e,t)=>{const r=this.state.command&&"prev"===this.state.command.name,s=this.state.command&&"next"===this.state.command.name;r?this._changeValueByStep(1):s&&this._changeValueByStep(-1)},this._onCaretButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),!re.mobiletouch&&this._priceInput&&this._priceInput.setSelectionRange(this.state.displayValue.length,this.state.displayValue.length))},this._switchEditingMode=e=>{var t;e.preventDefault()
;const r=Number(this.state.displayValue);if(Number.isInteger(r)||this.props.error)null===(t=this._priceInput)||void 0===t||t.blur();else{const e=Math.round(r),t=Ve(e,this.props.base,Ze()),s=We(t,ze(this.props.base,e));this.setState({displayValue:String(e),prices:t,selected:s,isEditing:!1},(()=>{var e;this._onPriceOffsetSelected(),null===(e=this._priceInput)||void 0===e||e.blur()}))}},this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceByArrow=e=>{e.preventDefault(),this._onModifiedCallback();const t=e.keyCode===Se.KeyCode.UpArrow?1:-1;this._changeValueByStep(t)},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({isOpened:!0,keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownOnKeyDown=e=>{var t;e.preventDefault(),this._closeDropdown(),null===(t=this._priceInput)||void 0===t||t.blur()},this._closeDropdown=()=>{const e=ze(this.props.base,this.props.offset),t=Ve(this.props.offset,this.props.base,Ze()),r=We(t,e);this.setState({isOpened:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close"),prices:t,selected:r})},this._trackExitEditingModeEvent=e=>{this.props.trackEvent&&this.props.trackEvent("Order Ticket","Relative Price - Exit Editing Mode",String(e))};const t=ze(e.base,e.offset),r=Ve(e.offset,e.base,Ze()),s=We(r,t);this.state={displayValue:t,prices:r,selected:s,isOpened:!1,isEditing:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")},this._resetSwipeState()}render(){const e=s.createElement(fe.CaretButton,{isDropped:this.state.isOpened,onFocus:this._onCaretButtonFocus,onClick:this._onCaretButtonClick});return s.createElement(ee.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},(t=>s.createElement("span",{className:this.props.className,ref:t},s.createElement("span",{className:je.pipsLabel},$e),s.createElement(qe,{className:o(je.input,this.props.status===E.OrderPanelStatus.Wait&&je.wait),keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.state.displayValue,error:this.props.error,errorMessage:this.props.errorMessage,button:e,containerReference:this._setPriceControl,inputReference:this._setPriceInput,onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onInputChange,onWheelNoPassive:this._onInputMouseWheel,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,noReadonlyStyles:!0,highlight:this.props.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle,intent:this.props.intent}),s.createElement(we.DropdownList,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:je.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:je.item,selected:this.state.selected,selectedClassName:je.selected,
target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!0,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassive}))))}componentDidUpdate(e){if(this.props.offset!==e.offset||this.props.base!==e.base){const e=ze(this.props.base,this.props.offset),t=Ve(this.props.offset,this.props.base,Ze()),r=We(t,e);this.setState({prices:t,selected:r})}this.state.isEditing&&this.props.isSelected||this.props.offset===e.offset&&this.props.base===e.base&&this.props.error===e.error||this.setState({displayValue:ze(this.props.base,this.props.offset),isEditing:!1})}_onPriceOffsetSelected(e){const t=void 0!==e?e:this.state.prices[this.state.selected].offset;this.props.errorHandler(!1),this.props.onPriceOffsetSelected(t)}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}_resetSwipeState(){this._swipeState={direction:null,y:null,prevDiff:null}}_getKeyboardEventHandlers(e){return"close"===e?{[Se.KeyCode.UpArrow]:this._scrollPriceByArrow,[Se.KeyCode.DownArrow]:this._scrollPriceByArrow,[Se.KeyCode.Enter]:this._switchEditingMode}:{[Se.KeyCode.Enter]:this._closeDropdownOnKeyDown,[Se.KeyCode.Escape]:this._closeDropdownOnKeyDown,[Se.KeyCode.UpArrow]:this._selectPrev,[Se.KeyCode.DownArrow]:this._selectNext}}_makeListItems(){return this.state.prices.map(((e,t)=>({base:e.base,offset:e.offset,text:e.displayValue,elem:s.createElement(Ke,{price:e.displayValue})})))}_prependPriceOnWheel(){const e=Ae(this.state.prices[0],1);this.setState((t=>({prices:[e].concat(t.prices.slice(0,-1)),selected:0===t.selected?1:t.selected+1})))}_appendPriceOnWheel(){const e=this.state.prices.length-1,t=Ae(this.state.prices[e],-1);this.setState((r=>({prices:r.prices.slice(1).concat(t),selected:r.selected===e?e-1:r.selected-1})))}_prependPriceOnTouchMove(){const e=this.state.prices[0],t=[];t.unshift(Ae(e,1)),this.setState((e=>({prices:t.concat(e.prices.slice(0,this.state.prices.length-1)),selected:0===e.selected?1:e.selected+1})))}_appendPriceOnTouchMove(){const e=this.state.prices.length-1,t=this.state.prices[e],r=[];r.push(Ae(t,-1)),this.setState((t=>({prices:t.prices.slice(1).concat(r),selected:t.selected===e?e-1:t.selected-1})))}_changeValueByStep(e){const t=this.props.offset+e,r=this.state.isEditing?He(t):ze(this.props.base,t);this.setState({displayValue:r},(()=>{this._onPriceOffsetSelected(t)}))}}var Xe=r(472804);function Qe(e){const{model:t,priceType:r,focus:n,priceLabel:a,trackEvent:i}=e,l=s.useContext(ie.SettingsContext),c=(0,m.useObservable)(t.priceControlData$,t.getPriceControlData()),u=(0,m.useObservable)(t.focusedControl$,t.getFocusedControl()),d=(0,m.useObservable)(t.error$,t.getError()),p=(0,m.useObservable)(t.quotes$,{ask:0,bid:0,trade:0}),h=(0,m.useObservable)(t.side$),v=(0,
m.useObservable)(t.status$,E.OrderPanelStatus.Wait),f="medium",g=l.showRelativePriceControl&&!t.isRelativePriceControlHidden,b=d.msg,C=v!==E.OrderPanelStatus.Wait&&d.res&&"warning"===d.severity,y=w(0),S=w(1);return s.createElement(pe.ControlGroup,{cols:g?2:1,rows:1,className:Xe.controlGroup},s.createElement(Re,{...k(0),className:o(Xe.absolutePriceControl,g&&Xe.withRelative),priceType:r,isSelected:y,status:v,priceIndex:c?c.index:0,displayPrice:c?c.absolutePrice:"",ask:(0,Ee.getAsk)(p),bid:(0,Ee.getBid)(p),last:(0,Ee.getLast)(p),side:h,priceFormatter:t.formatter,warning:C,error:d.res&&"error"===d.severity&&y,errorMessage:b,errorHandler:N,onControlFocused:_,onPriceSelected:t.setAbsolutePrice,trackEvent:i,onModifiedCallback:t.modifiedAbsolutePriceControlStat,focus:n,fontSizeStyle:f,priceLabel:a,indexToPrice:t.indexToPrice}),g&&s.createElement(Ye,{...k(1),isSelected:S,offset:c?c.offset:0,base:c?c.base:"",className:Xe.relativePriceControl,status:v,error:d.res&&"error"===d.severity&&S,errorMessage:b,errorHandler:N,fontSizeStyle:f,onControlFocused:_,onPriceOffsetSelected:t.setPriceOffset,trackEvent:i,onModifiedCallback:t.modifiedRelativePriceControlStat}));function w(e){return v!==E.OrderPanelStatus.Wait&&u===e}function k(e){const t={highlightRemoveRoundBorder:0};return w(e)&&(t.highlight=!0),d.res&&"error"===d.severity&&w(e)&&(t.intent="danger"),t}function N(e,r){t.setControlError(e,r)}function _(e){e!==t.getFocusedControl()&&(t.setFocusedControl(e),t.setControlError(!1)),t.onControlFocused.fire()}}function Je(e){const{model:t,trackEvent:n,focus:o}=e,a=(0,m.useObservable)(t.orderType$),i=4===a;return s.createElement(s.Fragment,null,3===a||i?s.createElement(Qe,{key:t.stopPriceModel.id,model:t.stopPriceModel,priceType:t.stopPriceModel.priceType,trackEvent:n,focus:o,priceLabel:i?g.t(null,void 0,r(722028)):g.t(null,void 0,r(25684))}):null,1===a||i?s.createElement(Qe,{key:t.limitPriceModel.id,model:t.limitPriceModel,priceType:t.limitPriceModel.priceType,trackEvent:n,focus:o,priceLabel:i?g.t(null,void 0,r(627262)):g.t(null,void 0,r(25684))}):null)}var et=r(682866),tt=r(573723);class rt extends s.PureComponent{constructor(e){super(e),this._orderTypeSubscription=null,this.onDurationChanged=e=>{this.props.model.currentDuration.setValue(e),this.props.model.onModifiedCallback()},this._onControlFocused=()=>{this.props.model.onControlFocused.fire()},this._callback=()=>this.forceUpdate()}componentDidMount(){this.props.model.currentDuration.subscribe(this._callback),this._orderTypeSubscription=this.props.model.orderType$.subscribe(this._callback)}componentWillUnmount(){var e;this.props.model.currentDuration.unsubscribe(this._callback),null===(e=this._orderTypeSubscription)||void 0===e||e.unsubscribe()}render(){const e=this.props.model.currentDuration.value();return null===e?null:s.createElement(tt.DurationControl,{currentDuration:e,durationMetaInfoList:this._getDurationMetaInfoList(),onDurationChanged:this.onDurationChanged,onClose:this.props.onClose,onControlFocused:this._onControlFocused,onError:this.props.model.setError,
showErrorMessages:!0})}_getDurationMetaInfoList(){const e=this.props.model.getOrderType(),t=this.props.model.durationMetaInfoList;return(0,Ee.filterDurationsByOrderType)(t,e)}}var st=r(605587);const nt=s.lazy((async()=>({default:(await Promise.all([r.e(69646),r.e(59e3),r.e(46112)]).then(r.bind(r,241740))).LeverageDialog}))),ot=(0,st.withDialogLazyLoad)(nt);var at=r(318383),it=r(647253);function lt(e){const{leverage:t,onClick:n,onControlFocused:o,blocked:i,forceDisabled:l=!1,onBlockedClick:c}=e,u=void 0===t;let d=g.t(null,{replace:{value:String(t)}},r(304389));return u&&(d=g.t(null,void 0,r(65124))),i&&(d=g.t(null,void 0,r(405849))),s.createElement("div",{className:it.container,onClick:function(){if(i)return o.fire(),void c()}},s.createElement(at.EditButton,{disabled:u||l||i,value:d,startSlot:u||i?void 0:"x",onClick:function(){n(),o.fire()},className:a()(it.leverageButton,l&&it.disabledLeverageButton)}))}function ct(e){const{model:t}=e,r=(0,m.useObservable)(t.leverageInfo$,t.leverageInfo()),n=(0,m.useObservable)(t.blocked$,t.getBlocked()),o=t.leveragePreviewResult(),[a,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null==r?void 0:r.leverage);return(0,s.useEffect)((()=>{c(null==r?void 0:r.leverage)}),[r]),s.createElement(s.Fragment,null,s.createElement(lt,{onClick:u,leverage:l,forceDisabled:a,blocked:n,onControlFocused:t.onControlFocused,onBlockedClick:t.onBlockedClick}),null!==r&&a&&void 0!==l&&s.createElement(ot,{symbol:t.symbol,displaySymbol:t.displaySymbol,leverage:l,brokerName:t.brokerName,orderType:t.orderType,side:t.side,isOpen:a,onClose:u,onLeverageSet:t.setLeverage,onLeveragePreview:t.previewLeverage,title:r.title,min:r.min,max:r.max,step:r.step,customFields:t.customFields,infos:null==o?void 0:o.infos,warnings:null==o?void 0:o.warnings,errors:null==o?void 0:o.errors,onSetLeverageValueInOrderWidget:function(e){c(e)}}));function u(){a||t.getLeverageInfo({symbol:t.symbol,orderType:t.orderType,side:t.side,customFields:t.customFields}),i((e=>!e))}}var ut=r(662464);function dt(e){const{scrollContainerRef:t,...r}=e,n=(0,ut.useAccurateHover)(t);return s.createElement(F.OverlayScrollWrapper,{...r,scrollContainerRef:t,isForceVisible:n})}var pt=r(272127),ht=r(954568);class mt extends s.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)}componentWillUnmount(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)}render(){const e={width:`${this.props.progress}%`},t=o(ht.progress,100===this.props.progress&&ht.fullFilled,this.props.usedMargin>this.props.availableMargin&&ht.marginOverflow);return s.createElement("div",{className:o(ht.progressBarContainer,this.props.wait&&ht.wait)},s.createElement("div",{className:ht.marginsContainer},s.createElement("div",{className:o(ht.margin,ht.usedMargin)},s.createElement("div",{className:ht.title},g.t(null,void 0,r(969992))),s.createElement("span",{className:ht.price},(0,pt.formatInfoValue)(this.props.usedMargin))),s.createElement("div",{
className:o(ht.margin),"data-name":"availableMargin"},s.createElement("span",{className:ht.price},(0,pt.formatInfoValue)(this.props.availableMargin)))),s.createElement("div",{className:ht.progressBar},s.createElement("div",{className:ht.track},s.createElement("div",{className:t,style:e}))))}}mt.contextType=E.Context;var vt=r(849071);function ft(e){const{model:t,infoTableData:r,orderPanelStatus:n}=e,o=(0,m.useObservable)(t.usedMargin$,0),a=(0,m.useObservable)(t.availableMargin$,0),i=t.hasMarginMeter()?s.createElement(mt,{usedMargin:o,availableMargin:a,progress:(0,pt.calculatedMarginRatio)(o,a),wait:n===E.OrderPanelStatus.Wait}):void 0;return s.createElement("div",{className:vt.orderInfo},s.createElement("div",{className:vt.title},t.title()),s.createElement("div",{className:vt.contentWrapper},i,s.createElement(R.InfoTable,{rows:r.rows,header:r.header,disabled:n===E.OrderPanelStatus.Wait,rightAlignedValues:!0})))}var gt=r(389137),bt=r(156487),Ct=r(125226),yt=r(781666),Et=r(583660),St=r(936755),wt=r(941838),kt=r(333730),Nt=r(812239);const _t=s.forwardRef(((e,t)=>{const{id:r,value:n,convertedValues:o,unitsTitle:i,onValueChange:l,onFocus:c,onKeyDown:u,formatter:d,quantityMetainfo:p,error:h,errorMessage:m,errorHandler:v,selectedQuantityInputType:f,className:g,calculatorUsedStat:b,trackEvent:C,highlight:y,highlightRemoveRoundBorder:S,intent:w,boundariesErrorMessages:k}=e,[N,_]=(0,s.useState)(!1),x=(0,s.useRef)(null),P=(0,s.useRef)(null),M=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,(()=>P.current));const T="units"===f,I=(0,s.useMemo)((()=>T||void 0===o||null===o.units?null:(0,wt.roundedAbbreviatedNumber)(o.units)),[T,null==o?void 0:o.units]),B=(0,s.useMemo)((()=>I&&void 0!==o&&null!==o.units?s.createElement("span",{className:a()(Nt.units,"apply-common-tooltip","common-tooltip-below"),"data-tooltip":` ${(0,kt.splitThousands)(null==o?void 0:o.units,"")}`},` ${I} ${i}`):void 0),[i,I,null==o?void 0:o.units]);function D(e){x.current=e}function R(e){P.current=e}function F(e){M.current=e}function W(e){l(e)}function L(){l(null)}function z(e){!N||13!==e.keyCode&&27!==e.keyCode||(e.stopPropagation(),_(!1)),Object.values(E.CalculatorDecKeyCodes).includes(e.keyCode)||Object.values(E.CalculatorIncKeyCodes).includes(e.keyCode)||_(!1),void 0!==u&&u(e)}function H(){_(!N)}function A(){re.mobiletouch||null===P.current||P.current.focus()}function V(){return null!=n?n:0}const Z=T?s.createElement(O.Icon,{icon:se,className:a()(Nt.calculatorIcon,N&&Nt.isOpened),onClick:H}):s.createElement(s.Fragment,null);return s.createElement(ee.OutsideEvent,{click:!0,mouseDown:!0,touchStart:!0,handler:function(e){M.current&&!M.current.contains(e.target)&&_(!1)}},(e=>s.createElement("span",{ref:e},s.createElement(Q.NumberInput,{...p,id:r,value:n,alwaysUpdateValueFromProps:!0,shouldApplyValueOnBlur:!1,formatter:d,className:g,containerReference:D,inputReference:R,button:Z,endSlot:B,onValueChange:W,onFocus:c,onKeyDown:z,onEmptyString:L,error:h,errorMessage:m,errorHandler:v,
controlDecKeyCodes:N?[E.CalculatorDecKeyCodes.Minus,E.CalculatorDecKeyCodes.NumMinus,E.CalculatorDecKeyCodes.FirefoxMinus]:void 0,controlIncKeyCodes:N?[E.CalculatorIncKeyCodes.Plus,E.CalculatorIncKeyCodes.NumPlus,E.CalculatorIncKeyCodes.FirefoxPlus]:void 0,boundariesErrorMessages:k,highlight:y,highlightRemoveRoundBorder:S,intent:w,fontSizeStyle:"medium",forceShowControls:!1,autoComplete:"off"}),N&&s.createElement(te.QuantityCalculator,{...p,valueGetter:V,onValueChange:W,position:(0,J.getPopupPositioner)(x.current,{horizontalAttachEdge:J.HorizontalAttachEdge.Right,horizontalDropDirection:J.HorizontalDropDirection.FromRightToLeft}),targetEl:x.current,calcReference:F,onClose:H,onFocus:A,errorHandler:v,calculatorUsedStat:b,trackEvent:C,trackEventTarget:"Order Ticket"}))))}));var xt=r(137982),Pt=r(24154),Mt=r(70829),Tt=r(309103),It=r(315336);const Bt="quantity-dropdown-types",Ot=g.t(null,void 0,r(275226));function Dt(e){const{isActive:t,value:r,title:n,hiddenValueTooltip:o,onSelect:a,isValueShown$:i}=e,c=(0,m.useObservable)(null!=i?i:(0,l.of)(!0)),u=null!==r?` ${r}`:void 0,d=void 0!==o&&""!==o?s.createElement(xt.IconQuestionInformation,{icon:"info",ariaLabel:o,tooltip:o,onClick:Tt.tooltipClickHandler}):void 0,p=c?u:d;return s.createElement(ve.PopupMenuItem,{className:It.popupMenuItem,labelClassName:It.labelWrapper,toolboxClassName:It.toolbox,isActive:t,suppressToolboxClick:!c&&!t,label:n,toolbox:!t&&p,onClick:()=>{t||a()}})}function Rt(e){var t;const{selectedQuantityInputType:n,convertedValues:o,setSelectedQuantityInputType:a,availableQuantityTypeInfos:i}=e;return s.createElement(s.Fragment,null,s.createElement("label",{htmlFor:Bt,className:It.hidden},g.t(null,void 0,r(30615))),s.createElement(Mt.ToolWidgetMenu,{id:Bt,content:s.createElement(s.Fragment,null,s.createElement("span",null,null===(t=i[n])||void 0===t?void 0:t.title),s.createElement(Pt.HintReferenceable,{text:g.t(null,void 0,r(202283)),placement:"top",overflowPadding:20,settingsHintKey:y.settingsKeys.SHOW_TOOLTIP_FOR_ORDER_SIZE_CALCULATOR,hideWithReference:!0,placeHolderClassName:It.hintPlaceholder})),isDrawer:c.CheckMobile.any(),className:It.dropdown,title:Ot},Object.values(i).map((({quantityType:e,...t})=>s.createElement(Dt,{...t,key:e,isActive:n===e,value:(0,p.ensureDefined)(null==o?void 0:o[e],"QuantityTypeSelect convertedValues"),onSelect:()=>{var r;null===(r=t.onSelect)||void 0===r||r.call(t),a(e)}})))))}const Ft=g.t(null,void 0,r(766596)),Wt="order-ticket-quantity-input";function Lt(e,t){const r=void 0!==e&&e.res&&t!==E.OrderPanelStatus.Wait;return{highlight:!!r||void 0,highlightRemoveRoundBorder:0,intent:r?"danger":void 0}}function zt(e){var t,r;const{model:n,status:o,focus:a,convertedValues$:i,trackEvent:l}=e,{quantity:c,inputType$:u,error$:d,quantityMetainfo$:p,onControlFocused:h,formatter:v,getInputType:f,setInputType:g,getQuantityMetainfo:b,getError:C}=n,y=(0,s.useRef)(null),S=(0,m.useObservable)(c.value$,c.getValue()),w=(0,m.useObservable)(i),k=(0,m.useObservable)(u,f()),N=(0,m.useObservable)(p,b()),_=(0,m.useObservable)(d,C()),[x,P]=(0,
s.useState)(!1),M=n.getAvailableQuantityTypeInfos();function T(){const e=y.current;re.mobiletouch||null===e||(e.focus(),e.setSelectionRange(0,e.value.length))}(0,s.useEffect)((()=>{5===a&&T()}),[]),(0,s.useEffect)((()=>{x&&(P(!1),T())}),[S,x]);const I=()=>{h.fire()};if(void 0===M)return s.createElement(s.Fragment,null);const B=null===(t=M[k])||void 0===t?void 0:t.informerText;return s.createElement("div",{className:Nt.control},s.createElement("div",{className:Nt.title},s.createElement(Et.Label,{htmlFor:Wt,className:Nt.label},Ft),s.createElement(Rt,{selectedQuantityInputType:k,convertedValues:w,setSelectedQuantityInputType:function(e){g(e),c.setValue(function(e,t){var r;return null!==(r=null==e?void 0:e[t])&&void 0!==r?r:null}(w,e)),P(!0)},availableQuantityTypeInfos:M}),void 0!==B&&s.createElement(St.TradingInformer,{className:Nt.informer,informerMessage:B})),s.createElement(_t,{...Lt(_,o),ref:y,id:Wt,className:o===E.OrderPanelStatus.Wait&&Nt.wait,unitsTitle:M.units.title,value:S,onValueChange:e=>{I(),c.setValue(e),c.onModifiedCallback()},onFocus:I,selectedQuantityInputType:k,convertedValues:w,calculatorUsedStat:()=>c.calculatorUsedStat(),error:Boolean(_&&_.res),errorMessage:_&&_.msg,errorHandler:n.setControlError,formatter:v,quantityMetainfo:N,trackEvent:l,boundariesErrorMessages:null===(r=M[k])||void 0===r?void 0:r.boundariesErrorMessages}))}var Ht=r(274112),At=r(969561),Vt=r(338043);const Zt=(0,C.getLogger)("Trading.OrderPanel"),Ut=g.t(null,void 0,r(69208)),Kt=g.t(null,void 0,r(184568)),jt=g.t(null,void 0,r(708169)),qt=g.t(null,void 0,r(312690)),$t=g.t(null,void 0,r(200890)),Gt=g.t(null,void 0,r(436598));function Yt(){document.activeElement instanceof HTMLElement?document.activeElement.blur():Zt.logWarn("Failed to deselect: active element is not HTMLElement")}const Xt=(0,s.forwardRef)(((e,t)=>{const{model:n,focus:a,trackEvent:i,orderPanelStatus:l,orderType:u,setOrderType:h,isNoQuotes:m,orderWidgetRef:v}=e,f=l===E.OrderPanelStatus.Wait||c.CheckMobile.any()?void 0:a,b=function(e,t){return Boolean(2!==t&&(!e.existingOrder||e.existingOrder&&e.supportModifyOrderPrice))}(n,u),C=function(e,t){const r=2!==t||e.supportMarketBrackets();return Boolean(e.supportBrackets()&&r)}(n,u)||function(e){return Boolean(e.supportCryptoBrackets)}(n),y=function(e){return Boolean(e.durationModel&&(!e.existingOrder||e.existingOrder&&e.supportModifyDuration)&&e.durationModel.isDurationsAvailable())}(n),S=function(e){return Boolean(e.supportLeverageButton)}(n),w=b||n.supportModifyQuantity||S,k=b||n.supportModifyQuantity||S||C,N=[E.OrderPanelStatus.Active,E.OrderPanelStatus.Wait].includes(l),_=n.customFieldsModel.getCustomFieldsModels(),x=[],P=(0,s.useRef)(null);function M(){null!==v.current&&v.current.focus()}return N&&(x.push({id:"symbol-specific-warning",warningMessageSource:n.symbolSpecificWarningMessage}),void 0!==n.warningMessage$&&x.push({id:"general-warning",warningMessageSource:n.warningMessage$})),m&&void 0!==n.brokerName&&x.push({id:"no-quotes-warning",
warningMessageSource:g.t(null,void 0,r(706844)).replace("{brokerName}",n.brokerName),isCloseButtonShown:!1}),s.createElement(s.Fragment,null,n.sideModel&&s.createElement("div",{className:Vt.side},s.createElement(B,{model:n.sideModel,disabled:n.existingOrder})),n.limitPriceModel&&n.stopPriceModel&&s.createElement(G,{orderType:u,setOrderType:h,disabled:n.existingOrder&&!n.supportModifyOrderType,supportMarketOrders:n.supportMarketOrders(),supportLimitOrders:n.supportLimitOrders(),supportStopOrders:n.supportStopOrders(),supportStopLimitOrders:n.supportStopLimitOrders()}),s.createElement(dt,{className:Vt.scrollWrapper,scrollContainerRef:P},n.limitPriceModel&&n.stopPriceModel&&n.quantityModel&&s.createElement("div",{className:o(Vt.centerBlock),ref:P},b&&s.createElement(Je,{model:n,trackEvent:i,focus:f}),n.supportModifyQuantity&&s.createElement("div",{className:Vt.quantityWrapper},n.supportCryptoExchangeOrderTicket()?s.createElement(ye,{model:n.quantityModel,status:l,focus:f}):(0,Ct.isFeatureEnabled)("order_size_calculator")&&void 0!==n.quantityConverterController?s.createElement(zt,{model:n.quantityModel,status:l,convertedValues$:n.quantityConverterController.convertedValues$,trackEvent:i,focus:f}):s.createElement(de,{model:n.quantityModel,symbolHasLotSize:n.symbolHasLotSize,status:l,trackEvent:i,focus:f})),C&&s.createElement("div",{className:Vt["brackets-wrapper"]},w&&s.createElement("div",{className:Vt.separator}),s.createElement("div",{className:Vt.brackets},s.createElement(Y.BracketControlGroup,{model:n,focus:f}))),y&&s.createElement("div",{className:Vt.duration},s.createElement(rt,{onClose:M,model:(0,p.ensureDefined)(n.durationModel)})),_.length>0&&s.createElement("div",{className:Vt.customFieldsWrapper},k&&s.createElement("div",{className:Vt.separator}),s.createElement(Ht.CustomFields,{customFieldModels:_,orderPanelStatus:l,onClose:M})),S&&s.createElement("div",{className:Vt.leverage},s.createElement(ct,{model:(0,p.ensureDefined)(n.leverageModel)})))),void 0!==n.buttonModel&&s.createElement("div",{className:Vt.doneButton},s.createElement(et.PlaceAndModifyButton,{model:n,reference:(0,d.isomorphicRef)(t),buttonModel:n.buttonModel})),s.createElement(bt.TradingPanelWarningInformersContainer,{warningInformersItems:x}))}));function Qt(){return s.createElement("div",{className:Vt.emptyStateBlockWrapper},s.createElement(h.EmptyStateBlock,{iconClass:Vt.screenWithKeyholeIcon,title:Kt,titleSize:"normal",text:qt,textSize:"normal",action:s.createElement(u.SquareButton,{onClick:()=>{(0,yt.showSignModal)({source:"Trading panel",sourceMeta:"Chart"})},size:"small"},Kt)}))}function Jt(e){const{model:t}=e;return s.createElement("div",{className:Vt.emptyStateBlockWrapper},s.createElement(h.EmptyStateBlock,{iconClass:Vt.screenWithKeyholeIcon,title:jt,titleSize:"normal",text:$t,textSize:"normal",action:s.createElement(u.SquareButton,{onClick:()=>{t.noBroker&&t.selectBroker()},size:"small"},Gt)}))}function er(e){const{model:t}=e,r=t.tradableSolution?s.createElement(u.SquareButton,{onClick:t.tradableSolution.apply,size:"small"
},t.tradableSolution.title):void 0;return s.createElement("div",{className:Vt.emptyStateBlockWrapper},s.createElement(h.EmptyStateBlock,{iconClass:Vt.sadScreenIcon,title:Ut,titleSize:"normal",text:(0,p.ensureDefined)(t.notTradableText),action:r}))}function tr(e){var t,r;const{model:n,settings:a,popupController:u}=e,[d,h]=(0,s.useState)(null),[g,C]=(0,s.useState)(),[S,w]=(0,s.useState)(),[k]=(0,v.useWatchedValue)(n.status),[N]=(0,v.useWatchedValue)(n.isNoQuotes),_=(0,m.useObservable)(null!==(r=null===(t=n.orderInfoModel)||void 0===t?void 0:t.infoTableData$)&&void 0!==r?r:(0,l.of)(null),null),x=(0,m.useObservable)(n.orderType$,n.getOrderType()),P=(0,s.useRef)(null),M=(0,s.useRef)(null),T=(0,s.useRef)(null),I=function(e){return e.status.value()===E.OrderPanelStatus.Preview&&null!==e.orderPreviewModel}(n),B=function(e){var t;const r=e.status.value(),s=(null===(t=e.orderInfoModel)||void 0===t?void 0:t.getOrderInfoTableRowsCount())||0;return!e.needSignIn&&!e.noBroker&&!e.notTradableText&&e.mode.value()===E.OrderEditorDisplayMode.Panel&&s>0&&r!==E.OrderPanelStatus.Preview&&b.enabled("order_info")}(n)&&null!==_;(0,s.useEffect)((()=>{const e=setTimeout((()=>{void 0!==g&&0!==g&&(0,gt.isInteger)(g)&&i.setValue(y.settingsKeys.PANEL_HEIGHT,g)}),100);return()=>clearTimeout(e)}),[g]),(0,s.useEffect)((()=>{var e;k===E.OrderPanelStatus.Wait&&(null===(e=P.current)||void 0===e?void 0:e.contains(document.activeElement))&&Yt()}),[k]),(0,s.useEffect)((()=>{var e;const t=null===(e=P.current)||void 0===e?void 0:e.clientHeight;I&&void 0!==t&&void 0!==g&&g!==t&&(w(t-g),C(t)),B&&void 0!==t&&g===t&&void 0!==S&&C(t-S);const r=parseInt(i.getValue(y.settingsKeys.PANEL_HEIGHT,""));return B&&void 0===g&&!isNaN(r)&&C(r),I&&n.mode.value()===E.OrderEditorDisplayMode.Popup&&(null==u||u.centerAndFit()),()=>{I&&void 0!==t&&void 0!==S&&i.setValue(y.settingsKeys.PANEL_HEIGHT,t-S)}}),[k,_]),(0,s.useEffect)((()=>{if(null!==d)return d.addEventListener("mousedown",R,{passive:!1}),d.addEventListener("touchstart",R,{passive:!1}),()=>{d.removeEventListener("mousedown",R),d.removeEventListener("touchstart",R)}}),[d]);const O=(0,s.useCallback)((e=>{null!==e&&h(e)}),[]),D={};function R(e){var t,r;if(e.defaultPrevented||!e.cancelable)return;e.preventDefault();const s=Math.max(null!==(r=null===(t=M.current)||void 0===t?void 0:t.clientHeight)&&void 0!==r?r:0,0);let n;n="touches"in e?e.touches[0].clientY:e.clientY;const o=e=>{let t;e.preventDefault(),t="touches"in e?e.touches[0].clientY:e.clientY;let r=s+(t-n);r<320&&(r=320),C(r)},a=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",o),document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("mouseup",a),document.addEventListener("touchend",a,{passive:!1})}return(n.needSignIn||n.noBroker||n.notTradableText)&&(D.flexGrow=1),B&&void 0!==g&&0!==g&&(D.height=g),s.createElement(ie.OrderTicketSettingsProvider,{settings:a
},s.createElement("div",{className:o(Vt.orderWidget),onKeyDown:function(e){const t=(0,f.hashFromEvent)(e);if(!(13!==t&&t!==f.hashShiftPlusEnter||n.disabled.value()||null===T.current)){if(c.CheckMobile.any())return Yt();T.current.focus(),e.defaultPrevented||T.current.click()}},tabIndex:-1,ref:P},s.createElement("div",{ref:M,className:Vt.orderTicket,style:D},n.mode.value()===E.OrderEditorDisplayMode.Popup&&s.createElement(At.HeaderContainer,{...e.model.headerStateValue}),n.needSignIn&&s.createElement(Qt,null),n.noBroker&&s.createElement(Jt,{model:n}),n.notTradableText&&s.createElement(er,{model:n}),!n.needSignIn&&!n.noBroker&&!n.notTradableText&&(I?s.createElement(A,{model:(0,p.ensureNotNull)(n.orderPreviewModel),side:n.side(),loading:n.loading}):s.createElement(Xt,{...e,ref:T,orderType:x,setOrderType:n.setOrderType,orderPanelStatus:k,isNoQuotes:N,orderWidgetRef:P}))),B&&s.createElement("div",{className:Vt.orderInfoAndSeparator},s.createElement("div",{className:Vt.separator}),s.createElement("div",{className:Vt.resizeHandler,ref:O}),s.createElement(ft,{"data-name":"order-info",model:(0,p.ensureNotNull)(n.orderInfoModel),infoTableData:_,orderPanelStatus:k}))))}var rr=r(601235);class sr extends s.PureComponent{constructor(e){super(e),this._onKeyDown=e=>{27===e.keyCode&&this.props.onCancel&&this.props.onCancel()}}render(){return s.createElement("div",{"data-name":"order-panel",className:rr.orderPanel,onKeyDown:this._onKeyDown},s.createElement(tr,{model:this.props.model,settings:this.props.settings,key:this.props.model.id,trackEvent:this.props.trackEvent,focus:this.props.focus}))}}var nr=r(826881),or=r(500745),ar=r(18182),ir=r(8629),lr=r(642709),cr=r(820663),ur=r(408178);const dr=s.memo((e=>{const{model:t,isOpened:r,settings:n,onClose:o,trackEvent:a,focus:i,onOpen:l}=e;return(0,cr.useCommonDialogHandlers)({isOpened:r,onOpen:l,onClose:o}),s.createElement(ar.MatchMedia,{rule:lr.DialogBreakpoints.TabletSmall},(e=>s.createElement(or.PopupDialog,{className:ur.dialog,isOpened:r,onKeyDown:u,fullscreen:e,rounded:!e,"data-name":"order-dialog-popup"},s.createElement(nr.Body,{className:ur.dialogBody},s.createElement(ir.PopupContext.Consumer,null,c)))));function c(e){return s.createElement(tr,{settings:n,model:t,key:t.id,trackEvent:a,focus:i,popupController:e})}function u(e){27===e.keyCode&&(null==t||t.onDoneButtonClicked.resolve(!1),null==o||o())}}));let pr=null;function hr(e){const{viewModel:t,settings:r,onClose:o,onOpen:a,focus:i,trackEvent:l}=e;mr(o);const c={model:t,settings:r,isOpened:!0,onOpen:a,onClose:()=>{mr(o),void 0!==c.onClose&&(t.headerModel.pinButtonClicked().unsubscribe(null,c.onClose),t.headerModel.closeButtonClicked().unsubscribe(null,c.onClose))},trackEvent:l,focus:i||gr(t.getOrderType())};!function(e){pr=document.createElement("div"),document.body.appendChild(pr),n.render(s.createElement(E.Context.Provider,{value:{mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop())}},s.createElement(dr,{...e})),pr)}(c),void 0!==c.onClose&&(t.headerModel.pinButtonClicked().subscribe(null,c.onClose),
t.headerModel.closeButtonClicked().subscribe(null,c.onClose))}function mr(e){pr&&(n.unmountComponentAtNode(pr),pr=null,null==e||e())}function vr(e,t,r,o,a,i){fr(r);const l={model:e,settings:t,onClose:()=>{fr(r),l.model.headerModel&&(l.model.headerModel.pinButtonClicked().unsubscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().unsubscribe(null,l.onClose))},onCancel:()=>{l.model.headerModel&&l.model.headerModel.cancel()},trackEvent:i,focus:a||gr(e.getOrderType())};l.model.headerModel&&(l.model.headerModel.pinButtonClicked().subscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().subscribe(null,l.onClose)),function(e,t,r){const o=s.createElement(E.Context.Provider,{value:{resizerWidth:r||null,mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop())}},s.createElement(sr,{...e}));n.render(o,t)}(l,r,o)}function fr(e){n.unmountComponentAtNode(e)}function gr(e){let t;switch(e){case 2:t=5;break;case 1:case 4:t=1;break;case 3:t=2;break;default:t=void 0}return t}},347531:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="m4.67 7.38.66-.76L9 9.84l3.67-3.22.66.76L9 11.16 4.67 7.38Z"/></svg>'},115589:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.36 5a4.44 4.44 0 0 0-4.39 4.5c0 2.49 1.97 4.5 4.39 4.5 1.62 0 3.04-.9 3.8-2.25l.84.5A5.33 5.33 0 0 1 9.36 15 5.43 5.43 0 0 1 4 9.5C4 6.46 6.4 4 9.36 4c1.98 0 3.71 1.1 4.64 2.75l-.84.5A4.36 4.36 0 0 0 9.36 5Z"/></svg>'},96634:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M5 9h9v1H5V9Z"/></svg>'},218666:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.5 4.5h-1v4h-4v1h4v4h1v-4h4v-1h-4v-4Z"/></svg>'},610600:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M13.5 7l1.65-1.65a.5.5 0 0 0 0-.7l-1.8-1.8a.5.5 0 0 0-.7 0L11 4.5M13.5 7L11 4.5M13.5 7l-8.35 8.35a.5.5 0 0 1-.36.15H2.5v-2.3a.5.5 0 0 1 .15-.35L11 4.5"/></svg>'},672197:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10 6.13V8L6 5.5 10 3v2.1A5 5 0 1 1 4 10a.5.5 0 0 1 1 0 4 4 0 1 0 5-3.87Z"/></svg>'},863509:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M3.57 7.85 9 12.62l5.43-4.77-1.32-1.5L9 9.95l-4.11-3.6-1.32 1.5Z"/></svg>'},482353:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16Zm0-3a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM6 7.5a3 3 0 1 1 6 0c0 .96-.6 1.48-1.17 1.98-.55.48-1.08.95-1.08 1.77h-1.5c0-1.37.7-1.9 1.33-2.38.49-.38.92-.71.92-1.37C10.5 6.67 9.82 6 9 6s-1.5.67-1.5 1.5H6Z"/></svg>'},168874:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M7.3 10.3a1 1 0 0 1 1.4 0l5.3 5.29 5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6a1 1 0 0 1-1.4 0l-6-6a1 1 0 0 1 0-1.42Z"/></svg>'},914987:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><mask width="17" height="20" fill="#000" x="6" y="4" maskUnits="userSpaceOnUse" id="aayofezey"><path fill="#fff" d="M6 4h17v20H6z"/><path fill-rule="evenodd" d="M9 5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H9Zm1 2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1h-9Zm2 8.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm2.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM10.5 21a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm2.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></mask><path fill="currentcolor" d="M8 7a1 1 0 0 1 1-1V4a3 3 0 0 0-3 3h2Zm0 14V7H6v14h2Zm1 1a1 1 0 0 1-1-1H6a3 3 0 0 0 3 3v-2Zm11 0H9v2h11v-2Zm1-1a1 1 0 0 1-1 1v2a3 3 0 0 0 3-3h-2Zm0-14v14h2V7h-2Zm-1-1a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3v2ZM9 6h11V4H9v2Zm1 2V6a2 2 0 0 0-2 2h2Zm0 2V8H8v2h2Zm0 0H8c0 1.1.9 2 2 2v-2Zm9 0h-9v2h9v-2Zm0 0v2a2 2 0 0 0 2-2h-2Zm0-2v2h2V8h-2Zm0 0h2a2 2 0 0 0-2-2v2Zm-9 0h9V6h-9v2Zm.5 10a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM8 15.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5H8Zm2.5-2.5A2.5 2.5 0 0 0 8 15.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm2 0a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2a2.5 2.5 0 0 0-2.5 2.5h2Zm.5.5a.5.5 0 0 1-.5-.5h-2a2.5 2.5 0 0 0 2.5 2.5v-2Zm4 2a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM16 15.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm-10 4a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2A2.5 2.5 0 0 0 8 19.5h2Zm.5.5a.5.5 0 0 1-.5-.5H8a2.5 2.5 0 0 0 2.5 2.5v-2Zm4 2a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM12 19.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm2 0a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2a2.5 2.5 0 0 0-2.5 2.5h2Zm.5.5a.5.5 0 0 1-.5-.5h-2a2.5 2.5 0 0 0 2.5 2.5v-2Z" mask="url(#aayofezey)"/></svg>'},608636:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'},616658:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14Zm0 1A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM8 5a1 1 0 0 1 2 0v4a1 1 0 1 1-2 0V5Zm1 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>'},364366:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="#FB8C00" d="M0 9a9 9 0 1 1 18 0A9 9 0 0 1 0 9z"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>'}}]);